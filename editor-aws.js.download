/*! For license information please see editor-aws.js.LICENSE.txt */
var mmStart;(()=>{var t={52092:(t,e,n)=>{const r=n(8442),o=n(91624),i=n(94181);t.exports=Object.assign({},r,i,o,{microsoftAppId:"c12a3d54-d294-4a51-8cd3-4a48b6c7e6f2",CDNDistributionId:"E2DSN2TFNHAYVD",legacyFreeUrl:"https://mindmup-anon-prd.s3.amazonaws.com/map/",cognito:{cognitoIdentityPoolId:"us-east-1:dfb3e6f5-dbc3-4110-94d0-68dcfee6c710",UserPoolId:"us-east-1_2jtO6FSEB",ClientId:"2s28hgso1b2ra4qdkm7jebde02"}})},94181:t=>{"use strict";t.exports={delayWarning:4e4,allowedAccountTypes:["personal","team","domain"]}},8442:t=>{t.exports={contactLink:"https://www.mindmup.com/contact.html",amazonPayLoginRedirectUrl:"amazon-pay-authenticated.html",S3MaxUploadSizeKb:100,GoldMaxUploadSizeMb:100,defaultFileTitle:"An untitled mindmap",driveScope:{startup:"https://www.googleapis.com/auth/drive.install https://www.googleapis.com/auth/drive.file email profile",basic:"email profile",imageSelector:"https://www.googleapis.com/auth/drive.install https://www.googleapis.com/auth/drive.readonly email profile",attachmentEditor:"https://www.googleapis.com/auth/drive.install https://www.googleapis.com/auth/drive.file email profile"},scriptLoadingTimeout:15e3,editorUrl:"/map",freeMapTitle:"Free mind map",thumbnail:{timeout:500,scale:1,width:500,height:500},metaDataSyncPeriod:3e4,colors:["000000","993300","333300","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","999999","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFFF","FFFFFF"],maxFreeSize:1e5}},91624:t=>{"use strict";t.exports={amazonPayClientId:"amzn1.application-oa2-client.b5e61810118645af9925e8f76b800071",amazonPayMerchantId:"A29SKUHC053RQF",amazonPayScriptURL:"https://static-eu.payments-amazon.com/OffAmazonPayments/gbp/lpa/js/Widgets.js",atlasUrl:"https://atlas.mindmup.com/",googleAppId:"758379822725",googleOauthClientId:"758379822725-0sotg8mn5n8bu3pbb4vbd43o3rnjqolj.apps.googleusercontent.com",goldAWSApiUrl:"https://gold-api.mindmup.com/v4",imageApiUrl:"https://image-api.mindmup.com",goldBucketName:"mindmup-gold-prd",websocketUrl:"wss://v2d3nlpuhc.execute-api.us-east-1.amazonaws.com/api",ciscoWebexScriptURL:"https://binaries.webex.com/static-content-pipeline/webex-embedded-app/v1/webex-embedded-app-sdk.js",appName:{common:"MindMup 2.0",drive:"MindMup 2.0 For Google Drive",aws:"MindMup 2.0"}}},2043:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AuthenticationDetails:()=>o,AuthenticationHelper:()=>M,CognitoAccessToken:()=>L,CognitoIdToken:()=>_,CognitoRefreshToken:()=>R,CognitoUser:()=>H,CognitoUserAttribute:()=>q,CognitoUserPool:()=>rt,CognitoUserSession:()=>N,CookieStorage:()=>it,DateHelper:()=>W,WordArray:()=>f,appendToCognitoUserAgent:()=>Y});var r,o=function(){function t(t){var e=t||{},n=e.ValidationData,r=e.Username,o=e.Password,i=e.AuthParameters,s=e.ClientMetadata;this.validationData=n||{},this.authParameters=i||{},this.clientMetadata=s||{},this.username=r,this.password=o}var e=t.prototype;return e.getUsername=function(){return this.username},e.getPassword=function(){return this.password},e.getValidationData=function(){return this.validationData},e.getAuthParameters=function(){return this.authParameters},e.getClientMetadata=function(){return this.clientMetadata},t}(),i=n(48764),s=n(78249),a=n.n(s),c=(n(4433),n(52153)),l=n.n(c),d=n(88010),u=n.n(d);if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(56249)}catch(t){}function h(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")}var f=function(){function t(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length}var e=t.prototype;return e.random=function(e){for(var n=[],r=0;r<e;r+=4)n.push(h());return new t(n,e)},e.toString=function(){return function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")}(this)},t}();const p=g;function g(t,e){null!=t&&this.fromString(t,e)}function m(){return new g(null)}var v,y="undefined"!=typeof navigator;y&&"Microsoft Internet Explorer"==navigator.appName?(g.prototype.am=function(t,e,n,r,o,i){for(var s=32767&e,a=e>>15;--i>=0;){var c=32767&this[t],l=this[t++]>>15,d=a*c+l*s;o=((c=s*c+((32767&d)<<15)+n[r]+(1073741823&o))>>>30)+(d>>>15)+a*l+(o>>>30),n[r++]=1073741823&c}return o},v=30):y&&"Netscape"!=navigator.appName?(g.prototype.am=function(t,e,n,r,o,i){for(;--i>=0;){var s=e*this[t++]+n[r]+o;o=Math.floor(s/67108864),n[r++]=67108863&s}return o},v=26):(g.prototype.am=function(t,e,n,r,o,i){for(var s=16383&e,a=e>>14;--i>=0;){var c=16383&this[t],l=this[t++]>>14,d=a*c+l*s;o=((c=s*c+((16383&d)<<14)+n[r]+o)>>28)+(d>>14)+a*l,n[r++]=268435455&c}return o},v=28),g.prototype.DB=v,g.prototype.DM=(1<<v)-1,g.prototype.DV=1<<v,g.prototype.FV=Math.pow(2,52),g.prototype.F1=52-v,g.prototype.F2=2*v-52;var w,b,E=new Array;for(w="0".charCodeAt(0),b=0;b<=9;++b)E[w++]=b;for(w="a".charCodeAt(0),b=10;b<36;++b)E[w++]=b;for(w="A".charCodeAt(0),b=10;b<36;++b)E[w++]=b;function x(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function S(t,e){var n=E[t.charCodeAt(e)];return null==n?-1:n}function A(t){var e=m();return e.fromInt(t),e}function C(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function I(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function k(t){return i.lW.from((new f).random(t).toString(),"hex")}I.prototype.convert=function(t){var e=m();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(g.ZERO)>0&&this.m.subTo(e,e),e},I.prototype.revert=function(t){var e=m();return t.copyTo(e),this.reduce(e),e},I.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},I.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},I.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},g.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},g.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},g.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=t.length,o=!1,i=0;--r>=0;){var s=S(t,r);s<0?"-"==t.charAt(r)&&(o=!0):(o=!1,0==i?this[this.t++]=s:i+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=n)>=this.DB&&(i-=this.DB))}this.clamp(),o&&g.ZERO.subTo(this,this)},g.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},g.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},g.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},g.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,o=this.DB-r,i=(1<<o)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>o|a,a=(this[n]&i)<<r;for(n=s-1;n>=0;--n)e[n]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},g.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,o=this.DB-r,i=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&i)<<o,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&i)<<o),e.t=this.t-n,e.clamp()}},g.prototype.subTo=function(t,e){for(var n=0,r=0,o=Math.min(t.t,this.t);n<o;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},g.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),o=n.t;for(e.t=o+r.t;--o>=0;)e[o]=0;for(o=0;o<r.t;++o)e[o+n.t]=n.am(0,r[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&g.ZERO.subTo(e,e)},g.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},g.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=m());var i=m(),s=this.s,a=t.s,c=this.DB-C(r[r.t-1]);c>0?(r.lShiftTo(c,i),o.lShiftTo(c,n)):(r.copyTo(i),o.copyTo(n));var l=i.t,d=i[l-1];if(0!=d){var u=d*(1<<this.F1)+(l>1?i[l-2]>>this.F2:0),h=this.FV/u,f=(1<<this.F1)/u,p=1<<this.F2,v=n.t,y=v-l,w=null==e?m():e;for(i.dlShiftTo(y,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),g.ONE.dlShiftTo(l,w),w.subTo(i,i);i.t<l;)i[i.t++]=0;for(;--y>=0;){var b=n[--v]==d?this.DM:Math.floor(n[v]*h+(n[v-1]+p)*f);if((n[v]+=i.am(0,b,n,y,0,l))<b)for(i.dlShiftTo(y,w),n.subTo(w,n);n[v]<--b;)n.subTo(w,n)}null!=e&&(n.drShiftTo(l,e),s!=a&&g.ZERO.subTo(e,e)),n.t=l,n.clamp(),c>0&&n.rShiftTo(c,n),s<0&&g.ZERO.subTo(n,n)}}},g.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},g.prototype.addTo=function(t,e){for(var n=0,r=0,o=Math.min(t.t,this.t);n<o;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},g.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");e=2}var n,r=(1<<e)-1,o=!1,i="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(o=!0,i=x(n));s>=0;)a<e?(n=(this[s]&(1<<a)-1)<<e-a,n|=this[--s]>>(a+=this.DB-e)):(n=this[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(o=!0),o&&(i+=x(n));return o?i:"0"},g.prototype.negate=function(){var t=m();return g.ZERO.subTo(this,t),t},g.prototype.abs=function(){return this.s<0?this.negate():this},g.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},g.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+C(this[this.t-1]^this.s&this.DM)},g.prototype.mod=function(t){var e=m();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(g.ZERO)>0&&t.subTo(e,e),e},g.prototype.equals=function(t){return 0==this.compareTo(t)},g.prototype.add=function(t){var e=m();return this.addTo(t,e),e},g.prototype.subtract=function(t){var e=m();return this.subTo(t,e),e},g.prototype.multiply=function(t){var e=m();return this.multiplyTo(t,e),e},g.prototype.divide=function(t){var e=m();return this.divRemTo(t,e,null),e},g.prototype.modPow=function(t,e,n){var r,o=t.bitLength(),i=A(1),s=new I(e);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6;var a=new Array,c=3,l=r-1,d=(1<<r)-1;if(a[1]=s.convert(this),r>1){var u=m();for(s.sqrTo(a[1],u);c<=d;)a[c]=m(),s.mulTo(u,a[c-2],a[c]),c+=2}var h,f,p=t.t-1,g=!0,v=m();for(o=C(t[p])-1;p>=0;){for(o>=l?h=t[p]>>o-l&d:(h=(t[p]&(1<<o+1)-1)<<l-o,p>0&&(h|=t[p-1]>>this.DB+o-l)),c=r;0==(1&h);)h>>=1,--c;if((o-=c)<0&&(o+=this.DB,--p),g)a[h].copyTo(i),g=!1;else{for(;c>1;)s.sqrTo(i,v),s.sqrTo(v,i),c-=2;c>0?s.sqrTo(i,v):(f=i,i=v,v=f),s.mulTo(v,a[h],i)}for(;p>=0&&0==(t[p]&1<<o);)s.sqrTo(i,v),f=i,i=v,v=f,--o<0&&(o=this.DB-1,--p)}var y=s.revert(i);return n(null,y),y},g.ZERO=A(0),g.ONE=A(1);var F=/^[89a-f]/i,M=function(){function t(t){this.N=new p("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new p("2",16),this.k=new p(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=i.lW.from("Caldera Derived Key","utf8"),this.poolName=t}var e=t.prototype;return e.getSmallAValue=function(){return this.smallAValue},e.getLargeAValue=function(t){var e=this;this.largeAValue?t(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,r){n&&t(n,null),e.largeAValue=r,t(null,e.largeAValue)}))},e.generateRandomSmallA=function(){var t=k(128).toString("hex");return new p(t,16)},e.generateRandomString=function(){return k(40).toString("base64")},e.getRandomPassword=function(){return this.randomPassword},e.getSaltDevices=function(){return this.SaltToHashDevices},e.getVerifierDevices=function(){return this.verifierDevices},e.generateHashDevice=function(t,e,n){var r=this;this.randomPassword=this.generateRandomString();var o=""+t+e+":"+this.randomPassword,i=this.hash(o),s=k(16).toString("hex");this.SaltToHashDevices=this.padHex(new p(s,16)),this.g.modPow(new p(this.hexHash(this.SaltToHashDevices+i),16),this.N,(function(t,e){t&&n(t,null),r.verifierDevices=r.padHex(e),n(null,null)}))},e.calculateA=function(t,e){var n=this;this.g.modPow(t,this.N,(function(t,r){t&&e(t,null),r.mod(n.N).equals(p.ZERO)&&e(new Error("Illegal paramater. A mod N cannot be 0."),null),e(null,r)}))},e.calculateU=function(t,e){return this.UHexHash=this.hexHash(this.padHex(t)+this.padHex(e)),new p(this.UHexHash,16)},e.hash=function(t){var e=t instanceof i.lW?a().lib.WordArray.create(t):t,n=l()(e).toString();return new Array(64-n.length).join("0")+n},e.hexHash=function(t){return this.hash(i.lW.from(t,"hex"))},e.computehkdf=function(t,e){var n=a().lib.WordArray.create(i.lW.concat([this.infoBits,i.lW.from(String.fromCharCode(1),"utf8")])),r=t instanceof i.lW?a().lib.WordArray.create(t):t,o=e instanceof i.lW?a().lib.WordArray.create(e):e,s=u()(r,o),c=u()(n,s);return i.lW.from(c.toString(),"hex").slice(0,16)},e.getPasswordAuthenticationKey=function(t,e,n,r,o){var s=this;if(n.mod(this.N).equals(p.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(p.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+t+":"+e,c=this.hash(a),l=new p(this.hexHash(this.padHex(r)+c),16);this.calculateS(l,n,(function(t,e){t&&o(t,null);var n=s.computehkdf(i.lW.from(s.padHex(e),"hex"),i.lW.from(s.padHex(s.UValue),"hex"));o(null,n)}))},e.calculateS=function(t,e,n){var r=this;this.g.modPow(t,this.N,(function(o,i){o&&n(o,null),e.subtract(r.k.multiply(i)).modPow(r.smallAValue.add(r.UValue.multiply(t)),r.N,(function(t,e){t&&n(t,null),n(null,e.mod(r.N))}))}))},e.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},e.padHex=function(t){if(!(t instanceof p))throw new Error("Not a BigInteger");var e=t.compareTo(p.ZERO)<0,n=t.abs().toString(16);if(n=n.length%2!=0?"0"+n:n,n=F.test(n)?"00"+n:n,e){var r=n.split("").map((function(t){var e=15&~parseInt(t,16);return"0123456789ABCDEF".charAt(e)})).join("");(n=new p(r,16).add(p.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},t}(),T=function(){function t(t){this.jwtToken=t||"",this.payload=this.decodePayload()}var e=t.prototype;return e.getJwtToken=function(){return this.jwtToken},e.getExpiration=function(){return this.payload.exp},e.getIssuedAt=function(){return this.payload.iat},e.decodePayload=function(){var t=this.jwtToken.split(".")[1];try{return JSON.parse(i.lW.from(t,"base64").toString("utf8"))}catch(t){return{}}},t}();function P(t,e){return P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},P(t,e)}var L=function(t){var e,n;function r(e){var n=(void 0===e?{}:e).AccessToken;return t.call(this,n||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,P(e,n),r}(T);function O(t,e){return O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},O(t,e)}var _=function(t){var e,n;function r(e){var n=(void 0===e?{}:e).IdToken;return t.call(this,n||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,O(e,n),r}(T),R=function(){function t(t){var e=(void 0===t?{}:t).RefreshToken;this.token=e||""}return t.prototype.getToken=function(){return this.token},t}(),U=n(98269),D=n.n(U),N=function(){function t(t){var e=void 0===t?{}:t,n=e.IdToken,r=e.RefreshToken,o=e.AccessToken,i=e.ClockDrift;if(null==o||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=o,this.clockDrift=void 0===i?this.calculateClockDrift():i}var e=t.prototype;return e.getIdToken=function(){return this.idToken},e.getRefreshToken=function(){return this.refreshToken},e.getAccessToken=function(){return this.accessToken},e.getClockDrift=function(){return this.clockDrift},e.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},e.isValid=function(){var t=Math.floor(new Date/1e3)-this.clockDrift;return t<this.accessToken.getExpiration()&&t<this.idToken.getExpiration()},t}(),j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],W=function(){function t(){}return t.prototype.getNowString=function(){var t=new Date,e=B[t.getUTCDay()],n=j[t.getUTCMonth()],r=t.getUTCDate(),o=t.getUTCHours();o<10&&(o="0"+o);var i=t.getUTCMinutes();i<10&&(i="0"+i);var s=t.getUTCSeconds();return s<10&&(s="0"+s),e+" "+n+" "+r+" "+o+":"+i+":"+s+" UTC "+t.getUTCFullYear()},t}(),q=function(){function t(t){var e=void 0===t?{}:t,n=e.Name,r=e.Value;this.Name=n||"",this.Value=r||""}var e=t.prototype;return e.getValue=function(){return this.Value},e.setValue=function(t){return this.Value=t,this},e.getName=function(){return this.Name},e.setName=function(t){return this.Name=t,this},e.toString=function(){return JSON.stringify(this)},e.toJSON=function(){return{Name:this.Name,Value:this.Value}},t}(),z={},V=function(){function t(){}return t.setItem=function(t,e){return z[t]=e,z[t]},t.getItem=function(t){return Object.prototype.hasOwnProperty.call(z,t)?z[t]:void 0},t.removeItem=function(t){return delete z[t]},t.clear=function(){return z={}},t}(),G=function(){function t(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(t){this.storageWindow=V}}return t.prototype.getStorage=function(){return this.storageWindow},t}(),K="undefined"!=typeof navigator?navigator.userAgent:"nodejs",H=function(){function t(t){if(null==t||null==t.Username||null==t.Pool)throw new Error("Username and Pool information are required.");this.username=t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=t.Storage||(new G).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var e=t.prototype;return e.setSignInUserSession=function(t){this.clearCachedUserData(),this.signInUserSession=t,this.cacheTokens()},e.getSignInUserSession=function(){return this.signInUserSession},e.getUsername=function(){return this.username},e.getAuthenticationFlowType=function(){return this.authenticationFlowType},e.setAuthenticationFlowType=function(t){this.authenticationFlowType=t},e.initiateAuth=function(t,e){var n=this,r=t.getAuthParameters();r.USERNAME=this.username;var o=0!==Object.keys(t.getValidationData()).length?t.getValidationData():t.getClientMetadata(),i={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",i,(function(t,r){if(t)return e.onFailure(t);var o=r.ChallengeName,i=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===o?(n.Session=r.Session,e.customChallenge(i)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))},e.authenticateUser=function(t,e){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(t,e):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(t,e):e.onFailure(new Error("Authentication flow type is invalid."))},e.authenticateUserDefaultAuth=function(t,e){var n,r,o=this,s=new M(this.pool.getUserPoolId().split("_")[1]),c=new W,l={};null!=this.deviceKey&&(l.DEVICE_KEY=this.deviceKey),l.USERNAME=this.username,s.getLargeAValue((function(d,h){d&&e.onFailure(d),l.SRP_A=h.toString(16),"CUSTOM_AUTH"===o.authenticationFlowType&&(l.CHALLENGE_NAME="SRP_A");var f=0!==Object.keys(t.getValidationData()).length?t.getValidationData():t.getClientMetadata(),g={AuthFlow:o.authenticationFlowType,ClientId:o.pool.getClientId(),AuthParameters:l,ClientMetadata:f};o.getUserContextData(o.username)&&(g.UserContextData=o.getUserContextData(o.username)),o.client.request("InitiateAuth",g,(function(l,d){if(l)return e.onFailure(l);var h=d.ChallengeParameters;o.username=h.USER_ID_FOR_SRP,o.userDataKey=o.keyPrefix+"."+o.username+".userData",n=new p(h.SRP_B,16),r=new p(h.SALT,16),o.getCachedDeviceKeyAndPassword(),s.getPasswordAuthenticationKey(o.username,t.getPassword(),n,r,(function(t,n){t&&e.onFailure(t);var r=c.getNowString(),l=a().lib.WordArray.create(i.lW.concat([i.lW.from(o.pool.getUserPoolId().split("_")[1],"utf8"),i.lW.from(o.username,"utf8"),i.lW.from(h.SECRET_BLOCK,"base64"),i.lW.from(r,"utf8")])),p=a().lib.WordArray.create(n),g=D().stringify(u()(l,p)),m={};m.USERNAME=o.username,m.PASSWORD_CLAIM_SECRET_BLOCK=h.SECRET_BLOCK,m.TIMESTAMP=r,m.PASSWORD_CLAIM_SIGNATURE=g,null!=o.deviceKey&&(m.DEVICE_KEY=o.deviceKey);var v={ChallengeName:"PASSWORD_VERIFIER",ClientId:o.pool.getClientId(),ChallengeResponses:m,Session:d.Session,ClientMetadata:f};o.getUserContextData()&&(v.UserContextData=o.getUserContextData()),function t(e,n){return o.client.request("RespondToAuthChallenge",e,(function(r,i){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(m.DEVICE_KEY=null,o.deviceKey=null,o.randomPassword=null,o.deviceGroupKey=null,o.clearCachedDeviceKeyAndPassword(),t(e,n)):n(r,i)}))}(v,(function(t,n){return t?e.onFailure(t):o.authenticateUserInternal(n,s,e)}))}))}))}))},e.authenticateUserPlainUsernamePassword=function(t,e){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=t.getPassword(),r.PASSWORD){var o=new M(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var i=0!==Object.keys(t.getValidationData()).length?t.getValidationData():t.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,(function(t,r){return t?e.onFailure(t):n.authenticateUserInternal(r,o,e)}))}else e.onFailure(new Error("PASSWORD parameter is required"))},e.authenticateUserInternal=function(t,e,n){var r=this,o=t.ChallengeName,s=t.ChallengeParameters;if("SMS_MFA"===o)return this.Session=t.Session,n.mfaRequired(o,s);if("SELECT_MFA_TYPE"===o)return this.Session=t.Session,n.selectMFAType(o,s);if("MFA_SETUP"===o)return this.Session=t.Session,n.mfaSetup(o,s);if("SOFTWARE_TOKEN_MFA"===o)return this.Session=t.Session,n.totpRequired(o,s);if("CUSTOM_CHALLENGE"===o)return this.Session=t.Session,n.customChallenge(s);if("NEW_PASSWORD_REQUIRED"===o){this.Session=t.Session;var a=null,c=null,l=[],d=e.getNewPasswordRequiredChallengeUserAttributePrefix();if(s&&(a=JSON.parse(t.ChallengeParameters.userAttributes),c=JSON.parse(t.ChallengeParameters.requiredAttributes)),c)for(var u=0;u<c.length;u++)l[u]=c[u].substr(d.length);return n.newPasswordRequired(a,l)}if("DEVICE_SRP_AUTH"!==o){this.signInUserSession=this.getCognitoUserSession(t.AuthenticationResult),this.challengeName=o,this.cacheTokens();var h=t.AuthenticationResult.NewDeviceMetadata;if(null==h)return n.onSuccess(this.signInUserSession);e.generateHashDevice(t.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,t.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(o){if(o)return n.onFailure(o);var s={Salt:i.lW.from(e.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:i.lW.from(e.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=s.PasswordVerifier,r.deviceGroupKey=h.DeviceGroupKey,r.randomPassword=e.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:h.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:s,DeviceName:K},(function(e,o){return e?n.onFailure(e):(r.deviceKey=t.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===o.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,o.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))}))}))}else this.getDeviceResponse(n)},e.completeNewPasswordChallenge=function(t,e,n,r){var o=this;if(!t)return n.onFailure(new Error("New password is required."));var i=new M(this.pool.getUserPoolId().split("_")[1]),s=i.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};e&&Object.keys(e).forEach((function(t){a[s+t]=e[t]})),a.NEW_PASSWORD=t,a.USERNAME=this.username;var c={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,(function(t,e){return t?n.onFailure(t):o.authenticateUserInternal(e,i,n)}))},e.getDeviceResponse=function(t,e){var n=this,r=new M(this.deviceGroupKey),o=new W,s={};s.USERNAME=this.username,s.DEVICE_KEY=this.deviceKey,r.getLargeAValue((function(c,l){c&&t.onFailure(c),s.SRP_A=l.toString(16);var d={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:s,ClientMetadata:e};n.getUserContextData()&&(d.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",d,(function(e,s){if(e)return t.onFailure(e);var c=s.ChallengeParameters,l=new p(c.SRP_B,16),d=new p(c.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,l,d,(function(e,r){if(e)return t.onFailure(e);var l=o.getNowString(),d=a().lib.WordArray.create(i.lW.concat([i.lW.from(n.deviceGroupKey,"utf8"),i.lW.from(n.deviceKey,"utf8"),i.lW.from(c.SECRET_BLOCK,"base64"),i.lW.from(l,"utf8")])),h=a().lib.WordArray.create(r),f=D().stringify(u()(d,h)),p={};p.USERNAME=n.username,p.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,p.TIMESTAMP=l,p.PASSWORD_CLAIM_SIGNATURE=f,p.DEVICE_KEY=n.deviceKey;var g={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:p,Session:s.Session};n.getUserContextData()&&(g.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",g,(function(e,r){return e?t.onFailure(e):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))}))}))}))},e.confirmRegistration=function(t,e,n,r){var o={ClientId:this.pool.getClientId(),ConfirmationCode:t,Username:this.username,ForceAliasCreation:e,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",o,(function(t){return t?n(t,null):n(null,"SUCCESS")}))},e.sendCustomChallengeAnswer=function(t,e,n){var r=this,o={};o.USERNAME=this.username,o.ANSWER=t;var i=new M(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,(function(t,n){return t?e.onFailure(t):r.authenticateUserInternal(n,i,e)}))},e.sendMFACode=function(t,e,n,r){var o=this,s={};s.USERNAME=this.username,s.SMS_MFA_CODE=t;var a=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===a&&(s.SOFTWARE_TOKEN_MFA_CODE=t),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey);var c={ChallengeName:a,ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,(function(t,n){if(t)return e.onFailure(t);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(o.signInUserSession=o.getCognitoUserSession(n.AuthenticationResult),o.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return e.onSuccess(o.signInUserSession);var r=new M(o.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(t){if(t)return e.onFailure(t);var s={Salt:i.lW.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:i.lW.from(r.getVerifierDevices(),"hex").toString("base64")};o.verifierDevices=s.PasswordVerifier,o.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,o.randomPassword=r.getRandomPassword(),o.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:o.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:s,DeviceName:K},(function(t,r){return t?e.onFailure(t):(o.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,o.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?e.onSuccess(o.signInUserSession,r.UserConfirmationNecessary):e.onSuccess(o.signInUserSession))}))}))}else o.getDeviceResponse(e)}))},e.changePassword=function(t,e,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:t,ProposedPassword:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},(function(t){return t?n(t,null):n(null,"SUCCESS")}))},e.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},e.setUserMfaPreference=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:t,SoftwareTokenMfaSettings:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?n(t,null):n(null,"SUCCESS")}))},e.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},e.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},(function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))}))},e.updateAttributes=function(t,e,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:t,ClientMetadata:n},(function(t){return t?e(t,null):r.getUserData((function(){return e(null,"SUCCESS")}),{bypassCache:!0})}))},e.getUserAttributes=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e,n){if(e)return t(e,null);for(var r=[],o=0;o<n.UserAttributes.length;o++){var i={Name:n.UserAttributes[o].Name,Value:n.UserAttributes[o].Value},s=new q(i);r.push(s)}return t(null,r)}))},e.getMFAOptions=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e,n){return e?t(e,null):t(null,n.MFAOptions)}))},e.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},e.refreshSessionIfPossible=function(t){var e=this;return void 0===t&&(t={}),new Promise((function(n){var r=e.signInUserSession.getRefreshToken();r&&r.getToken()?e.refreshSession(r,n,t.clientMetadata):n()}))},e.getUserData=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(e))this.fetchUserData().then((function(t){return n.refreshSessionIfPossible(e).then((function(){return t}))})).then((function(e){return t(null,e)})).catch(t);else try{return void t(null,JSON.parse(r))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then((function(e){t(null,e)})).catch(t)},e.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},e.isFetchUserDataAndTokenRequired=function(t){var e=(t||{}).bypassCache;return void 0!==e&&e},e.fetchUserData=function(){var t=this;return this.createGetUserRequest().then((function(e){return t.cacheUserData(e),e}))},e.deleteAttributes=function(t,e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},e.resendConfirmationCode=function(t,e){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",n,(function(e,n){return e?t(e,null):t(null,n)}))},e.getSession=function(t,e){if(void 0===e&&(e={}),null==this.username)return t(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return t(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken",o=n+".accessToken",i=n+".refreshToken",s=n+".clockDrift";if(this.storage.getItem(r)){var a=new _({IdToken:this.storage.getItem(r)}),c=new L({AccessToken:this.storage.getItem(o)}),l=new R({RefreshToken:this.storage.getItem(i)}),d=parseInt(this.storage.getItem(s),0)||0,u=new N({IdToken:a,AccessToken:c,RefreshToken:l,ClockDrift:d});if(u.isValid())return this.signInUserSession=u,t(null,this.signInUserSession);if(!l.getToken())return t(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(l,t,e.clientMetadata)}else t(new Error("Local storage is missing an ID Token, Please authenticate"),null)},e.refreshSession=function(t,e,n){var r=this,o=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(e):e,i={};i.REFRESH_TOKEN=t.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";if(this.storage.getItem(a)){this.username=this.storage.getItem(a);var c=s+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(c),i.DEVICE_KEY=this.deviceKey}var l={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:i,ClientMetadata:n};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",l,(function(e,n){if(e)return"NotAuthorizedException"===e.code&&r.clearCachedUser(),o(e,null);if(n){var i=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(i,"RefreshToken")||(i.RefreshToken=t.getToken()),r.signInUserSession=r.getCognitoUserSession(i),r.cacheTokens(),o(null,r.signInUserSession)}}))},e.cacheTokens=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=t+"."+this.username+".idToken",n=t+"."+this.username+".accessToken",r=t+"."+this.username+".refreshToken",o=t+"."+this.username+".clockDrift",i=t+".LastAuthUser";this.storage.setItem(e,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(o,""+this.signInUserSession.getClockDrift()),this.storage.setItem(i,this.username)},e.cacheUserData=function(t){this.storage.setItem(this.userDataKey,JSON.stringify(t))},e.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},e.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},e.cacheDeviceKeyAndPassword=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,e=t+".deviceKey",n=t+".randomPasswordKey",r=t+".deviceGroupKey";this.storage.setItem(e,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},e.getCachedDeviceKeyAndPassword=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,e=t+".deviceKey",n=t+".randomPasswordKey",r=t+".deviceGroupKey";this.storage.getItem(e)&&(this.deviceKey=this.storage.getItem(e),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},e.clearCachedDeviceKeyAndPassword=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,e=t+".deviceKey",n=t+".randomPasswordKey",r=t+".deviceGroupKey";this.storage.removeItem(e),this.storage.removeItem(n),this.storage.removeItem(r)},e.clearCachedTokens=function(){var t="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=t+"."+this.username+".idToken",n=t+"."+this.username+".accessToken",r=t+"."+this.username+".refreshToken",o=t+".LastAuthUser",i=t+"."+this.username+".clockDrift";this.storage.removeItem(e),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(o),this.storage.removeItem(i)},e.getCognitoUserSession=function(t){var e=new _(t),n=new L(t),r=new R(t);return new N({IdToken:e,AccessToken:n,RefreshToken:r})},e.forgotPassword=function(t,e){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess(n)}))},e.confirmPassword=function(t,e,n,r){var o={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:t,Password:e,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",o,(function(t){return t?n.onFailure(t):n.onSuccess()}))},e.getAttributeVerificationCode=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess()}))},e.verifyAttribute=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:t,Code:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?n.onFailure(t):n.onSuccess("SUCCESS")}))},e.getDevice=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(e,n){return e?t.onFailure(e):t.onSuccess(n)}))},e.forgetSpecificDevice=function(t,e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:t},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},e.forgetDevice=function(t){var e=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(n){return e.deviceKey=null,e.deviceGroupKey=null,e.randomPassword=null,e.clearCachedDeviceKeyAndPassword(),t.onSuccess(n)}})},e.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},e.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},e.listDevices=function(t,e,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:t};e&&(r.PaginationToken=e),this.client.request("ListDevices",r,(function(t,e){return t?n.onFailure(t):n.onSuccess(e)}))},e.globalSignOut=function(t){var e=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?t.onFailure(n):(e.clearCachedUser(),t.onSuccess("SUCCESS"))}))},e.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},e.sendMFASelectionAnswer=function(t,e){var n=this,r={};r.USERNAME=this.username,r.ANSWER=t;var o={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",o,(function(r,o){return r?e.onFailure(r):(n.Session=o.Session,"SMS_MFA"===t?e.mfaRequired(o.ChallengeName,o.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===t?e.totpRequired(o.ChallengeName,o.ChallengeParameters):void 0)}))},e.getUserContextData=function(){return this.pool.getUserContextData(this.username)},e.associateSoftwareToken=function(t){var e=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e,n){return e?t.onFailure(e):t.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,r){return n?t.onFailure(n):(e.Session=r.Session,t.associateSecretCode(r.SecretCode))}))},e.verifySoftwareToken=function(t,e,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:t,FriendlyDeviceName:e},(function(t,e){return t?n.onFailure(t):n.onSuccess(e)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:t,FriendlyDeviceName:e},(function(t,e){if(t)return n.onFailure(t);r.Session=e.Session;var o={};o.USERNAME=r.username;var i={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:o,Session:r.Session};r.getUserContextData()&&(i.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",i,(function(t,e){return t?n.onFailure(t):(r.signInUserSession=r.getCognitoUserSession(e.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))}))},t}();function $(){}n(80204),$.prototype.userAgent="aws-amplify/0.1.x js";var Y=function(t){t&&($.prototype.userAgent&&!$.prototype.userAgent.includes(t)&&($.prototype.userAgent=$.prototype.userAgent.concat(" ",t)),$.prototype.userAgent&&""!==$.prototype.userAgent||($.prototype.userAgent=t))};const J=$;function X(t){var e="function"==typeof Map?new Map:void 0;return X=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Q(t,arguments,tt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Z(r,t)},X(t)}function Q(t,e,n){return Q=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Z(o,n.prototype),o},Q.apply(null,arguments)}function Z(t,e){return Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Z(t,e)}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}var et=function(t){var e,n;function r(e,n,r,o){var i;return(i=t.call(this,e)||this).code=n,i.name=r,i.statusCode=o,i}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,Z(e,n),r}(X(Error)),nt=function(){function t(t,e,n){this.endpoint=e||"https://cognito-idp."+t+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var e=t.prototype;return e.promisifyRequest=function(t,e){var n=this;return new Promise((function(r,o){n.request(t,e,(function(t,e){t?o(new et(t.message,t.code,t.name,t.statusCode)):r(e)}))}))},e.request=function(t,e,n){var r,o={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+t,"X-Amz-User-Agent":J.prototype.userAgent},i=Object.assign({},this.fetchOptions,{headers:o,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(e)});fetch(this.endpoint,i).then((function(t){return r=t,t}),(function(t){if(t instanceof TypeError)throw new Error("Network error");throw t})).then((function(t){return t.json().catch((function(){return{}}))})).then((function(t){if(r.ok)return n(null,t);var e=(t.__type||t.code).split("#").pop(),o={code:e,name:e,message:t.message||t.Message||null};return n(o)})).catch((function(t){if(!(r&&r.headers&&r.headers.get("x-amzn-errortype"))){if(t instanceof Error&&"Network error"===t.message){var e={code:"NetworkError",name:t.name,message:t.message};return n(e)}return n(t)}try{var o=r.headers.get("x-amzn-errortype").split(":")[0],i={code:o,name:o,statusCode:r.status,message:r.status?r.status.toString():null};return n(i)}catch(e){return n(t)}}))},t}(),rt=function(){function t(t,e){var n=t||{},r=n.UserPoolId,o=n.ClientId,i=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!o)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");var c=r.split("_")[0];this.userPoolId=r,this.clientId=o,this.client=new nt(c,i,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=t.Storage||(new G).getStorage(),e&&(this.wrapRefreshSessionCallback=e)}var e=t.prototype;return e.getUserPoolId=function(){return this.userPoolId},e.getClientId=function(){return this.clientId},e.signUp=function(t,e,n,r,o,i){var s=this,a={ClientId:this.clientId,Username:t,Password:e,UserAttributes:n,ValidationData:r,ClientMetadata:i};this.getUserContextData(t)&&(a.UserContextData=this.getUserContextData(t)),this.client.request("SignUp",a,(function(e,n){if(e)return o(e,null);var r={Username:t,Pool:s,Storage:s.storage},i={user:new H(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return o(null,i)}))},e.getCurrentUser=function(){var t="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",e=this.storage.getItem(t);if(e){var n={Username:e,Pool:this,Storage:this.storage};return new H(n)}return null},e.getUserContextData=function(t){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var e=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=e.getData(t,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},t}(),ot=n(36808),it=function(){function t(t){if(!t.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=t.domain,t.path?this.path=t.path:this.path="/",Object.prototype.hasOwnProperty.call(t,"expires")?this.expires=t.expires:this.expires=365,Object.prototype.hasOwnProperty.call(t,"secure")?this.secure=t.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!["strict","lax","none"].includes(t.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===t.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=t.sameSite}else this.sameSite=null}var e=t.prototype;return e.setItem=function(t,e){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),ot.set(t,e,n),ot.get(t)},e.getItem=function(t){return ot.get(t)},e.removeItem=function(t){var e={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(e.sameSite=this.sameSite),ot.remove(t,e)},e.clear=function(){for(var t=ot.get(),e=Object.keys(t).length,n=0;n<e;++n)this.removeItem(Object.keys(t)[n]);return{}},t}()},60468:t=>{!function(){"use strict";var e=/\s/g,n=/>/g,r=/</g,o=document.createElement("div");o.style.cssText="box-sizing:content-box;display:inline-block;height:0;overflow:hidden;position:absolute;top:0;visibility:hidden;white-space:nowrap;",document.body.appendChild(o),t.exports=function(t,i){t.style.boxSizing="content-box";var s=window.getComputedStyle(t),a="font-family:"+s.fontFamily+";font-size:"+s.fontSize;function c(i){i=i||t.value||t.getAttribute("placeholder")||"",o.style.cssText+=a,o.innerHTML=function(t){return t.replace(e,"&nbsp;").replace(n,"&lt;").replace(r,"&gt;")}(i);var s=window.getComputedStyle(o).width;return t.style.width=s,s}t.addEventListener("input",(function(){c()}));var l=c();return i&&i.minWidth&&"0px"!==l&&(t.style.minWidth=l),c}}()},79742:(t,e)=>{"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,i=c(t),s=i[0],a=i[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),d=0,u=a>0?s-4:s;for(n=0;n<u;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[d++]=e>>16&255,l[d++]=e>>8&255,l[d++]=255&e;return 2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[d++]=255&e),1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[d++]=e>>8&255,l[d++]=255&e),l},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],s=16383,a=0,c=r-o;a<c;a+=s)i.push(l(t,a,a+s>c?c:a+s));return 1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=i.length;s<a;++s)n[s]=i[s],r[i.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,r){for(var o,i,s=[],a=e;a<r;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},48764:(t,e,n)=>{"use strict";var r=n(79742),o=n(80645),i=n(5826);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),o=(t=a(t,r)).write(e,n);return o!==r&&(t=t.slice(0,o)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|f(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function d(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(d(e),t=a(t,e<0?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|f(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return F(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,o);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,o){var i,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var d=-1;for(i=n;i<a;i++)if(l(t,i)===l(e,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===c)return d*s}else-1!==d&&(i-=i-d),d=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){for(var u=!0,h=0;h<c;h++)if(l(t,i+h)!==l(e,h)){u=!1;break}if(u)return i}return-1}function w(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,r){return q(B(e,t.length-n),t,n,r)}function E(t,e,n,r){return q(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return E(t,e,n,r)}function S(t,e,n,r){return q(W(e),t,n,r)}function A(t,e,n,r){return q(function(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,s,a,c,l=t[o],d=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u<=n)switch(u){case 1:l<128&&(d=l);break;case 2:128==(192&(i=t[o+1]))&&(c=(31&l)<<6|63&i)>127&&(d=c);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(c=(15&l)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(d=c)}null===d?(d=65533,u=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),o+=u}return function(t){var e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=k));return n}(r)}e.lW=c,e.h2=50,c.TYPED_ARRAY_SUPPORT=void 0!==n.g.TYPED_ARRAY_SUPPORT?n.g.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return d(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return u(null,t)},c.allocUnsafeSlow=function(t){return u(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):g.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.h2;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,o){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(i,s),l=this.slice(r,o),d=t.slice(e,n),u=0;u<a;++u)if(l[u]!==d[u]){i=l[u],s=d[u];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function F(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function T(t,e,n){var r,o=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>o)&&(n=o);for(var i="",s=e;s<n;++s)i+=(r=t[s])<16?"0"+r.toString(16):r.toString(16);return i}function P(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,r,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function _(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function U(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,i){return i||U(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,i){return i||U(t,0,n,8),o.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var o=e-t;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},c.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||O(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||O(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);O(this,t,e,n,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);O(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var s=c.isBuffer(t)?t:B(new c(t,r).toString()),a=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}},78249:function(t,e,n){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(42480)}catch(t){}var o=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var a=0;a<o;a+=4)e[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(o());return new l.init(e,t)}}),d=s.enc={},u=d.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new l.init(n,e/2)}},h=d.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new l.init(n,e)}},f=d.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,d=t.min(4*c,i);if(c){for(var u=0;u<c;u+=s)this._doProcessBlock(o,u);n=o.splice(0,c),r.sigBytes-=d}return new l.init(n,d)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),g=(a.Hasher=p.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new g.HMAC.init(t,n).finalize(e)}}}),s.algo={});return s}(Math),r)},98269:function(t,e,n){var r,o,i;t.exports=(r=n(78249),i=(o=r).lib.WordArray,o.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var s=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)o.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return function(t,e,n){for(var r=[],o=0,s=0;s<e;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return i.create(r,o)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},88010:function(t,e,n){var r;t.exports=(r=n(78249),n(52153),n(89824),r.HmacSHA256)},89824:function(t,e,n){var r,o,i;t.exports=(o=(r=n(78249)).lib.Base,i=r.enc.Utf8,void(r.algo.HMAC=o.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,c=s.words,l=0;l<n;l++)a[l]^=1549556828,c[l]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))},4433:function(t,e,n){var r;t.exports=(r=n(78249),function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,e=t.init,n=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=t[o]<<24-o%4*8;e.call(this,r,n)}else e.apply(this,arguments)};n.prototype=t}}(),r.lib.WordArray)},52153:function(t,e,n){var r;t.exports=(r=n(78249),function(t){var e=r,n=e.lib,o=n.WordArray,i=n.Hasher,s=e.algo,a=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(a[o]=n(t.pow(r,.5))),c[o]=n(t.pow(r,1/3)),o++),r++}();var l=[],d=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],d=n[5],u=n[6],h=n[7],f=0;f<64;f++){if(f<16)l[f]=0|t[e+f];else{var p=l[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=l[f-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[f]=g+l[f-7]+v+l[f-16]}var y=r&o^r&i^o&i,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&d^~a&u)+c[f]+l[f];h=u,u=d,d=a,a=s+b|0,s=i,i=o,o=r,r=b+(w+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+d|0,n[6]=n[6]+u|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(d),e.HmacSHA256=i._createHmacHelper(d)}(Math),r.SHA256)},80645:(t,e)=>{e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,l=c>>1,d=-7,u=n?o-1:0,h=n?-1:1,f=t[e+u];for(u+=h,i=f&(1<<-d)-1,f>>=-d,d+=a;d>0;i=256*i+t[e+u],u+=h,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=r;d>0;s=256*s+t[e+u],u+=h,d-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=l}return(f?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,c,l=8*i-o-1,d=(1<<l)-1,u=d>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+u>=1?h/c:h*Math.pow(2,1-u))*c>=2&&(s++,c/=2),s+u>=d?(a=0,s=d):s+u>=1?(a=(e*c-1)*Math.pow(2,o),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,o),s=0));o>=8;t[n+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+f]=255&s,f+=p,s/=256,l-=8);t[n+f-p]|=128*g}},5826:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},80204:(t,e,n)=>{t.exports=self.fetch||(self.fetch=n(25869).default||n(25869))},36808:(t,e,n)=>{var r,o,i;void 0===(o="function"==typeof(r=i=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=t({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=e+"="+n+a}}function s(t,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=e(a[0]);if(c=(r.read||r)(c,l)||e(c),n)try{c=JSON.parse(c)}catch(t){}if(o[l]=c,t===l)break}catch(t){}}return t?o[t]:o}}return o.set=i,o.get=function(t){return s(t,!1)},o.getJSON=function(t){return s(t,!0)},o.remove=function(e,n){i(e,"",t(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))})?r.call(e,n,e,t):r)||(t.exports=o),t.exports=i()},25869:(t,e,n)=>{"use strict";function r(t,e){return e=e||{},new Promise((function(n,r){var o=new XMLHttpRequest,i=[],s=[],a={},c=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return s},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var l in o.open(e.method||"get",t,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){i.push(e=e.toLowerCase()),s.push([e,n]),a[e]=a[e]?a[e]+","+n:n})),n(c())},o.onerror=r,o.withCredentials="include"==e.credentials,e.headers)o.setRequestHeader(l,e.headers[l]);o.send(e.body||null)}))}n.r(e),n.d(e,{default:()=>r})},39818:(t,e,n)=>{"use strict";t.exports={AffiliateTeamIdentityProvider:n(10713),AuthenticationModel:n(20057),OneTimePasswordAuthenticator:n(84230),OAuthApi:n(32778),MicrosoftAuthShim:n(6450),MicrosoftAuthenticator:n(20498),GoogleAuthenticator:n(28890),GoogleShim:n(60458),Poller:n(73334),TaskRetrier:n(78899),Reauthenticator:n(41089),SubscriptionModel:n(57932),MicrosoftTeamsIdentityProvider:n(16368)}},81659:(t,e,n)=>{"use strict";const r=n(78274);t.exports=function(t,e,n,o,i,s,a){if(!(t&&e&&e.googleOauthClientId&&n&&o&&i&&s))throw new Error("invalid-args");const c=new t.AuthenticationModel,l=!(!a||!a.allowUnlicensed),d=!(e&&e.cognito),u=new t.TaskRetrier(o),h=new t.SubscriptionModel(c,n,o.getHostName(),u,{getGoldAccountDetailsOnRegistration:d}),f=new t.GoogleShim({client_id:e.googleOauthClientId,scope:"email profile"},o,s),p=new t.MicrosoftAuthShim({client_id:e.microsoftAppId,scope:a&&a.microsoftAuthScopes||"User.Read openid profile"},o,s),g=a&&a.storageName||"gold",m=new t.OAuthApi(p),v=new r,y=new t.MicrosoftAuthenticator({microsoftOAuthApi:m,authenticationModel:c,goldApi:n,tokenParser:v}),w=new t.OAuthApi(f),b=new t.GoogleAuthenticator(w,n,g,{},{authenticationModel:c,requireConfirmation:!0,allowUnlicensed:l}),E=new t.GoogleAuthenticator(w,n,g,{},{authenticationModel:c,requireConfirmation:!1,allowUnlicensed:l}),x=a&&a.reauthenticatorStorage||o.getJsonStorage(),S=new t.Reauthenticator(c,[E,y],x),A=new t.OneTimePasswordAuthenticator(n,c),C=new t.MicrosoftTeamsIdentityProvider({microsoftOAuthApi:m}),I=[C];return{authenticationModel:c,reauthenticator:S,oneTimePasswordAuthenticator:A,googleAuthenticator:b,googleShim:f,microsoftOAuthApi:m,microsoftAuthenticator:y,subscriptionModel:h,microsoftTeamsIdentityProvider:C,affiliateTeamIdentityProvider:new t.AffiliateTeamIdentityProvider({affiliateProviders:I,subscriptionModel:h})}}},22281:(t,e,n)=>{"use strict";const r=n(81659),o=n(78675),i=n(39818);t.exports=function(t,e,n,s,a,c){const l=r(i,t,e,n,s,a,c);return o(l,c),l}},78675:(t,e,n)=>{"use strict";const r=n(83810);n(2645),n(53991),n(95974),n(68743),n(94284),t.exports=function(t,e){if(!(t&&t.oneTimePasswordAuthenticator&&t.googleAuthenticator&&t.microsoftAuthenticator&&t.authenticationModel))throw"invalid-args";r('[data-mm-role~="use-google-email-dialog"]').useGoogleEmailWidget(t.googleAuthenticator),r('[data-mm-role~="email-authentication-dialog"]').emailAuthenticationWidget(t.oneTimePasswordAuthenticator),r('[data-mm-role~="google-authentication-dialog"]').oauthAuthenticationWidget(t.googleAuthenticator),r('[data-mm-role~="microsoft-authentication-dialog"]').oauthAuthenticationWidget(t.microsoftAuthenticator),r('[data-mm-role~="suggested-email"]').suggestedEmailWidget(t.authenticationModel,e),r("[data-mm-user-profile]").userProfileWidget(t.authenticationModel)}},74230:(t,e,n)=>{"use strict";const r=n(79662),o=n(55407),i=n(49525),s=n(92702),a=n(83810);t.exports=function(t,e,c,l){if(!(t&&e&&l&&c))throw new Error("invalid-args");const d=new r(t,e,c),u=new o("application/vnd.mindmup",{"text/plain":i,"text/html":s});return{clipboardModel:d,clipboardConverter:u,initialiseWidgets:function(){n(451),a("[data-mm-clipboard-context]").contextDisablerWidget(d,"context","data-mm-clipboard-context"),l.isSafari()?a("[data-mm-clipboard-action]").remove():(n(75260),a("[data-mm-clipboard-action]").clipboardActionWidget()),n(44953),a(document).clipboardWidget(d,u)}}}},6672:(t,e,n)=>{"use strict";t.exports={CognitoApi:n(97499),CognitoIdentityShim:n(98580),CognitoAuthenticator:n(96340),CognitoModel:n(67443)}},14218:t=>{"use strict";t.exports=function(t,e,n,r,o,i,s){if(!(t&&e&&e.cognito&&n&&r&&i))throw new Error("invalid-args");const a=new t.CognitoIdentityShim(e.cognito),c=new t.CognitoApi(n,a),l=new t.CognitoAuthenticator(c,r,i,s),d=new t.CognitoModel(r,l,c);return o.addAuthenticator(l),o.setDefaultProviderName(l.providerName()),{cognitoIdentityShim:a,cognitoApi:c,cognitoAuthenticator:l,cognitoModel:d}}},53691:(t,e,n)=>{"use strict";const r=n(6672),o=n(14218),i=n(92386);t.exports=function(t,e,n,s,a,c){const l=o(r,t,e,s,a,c);return i(l,s,n),l}},92386:(t,e,n)=>{"use strict";const r=n(83810);n(72695),n(14513),n(60023),n(451),t.exports=function(t,e,n){if(!(t&&t.cognitoApi&&t.cognitoAuthenticator&&e&&n&&t.cognitoModel))throw"invalid-args";r('[data-mm-role~="cognitoSignin"]').cognitoSigninWidget(t.cognitoApi,t.cognitoAuthenticator),r('[data-mm-role~="cognitoSetPassword"]').cognitoSetPasswordWidget(t.cognitoApi,e,t.cognitoModel),r('[data-mm-role~="cognitoChangePassword"]').cognitoChangePasswordWidget(t.cognitoApi,t.cognitoAuthenticator,e),r("[data-mm-cognito-context]").contextDisablerWidget(t.cognitoModel,"context","data-mm-cognito-context")}},68052:(t,e,n)=>{"use strict";n(91140);const r=n(12377),o=n(94402),i=n(22172),s=n(36423),a=n(83810);t.exports=function(t,e,n,c,l,d,u,h){const f=new i(d,u,h),p=new r(t,e,n,c,l,new o(s),f);return{importModel:p,initialiseWidgets:()=>{a('[data-mm-role~="import-widget"]').goldDriveImportWidget(p)}}}},24492:(t,e,n)=>{"use strict";const r=n(12287),o=n(70098),i=n(65454),s=n(27023),a=n(36954),c=n(83810);n(36424),t.exports=function({navigatorShim:t,authenticationModel:e,config:n,goldApi:l,mapModel:d}){if(!(t&&e&&n&&l))throw new Error("invalid-args");let u=!0;const h=new r({navigatorShim:t}),f=new o({webSocketShim:h,navigatorShim:t}),p=(new a).webColorList(),g=new i({config:n,webSocketShim:f,authenticationModel:e,colors:p}),m=new s({goldSessionModel:g,mapModel:d,webSocketShim:f});return["error","protocolError"].forEach((t=>{f.addEventListener(t,(async(n,r)=>{if(!u)return;u=!1;const o=(t=>{if(t.stack)return t.stack;try{return JSON.stringify(t)}catch(e){return String(t)}})(n),i=await e.getUserId();try{await l.exec("/session/error",{reason:t,error:o,userId:i,context:r})}catch(t){u=!0,console.error(t)}}))})),{webSocketShim:f,webSocketShimUnbuffered:h,goldSessionModel:g,goldSessionNodeSelectionTracker:m,initialiseWidgets:()=>{c('[data-mm-role~="gold-sessions-list"]').goldSessionsSidebarWidget({goldSessionModel:g,navigatorShim:t})}}}},55194:(t,e,n)=>{"use strict";const r=n(63782),o=n(83810);n(33892),t.exports=function(t,e,n){const i=new r({collaborationModel:t,navigatorShim:e,maxInitialEvents:1e3});return{historyModel:i,initialiseWidgets:function(){o("[data-mm-sidebar-name=History]").historyEventsWidget({historyModel:i,pageController:n,isReadOnly:!0})}}}},89260:(t,e,n)=>{"use strict";const r=n(6642),o=n(98014),i=n(86825),s=n(77325),a=n(99441),c=n(25950),l=n(33792),d=n(81364),u=d({textFontOnly:!0}),h=n(42767),f=n(60474),p=n(98062),g=n(51135),m=n(83810);n(6049),n(42464),n(434),n(451),n(66842),n(24859),n(5643),n(88891),n(48055),n(53804),n(88229),n(97536),n(80142),n(33229),n(33325),n(35064),n(19305),n(20251),n(22220),n(30273),n(14487),t.exports=function({config:t,mapModel:e,mapThemeModel:n,collaborationModel:v,nodeViewModel:y,themeProvider:w,ajaxPromise:b,storage:E,version:x,imagePicker:S}={}){const A=new r({mapModel:e,nodeViewModel:y}),C=new l,I=new o(t.colors,A),k=new h(d),F=new s(e,n,v,A),M=new i(A,y,w),T=new c,P=new a({mapModel:e,mapEditorModel:A,ajaxPromise:b,storage:E,stickerList:T,version:x});if(!(t&&e&&n&&y&&w&&b&&E))throw"invalid-args";return{argumentMappingModel:F,mapEditorModel:A,colorPickerModel:I,fontPickerModel:k,nodeStyleEditorModel:M,stickersEditorModel:P,splittableModel:C,initialiseWidgets:function({stage:t,domMapController:r,navigatorShim:o,domImageDimensionCalculator:i,pageState:s,resourceManager:a,urlDownloader:c}){if(!(t&&r&&o&&i&&c))throw console.error({stage:t,domMapController:r,navigatorShim:o,domImageDimensionCalculator:i,pageState:s,resourceManager:a,urlDownloader:c}),new Error("invalid-args");t.nodeLineLabelEditorWidget(A,e).addLinkCrosshairsWidget(A),m("[data-mm-node-line-attr]").nodeLineAttrWidget(A,t),m("[data-mm-node-line-color]").nodeLineColorWidget(A,I),m('[data-mm-role~="colorPickerWidget"]').colorPickerWidget(I,{imagePicker:S}),m('[data-mm-role~="fontPickerWidget"]').fontPickerWidget(k),m("[data-mm-map-editor-context]").contextDisablerWidget(A,"context","data-mm-map-editor-context"),m("[data-mm-set-theme]").setThemeWidget(n),m('[data-mm-role~="node-type-theme-style-container"]').nodeThemeEditorWidget({mapThemeModel:n,colorPickerModel:I,fontPickerModel:k}),m('[data-mm-role~="node-style-editor-widget"]').nodeStyleEditorWidget(M,{updateNodeContent:f}),m('[data-mm-role~="theme-style-color-picker-widget"]').themeStyleColorPicker(n,I),m('[data-mm-role~="theme-style-font-picker-widget"]').themeStyleFontPicker(n,k),m('[data-mm-role="theme-style-font-size-widget"]').themeStyleFontSizeWidget(n),m('[data-mm-role="theme-style-border-size-widget"]').themeStyleBorderSizeWidget(n),m('[data-mm-role="theme-style-corner-radius-widget"]').themeStyleCornerRadiusWidget(n),m("[data-mm-node-style-color]").nodeStyleEditorColorPickerWidget(I,M),m('[data-mm-role~="node-style-editor-widget"] [data-mm-style-tool=text-font]').nodeStyleEditorFontSelectorWidget(M,u),m("[data-mm-role~=text-font-menu]").textFontMenuWidget(A,u),m("[data-mm-sidebar-name=Stickers]").stickersSidebarWidget({stickersEditorModel:P}),m("[data-mm-sidebar-name=Stickers]").focusTransferWidget(t),m("[data-mm-role=filter-sticker-metadata]").stickersFilterWidget({stickerList:T,stickersEditorModel:P,splittableModel:C}),e.addEventListener("decorationActionRequested",((t,n)=>{"stickers"===n&&(e.selectNode(t),C.showStickers())})),new p({domMapController:r,mapModel:e,navigatorShim:o,dimensionCalculator:i,pageState:s,resourceManager:a,allowedImageTypes:g,urlDownloader:c})}}}},24287:(t,e,n)=>{"use strict";const r=n(97002),o=n(35269),i=n(35589),s=n(81473),a=n(15473),c=n(24934),l=n(65201),d=n(61991),u=n(29103),h=n(82816),f=n(29762),p=n(45885),g=n(10081),m=n(83810);n(23446),n(14921),n(54909),n(65442),n(48577),n(451),t.exports=function(t,e,n,v,y,w,b,E,x,S,A,C,I,k,F,M,T,P,L){if(!(t&&e&&n&&v&&y&&w&&b&&E&&x&&S&&A&&C&&I&&k&&F&&M&&T&&P))throw"invalid-args";const O=h((t=>Promise.resolve(t)),o),_=new r(A,b,E,x,P),R={exporter:_.makeExportable,processor:O},U=(t,e)=>_.makeExportable(t,Object.assign({sendSignedGoldAsserUrls:!0},e)),D={exporter:U,processor:O},N=new i(S,C,I),j=()=>N.makeExportable({sendSignedGoldAsserUrls:!0}),B=new a(k),W=new f(F.authenticationModel,M),q=new g(T,w,{metadataSynchronizer:L}),z=new p(t,b,W,q),V=h(B.load,l(d,z)),G={"map.pdf":D,"map.svg":R,"map.png":D,"map.jpg":D,"presentation.pdf":{exporter:j,processor:O},"presentation.pptx":{exporter:N.makeExportable,processor:O},"storyboard.docx":{exporter:j,processor:O},"outline.docx":D,"outline.md":R,"outline.txt":D,"outline.html":R,"outline.org":R,"outline.opml":R,"notes.txt":D,"notes.docx":D,"notes.html":D,"atlas.json":{exporter:U,processor:V}},K=new s(G,e,n,y,w),H=new r(A,b,E,x,!1,{literalTheme:!0}),$=new u(w,H,c,q);return{initialiseWidgets:()=>{m('[data-mm-role~="localExportWidget"]').localExportWidget($),m('[data-mm-role~="layout-exporter"]').remoteExportWidget(K,F.subscriptionModel),m('[data-mm-role~="atlas-publisher"]').atlasPrepopulationWidget(z).atlasRepublishingWidget(z),m("[data-mm-atlas-status-context]").dispatchedEventValueWidget(z,["atlasStatusContext"],"mm-atlas-status-context","mm-atlas-status-context-attr").contextDisablerWidget(z,"atlasStatusContext","data-mm-atlas-status-context")},localMapContentExporter:H,layoutExportController:K,localExportController:$}}},53020:(t,e,n)=>{"use strict";const r=n(83810),o=n(90392),i=n(33535),s=n(65400),a=n(83918),c=n(85816),l=n(67687),d=n(7319),u=n(29622),h=n(93144),f=n(5631),p=n(86508),g=n(16952),m=n(31576),v=n(51586),y=n(99900),w=n(20324),b=n(49251),E=n(42560),x=n(19083),S=n(31008),A=n(85575);n(19034),n(13357),n(32021),n(451),t.exports=function(t,e,n,C,I,k){const F=k||{stageMargin:{top:50,left:50,bottom:50,right:50}},M=new a(C),T=new s(M,C,o,{resourceTranslator:I}),P=new i([p.ideas[1].title],T),L=new f(P),O=n.isMobile()&&n.isTouch(),_=new g(P,{SequenceByLevel:m,HierarchicalNumbers:y,Sequence:v});return t.mapModelAnalytics&&P.addEventListener("analytic",e.log),C.addEventListener("error",((t,n)=>{"unknown"===t&&e.error("Collaboration-Model:"+n)})),{collaborationModel:C,mapModel:P,mapThemeModel:L,initialiseWidgets:function(t,e,o){const i=w(t),s=new l(t,new d(n)),a=L.getTheme,f=new c(i,s,a,Object.assign({resourceTranslator:I},F)),p=new b(f),g=new u(f),m=new h({mapModel:P,stage:f,touchEnabled:O,themeSource:a,nodeViewModel:T,mapView:g,draggableNodeController:p},F),v={enter:"insertDown","shift+enter":"insertUp","shift+tab":"insertLeft","tab insert":"insertRight",left:"selectNodeLeft",up:"selectNodeUp","del backspace":"removeSubIdea",right:"selectNodeRight","shift+right":"activateNodeRight","shift+left":"activateNodeLeft","meta+right ctrl+right":"moveRight","meta+left ctrl+left":"moveLeft","meta+up ctrl+up":"moveUp","meta+down ctrl+down":"moveDown","shift+up":"activateNodeUp","shift+down":"activateNodeDown",down:"selectNodeDown"};return e&&A(Object.assign({mapView:g,splittableModel:o,navigatorShim:n},e)),E({viewPortDOM:t,mapModel:P,stage:f},{touchEnabled:O,centerSelectedNodeOnOrientationChange:!0}),r(t).textOnlyPasteWidget(),r("<style>").appendTo("body").themeCssWidget(L),r("[data-mm-labels-context]").contextDisablerWidget(_,"context","data-mm-labels-context"),r("[data-mm-role~=collapsible]").collapsibleWidget(),Object.keys(v).forEach((e=>{var n;x(t,e,(n=v[e],function(t){if(!P.getInputEnabled())return!1;t.stopImmediatePropagation(),t.preventDefault(),P[n]("keyboard")}))})),[0,1,2,3,4,5,6,7,8,9].forEach((e=>{x(t,String(e),(()=>{P.activateLevel("keyboard",e+1)}))})),L.start(),S(document),m},themeProvider:M,nodeViewModel:T,labelsModel:_}}},60868:(t,e,n)=>{"use strict";const r=n(83810),o=n(92050),i=n(67526),s=n(18029);n(85806),n(61665),n(54243),n(451),t.exports=function(t,e,n,a){const c=new o(e,"measurements-config","measurements"),l=new i(n),d=new s(c,n,l);return{measuresContent:c,measuresModel:d,initialiseWidgets:function(t){r("[data-mm-measures-context]").contextDisablerWidget(d,"measuresContext","data-mm-measures-context"),r("#measuresSheet").measuresSheetWidget(d,t),r('[data-mm-role~="measure-add"]').addMeasureWidget(d),r('[data-mm-role~="measures-exporter"]').measuresExportWidget(d,a)}}}},7e3:(t,e,n)=>{"use strict";n(26795),n(19446),n(50170),n(25467),n(69449),n(81876),n(14487),n(38450);const r=n(83810);t.exports=function(t,e){Object.keys(t).forEach((e=>{const n=t[e];r('[data-mm-model="'+e+'"][data-mm-model-action]').modelActionWidget(n),r('[data-mm-event-dispatcher~="'+e+'"]').eventVisibilityWidget(n)})),r("modalContainer").visibilityObserver().modalContainerWidget().focusTransferWidget(e),r("[data-mm-toggle-class]").toggleClassWidget(),r("[data-mm-input-focus]").inputFocusWidget(),r("[data-mm-validate-input]").inputValidationWidget()}},50268:(t,e,n)=>{"use strict";const r=n(18659),o=n(32999),i=n(72300),s=n(25509),a=n(83810);n(451),n(4104),n(3384),n(78115),n(13135),n(99646),n(59974),n(10562),t.exports=function(t,e,n,c,l,d){const u=new r,h=new o(t,u),f=new i,p=new s(f,e,n,l);return a("[data-mm-progress-context]").contextDisablerWidget(h,"progressContext","data-mm-progress-context"),a("#progressTools").progressToolsWidget(h),a('[data-mm-role~="progress-status-menu"]').progressStatusMenuWidget(h,d),a('[data-mm-role~="progress-config-selector"]').progressConfigSelectorWidget(h),a('[data-mm-role~="progress-projection-selector"]').progressProjectionsWidget(h),a('[data-mm-role~="progress-calc"]').progressCalcWidget(h),a('[data-mm-role~="progress-toggle-property"]').progressFilterPropertyToggleWidget(h),a("#progress-status-config").progressConfigEditorWidget(h,c,f,p,d),{progressModel:h,progressIconPersister:f,progressIconEditorController:p}}},52720:(t,e,n)=>{"use strict";const r=n(71498),o=n(83810);n(16454),n(69360),n(13806),n(16059),n(52319),n(21705),n(94937),n(61574),n(68743),n(32922),n(3668),t.exports=function(t,e,n,i,s,a,c,l){const d=new r(c,a,s,i.getLicense),u=l?`${l}-register`:"register";o('[data-mm-role~="subscriptionPurchase"]').subscriptionPurchaseWidget({subscriptionModel:e,subscriptionPlanModel:n,navigatorShim:s,taskBuilder:d}),o('[data-mm-role~="changeCard"]').changeCardWidget(e,s,d),o('[data-mm-role~="personalAccountSignup"]').registrationDetailsWidget(u,e,s).personalSignupWidget(i,e,n,l).termsAndConditionsWidget(e),o('[data-mm-role~="plan-selector"]').goldPlanSelectorWidget(n),o('[data-mm-role~="currency-selector"]').goldCurrencySelectorWidget(n),o("[data-mm-account-info-toggle]").accountInfoValueToggleWidget(e,i),o("[data-mm-subscription-value]").accountInfoValueWidget(e),o("[data-mm-user-profile]").userProfileWidget(i),o('[data-mm-role~="changeToYearlyPlan"]').planUpgradeWidget(n,e,d),o('[data-mm-role~="changeToTeamPlan"]').planUpgradeWidget(n,e,d)}},97945:(t,e,n)=>{"use strict";const r=n(13984),o=n(65209),i=n(15444);t.exports=function(t,e,n){const s=o(e),a=!!(s&&n&&n.purchaseComplete),c=Object.assign({},t,{subscription:e,active:s,purchaseComplete:a,description:r(e)}),l=e&&e.linkedEmails&&e.linkedEmails.length||0,d=e&&e.maxLinkedEmails||0,u=i(e);return c.linkedEmailsRemaining=d-l,u&&(c.renewalDate=u),c}},51197:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t){let e=1;const n=this,o=[],i=function(n){o.length===t&&o.shift(),o.push({id:e,ts:new Date,event:n}),e+=1};r(this),n.log=function(){i(Array.from(arguments).join(",")),n.dispatchEvent.apply(n,function(t){let e=["log"];return Array.prototype.slice.call(t).forEach((function(t){Array.isArray(t)?e=e.concat(t):e.push(t)})),e}(arguments))},n.error=function(t,e){i(JSON.stringify({context:e,error:t.stack||String(t)})),n.dispatchEvent("error",t,e)},n.getLog=o.slice.bind(o),n.timer=function(t,e){const r=Date.now();return{end:function(){n.dispatchEvent("timer",t,e,Date.now()-r)}}}}},10713:t=>{"use strict";t.exports=function(t){if(!t)throw new Error("invalid-args");const{affiliateProviders:e,subscriptionModel:n}=t,r=(t,n)=>!!(t&&t.provider&&t.providerProfile&&t.subscription&&t.subscription.actions&&t.subscription.actions.includes(n))&&e.find((e=>e.supports(t.provider)));if(!(n&&e&&Array.isArray(e)&&e.length))throw new Error("invalid-args");this.getAffiliateTeamIdentity=async()=>{const t=await n.getGoldAccountDetails(!1,!0),e=r(t,"UseAffiliateTeams");return!!e&&e.getTeamIdentity(t.providerProfile)},this.enableMicrosoftTeams=async t=>{const e=await n.getGoldAccountDetails(!1,!0),o=r(e,"EnableMicrosoftTeams");return!(!o||!await o.getTeamIdentity(e.providerProfile,Object.assign({popupAuthEvent:"popup-auth-required-pre",disableSkipping:!0},t)))&&n.enableMicrosoftTeams()}}},58463:t=>{"use strict";t.exports=function(t){if(!t||!t.fetch||!t.buildAbortController)throw new Error("invalid-args");const e=this,n={xml:e=>t.parseXML(e),json:t=>JSON.parse(t)};e.get=async(t,n)=>e.request(Object.assign({url:t},n)),e.request=async({url:e,timeout:r,headers:o,includeHeaders:i,type:s,dataType:a,data:c,cache:l})=>{if(!e)throw new Error("invalid-args");const d=r&&t.buildAbortController(),u=d&&d.signal,h=d&&t.setTimeout((()=>d.abort()),r),f={method:s||"GET"};u&&(f.signal=u),o&&(f.headers=o),c&&(f.body=c),l&&(f.cache=l);try{const r=await t.fetch(e,f),o=await r.text(),s=async()=>{const t=(t=>{const e={};for(const r of t.entries()){const t=(n=r[0])&&typeof("string"===n)&&n.trim().toLowerCase(),o=r[1]&&r[1].trim();t&&(e[t]=o)}var n;return e})(r.headers),e=a||(t=>{const e=t["content-type"],n=e&&e.split(";")[0];return n&&n.split("/")[1]})(t),s=n[e],c=s?s(o):o;return i?{data:c,headers:t}:c};if(!r.ok)throw{status:r.status,responseText:o,statusText:r.statusText};return t.clearTimeout(h),s()}catch(e){throw t.clearTimeout(h),e}},e.upload=async(e,n,r)=>{const o=function(t){r&&r(t)};return new Promise((function(r,i){const s=t.buildXMLHttpRequest(),a=function(){i({statusText:s.statusText,status:s.status,responseText:s.responseText})};s.addEventListener("load",(()=>{s.status>=200&&s.status<400?r(s.responseText):a()})),s.addEventListener("error",a),s.addEventListener("abort",a),s.upload.addEventListener("error",a),s.upload.addEventListener("timeout",(()=>{i({statusText:"upload timeout",status:408})})),s.upload.addEventListener("progress",(function(t){t.lengthComputable?o(Math.round(100*t.loaded/t.total,2)+"%"):o()})),s.open("POST",e),s.send(n)}))}}},77325:(t,e,n)=>{"use strict";const r=n(89080),o=n(31576);t.exports=function(t,e,n,i){if(!(t&&e&&n&&i))throw new Error("invalid-args");let s,a,c=!1;const l=r(this),d=t.addSubIdea,u=function(t){return t&&t.attr&&t.attr.group},h=t=>t&&t.attr&&t.attr.styleNames&&Array.isArray(t.attr.styleNames)&&t.attr.styleNames.includes("sticky_note"),f=function(t){const e=n.getActiveContent().findSubIdeaById(t);return e&&!u(e)&&!h(e)},p=(t,e,n)=>{d(t,e,n,{styleNames:["sticky_note"]})},g=function(e,r,o){const i=r||t.getSelectedNodeId(),s=n.getActiveContent().findSubIdeaById(i);h(s)?p(e,r,o):u(s)?d(e,r,o):t.addGroupSubidea(e,{group:"supporting",parentId:i,initialTitle:o})},m=t.dropNode,v=function(t,e,r){const o=n.getActiveContent(),i=o.findParent(t);if(e!==t&&e!==i.id&&f(e)&&f(t))return o.batch((function(){return o.changeParent(t,e)&&o.insertIntermediateMultiple([t],{title:"group",attr:{group:"supporting",contentLocked:!0}})}));m(t,e,r)},y=t.paste,w=function(e){const r=f(t.getSelectedNodeId()),o=y(e);return r&&o&&Array.isArray(o)&&n.getActiveContent().insertIntermediateMultiple(o.filter(f),{title:"group",attr:{group:"supporting",contentLocked:!0}}),o},b=function(t){return!!function(t){return t&&t.attr&&/^argMapping/.test(t.attr.theme)}(t)},E=function(){const e=function(e){const n=b(e),r=!!t.getIdea(),o=t.getCurrentLayout(),i=r&&n&&o&&o.nodes[t.getSelectedNodeId()],a={active:n};return n&&(s&&(a.labelsShown=!0),i&&(a.canAddParentReason=1!==i.level,a.nodeGroupType=i.attr&&i.attr.group)),a}(n.getActiveContent());e&&l.dispatchEvent("argumentMappingContext",e)},x="SequenceByLevel",S=function(e){e&&b(n.getActiveContent())?(s=!0,t.setLabelGenerator(o,x)):s&&(s&&t.setLabelGenerator(!1,x),s=!1),E()},A=(e,n)=>{const r=e&&e.nodes&&e.nodes[n||t.getSelectedNodeId()];return r&&r.attr&&r.attr.group?r:!(!r||!r.parentId)&&A(e,r.parentId)},C=e=>{const r=n.getActiveContent(),o=b(r)&&t.getCurrentLayout();return!!o&&A(o,e)},I=e=>{if(!e)return;const n=C(),r=n&&(parseInt(n&&n.attr&&n.attr.parentConnector&&n.attr.parentConnector.width)||3),o=r&&Math.max(r+e,1);return o&&o!==r?t.getIdea().mergeAttrProperty(n.id,"parentConnector","width",o):void 0};l.start=function(){const t=n.getActiveContent();a=t.attr&&t.attr.theme,e.setTheme("argMappingSimple")},l.stop=function(){e.setTheme(a||"default")},l.addOpposingGroup=function(){t.addGroupSubidea("menu",{group:"opposing"})},l.addSupportingGroup=function(){t.addGroupSubidea("menu",{group:"supporting"})},l.addStickyNote=()=>p("menu",!1,""),l.makeGroupStronger=()=>I(2),l.makeGroupWeaker=()=>I(-2),l.addParentGroup=function(){t.insertIntermediateGroup("menu",{group:"supporting"})},l.toggleNodeLabels=function(){S(!s)},l.toggleImplicitClaim=function(){f(t.getSelectedNodeId())&&i.toggleNodeStyleName("attr_implicit_claim")},l.editGroupLineLabel=()=>{const e=C(),n=e&&t.getCurrentLayout(),r=n&&n.connectors,o=r&&r[e.id];o&&i.editLineLabel(o)},l.toggleGroupType=function(){const e=n.getActiveContent(),r=b(e)&&t.getCurrentLayout().nodes[t.getSelectedNodeId()],o=r&&r.attr&&r.attr.group,i=o&&("opposing"===o?"supporting":"opposing");i&&e.updateAttr(t.getSelectedNodeId(),"group",i)},l.toggleStickyNote=()=>{const e=n.getActiveContent().findSubIdeaById(t.getSelectedNodeId());if(u(e))return!1;i.toggleNodeStyleName("sticky_note")},n.addListener((function(e){const r=b(e);r!==c&&(b(n.getActiveContent())?(t.addSubIdea=g,t.dropNode=v,t.paste=w):(t.addSubIdea=d,t.dropNode=m,t.paste=y),S(!0),c=r),E()})),t.addEventListener("nodeSelectionChanged",(function(){E()})),t.addEventListener("labelGeneratorChange",(function(t,e){t!==x?(s=!1,E()):e?s||(s=!0,E()):(s=!1,E())}))}},12274:(t,e,n)=>{"use strict";const r=n(20360);t.exports=function(t,e){if(!t||!t.length)throw"invalid-args";const n=e&&e.resourceManager,o=e&&e.flattenIdeas||r;Object.freeze(Object.assign(this,{localise:async function(r,i){return await Promise.resolve().then((()=>n&&n.resignUrls())),e?.localiseBackgroundImage&&await e.localiseBackgroundImage(r,i),await Promise.all(o(r).map((e=>Promise.all(t.map((t=>t(e,i))))))),r}}))}},51238:(t,e,n)=>{"use strict";const r=n(89080),o=n(20360),i=n(10781);t.exports=function(t,e){const n=r(this),s=function(r){const o=function(e,r,o){return n.dispatchEvent("uploadInProgress",o-r||1),t.uploadAsset(e)};return Promise.resolve().then((()=>{const s=r.filter(t.hasUploadableAsset);if(s&&s.length)return(a=s.length,e&&e.skipConfirmation?(n.dispatchEvent("uploadInProgress",a),Promise.resolve()):new Promise(((t,e)=>{n.cancelUpload=function(){n.dispatchEvent("uploadCancelled"),e()},n.confirmUpload=function(){n.dispatchEvent("uploadInProgress",a),t()},n.dispatchEvent("confirmationRequired")}))).then((()=>{return r=s,(e&&e.authenticator?e.authenticator.modalAuthenticate():Promise.resolve()).then((()=>i(r,o).then((e=>(t.cleanUp&&t.cleanUp(),n.dispatchEvent("uploadComplete"),e)))),(()=>{throw"accessDenied"}));var r}),(()=>!0));var a}))};Object.assign(this,{uploadImagesFromIdeaList:s,uploadImagesFromContent:function(t){return s(o(t)).then((()=>t))},unpack:s,addGoldAsset:async e=>{n.dispatchEvent("uploadInProgress",1);const r=await t.addGoldAsset(e);return n.dispatchEvent("uploadComplete"),r},optimiseAssets:async()=>{const e=t=>n.dispatchEvent("uploadInProgress",t);try{await t.uploadAssetsAsChanges(e,(()=>n.dispatchEvent("alreadyOptimised"))),n.dispatchEvent("uploadComplete")}catch(t){n.dispatchEvent("uploadCancelled")}}})}},10781:t=>{"use strict";t.exports=function(t,e){let n=t||[];const r=n.length,o=function(){let t;return n.length?(t=n[0],n=n.slice(1),function(t){return e(t,r-n.length,r).then(o)}(t)):Promise.resolve()};return o()}},45885:(t,e,n)=>{"use strict";const r=n(89080),o=n(7731),i=n(59050);t.exports=function(t,e,n,s,a){if(!(t&&e&&n&&s))throw"invalid-args";let c;const l=r(this),d=a&&a.trunc||o.truncate,u=a&&a.sanitize||o.sanitize,h=a&&a.titleLengthLimit||40,f=a&&a.descriptionLengthLimit||150;e.addEventListener("mm-active-content-changed",(function(e){const r=e.getAttr("previous-atlas-export");i.isEqual(c,r)||(c=r,(c&&c.slug?n.exists(c.slug).then((e=>e&&{atlasUrl:t.atlasUrl+e+"index.html"}||{})):Promise.resolve({})).then((t=>l.dispatchEvent("atlasStatusContext",t))))})),l.removePublishedMap=()=>{const t=e.getActiveContent(),r=t.getAttr("previous-atlas-export");return r&&r.slug?n.delete(r.slug).then((()=>t.updateAttr(t.id,"previous-atlas-export",!1))):(t.updateAttr(t.id,"previous-atlas-export",!1),Promise.resolve())},l.slugExists=n.exists,l.storePublishingResult=t=>{const n=e.getActiveContent();return n.updateAttr(n.id,"previous-atlas-export",i.extend({publishedTimestamp:Date.now()},t))},l.sanitize=u,l.getExportValues=()=>{const n=e.getActiveContent().getAttr("previous-atlas-export"),r=(()=>{const n=s.getCurrentName(),r=e.getActiveContent(),o=r.getAttr("previous-atlas-export");return o&&o.title?o.title:n&&n!==t.defaultFileTitle?n:r.findSubIdeaById(r.getDefaultRootId()).title||t.defaultFileTitle})(),o=d(r,h),i=n&&n.description||d("MindMup mind map: "+r,f),a=n&&n.slug||d(r,h);return{title:o,description:i,slug:u(a),gaClientCode:n&&n.gaClientCode}}}},65201:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t,e){return[function(t){return t.atlasUrl&&(e.storePublishingResult(t.export),t["index-html"]=t["index-html"]||t.atlasUrl+"/index.html",t["archive-zip"]=t["archive-zip"]||t.atlasUrl+"/archive.zip",t["thumb-png"]=t["thumb-png"]||t.atlasUrl+"/thumb.png"),t}].concat(r.values(t))}},7731:t=>{"use strict";t.exports={truncate:function(t,e){return t.substring(0,e)},sanitize:function(t){const e=t.substr(0,100).toLowerCase().replace(/[^a-z0-9]+/g,"_");return"_"===e?"map":e}}},16429:(t,e,n)=>{"use strict";const r=n(89080),o=n(59050);t.exports=function(t,e,n,i,s){let a,c;const l=r(this),d=s&&s.resourceManager,u=function(e){a&&(t.setAttachment("attachment-editor",a,e),l.dispatchEvent("complete"))},h=function(){l.dispatchEvent("picker"),e.pickAttachment({notify:()=>l.dispatchEvent("uploading")}).then(u,(function(t){"cancel"===t?l.dispatchEvent("cancel"):"not-subscribed"===t?(l.dispatchEvent("cancel"),l.dispatchEvent("not-subscribed")):l.dispatchEvent("error",t)}))};t.addEventListener("attachmentOpened",(function(t,e){const r=function(t){let e;return!!t&&(e="application/vnd.google.drive.attachment"===t.contentType?o.clone(t.content):o.clone(t),c=!1,e.dataUriEncoded&&e.content?c=n.toObjectUrl(n.dataURLToBlob(e.content)):!e.content||e.embedUrl&&e.url?d&&e.goldAssetId&&(c=d.getResource(e.goldAssetId)):c=n.toObjectUrl(e.content,e.contentType),c&&(e.downloadUrl=c,r=e.contentType,(/^image\//.test(r)||/^text\//.test(r)||"application/pdf"===r)&&(e.embedUrl=c)),e);var r}(e);var s;a=t,e?l.dispatchEvent("view",r,(s=r)?{open:!!s.url,"no-preview":!s.embedUrl,download:!!s.downloadUrl,convertToNotes:i&&i.canImportFromAttachment(a)}:{}):h()})),l.removeAttachment=function(){u()},l.changeAttachment=function(){h()},l.convertToNotes=function(){a&&(i.importFromAttachment(a)?(l.dispatchEvent("complete"),i.editNoteForNodeId(a)):l.dispatchEvent("error","attachment-conversion"))},l.cleanup=function(){c&&(n.revokeObjectUrl(c),c=!1)}}},20057:(t,e,n)=>{"use strict";const r=n(37892),o=n(83530),i=n(89080),s="unknown-provider";t.exports=function(){let t=!1,e=!1;const n=i(this),a=function(){return t?Promise.resolve().then((()=>t())).then((t=>(t&&(e=t),e))).catch((t=>{if(e)return e;throw t})):Promise.resolve()},c=function(r){if(!r||"function"!=typeof r)throw t=!1,e=!1,"invalid-args";t=r,a().then((t=>t&&n.dispatchEvent("authenticatedProfile",t)))};n.signOut=function(){t=!1,e=!1,n.dispatchEvent("not-authenticated","signed-out")},n.signoutOthersRequired=()=>a().then((t=>t&&n.dispatchEvent("signoutOthersRequired",t))),n.getProfile=function(){return a()},n.getLicense=function(){return a().then((function(t){if(t&&t.license)return t.license}))},n.getUserId=async()=>{const t=await n.getLicense();if(t)return t.subAccount?`${t.account}/${t.subAccount}`:t.account},n.setSuggestedEmail=function(t){n.dispatchEvent("suggestedEmail",t)},n.authenticationStarted=function(){t=!1,e=!1,n.dispatchEvent("authenticating")},n.authenticatedProfile=c,n.authenticationFailed=function(r){t=!1,e=!1,n.dispatchEvent("not-authenticated",r),r&&n.dispatchEvent(r)},n.updatedLicense=t=>a().then((e=>{if(e)e.license=t;else{const n=o(t);e=r(s,n,t)}c((()=>e))})),n.fallBackProviderName=()=>s}},79118:t=>{"use strict";t.exports=function(t){return t.replace(/\\/g,"/").replace(/.*\//,"").replace(/\.[^.]*$/,"")}},82816:t=>{"use strict";t.exports=function(t,e){return function(n){return t(n).then((function(t){return e.forEach((function(e){e(t)})),t}))}}},38847:t=>{"use strict";t.exports=function(t,e){const n=t.getActiveContent(),r=n&&n.getDefaultRootId(),o=n&&n.findSubIdeaById(r),i=o&&o.title;return e&&!e.free&&!e.new&&!e.legacy&&e.fileId||i}},78502:t=>{"use strict";const e=["previous-atlas-export","watermark-bytes"];t.exports=function(t){if(!function(t){return t?.attr&&e.find((e=>t.attr[e]))}(t))return t;const n=JSON.parse(JSON.stringify(t));for(const t of e)delete n.attr[t];return n}},79662:(t,e,n)=>{"use strict";const r=n(20360),o=n(78106),i=n(10781),s=n(89080),a="paste-too-large";t.exports=function(t,e,c){let l=!1;const d=s(this),u=c&&c.packers||[],h=c&&c.unpackers||[],f=c&&c.autoThemedIdeaUtils||n(15198),p=function(){const e=t.getIdea(),n=(()=>{const n=e.cloneMultiple(t.getActivatedNodeIds()),r=[],i=(t,e)=>{e>1&&r.push(t.id)};return n.forEach((t=>{o(t,i,!1,1)})),n.filter((t=>!r.includes(t.id)))})(),i=r(n);return u.forEach((t=>t.pack(i))),n},g=t=>{l=t,d.dispatchEvent("context",{pasteAsRoot:l})},m=function(){return t.getInputEnabled()};Object.assign(this,{isEnabled:m,cut:function(){if(!m())return!1;const e=p();return t.getIdea().removeMultiple(t.getActivatedNodeIds()),e},pasteAsRoot:()=>g(!0),pasteAsChild:()=>g(!1),copy:()=>!!m()&&p(),paste:async n=>{if(!t.isEditingEnabled())throw"map model is not editable";if(!m())throw"map model input is disabled";d.dispatchEvent("paste-started");const o=t.getIdea(),s=l&&o.id||t.getSelectedNodeId();try{if(await function(t){const e=r(t);return i(h,(t=>t.unpack(e)))}(n),c&&c.goldFileChangesModel){const t=await c.goldFileChangesModel.getMaxChangeSize(),e=Number.isFinite(t)&&t-1024,r=e&&(t=>(new TextEncoder).encode(JSON.stringify(t)).length)(n);if(r&&e&&r>e)throw a}const l=f.pasteMultiple(o,e.getTheme(),s,n);l&&l[0]&&t.selectNode(l[0]),d.dispatchEvent("paste-complete")}catch(t){t===a?d.dispatchEvent(t):(console.log("paste-failed",t),d.dispatchEvent("paste-failed"))}}})}},97499:(t,e,n)=>{"use strict";const r=n(85752);t.exports=function(t,e){let n;const o=this;o.getUserActions=function(){return"cognito/allowed_actions",e.cognitoUserAndSession().then((function(n){const r=e.getIdentityToken(n.session);return t.exec("cognito/allowed_actions",{},{Authorization:r})}))},o.globalSignOut=()=>e.cognitoUserAndSession().then((t=>new Promise(((e,n)=>{t.cognitoUser.globalSignOut({onSuccess:e,onFailure:n})})))).then((()=>!1)),o.signInWithLicense=function(n){if(!n)return Promise.reject("invalid-args");const o=r(n);return e.authenticateUsingCustomFlow(o).catch((r=>{if("no-user"===r)return t.exec("incognito/create_cognito-user",{license:n}).then((()=>e.authenticateUsingCustomFlow(n.account)));throw r})).then((t=>{if(!t||!t.action)throw"network-error";if("customChallengeResponseRequired"===t.action)return e.respondToCustomChallenge(t,JSON.stringify(n));throw t.action}))},o.userProfile=function(){const t={};return e.cognitoUserAndSession().then((n=>(t.identityToken=e.getIdentityToken(n.session),t.credentials=e.createIdentityCredentials(n.session),e.getUserAttributes(n.cognitoUser)))).then((e=>{if(!e["custom:mm-license"])throw"no-license";return t.userAttributes=e,t}))},o.signIn=function(t,r){return n=!1,e.authenticate(t,r).then((t=>{if(t&&t.action)throw n=t,"new-password-required";return t}))},o.signOut=function(){return e.cognitoUserAndSession().then((t=>{t.cognitoUser.signOut()})).catch((t=>{if(!["not-authenticated","no-user"].includes(t))throw t;return!1}))},o.changePassword=function(t,n){return e.changePassword(t,n)},o.requestPasswordReset=function(r){return e.requestPasswordReset(r).then((function(t){n={action:"completePasswordReset",user:t.cognitoUser};const e=t&&t.result;return{maskedEmail:e&&e.CodeDeliveryDetails&&e.CodeDeliveryDetails.Destination}})).catch((function(e){if("no-password"===e)return t.exec("incognito/send_temporary_password",{username:r}).then((t=>(n={action:"setInitialPassword",user:r},{maskedEmail:t&&t.maskedEmail})));throw e}))},o.completePendingUserAction=function(t,r){return n&&n.action&&n.user?e[n.action](n.user,t,r).then((t=>(n=!1,t))):Promise.reject("requestPasswordReset")}}},96340:(t,e,n)=>{"use strict";const r=n(94417),o=n(49421),i="cognito";t.exports=function(t,e){if(!t||!e)throw new Error("invalid-args");const n=this,s=n=>(n&&e.authenticatedProfile((()=>r(t,i,!0))),n),a=t=>{throw e.authenticationFailed(),t};n.providerName=function(){return i},n.getProfile=function(){return r(t,i)},n.backgroundAuthenticate=function(){return e.authenticationStarted(),r(t,i).then(s).catch(a)},n.authenticate=function(e,n){return t.signIn(e,n).then((()=>r(t,i))).then(s).catch(a)},e.addEventListener("not-authenticated",(function(e){"signed-out"===e&&t.signOut()})),e.addEventListener("authenticatedProfile",(function(e){e&&e.provider!==i&&(t.signOut(),e.license&&e.license.accountType)&&o(e.license.accountType).cognitoAuthenticated&&t.signInWithLicense(e.license).then((()=>r(t,i))).then(s).catch(a)})),e.addEventListener("signoutOthersRequired",(e=>{e&&e.provider===i&&t.globalSignOut().then((()=>t.signInWithLicense(e.license)))}))}},98580:(t,e,n)=>{"use strict";const r=n(2043);t.exports=function(t){if(!(t&&t.UserPoolId&&t.ClientId&&t.cognitoIdentityPoolId&&t.cognitoIdentityPoolId.split))throw"invalid-args";const e=this,n={UserPoolId:t.UserPoolId,ClientId:t.ClientId},o=t.cognitoIdentityPoolId.split(":")[0],i=new r.CognitoUserPool(n),s=function(t,e){const n={Username:t,Password:e};return new r.AuthenticationDetails(n)},a=function(t){const e={Username:t,Pool:i};return new r.CognitoUser(e)},c={UserNotFoundException:"no-user"},l=function(t,e){const n=t&&(t.name||t.code||t.message||t);return e&&e[n]||c[n]||n};e.cognitoUser=function(t){return a(t)},e.changePassword=function(t,n){return e.cognitoUserAndSession().then((function(e){return new Promise((function(r,o){e.cognitoUser.changePassword(t,n,(function(t,e){t?o(l(t)):r(e)}))}))}))},e.requestPasswordReset=function(t){const e=a(t);return new Promise((function(t,n){const r={onSuccess:e=>t({result:e}),onFailure:t=>n(l(t,{NotAuthorizedException:"no-password"})),inputVerificationCode:n=>t({result:n,action:"completePendingUserAction",cognitoUser:e})};e.forgotPassword(r)}))},e.completePasswordReset=function(t,e,n){return new Promise((function(r,o){const i={onSuccess:function(t){r(t)},onFailure:function(t){o(l(t))}};t.confirmPassword(n,e,i)}))},e.setInitialPassword=function(t,e,n){const r=a(t),o=s(t,n);return new Promise((function(t,n){r.authenticateUser(o,{onSuccess:function(){t({cognitoUser:r})},onFailure:function(t){n(l(t))},newPasswordRequired:function(){r.completeNewPasswordChallenge(e,{},{onSuccess:function(){t({cognitoUser:r})},onFailure:function(t){n(l(t))}})}})}))},e.authenticate=function(t,e){const n=a(t),r=s(t,e);return new Promise((function(t,e){n.authenticateUser(r,{onSuccess:function(){t({cognitoUser:n})},onFailure:function(t){e(l(t))},newPasswordRequired:function(){t({action:"completeNewPasswordChallenge",user:n})}})}))},e.completeNewPasswordChallenge=(t,e)=>new Promise(((n,r)=>{t.completeNewPasswordChallenge(e,{},{onSuccess:function(){n({cognitoUser:t})},onFailure:function(t){r(l(t))}})})),e.getIdentityToken=function(t){const e=t&&t.getIdToken&&t.getIdToken();return e&&e.getJwtToken&&e.getJwtToken()},e.createIdentityCredentials=function(e){if(!t||!t.UserPoolId||!t.cognitoIdentityPoolId)throw"invalid-args";const n=e&&e.getIdToken&&e.getIdToken(),r=n&&n.getJwtToken&&n.getJwtToken(),i={IdentityPoolId:t.cognitoIdentityPoolId,Logins:{}};if(!r)throw"not-authenticated";return i.Logins[`cognito-idp.${o}.amazonaws.com/${t.UserPoolId}`]=e.getIdToken().getJwtToken(),i},e.authenticateUsingCustomFlow=function(t){const e=a(t),n=s(t);return new Promise((function(t,r){e.initiateAuth(n,{onSuccess:function(){t({cognitoUser:e})},onFailure:function(t){r(l(t))},customChallenge:function(n){t({action:"customChallengeResponseRequired",result:n,cognitoUser:e})}})}))},e.respondToCustomChallenge=function(t,e){const n=t.cognitoUser;return new Promise(((t,r)=>{n.sendCustomChallengeAnswer(e,{onSuccess:function(){t({cognitoUser:n})},onFailure:function(t){r(l(t))}})}))},e.cognitoUserAndSession=function(t){const e=t||i.getCurrentUser();return e?new Promise((function(t,n){e.getSession((function(r,o){r?n(l(r)):t({cognitoUser:e,session:o})}))})):Promise.reject("not-authenticated")},e.getUserAttributes=function(t){return t?new Promise((function(e,n){t.getUserAttributes((function(t,r){if(t)n(l(t));else{const t={};if(r)for(let e=0;e<r.length;e++)t[r[e].getName()]=r[e].getValue();e(t)}}))})):Promise.reject("invalid-args")}}},94417:(t,e,n)=>{"use strict";const r=n(37892);t.exports=function(t,e,n){return t.userProfile().then((t=>{const n=t&&t.userAttributes,o=n&&n["custom:mm-license"],i=n&&n.email;return i&&o&&r(e,i,JSON.parse(o),t)})).catch((t=>{if(n)return!1;throw t}))}},67443:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t,e,n){const o=r(this),i=function(t){(function(t){return t&&t.provider===e.providerName()?n.getUserActions().then((t=>Object({canSetPassword:t.includes("SET_PASSWORD"),canChangePassword:t.includes("CHANGE_PASSWORD")}))):Promise.resolve({})})(t).then((t=>o.dispatchEvent("context",t)))};if(!t||!e||!n)throw"invalid-args";t.addEventListener("authenticatedProfile",i),t.addEventListener("not-authenticated",(()=>o.dispatchEvent("context",{}))),o.sendContext=function(){t.getProfile().then(i)}}},85752:(t,e,n)=>{"use strict";t.exports=n(17049)},57319:(t,e,n)=>{"use strict";t.exports=n(68410)},36954:t=>{"use strict";t.exports=function(){const t=this,e=t=>{let e=parseInt(t).toString(16);return 1===e.length&&(e="0"+e),e},n=(t,n,r)=>"#"+e(t)+e(n)+e(r),r={aliceblue:n(240,248,255),antiquewhite:n(250,235,215),aqua:n(0,255,255),aquamarine:n(127,255,212),azure:n(240,255,255),beige:n(245,245,220),bisque:n(255,228,196),black:n(0,0,0),blanchedalmond:n(255,235,205),blue:n(0,0,255),blueviolet:n(138,43,226),brown:n(165,42,42),burlywood:n(222,184,135),cadetblue:n(95,158,160),chartreuse:n(127,255,0),chocolate:n(210,105,30),coral:n(255,127,80),cornflowerblue:n(100,149,237),cornsilk:n(255,248,220),crimson:n(220,20,60),cyan:n(0,255,255),darkblue:n(0,0,139),darkcyan:n(0,139,139),darkgoldenrod:n(184,134,11),darkgray:n(169,169,169),darkgreen:n(0,100,0),darkgrey:n(169,169,169),darkkhaki:n(189,183,107),darkmagenta:n(139,0,139),darkolivegreen:n(85,107,47),darkorange:n(255,140,0),darkorchid:n(153,50,204),darkred:n(139,0,0),darksalmon:n(233,150,122),darkseagreen:n(143,188,143),darkslateblue:n(72,61,139),darkslategray:n(47,79,79),darkslategrey:n(47,79,79),darkturquoise:n(0,206,209),darkviolet:n(148,0,211),deeppink:n(255,20,147),deepskyblue:n(0,191,255),dimgray:n(105,105,105),dimgrey:n(105,105,105),dodgerblue:n(30,144,255),firebrick:n(178,34,34),floralwhite:n(255,250,240),forestgreen:n(34,139,34),fuchsia:n(255,0,255),gainsboro:n(220,220,220),ghostwhite:n(248,248,255),gold:n(255,215,0),goldenrod:n(218,165,32),gray:n(128,128,128),grey:n(128,128,128),green:n(0,128,0),greenyellow:n(173,255,47),honeydew:n(240,255,240),hotpink:n(255,105,180),indianred:n(205,92,92),indigo:n(75,0,130),ivory:n(255,255,240),khaki:n(240,230,140),lavender:n(230,230,250),lavenderblush:n(255,240,245),lawngreen:n(124,252,0),lemonchiffon:n(255,250,205),lightblue:n(173,216,230),lightcoral:n(240,128,128),lightcyan:n(224,255,255),lightgoldenrodyellow:n(250,250,210),lightgray:n(211,211,211),lightgreen:n(144,238,144),lightgrey:n(211,211,211),lightpink:n(255,182,193),lightsalmon:n(255,160,122),lightseagreen:n(32,178,170),lightskyblue:n(135,206,250),lightslategray:n(119,136,153),lightslategrey:n(119,136,153),lightsteelblue:n(176,196,222),lightyellow:n(255,255,224),lime:n(0,255,0),limegreen:n(50,205,50),linen:n(250,240,230),magenta:n(255,0,255),maroon:n(128,0,0),mediumaquamarine:n(102,205,170),mediumblue:n(0,0,205),mediumorchid:n(186,85,211),mediumpurple:n(147,112,219),mediumseagreen:n(60,179,113),mediumslateblue:n(123,104,238),mediumspringgreen:n(0,250,154),mediumturquoise:n(72,209,204),mediumvioletred:n(199,21,133),midnightblue:n(25,25,112),mintcream:n(245,255,250),mistyrose:n(255,228,225),moccasin:n(255,228,181),navajowhite:n(255,222,173),navy:n(0,0,128),oldlace:n(253,245,230),olive:n(128,128,0),olivedrab:n(107,142,35),orange:n(255,165,0),orangered:n(255,69,0),orchid:n(218,112,214),palegoldenrod:n(238,232,170),palegreen:n(152,251,152),paleturquoise:n(175,238,238),palevioletred:n(219,112,147),papayawhip:n(255,239,213),peachpuff:n(255,218,185),peru:n(205,133,63),pink:n(255,192,203),plum:n(221,160,221),powderblue:n(176,224,230),purple:n(128,0,128),red:n(255,0,0),rosybrown:n(188,143,143),royalblue:n(65,105,225),saddlebrown:n(139,69,19),salmon:n(250,128,114),sandybrown:n(244,164,96),seagreen:n(46,139,87),seashell:n(255,245,238),sienna:n(160,82,45),silver:n(192,192,192),skyblue:n(135,206,235),slateblue:n(106,90,205),slategray:n(112,128,144),slategrey:n(112,128,144),snow:n(255,250,250),springgreen:n(0,255,127),steelblue:n(70,130,180),tan:n(210,180,140),teal:n(0,128,128),thistle:n(216,191,216),tomato:n(255,99,71),turquoise:n(64,224,208),violet:n(238,130,238),wheat:n(245,222,179),white:n(255,255,255),whitesmoke:n(245,245,245),yellow:n(255,255,0),yellowgreen:n(154,205,50),default:""},o=t=>{const e=t.toLowerCase();return r[e]||(/^[a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9]$/.test(e)?"#"+e:!!/^#[a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9]$/.test(e)&&e)};t.findColor=t=>{if(!t)return!1;const e=t&&t.toLowerCase(),n=Object.keys(r).filter((function(t){return 0===t.indexOf(e)}));return n.length&&n||o(t)&&[o(t)]},t.validColor=t=>o(t),t.webColorList=()=>Object.values(r).filter((t=>t))}},98014:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t,e){let n=()=>{},o=()=>{};const i=r(this),s=(t,e,n)=>{i.dispatchEvent("hideColors"),void 0!==t?e(t):n()};Object.freeze(Object.assign(this,{getColors:()=>t.slice(0),colorPicked:t=>n(t),pickColor:()=>(i.dispatchEvent("hideImagePicker"),i.dispatchEvent("showColors"),new Promise(((t,e)=>{n=n=>s(n,t,e),o=()=>{}}))),colorPickCancelled:()=>n(),colorPickedDefault:()=>n(""),pickColorOrImage:()=>(i.dispatchEvent("showImagePicker"),i.dispatchEvent("showColors"),new Promise(((t,e)=>{n=n=>{s(void 0!==n?{color:n}:void 0,t,e)},o=n=>s({image:n},t,e)}))),imagePicked:t=>o(t),getInMapColors:()=>e.getAllColors({maxColors:35})}))}},57609:t=>{"use strict";t.exports=function(t){if(!t||!Array.isArray(t))throw new Error("invalid-args");const e={},n=[];return 0===t.length?e:1===t.length?(Object.assign(e,t[0]&&t[0].context),t[0]&&t[0].context&&!e.recycleBin&&(e.editMapSharing=!0),e):(t.forEach((t=>{t&&t.context?(n.forEach((n=>{e[n]=!(!e[n]||!t.context[n])})),Object.keys(t.context).forEach((r=>{n.includes(r)||(n.push(r),e[r]=!!t.context[r])}))):n.forEach((t=>e[t]=!1))})),e)}},32680:t=>{"use strict";t.exports=function(t,e){const n=this;n.generateExportConfiguration=function(n){return e.getLicense().then((e=>t.exec("file/export_config",{license:e,format:n})))},n.generateImportConfiguration=function(e){return t.exec("file/import_config",{mimeType:e})},n.generateImportMapConfiguration=function(n){return e.getLicense().then((e=>t.exec("file/import_map/upload_config",{license:e,convertFromType:n})))}}},26205:t=>{"use strict";t.exports=function(t){const{storage:e,goldApi:n,authenticationModel:r,source:o}=t;if(!e||!n||!r)throw new Error("invalid-args");this.confirm=async t=>{const i=`confirm-${t}`,s=new Date,a=s.getTime(),c=e.getItem(i)||{},l=c&&c.last&&new Date(c.last),d=c.since||a,u=((t,e)=>e?t.getUTCFullYear()!==e.getUTCFullYear()||t.getUTCMonth()!==e.getUTCMonth()?1:t.getUTCDate()!==e.getUTCDate()&&2:1)(s,l);u&&(await function(t,e){return r.getLicense().then((r=>n.exec(t,Object.assign({},e,{license:r}))))}(`confirm/${t}/${u}`,{since:Math.floor(d/1e3),source:o}),e.setItem(i,{since:d,last:a}))}}},53235:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t){let e;const n=r(this),o=(t,r)=>{e=r;const o={position:r};o[t]=!0,n.dispatchEvent("context",o)};t.addEventListener("mapMoveRequested mapScaleChanged nodeSelectionChanged nodeEditRequested mapViewResetRequested",(()=>{e=!1,n.dispatchEvent({})})),t.addEventListener("contextMenuRequested",((t,e,n)=>o("contextMenuRequested",{x:e,y:n}))),["linkSelected","connectorSelected"].forEach((e=>{t.addEventListener(e,((t,n)=>{const r=t&&t.connectorEditingContext&&t.connectorEditingContext.name;o(r&&`${e}:${r}`||"lineSelected",n)}))})),n.showNodeStyle=()=>{e&&o("showNodeStyle",e)}}},11421:(t,e,n)=>{"use strict";const r=n(89080),o=n(78502);t.exports=function(t,e,n,i){let s;const a=r(this);Object.freeze(Object.assign(this,{start:function(){a.dispatchEvent("stage","start")},copyTo:async function(t){if(t&&t.trim().length>0)try{a.dispatchEvent("stage","progress");const r=await n(),i=o(r),c=JSON.stringify(i),l=await e.createFile(t,!1,c);s=l.id,await(async t=>{if(t&&t.id&&t.id.split)try{const n=t.id.split("/"),r=n[n.length-1];await e.requestWatermarkForFileKey(`${r}.pointer`,!0)}catch(t){console.error(t)}})(l),a.dispatchEvent("stage","done")}catch(t){"overwriting-file"===t?a.dispatchEvent("stage","error-overwriting-file"):"not-authenticated"===t?a.dispatchEvent("stage","error-not-authenticated"):a.dispatchEvent("stage","error")}else a.dispatchEvent("stage","error")},editCopy:function(){i.editFileId(s)}}))}},25524:t=>{"use strict";t.exports=function(t,e,n,r){let o;const i=function(){return o?Promise.resolve(o):e.convertToPng(r).then((function(t){return o=t,t}))};this.convertToPng=this.downloadAsDataUri=function(r,o,s){return e.convertToPng(r,o,s).catch((function(o){return"network-error"===o?i():n.get(function(e){return t.imageApiUrl+"/proxyUrl?url="+encodeURIComponent(e)}(r)).then((function(t){return e.downloadAsDataUri(t)})).catch(i)}))}}},86508:t=>{"use strict";t.exports={formatVersion:3,id:"root",ideas:{1:{title:"Press Space or double-click to edit",id:1}}}},15473:t=>{"use strict";t.exports=function(t){this.load=function(e){return t.request({url:e["output-url"],dataType:"json"}).then((function(t){return Object.assign({},e,t)}),(function(){throw"generation-error"}))}}},61991:t=>{"use strict";t.exports={},t.exports.twitterIntentResultDecorator=function(t){t["twitter-url"]="https://twitter.com/intent/tweet?text="+encodeURIComponent(t.export.title)+"&url="+encodeURIComponent(t["index-html"])+"&source=mindmup.com&related=mindmup&via=mindmup"},t.exports.facebookResultDecorator=function(t){t["facebook-url"]="https://www.facebook.com/dialog/share_open_graph?app_id=621299297886954&display=popup&action_type=og.likes&action_properties=%7B%22object%22%3A%22"+encodeURIComponent(t["index-html"])+"%22%7D&redirect_uri="+encodeURIComponent("http://www.mindmup.com/fb")},t.exports.linkedinResultDecorator=function(t){t["linkedin-url"]="http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(t["index-html"])+"&title="+encodeURIComponent(t.export.title)+"&summary="+encodeURIComponent(t.export.description)+"&source=MindMup"},t.exports.tumblrResultDecorator=function(t){t["tumblr-url"]="http://www.tumblr.com/share/link?url="+encodeURIComponent(t["index-html"])+"&name="+encodeURIComponent(t.export.title)+"&description="+encodeURIComponent(t.export.description)},t.exports.pinterestResultDecorator=function(t){t["pinterest-url"]="https://pinterest.com/pin/create/button/?media="+encodeURIComponent(t["thumb-png"])+"&url="+encodeURIComponent(t["index-html"])+"&is_video=false&description="+encodeURIComponent(t.export.description)},t.exports.embedResultDecorator=function(t){t["embed-markup"]='<iframe src="'+t["index-html"]+'"></iframe>'},t.exports.gmailResultDecorator=function(t){t["gmail-index-html"]="https://mail.google.com/mail/u/0/?view=cm&ui=2&cmid=0&fs=1&tf=1&body="+encodeURIComponent(t.export.title+"\n\n")+encodeURIComponent(t["index-html"])},t.exports.emailResultDecorator=function(t){t["email-index-html"]="mailto:?subject="+encodeURIComponent(t.export.title)+"&body="+encodeURIComponent(t.export.description+":\r\n\r\n")+encodeURIComponent(t["index-html"])},t.exports.gmailZipResultDecorator=function(t){t["gmail-archive-zip"]="https://mail.google.com/mail/u/0/?view=cm&ui=2&cmid=0&fs=1&tf=1&body="+encodeURIComponent(t.export.title+"\n\n")+encodeURIComponent(t["archive-zip"])},t.exports.emailZipResultDecorator=function(t){t["email-archive-zip"]="mailto:?subject="+encodeURIComponent(t.export.title)+"&body="+encodeURIComponent(t.export.description+":\r\n\r\n")+encodeURIComponent(t["archive-zip"])}},35269:t=>{"use strict";t.exports=[function(t){t["email-output-url"]="mailto:?&body="+encodeURIComponent(t["output-url"]+"\n\nThe link will be valid for 24 hours")},function(t){t["gmail-output-url"]="https://mail.google.com/mail/u/0/?view=cm&ui=2&cmid=0&fs=1&tf=1&body="+encodeURIComponent(t["output-url"]+"\n\n the link will be valid for 24 hours")}]},99923:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t){return r.map(t,(function(t){return r.map(t,(function(t){return t?t.toString().replace(/\t|\n|\r/g," "):""})).join("\t")})).join("\n")}},87522:t=>{"use strict";t.exports=function(t,e,n,r){let o=!1;const i=(t,e)=>{o!==t&&(o?.halt&&o.halt(),o=t,o?.start&&o.start(e))};t.addEventListener("fileInfo",(t=>{t&&t.allowedActions&&t.allowedActions.uploadChanges?i(r,t):i(n,t)})),t.addEventListener("saveFileSuccess",(()=>{o?.notifyFileSaved&&o.notifyFileSaved()})),t.addEventListener("savingFile",(()=>{o?.notifyFileSaving&&o.notifyFileSaving()})),e.addEventListener("localContentEvent",(t=>{o?.localContentEvent&&o.localContentEvent(t)}))}},1207:t=>{"use strict";t.exports=function(t,e){if(!t||!e)throw new Error("invalid-args");const n=!(!e.trashTs||"owner"!==e.role),r=!n&&!(!t.subAccount||e.owner!==t.account),o=!r&&!n&&"owner"===e.role,i=!r&&!o&&!e.trashTs,s=!n&&(o||r),a=e.listItemContext&&"subteam"===e.listItemContext.type,c=e.listItemContext&&e.listItemContext.allowedActions||[],l={recycleBin:n,teamFile:r,myFile:o,sharedFile:i,sharableFile:!!s,unsharableFile:!(!i||a&&!c.includes("unshare-map"))};return!n&&(r||o||i)&&e.tags&&e.tags.forEach&&e.tags.forEach((t=>l["tag:"+t]=!0)),e.context=l,e}},42529:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function t(e,n){const o=this;let i,s;var a;a=e,t.prototype.isPrototypeOf(a)?(i=e.value(),s=e.decimals()):void 0!==e?(i=function(){let t;if(r.isNumber(e)?t=e:r.isString(e)&&(t=parseFloat(e)),r.isNaN(t)||!r.isNumber(t))throw new Error("not a number "+e);return t}(),s=function(){const t=String(e),o=t.indexOf(".");if(void 0!==n){if(!r.isNumber(n)||n<0)throw new Error("invalid decimals "+n);return n}return o<0?0:t.length-o-1}()):(i=0,s=0),o.toString=function(){return i.toFixed(s)},o.value=function(){return i},o.decimals=function(){return s},o.add=function(e){const n=new t(e);return new t(i+n.value(),Math.max(s,n.decimals()))}}},42767:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t){if(!t)throw new Error("invalid-args");const e=r(this),n=t&&t({textFontOnly:!0});e.getFontFamily=t=>{if(!t)throw new Error("invalid-args");return n[t]},e.fontPicked=function(){},e.pickFont=()=>(e.dispatchEvent("showFontPicker"),new Promise((function(t,n){e.fontPicked=function(r){!function(t,n,r){e.dispatchEvent("hideFontPicker"),void 0!==t?n(t):r()}(r,t,n)}}))),e.getTextFontFamilyKeys=()=>Object.keys(n),e.fontPickCancelled=function(){e.fontPicked()},e.fontPickedDefault=function(){e.fontPicked("Sans")}}},94402:(t,e,n)=>{"use strict";const r=n(95046);t.exports=function(t,e){this.fromMup=function(t){const n="string"==typeof t?JSON.parse(t):t;return function(t){let n;return t.traverse((function(r){r.attr&&r.attr.icon&&r.attr.icon.url&&(e&&r.attr.icon.metaData&&r.attr.icon.metaData.remoteUrl?r.attr.icon.url=r.attr.icon.metaData.remoteUrl:/^internal/.test(r.attr.icon.url)&&(n=r.attr.icon.url.replace(/^[^:]*:/,""),t.resources&&t.resources[n]?r.attr.icon.url=t.resources[n]:delete r.attr.icon))})),delete t.resources,t}(r(n))},this.fromMM=function(e){return r(t(e))}}},24934:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t){const e=function(t){const n=escape(t.title).replace(/%([0-9A-F][0-9A-F])/g,"&#x$1;").replace(/%u([0-9A-F][0-9A-F][0-9A-F][0-9A-F])/g,"&#x$1;");return'<node ID="'+t.id+'" TEXT="'+n+'">'+(r.size(t.ideas)>0?r.map(r.sortBy(t.ideas,(function(t,e){return parseFloat(e)})),e).join(""):"")+"</node>"};return 1===r.size(t.ideas)?'<map version="0.7.1">'+e(r.values(t.ideas)[0])+"</map>":'<map version="0.7.1">'+e(t)+"</map>"}},14343:t=>{"use strict";const e=["flip","initialiseTitle","updateTitle","removeSubIdea","changeParent","updateAttr","positionBefore","addLink","removeLink","updateLinkAttr"],n=["insertIntermediate","addSubIdea","paste"];t.exports=function t(r,o){return!!o&&(e.indexOf(r)>=0?o[0]:n.indexOf(r)>=0?o[2]||o[0]:"batch"===r&&o.map((e=>t(e[0],e.slice(1)))).find((t=>t)))}},91614:t=>{"use strict";const e={position:"moved {quantity} node{plural}",icon:"changed {quantity} node image{plural}",attachment:"changed {quantity} node attachment{plural}",style:"changed {quantity} node style{plural}",note:"changed {quantity} node note{plural}",theme:"changed the map theme",storyboards:"updated the storyboard","storyboard-scenes":"updated the storyboard","previous-atlas-export":"published the map","measurements-config":"configured map measurements",measurements:"changed {quantity} node measurement{plural}"},n={undo:"reversed {quantity} change{plural}",redo:"reversed an undo",paste:"pasted from clipboard",removeLink:"removed {quantity} link{plural}",addLink:"added {quantity} link{plural}",updateLinkAttr:"changed {quantity} link{plural}",positionBefore:"moved {quantity} node{plural}",changeParent:"moved {quantity} node{plural}",insertIntermediate:"added {quantity} node{plural}",removeSubIdea:"deleted {quantity} node{plural}",addSubIdea:"added {quantity} node{plural}",updateTitle:"updated node text",initialiseTitle:"updated node text",flip:"moved {quantity} node{plural}"},r=(t,e)=>1===e?t.replace("{quantity}","a").replace("{plural}",""):t.replace("{quantity}",e).replace("{plural}","s"),o=(t,r)=>{return"updateAttr"===t?(o=r[1],i=r[2],("collapsed"===o?i?"folded {quantity} subtree{plural}":"unfolded {quantity} subtree{plural}":e[o]||"updated {quantity} node{plural}")||""):["updateTitle","initialiseTitle"].includes(t)?r&&r.length&&r.length>1?`updated node text to ${r[1]}`:"updated node text":n[t]||"";var o,i};t.exports=function(t,e){if("batch"===t){const t=e.map((t=>o(t[0],t.slice(1)))).filter((t=>t)).reduce(((t,e)=>(t[e]=t[e]?t[e]+1:1,t)),{});return Object.keys(t).map((e=>r(e,t[e]))).join(", ")}return r(o(t,e),1)}},11856:t=>{"use strict";t.exports=function(t,e,n){let r,o;try{o=t.localStorage}catch(t){o=!1}if(!e&&o&&o.setItem&&o.getItem&&o.removeItem)try{o.setItem("testkey","testval"),"testval"===o.getItem("testkey")&&(o.removeItem("testkey"),r=o)}catch(t){}return r?n?{fake:!0,readonly:!0,getItem:function(t){const e=this[t];return void 0===e?r[t]:e},setItem:function(t,e){this[t]=e||!1},removeItem:function(t){this[t]=!1}}:r:{fake:!0,getItem:function(t){return this[t]},setItem:function(t,e){this[t]=e},removeItem:function(t){delete this[t]}}}},81048:t=>{"use strict";const e=["not-authenticated","invalid-args","server-error","org-exists","user-exists","email-exists","not-registered","domain-expired","domain-not-purchased","email-already-linked","max-linked-exceeded","card_declined","incorrect_number","invalid_expiry_month","invalid_expiry_year","invalid_cvc","processing_error","already-a-customer","stripe-zip-check-error","stripe-payment-declined","stripe-server-error","not-found","action-not-allowed","not-authorised","request-expired","cognito-user-exists","authentication-failed","customer-currency-changed","account-is-member","external-account","stripe-subscription-not-upgradable","crowdlink-capacity-exceeded","cisco-capacity-exceeded","msteams-capacity-exceeded"];t.exports=function(t){return e.includes(t)?t:"network-error"}},54459:(t,e,n)=>{"use strict";const r=n(78106),o=n(40034),i=function(t,e){t&&!e.includes(t)&&e.push(t)},s=function(t,e,n){const r=o.getUploadableImage(e);return r&&n.uploadAsset(t,r.url).then((function(t){return r.url=o.resourceIdFromAssetId(t),t}))},a=function(t,e,n){const r=o.getUploadableAttachment(e);if(r)return n.uploadAsset(t,r.content).then((function(t){return delete r.content,delete r.dataUriEncoded,r.goldAssetId=o.resourceIdFromAssetId(t),t}))};t.exports=Object.assign({assetIdsFromContent:function(t,e){if(!t)throw"invalid-args";const n=[];return r(t,(function(t){i(o.assetIdFromIcon(t),n),e||i(o.assetIdFromAttachment(t),n)})),n},uploadAttachmentAsset:a,uploadImageAsset:s,uploadAssets:function(t,e,n){const r=[];return r.push(s(t,e,n)),r.push(a(t,e,n)),Promise.all(r)}},o)},29762:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t,e){const n=function(n,o,i){return Promise.resolve().then(t.getLicense).then((function(t){if(!t||r.isEmpty(t)){if(i)return!1;throw"not-authenticated"}return e.exec(o,r.extend({},n,{license:t}))}))};this.exists=function(t){return t?n({slug:t},"atlas/exists",!0):Promise.reject("invalid-args")},this.delete=function(t){return t?n({slug:t},"atlas/delete"):Promise.reject("invalid-args")}}},75282:(t,e,n)=>{"use strict";const r=n(54459);t.exports=function(t,e){if(!t||!e)throw"invalid-args";this.localiseSingleAttachment=function(n,o){const i=n&&n.attr&&n.attr.attachment,s=i&&i.goldAssetId,a=s&&r.isGoldAssetId(s)&&e.getResource(s);if(a)return o&&o.sendSignedGoldAsserUrls?(i.content=a,i.remoteUrl=!0,delete i.dataUriEncoded,delete i.goldAssetId,Promise.resolve()):t.downloadAsDataUri(a).then((t=>{i.content=t,i.dataUriEncoded=!0,delete i.goldAssetId})).catch((()=>delete n.attr.attachment))}}},59193:(t,e,n)=>{"use strict";const r=n(54459);t.exports=function(t,e){if(!t||!e)throw"invalid-args";this.pack=n=>{n.forEach((n=>{const o=n&&n.attr&&n.attr.attachment,i=e.getFileId();o&&o.goldAssetId&&(o.content=r.metadataForGoldAsset(o.goldAssetId,i,t.getResource(o.goldAssetId)),delete o.goldAssetId)}))}}},75833:t=>{"use strict";t.exports=function(t,e,n,r){const o=r?.subscriptionModel;let i;o?(o.addEventListener("subscribed",(()=>{i=!0})),o.addEventListener("not-authenticated expiredSubscription notRegistered",(()=>{i=!1}))):i=!0,this.pickAttachment=function(r){return i?t.pickFile().then((t=>e.getAllowedActions().uploadChanges?(r&&r.notify&&r.notify("uploading",t.name),n.addGoldAsset(t.contents).then((e=>({goldAssetId:e,name:t.name,contentType:t.type})))):{content:t.contents,contentType:t.type,dataUriEncoded:!0,name:t.name})):Promise.reject("not-subscribed")}}},49560:(t,e,n)=>{"use strict";const r=n(54459);t.exports=function(t,e){if(!t)throw"invalid-args";const n=function(e){const n=e&&e.attr&&e.attr.attachment,o=n&&r.isGoldAssetMetadata(n.content),i=o&&o.contentUrl||n&&n.atlasUrl&&n.content;return i?t.downloadAsDataUri(i).then((function(t){n.content=t,n.dataUriEncoded=!0,delete n.atlasUrl,delete n.remoteUrl})).catch((()=>delete e.attr.attachment)):Promise.resolve()};this.unpack=function(t){const o=function(t,e){if(!e||!t||!t.length)return t||[];const n=[];return t.forEach((function(t){const o=t&&t.attr&&t.attr.attachment,i=o&&r.isGoldAssetMetadata(o.content);i&&i.fileId===e?(o.goldAssetId=r.resourceIdFromAssetId(i.assetId),delete o.content):(i||o&&o.atlasUrl)&&n.push(t)})),n}(t,e&&e.getFileId());return Promise.all(o.map(n))}}},1229:(t,e,n)=>{"use strict";const r=n(81048);t.exports=function(t,e){if(!t||!t.request||!e)throw new Error("invalid-args");this.exec=async function(n,o,i){try{const r={url:e+"/"+n,dataType:"json",data:JSON.stringify(o),type:"POST",headers:Object.assign({"Content-Type":"application/json"},i)};return await t.request(r)}catch(t){throw r(t&&t.responseText)}}}},12377:(t,e,n)=>{"use strict";const r=n(89080),o=n(79118),i=n(70129);t.exports=function(t,e,n,s,a,c,l){let d,u,h,f=!1;const p=r(this),g=function(t){"cancel"!==t?p.dispatchEvent("error",t):p.dispatchEvent("cancel")},m=function(t){return t&&t.replace(/.*\./,"")},v=function(e){try{const n=s.dataURLToBlob(e.contents),r=m(e.name);return f=!1,l.knownImport(r)?l.startImport(r,n,{notify:t=>p.dispatchEvent("progress",t)}).then((()=>{f=!0,p.dispatchEvent("readyToSave",o(e.name)||t.defaultFileTitle)})):((e,n)=>{const r={mup:c.fromMup,mm:c.fromMM};return s.readFileAsText(e).then((t=>{let e=m(n.name);if(!r[e]){if(!function(t){try{const e=JSON.parse(t);return e.id&&e.formatVersion}catch(t){return!1}}(t))return Promise.reject("invalid-file-type");e="mup"}try{h=r[e](t)}catch(t){return Promise.reject("invalid-file-format")}})).then((()=>p.dispatchEvent("readyToSave",o(n.name)||t.defaultFileTitle)))})(n,e)}catch(t){return Promise.reject("invalid-file-format")}};n.addEventListener("subscribed",(function(t){d=t})),n.addEventListener("not-authenticated notRegistered expiredSubscription",(function(){d=!1})),p.save=function(t){return d?(t=i(t))?f?(p.dispatchEvent("progress","Completing import, please wait..."),l.finalise(d.license,t).then((t=>{f=!1,u=t,p.dispatchEvent("complete")})).catch(g)):h?a.createFile(t,!1,JSON.stringify(h,null,2)).then((t=>{u=t,p.dispatchEvent("complete")})).catch(g):g("invalid-request"):g("invalid-file-name"):g("not-subscribed")},p.confirmSave=function(){},p.cancelSave=function(){},p.pickImport=function(){return d?e.pickFile().then(v).catch(g):g("not-subscribed")},p.editImport=function(){u&&u.id&&s.redirect(t.editorUrl+"/"+u.id)}}},3088:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function({config:t,navigatorShim:e,subscriptionModel:o,collaborationModel:i,pageState:s,s3FileModel:a,resourceManager:c,goldFileChangesModel:l,jsonStorage:d,unsavedChangesModel:u},h){if(!(t&&e&&o&&i&&s&&a&&c&&d&&u))throw new Error("invalid-args");const f=r(this),p=h?.thumbnailBuilder,g=h&&h.goldFileApi||n(80986),m=new(h&&h.GoldFileInitialiser||n(31031))({config:t,pageState:s,goldFileApi:g,s3FileModel:a,collaborationModel:i,resourceManager:c,navigatorShim:e,goldFileChangesModel:l},{thumbnailBuilder:p}),v=h&&h.serializeContent||n(58879),y=h&&h.calculateFileName||n(38847),w=function(t){f.dispatchEvent("error",t)},b=function(t){return function(e){"network-error"===e&&(e=t+"-"+e),w(e)}},E=function(t){const e=s.getPathInfo(),n=t||y(i,e)||e.title;return Object.assign({},e,{title:n})},x=function(t){const e=s.applySaveConfig(t);return e&&f.dispatchEvent("fileInfo",e),f.dispatchEvent("saveFileSuccess"),e},S=function(t){return b("save")(t),Promise.reject(t)},A=async t=>{if(!s.isInitialised)return w("invalidRequest"),Promise.reject("invalidRequest");f.dispatchEvent("savingFile");const e=E(t),n=await v(i.getActiveContent(),a,c,{uploadAssets:e.uploadAssets,fileId:e.fileId}),r=await g.saveFile(e,n,a);e.new&&e.title&&(f.dispatchEvent("renamed",e.title),s.renamed(e.title)),await(async()=>{const t=await a.savedFileInfo(r),e=await x(t);if(p){const t=await p.build();await a.uploadAsset(e.fileId,t,{isThumbnail:!0})}f.dispatchEvent("goldFileSaveComplete")})()},C=()=>{const t=s&&s.getAllowedActions();return t&&t.uploadChanges?l:a};f.editFileId=function(n){e.redirect(t.editorUrl+"/"+n)},f.saveFile=function(){return A().catch((t=>{if("not-authenticated"!==t)return S(t);f.dispatchEvent("saveConfirmationRequired","free-file")}))},f.getFileKey=()=>{const t=s.getPathInfo();return g.goldFileKey(t)},o.addEventListener("subscribed expiredSubscription",(async t=>{f.dispatchEvent(t.active?"goldActive":"goldInactive");try{const e=await m.initFile(f.dispatchEvent);if(t.active){const n=s.getPathInfo(),r=e&&u.getUnsavedChanges();(()=>{const t=d.getKeysWithPrefix("_free/");t&&t.length&&f.dispatchEvent("hasAnonymousFiles")})(),t&&n?.new&&n?.allowedActions?.upload&&(await A("An untitled mindmap"),r?.length&&u.applyUnsavedChanges(r))}}catch(t){if("not-authenticated"!==t)return S(t)}f.dispatchEvent("goldFileLoadComplete")})),o.addEventListener("not-authenticated notRegistered",(()=>{f.dispatchEvent("goldInactive"),m.initFile(f.dispatchEvent)})),o.addEventListener("goldAccountInfo",(t=>{if(t&&t.purchaseComplete){const t=s.getPathInfo();if(t&&t.free)return A("An untitled mindmap").catch((t=>{if("not-authenticated"!==t)return S(t)}))}})),o.addEventListener("authenticating",(()=>{f.dispatchEvent("authenticating")})),f.redirectToDriveFileList=function(){e.redirect("/files-gold.html")},f.redirectToHomePage=function(){e.redirect("/")},f.saveFreeFile=function(){let t;if(!s.isInitialised)return void w("invalidRequest");const e=E();return f.dispatchEvent("savingFile"),v(i.getActiveContent()).then(a.validFreeFileContent).then((e=>t=e)).then((()=>a.freeFileSaveConfiguration(e))).then((e=>a.saveFreeFile(e,t))).then((t=>a.savedFileInfo(t))).then(x).then((()=>{const t=E();e.free&&d.remove(`_free/${e.fileId}`),d.setItem(`_free/${t.fileId}`,{title:e.title,ts:Date.now()})})).catch(S)},f.renameFile=function(t){return f.dispatchEvent("renamingFile"),Promise.resolve().then((()=>{const e=s.getPathInfo();return e.gold?a.renameFile(e,t):A(t)})).then((()=>(f.dispatchEvent("renamed",t),s.renamed(t),l.localControlEvent("renamed",[t]),"renamed"))).catch((t=>{if("invalid-args"===t)throw w("invalidRequest"),"invalidRequest";if(f.dispatchEvent("renameFailed"),"not-authorised"===t)throw w(t),t;if("not-authenticated"===t)throw w("rename-"+t),t;throw w("rename-failed"),t}))},f.ready=function(){f.dispatchEvent("ready")},f.trashFile=function(){if(!s.isInitialised)return Promise.resolve();const t=s.getPathInfo();return f.dispatchEvent("trashing"),C().deleteFile(t).then((()=>{f.dispatchEvent("trashed")})).catch(b("trash"))},["trashed","untrashed"].forEach((t=>{l.addEventListener(t,(()=>f.dispatchEvent(t)))})),f.untrashFile=function(){if(!s.isInitialised)return Promise.resolve();const t=s.getPathInfo();return f.dispatchEvent("untrashing"),C().undeleteFile(t).then((()=>{f.dispatchEvent("untrashed")})).catch((()=>w("untrash")))},f.requestSharingSettings=function(t){f.dispatchEvent("shareSettingsRequested",t)},f.openHistory=function(t){const n=s.getPathInfo().fileId;void 0===t?e.redirect(`/history.html?fileId=${n}`):e.redirect(`/history.html?fileId=${n}&eventId=${t}`)},f.renameFromDefault=e=>{const n=s.getPathInfo();n&&n.gold&&e&&e!==t.defaultFileTitle&&s.getPageTitle()===t.defaultFileTitle&&f.renameFile(e)},f.watermarkHistory=()=>a.requestWatermark(s.getPathInfo())}},17662:t=>{"use strict";t.exports=function(t,e){const n=this;let r,o,i,s={share:!1,trash:!1,rename:!1,upload:!0};n.isInitialised=!1,n.isInitialising=!1,n.setLoadConfig=function(t){return r=t&&t.fileId,o=t&&t.title,s=t&&t.allowedActions||s,i=t&&t.hasThumbnail,t},n.applySaveConfig=function(t){if(s=t.allowedActions,r=t.savedFileId,t.savedUrl)return e.replaceUrl(o,t.savedUrl),n.getPathInfo(t.savedUrl)},n.hasThumbnail=()=>!!i,n.getPageTitle=function(){return o},n.getFileId=function(){return r},n.renamed=function(t){o=t},n.getAllowedActions=function(){return Object.assign({},s)},n.getPathInfo=function(n){const r=n||e.getPath(),o="/crowdlink.html"===r,i=0===r.indexOf(t.editorUrl)&&r.length>t.editorUrl.length&&r.substring(t.editorUrl.length+1),a=i&&i.split("/"),c=function(t){return a&&a.length>t&&a.slice(t).join("/")};return o?{fileId:e.getQueryStringAsMap().fileId,gold:!0,crowdlink:!0,version:1,allowedActions:s}:!(!a||a.length<1||0===a[0].indexOf("_")&&"_free"!==a[0]&&"_legacy"!==a[0]&&"_v2"!==a[0])&&("new"===a[0]?function(){const n=c(1),r=e.getQueryStringAsMap().theme;return n?{new:!0,fileId:n,title:t.defaultFileTitle,allowedActions:s}:r?{new:!0,title:t.defaultFileTitle,allowedActions:s,theme:r}:{new:!0,title:t.defaultFileTitle,allowedActions:s}}():"_free"===a[0]?{free:!0,fileId:c(1)}:"_legacy"===a[0]?{legacy:!0,fileId:c(1)}:function(){const t=decodeURIComponent(c(1));return"_v2"===a[0]?{fileId:t,gold:!0,version:2,uploadAssets:!0,allowedActions:s}:{account:a[0],fileId:t,gold:!0,version:1,allowedActions:s}}())}}},80986:t=>{"use strict";t.exports={calculateFileUrl:function(t,e,n){return!(!t||!e)&&[t,n?"_free":"_v2",e].join("/")},fileIdFromSaveConfig:function(t){if(!t||!t.key||!t.key.length)return!1;const e=t.key.split("/");return!(!e||!e.length||e.length<2)&&(t.free?e.slice(1).join("/"):e[1])},goldFileKey:function(t,e){return 1===t.version?t.fileId+".mup":t.new&&t.title||t.free&&t.title&&e?t.title+".new":t.fileId+".pointer"},loadFile:function(t,e,n,r,o,i,s){if(!(t&&i&&r&&e&&n&&o&&s))return Promise.reject("invalidRequest");if(e.isInitialised)return Promise.reject("reauthenticated");const a=e.getPathInfo();return a?new Promise(((c,l)=>{let d,u=!1,h=!1;const f=function(){u&&(i.clearTimeout(u),u=0)};!function(){const e=t.timeout||12e4;f(),u=i.setTimeout((()=>{h=!0,l("network-error")}),e)}(),n.getLoadConfig(a).then((t=>(d=t.sessionId||"",e.setLoadConfig(t)))).then((t=>(s.setHistoryPath(t.historyUrl,t.hasHistory),n.loadFile(a,t)))).then((t=>{const e=t&&t.attr&&t.attr["watermark-bytes"];return a.gold||a.goldFileShare?s.loadEvents(e).then((e=>({content:t,events:e}))):{content:t,events:[]}})).then((t=>{if(!h)return r.initializeSession(d,t.content,t.events),o.resignUrls(t.events)})).then((()=>{h||(a.new&&!a.fileId?(a.fileId=Date.now(),i.replaceUrl(t.defaultFileTitle,t.editorUrl+"/new/"+a.fileId)):a.gold&&!a.crowdlink&&i.replaceUrl(e.getPageTitle(),t.editorUrl+"/_v2/"+e.getFileId()),e.isInitialised=!0)})).then((()=>{f(),c(e.getPathInfo())})).catch((t=>{f(),l(t)}))})):Promise.reject("invalidRequest")},saveFile:function(t,e,n){return n.goldFileSaveConfiguration(t).then((t=>n.saveGoldFile(t,e)))}}},45942:t=>{"use strict";t.exports=function(t){const e=this,n=[],r=t=>t&&t.header&&t.header.sessionId&&t.header.sequence&&`${t.header.sessionId}/${t.header.sequence}`,o=t=>!!(t&&t.header&&t.header.sessionId&&void 0!==t.header.sequence)&&[t.header.sessionId,t.header.sequence].join(":"),i={};t=t||1e3,e.store=e=>{const r=o(e);r&&(n.unshift(r),n.length>t&&n.pop())},e.exists=t=>{const e=o(t);return e&&n.includes(e)},e.sent=t=>{const e=r(t);e&&(i[e]={ts:Date.now(),envelope:t})},e.received=t=>{t.forEach((t=>{const e=r(t);delete i[e]}))},e.envelopesPendingReciept=t=>{const e=Date.now();return Object.values(i).filter((n=>n.ts+t<e)).map((t=>t.envelope))},e.hasEnvelopesPendingReciept=t=>{const e=Date.now();return!!Object.values(i).find((n=>n.ts+t<e))},e.millisMaxPendingReceipt=()=>{const t=Date.now();return Object.keys(i).reduce(((e,n)=>{const r=i[n],o=r&&r.ts||0,s=t-o;return Math.max(s,e)}),0)}}},65476:(t,e,n)=>{"use strict";const r=n(89080),o=6e5,i=n(70092),s=n(94414),a=n(67142),c=n(60117),l=n(31233),d=n(63823),u=n(23053),h=n(73264);t.exports=function({collaborationModel:t,s3FileModel:e,pageState:n,navigatorShim:f,networkStatusDispatcher:p,resourceManager:g,goldFileChangesCache:m,envelopeBuilder:v,goldFileHistoryEnvelopeSorter:y},w){if(!(t&&e&&n&&f&&p&&m&&v&&y))throw new Error("invalid-args");let b,E,x,S=0,A=!1,C=!1,I=0,k=0,F=!1,M=!1;const T=r(this),P=w?.thumbnailBuilder,L=[],O=w&&w.goldFileHistoryModel||new a(n,e),_=w&&w.goldFileHistoryEvent||new c(t.getLocalSessionId),R=w&&w.loadUnaggregatedEnvelopes||u,U=w&&w.shouldRequestWatermark||h,D=w&&w.goldSessionModel,N=function(t){C=t,p.notifySavingChanged(!!L.length)},j=()=>{if(b&&b.expiry>l()+30)return Promise.resolve(b);const r=Object.assign({},n.getPathInfo()),o=t.getLocalSessionId();return e.goldFileChangesSaveConfiguration(r,o).then((t=>(b=t,b)))},B=()=>{if(!P)return;const t=I,r=v.getCounter();return!I||I<r?(I=r,P.build().then((t=>e.uploadAsset(n.getFileId(),t,{isThumbnail:!0}))).catch((()=>I=t))):Promise.resolve()},W=t=>{const e=t&&{startByte:O.getLastHistoryByte()};return O.loadChangesHistory(e).then((t=>(m.received(t),t))).then((t=>y.requiresSorting(t)?y.sortedEnvelopes(t):t)).catch((t=>{if("not-found"===t){if(x&&!e)throw t;return!M&&e&&e.startByte>0?(M=!0,T.dispatchEvent("trashed"),[]):[]}throw t}))},q=e=>{if(!e||!e.length)return;T.dispatchEvent("hasHistory");let r=!1,o=!1,i=!1;e.forEach((e=>{if(m.exists(e))return;m.store(e);const n=e&&e.header&&e.header.sessionId;v.eventsFromEnvelope(e).forEach((e=>{_.isNonControlEvent(e)?t.triggerRemoteContentEvent(e,n):_.isRenameEvent(e)?r=e.args&&e.args[0]:_.isTrashedEvent(e)&&(i=!0,o=e.args&&e.args[0])}))})),r&&(T.dispatchEvent("title",r),n.renamed(r)),i&&(!M&&o?(M=!0,T.dispatchEvent("trashed")):M&&!o&&(M=!1,T.dispatchEvent("untrashed")))},z=(()=>{if(w&&w.goldFileEventPoller)return w.goldFileEventPoller;const e=new i(W,m,t,_,g,q);return w&&w.webSocketShim?new s({goldFileEventDefaultPoller:e,webSocketShim:w.webSocketShim,goldFileHistoryModel:O}):e})(),V=()=>{const n=L.length,r=L.slice(0,n);return C||!r.length?Promise.resolve():(N(!0),d(f,(async t=>{const n=await Promise.all([j(),v.nextEnvelope(t)]),r=n[0],o=n[1],i=Object.assign({},r,{key:r.key+o.header.sequence+r.fileExtension});return e.saveGoldFile(i,o).then((()=>m.sent(o)))})(r),2e4).then((()=>{S=0,L.splice(0,n),k=Date.now(),N(!1),T.dispatchEvent("event-upload-success")})).catch((e=>{S++,b=!1,N(!1),S>=2&&z.getShowSaveOnError()&&(t.error("networkError"),z.setShowSaveOnError(!1)),T.dispatchEvent("event-upload-failed",e)})))},G=()=>{const t=L.length&&Date.now()-k||0,e=m.millisMaxPendingReceipt();p.notifySaveDelay(Math.max(t,e))},K=()=>{const t=m.envelopesPendingReciept(o);if(t.length)return(async t=>{if(w&&w.disableReupload)return;const n=await j();return Promise.all(t.map((async t=>{const r=Object.assign({},n,{key:n.key+t.header.sequence+n.fileExtension});return e.saveGoldFile(r,t)})))})(t)},H=t=>{if(L.length){const e="This document is still saving to changes. If you leave now, you might lose data. If you are experiencing connectivity problems, cancel and save the data locally using File->Download As->MindMup";return t.returnValue=e,t.preventDefault(),e}},$=t=>{p.notifySavingChanged(!0),E||(k=Date.now(),E=f.setInterval(V,1e3),f.setInterval(G,1e3),f.setInterval(B,6e4),f.setInterval(K,o),B()),z.setShowSaveOnError(!0),L.push(t),L.length>100&&T.dispatchEvent("unsaved-event-queue-length",L.length)};Object.assign(this,{setHistoryPath:(t,e)=>{x=e,O.setHistoryPath(t)},start:()=>{if(!A)return A=!0,p.notifySavingChanged(!1),(async()=>{if(!t.getLocalSessionId()){const r=await e.startSession(n.getPathInfo());t.setLocalSessionId(r)}D&&await D.ensureConnection({fileId:n.getFileId(),sessionId:t.getLocalSessionId(),clientSecret:e.getClientSecret()})})().then((()=>{f.addWindowEventListener("beforeunload",H),F=f.setInterval(z.pollForEvents,3e3)})).then((()=>T.dispatchEvent("started"))).catch((t=>{throw A=!1,t}))},halt:()=>{f.removeWindowEventListener("beforeunload",H),F&&f.clearInterval(F),A=!1},localContentEvent:$,localControlEvent:(t,e)=>{if(!A)return;const n=_.buildLocalControlEvent(t,e);$(n)},loadEvents:t=>{let r=[];const o=t=>{t.forEach((t=>{m.exists(t)||(m.store(t),r=r.concat(v.eventsFromEnvelope(t)))}))};return t&&O.setLastHistoryByte(t),R(n,e).then((r=>W(!!t).then((t=>(U(t)&&e.requestWatermark(n.getPathInfo()),o(t)))).then((()=>o(r))))).then((()=>{const t=r.filter(_.isTrashedEvent).pop();M=t&&t.args&&t.args[0]})).then((()=>r.filter(_.isNonControlEvent))).then((t=>(t&&t.length&&T.dispatchEvent("hasHistory"),t)))},isTrashed:()=>M,deleteFile:t=>{const n=_.buildLocalControlEvent("trashed",[!0]);return v.nextEnvelope([n]).then((n=>e.deleteFile(t,n))).then((()=>M=!0))},undeleteFile:t=>{const n=_.buildLocalControlEvent("trashed",[!1]);return v.nextEnvelope([n]).then((n=>e.undeleteFile(t,n))).then((()=>M=!1))},getSaveConfiguration:j,getMaxChangeSize:async()=>{const t=Object.assign({},n.getPathInfo()),e=!(t?.free||t?.new)&&await j();return e?.maxSize}})}},70092:t=>{"use strict";t.exports=function(t,e,n,r,o,i){if(!(t&&e&&n&&r&&o&&i))throw new Error("invalid-args");let s=!1,a=0,c=0,l=!0,d=5,u=0;const h=this,f=()=>s?Promise.resolve():(a=0,s=!0,t(!0).then((t=>t.filter(r.hasRemoteEvents))).then((t=>(t&&t.length?(d=0,c=0,u=0):(u+=1,u>60&&(d=5),c=Math.min(d,c+1)),t))).then((t=>o.processAssetEvents(t))).then(i).then((()=>{e.hasEnvelopesPendingReciept(12e4)&&l&&(n.error("networkError"),l=!1)})).catch((()=>!1)).then((()=>{s=!1})));h.setShowSaveOnError=t=>l=t,h.getShowSaveOnError=()=>l,h.getPollingSkipNext=()=>c,h.getMaxPollingSkipNext=()=>d,h.getPollingSkipCount=()=>a,h.getContiguousEmptyResults=()=>u,h.getEventsNow=f,h.pollForEvents=()=>s?Promise.resolve():a<c?(a+=1,Promise.resolve()):f()}},94414:t=>{"use strict";t.exports=function({goldFileEventDefaultPoller:t,webSocketShim:e,goldFileHistoryModel:n}){if(!t||!e||!n)throw new Error("invalid-args");let r=0;const o=this,i=()=>r>n.getLastHistoryByte();Object.keys(t).forEach((e=>{o[e]=t[e]})),o.pollForEvents=()=>{if(!e.isOpen()||i())return t.pollForEvents()},e.addEventListener("message",(e=>{"file:metadata"===e.type&&Number.isFinite(e.aggregationSize)&&(r=Math.max(r,e.aggregationSize),i()&&t.getEventsNow())}))}},13563:t=>{"use strict";t.exports=function(t,e,n,r){if(!t)return t||[];const o=e&&"string"==typeof e?[e]:e,i=n&&n.map((t=>t.url))||[];return e&&"default"!==e?"allMaps"===e?t.filter((t=>t&&t.context&&!t.context.recycleBin&&!i.includes(t.url))):"recycleBin"===e?t.filter((t=>t&&t.context&&t.context.recycleBin&&!i.includes(t.url))):t.filter((t=>!(t&&t.context&&t.context.recycleBin))).filter((t=>!i.includes(t.url))).filter((t=>{let e=!1;return o.forEach((n=>{e=e||!(t&&t.context&&t.context[n])})),r?e:!e})):t.filter((t=>t&&t.context&&!t.context.recycleBin&&(!t.tags||!t.tags.length)&&!i.includes(t.url)))}},83636:(t,e,n)=>{"use strict";const r=n(21288);t.exports=function(t,e){let n=[],o={};const i=this,s=e&&e.recalculateFileList||r.recalculateFileList,a=e=>{n=e||n||[],o=s(n,t)};o=s([],t),i.recalculate=()=>a(),i.setFiles=t=>{a(t)},i.hasLegacyTeamFiles=()=>!!n.find((t=>t.context.teamFile)),i.setListSortType=e=>{t.setSortType(e),a()},i.getCurrentTags=()=>o.tags.slice(0),i.getCurrentFilteredTags=()=>o.filteredTags.slice(0),i.setListFilterType=e=>{t.setFilterType(e),a()},i.setListFilterInvert=e=>{t.setListFilterInvert(e),a()},i.getCurrentFilteredList=()=>o.visibleFiles,i.hasFiles=()=>!(!n||!n.length),i.getCurrent=()=>o}},67142:(t,e,n)=>{"use strict";const r=n(39700);t.exports=function(t,e,n){if(!t||!e)throw new Error("invalid-args");let o=0,i=!1;const s=this,a=n&&n.s3SignatureValid||r;s.getLastHistoryByte=()=>o,s.setLastHistoryByte=t=>o=t,s.setHistoryPath=t=>{i=t},s.loadChangesHistory=n=>{const r=n&&{range:n}||!1,s=n&&n.startByte||0;return(a(i)?Promise.resolve(i):e.getHistoryFileUrl(t.getPathInfo()).then((t=>(i=t,t)))).then((t=>e.loadChangesHistoryFile(t,r))).then((t=>{const e=t.data,n=t.headers&&t.headers["content-length"],r=n&&parseInt(n)||0;return o=s+r,e&&e.length?e.split("\n").filter((t=>!!t)).map((t=>JSON.parse(t))):[]})).catch((t=>{if("end-of-file"===t)return[];throw t}))}}},31031:t=>{"use strict";t.exports=function({config:t,pageState:e,goldFileApi:n,s3FileModel:r,collaborationModel:o,resourceManager:i,navigatorShim:s,goldFileChangesModel:a},c){if(!(t&&e&&n&&r&&o&&i&&s))throw"invalid-args";const l=c?.thumbnailBuilder;this.initFile=c=>{if(!c)return Promise.reject("invalid-args");let d;return e.isInitialising?Promise.resolve():e.isInitialised?(c("reauthenticated"),Promise.resolve()):(e.isInitialising=!0,c("fileLoading"),n.loadFile(t,e,r,o,i,s,a).then((t=>{d=t,d.free?c("freeFileLoaded"):c("goldFileLoaded"),c("fileLoaded",d.fileId,e.getPageTitle()),c("fileInfo",d),c("ready")})).then((()=>{if(d&&d.fileId&&d.gold&&!e.hasThumbnail()&&l)return l.build().catch((t=>(c("thumbnail-creation-failed",t),!1)))})).then((t=>{if(t)return r.uploadAsset(d.fileId,t,{isThumbnail:!0})})).catch((t=>{"network-error"===t&&(t="error-"+t),c("error",t)})).then((()=>e.isInitialising=!1)).then((()=>(a.isTrashed()&&c("trashed"),!0))))}}},53505:(t,e,n)=>{"use strict";const r=n(89080),o=n(83636),i=n(55593),s=n(57609),a=n(90485);t.exports=function(t,e,n,c,l){if(!(t&&e&&n&&c))throw new Error("invalid-args");let d=!1,u=[],h=[];const f=r(this),p=l&&l.goldFileFilteredList||new o(t),g=()=>!u.find((t=>!(t=>t&&t.context&&(t.context.myFile||t.context.teamFile))(t))),m=(t,e)=>{if(f.dispatchEvent("error",t),!e)throw t},v=e=>{const n=(e=>{const n=p.getCurrent(),r=t.getPreferences(),o=r&&r.filterType,i="default"===o,a=Array.isArray(o),c=n&&n.filteredTags&&n.filteredTags.length,d=!!(i&&n.fileList.length&&n.tags.length),h=p.hasFiles(),f=i&&h&&n.tags.length&&!d;return(t=>{if(t&&t.length){const e=u.filter((e=>t.includes(e)));if(e.length)u=e;else{const e=l&&l.pageState,n=e&&e.getFileId(),r=n&&`_v2/${n}`,o=r&&t.filter((t=>t&&t.url===r))||[];u=r?o:[t[0]]}}else u=[]})(n&&n.visibleFiles),Object.assign({hasLegacyTeamFiles:p.hasLegacyTeamFiles(),showNoMapsMessage:0===n.visibleFiles.length,showTagFiltersHeader:!i&&a,showUntaggedMapsHeader:d,showNoUntaggedMapsHeader:f,showNoTagsHeader:i&&h&&!d&&!f,canTrash:g(),filterType:o,currentAction:e,activatedFiles:u.slice(0),activatedFilesContext:s(u),preferences:r,showTagFilters:c&&(i||a)},n)})(e);f.dispatchEvent("context",n)},y=()=>h&&h.includes("ListGoldMaps")?(v("listingFiles"),e.listFiles().then((t=>(p.setFiles(t),v(),p.getCurrentFilteredList()))).catch((t=>{if("action-not-allowed"===t)return p.setFiles([]),v(),p.getCurrentFilteredList();v(),m(t,!0)}))):(p.setFiles([]),v(),Promise.resolve(p.getCurrentFilteredList())),w=(t,n,r)=>{if(!t||!n||!r)return Promise.reject(new Error("invalid-args"));const o=n.url.split("/")[1],i="owner"===n.role?"pointer":n.role;return i?e.updateTag(t,`${o}.${i}`,r).then((()=>({file:n,tag:r,changed:!0}))).catch((t=>({file:n,tag:r,changed:!1,error:t}))):Promise.resolve()},b=()=>{p.recalculate(),f.toggleContextMenuForFile()},E=t=>{const e=p.getCurrentFilteredList(),n=u[0];if(e&&e.length&&t&&e.includes(t))return f.dispatchEvent("toggleContextMenu"),n!==t&&(u=[t],v()),!0},x=()=>{const e=t.getPreferences(),n=e&&e.filterType,r=Array.isArray(n),o=r&&p.getCurrent();return!(!r||o.filteredTags.length)};f.setAllowedActions=t=>{h=t||[]},f.selectFile=t=>E(t),f.toggleActivatedFile=t=>{u.includes(t)?u=u.filter((e=>e!==t)):u.push(t),v()},f.getActivatedFiles=()=>u.slice(0),f.load=()=>y().then((t=>x()?(f.setFilterDefault(),y()):t)),f.refresh=()=>{if(!d)return d=!0,p.setFiles([]),v("refreshingFiles"),e.buildSavedList().catch((t=>m(t,!0))).then((()=>y())).then((t=>(d=!1,t)))},f.toggleContextMenuForFile=(t,e)=>{if(!E(t))return;const n=g(),r=t.context.recycleBin?"small":"medium";f.dispatchEvent("toggleContextMenu",Object.assign({size:r,position:e,canTrash:!!n,description:t.description},t.context))},f.tagsForFiles=t=>{if(!t||!t.length)return!1;const e={};return p.getCurrentTags().forEach((n=>{const r=t.filter((t=>!(!t||!t.tags)&&t.tags.includes(n)));r.length?r.length===t.length?e[n]="all":e[n]="some":e[n]="none"})),e},f.addTagForFiles=(n,r)=>{if(!n||!r||!Array.isArray(r))return Promise.reject(new Error("invalid-args"));const o=[];return a(r,(t=>t.tags&&t.tags.includes(n)?Promise.resolve():w("add",t,n).then((r=>{if(r.error&&o.push(r),r.changed)return t.tags=t.tags||[],t.tags.push(n),e.fileItemDecorator(t)})))).then((()=>{const e=p.getCurrentTags(),r=t.getListFilterInvert(),i="default"===t.getFilterType(),s=p.getCurrentFilteredTags();if(!r&&!i&&e.includes(n)&&s.includes(n)||(p.recalculate(),v()),o.length)throw o[0]}))},f.removeTagForFiles=(t,n)=>{if(!t||!n||!Array.isArray(n))return Promise.reject(new Error("invalid-args"));const r=[];return a(n,(n=>n.tags&&n.tags.includes(t)?w("remove",n,t).then((o=>{if(o.error&&r.push(o),o.changed)return n.tags=n.tags||[],n.tags=n.tags.filter((e=>e!==t)),e.fileItemDecorator(n)})):Promise.resolve())).then((()=>{if(p.recalculate(),x()?f.setFilterDefault():v(),r.length)throw r[0]}))},f.getPreferedOpenType=()=>t.getOpenType(),f.setOpenInplacePreferred=()=>{t.setOpenType("inplace"),y()},f.setOpenInNewTabPreferred=()=>{t.setOpenType("newtab"),y()},f.getPreferedListType=()=>t.getListType(),f.setIconsListPreferred=()=>{t.setListType("icons"),v()},f.setSimpleListPreferred=()=>{t.setListType("list"),v()},f.setListSortType=t=>{p.setListSortType(t),v()},f.setFilterForTags=t=>{t&&t.length?p.setListFilterType(t.map((t=>"tag:"+t))):p.setListFilterType("default"),v()},f.setFilterForTag=t=>{t?p.setListFilterType("tag:"+t):p.setListFilterType("default"),v()},f.setFilterMapsWithoutTags=()=>{p.setListFilterInvert(!0),v()},f.setFilterMapsWithTags=()=>{p.setListFilterInvert(!1),v()},f.setFilterCurrentFiles=()=>{p.setListFilterInvert(!1),p.setListFilterType("allMaps"),v()},f.setFilterDefault=()=>{p.setListFilterInvert(!1),p.setListFilterType("default"),v()},f.setFilterMyFiles=()=>{p.setListFilterInvert(!1),p.setListFilterType("myFile"),v()},f.setFilterTeamFiles=()=>{p.setListFilterInvert(!1),p.setListFilterType("teamFile"),v()},f.setFilterRecyleBin=()=>{p.setListFilterInvert(!1),p.setListFilterType("recycleBin"),v()},f.setFilterSharedFiles=()=>{p.setListFilterInvert(!1),p.setListFilterType("sharedFile"),v()},f.setSortByNameAscending=()=>{p.setListSortType("descriptionAscending"),v()},f.setSortByNameDescending=()=>{p.setListSortType("descriptionDescending"),v()},f.setSortByMostRecent=()=>{p.setListSortType("lastModifiedDescending"),v()},f.setSortByOldest=()=>{p.setListSortType("lastModifiedAscending"),v()},f.getListSortType=()=>{t.getSortType()},f.getCurrentList=()=>p.getCurrentFilteredList(),f.openSelectedMap=()=>{u.forEach((e=>{1===u.length&&"inplace"===t.getOpenType()?c.redirect(n+"/"+e.url):c.open(n+"/"+e.url)}))},f.openSelectedMapHistory=()=>{u.forEach((e=>{const n=e.url.split("/")[1];1===u.length&&"inplace"===t.getOpenType()?c.redirect("/history.html?fileId="+n):c.open("/history.html?fileId="+n)}))},f.copySelectedMap=()=>{u.forEach((t=>{c.open(n+"/"+t.url+"?intent=copyFile")}))},f.trashSelectedMap=()=>(f.dispatchEvent("trashing"),Promise.all(u.map((t=>{const r=i(t);return 1===r.version?(c.open(n+"/"+t.url+"?intent=trashFile"),Promise.resolve()):e.deleteFileListItem(r).then((()=>(t.trashTs=Math.floor(Date.now()/1e3),e.fileItemDecorator(t))))}))).then(b).then(v).catch((()=>f.dispatchEvent("error","trashing")))),f.untrashSelectedMap=()=>(f.dispatchEvent("untrashing"),Promise.all(u.map((t=>{const r=i(t);return 1===r.version?(c.open(n+"/"+t.url+"?intent=trashFile"),Promise.resolve()):e.undeleteFileListItem(r).then((()=>(delete t.trashTs,e.fileItemDecorator(t))))}))).then(b).then(v).catch((()=>f.dispatchEvent("error","untrashing")))),f.ensureReady=()=>u[0]&&p.hasFiles()?Promise.resolve(p.getCurrentFilteredList()):y()}},71597:t=>{"use strict";const e="gold-file-list-preferences",n="gold-file-list-type",r={listType:"icons",sortType:"descriptionAscending",filterType:"default",openType:"inplace",listFilterInvert:!1},o=function(t){const o=this,i=t?r:Object.assign({},r,{filterType:"allMaps"}),s=(()=>{const r=t&&t.getItem(n),o=t&&t.getItem(e),s=o&&Object.assign({},i,o)||Object.assign({},i);return r&&(t.removeItem(n),o||(s.listType=r,t.setItem(e,s))),s})(),a=()=>{if(!t)throw new Error("no-storage");t.setItem(e,(()=>{const t=Object.keys(i),e=Object.assign({},s);return Object.keys(s).forEach((n=>{t.includes(n)||delete e[n]})),e})())};o.setListFilterInvert=t=>{s.listFilterInvert=!!t,a()},o.getListFilterInvert=()=>!!s.listFilterInvert,o.getFilterType=()=>s.filterType,o.setFilterType=t=>{s.filterType=t,a()},o.getOpenType=()=>s.openType,o.setOpenType=t=>{s.openType=t,a()},o.getListType=()=>s.listType,o.setListType=t=>{s.listType=t,a()},o.getSortType=()=>s.sortType,o.setSortType=t=>{s.sortType=t,a()},o.getPreferences=()=>Object.assign({},s)};o.LIST_PREFERENCE_DEFAULTS=r,t.exports=o},21288:(t,e,n)=>{"use strict";const r="tag:",o=t=>"string"==typeof t&&t.startsWith(r),i=t=>{const e={};return t&&t.length&&t.forEach?(t.forEach((t=>{t&&t.context&&!t.context.recycleBin&&t.tags&&t.tags.length&&t.tags.forEach((t=>e[t]=!0))})),Object.keys(e).sort()):[]},s=t=>!(!t||!t.length)&&("string"==typeof t?t.startsWith(r):!!Array.isArray(t)&&t.filter(o).length),a=n(13563),c=n(37232);t.exports={calculateTags:i,isTagFilter:s,recalculateFileList:(t,e)=>{const n=c(t=t||[],e.getSortType()),r=n&&n.length&&i(n)||[],o=e.getFilterType(),l=e.getListFilterInvert(),d=r.length&&"default"===o,u=d&&c(t,"lastModifiedDescending").filter((t=>t&&t.context&&!t.context.recycleBin)).slice(0,5).slice(0,5)||[],h=a(n,o,u,l),f={listFilterInvert:!!l,quickList:u,hasQuickList:!!d,fileList:h,tags:r,filteredTags:[],visibleFiles:u.concat(h)};return l?f.filteredTags=f.tags:f.tags.length&&(f.filteredTags=s(o)?i(f.visibleFiles):f.tags),f}}},89142:t=>{"use strict";t.exports=function(t){let e;const n=t.createElement("input");n.setAttribute("type","file"),n.addEventListener("change",(function(){const r=e,o=n.files&&n.files[0];e=void 0,function(e){return e?t.readFileAsDataURL(e):Promise.reject("cancel")}(o).then((t=>({contents:t,type:o.type,name:o.name}))).then(r.resolve,r.reject)})),Object.freeze(Object.assign(this,{pickFile:function(t){return e&&e.reject("cancel"),e=function(){const t={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),t}(),n.value="",t?n.setAttribute("accept",t):n.removeAttribute("accept"),n.click(),e.promise}}))}},37232:t=>{"use strict";const e=(t,e)=>{const n=t&&t.description&&t.description.toUpperCase()||"",r=e&&e.description&&e.description.toUpperCase()||"";return n<r?-1:n>r?1:-1},n=t=>(e,n)=>t(n,e),r=(t,e)=>(t&&t.lastModified||0)>(e&&e.lastModified||0)?1:-1,o={descriptionAscending:e,descriptionDescending:n(e),lastModifiedAscending:r,lastModifiedDescending:n(r)},i=e;t.exports=function(t,e){if(!t)return[];const n=Array.from(t),r=o[e]||i;return n.sort(r)}},43361:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t){let e="direct";const n=r(this);n.setFunnelId=function(t){e=t},n.step=function(n,r){t.log("goldFunnel",n+":"+r,e)}}},98591:(t,e,n)=>{"use strict";const r=n(54459);t.exports=function(t,e){if(!t||!e)throw"invalid-args";this.pack=function(n){const o=e.getFileId();n.forEach((function(e){const n=e&&e.attr&&e.attr.icon;n&&(n.metaData=r.metadataForGoldAsset(n.url,o),n.url=t.getResource(n.url))}))}}},17807:(t,e,n)=>{"use strict";const r=n(54459);t.exports=function(t,e){if(!t)throw"invalid-args";const n=function(n){const o=n&&n.attr&&n.attr.icon,i=e&&e.unpackGoldOnly,s=o&&o.url;return s&&(!i||o.metaData&&r.isGoldAssetMetadata(o.metaData))?t.convertToPng(s).then((function(t){o.url=t,delete o.metaData})).catch((()=>delete n.attr.icon)):Promise.resolve()};this.unpack=function(t){const o=function(t,e){if(!e||!t||!t.length)return t||[];const n=[];return t.forEach((function(t){const o=t&&t.attr&&t.attr.icon,i=o&&r.isGoldAssetMetadata(o.metaData);i&&i.fileId===e?(o.url=r.resourceIdFromAssetId(i.assetId),delete o.metaData):o&&o.url&&!o.url.startsWith("/assets/")&&n.push(t)})),n}(t,e&&e.pageState&&e.pageState.getFileId());return Promise.all(o.map(n))}}},52979:(t,e,n)=>{"use strict";const r=n(51135);t.exports=function(t,e,n){if(!t||!e||!n)throw"invalid-args";Object.freeze(Object.assign(this,{pickImage:async(o,i)=>{const s=await t.pickFile(".jpg,.jpeg,.png,.gif,"+r.join(","));try{const t=(t=>{if(r.indexOf(t.type)>-1)return{url:t.contents};throw"image-error"})(s),o=await n.calculateImageDimensions(t.url),a=e.getAllowedActions().uploadChanges,c=Object.assign({},o,t);if(a){i&&i.notify&&i.notify("uploading",c.url);const t=await n.addGoldAsset(c.url);Object.assign(c,{url:t})}return c}catch(t){throw"image-error"}}}))}},64645:(t,e,n)=>{"use strict";const r=n(13612);t.exports=function(t,e){const n=this;Object.keys(r).forEach((r=>n[r]=()=>function(n){e.redirect(`${t.editorUrl}/new?theme=${n}`)}(r)))}},88218:t=>{"use strict";t.exports=function(t){const e=t&&(t.typeLabel||t.type)||"personal";return t.prefix+t.price+t.postfix+" "+t.period+" "+e+" subscription"}},44136:(t,e,n)=>{"use strict";const r=n(54459),o=n(68684),i=n(20360),s="gold-resource-manager:asset";t.exports=function(t,e,n,a){let c={};const l=this,d="internal:",u=new RegExp("^"+d),h=e=>{if(!e||!e.length)return Promise.resolve([]);const o=e.filter((t=>t&&!c[r.resourceIdFromAssetId(t)]));return o.length?t.getAssetUrls(n.getFileId(),o,n.getPathInfo()).then((t=>r.resourceIdToUrlMap(t))).then((t=>(Object.keys(t).forEach((e=>c[e]=t[e])),o))):Promise.resolve([])},f=function(t){return{cmd:s,args:[t]}},p=function(t){return t&&t.cmd===s};l.resignUrls=function(e){const o=e&&e.filter(p);return function(e){const o=c&&Object.keys(c).map(r.assetIdFromResourceId)||[],i=a.getActiveContent(),s=function(){const t=Array.from(arguments),e=new Set;return t.forEach((t=>{t&&t.forEach((t=>{t&&e.add(t)}))})),Array.from(e).sort()}(i&&r.assetIdsFromContent(i),e,o),l=n.getFileId();if(!i)throw"not-initialized";return s.length?t.getAssetUrls(l,s,n.getPathInfo()).then((t=>r.resourceIdToUrlMap(t))).then((function(t){c=t})):(c={},Promise.resolve({}))}(o&&o.map((t=>t.args)).reduce(((t,e)=>t.concat(e)),[]).filter((t=>t)))},l.processAssetEvents=function(t){if(!t||0===t.length)return Promise.resolve(t);let e=[];return t.forEach((t=>{const n=[];t.events&&t.events.length&&t.events.forEach((t=>{p(t)?e=e.concat(t.args):n.push(t)})),t.events=n})),h(e).then((()=>t))},l.storeResource=function(t){const e=a.getActiveContent();if(!e)throw"not-initialized";return o(t)?d+e.storeResource(t):t},l.addGoldAsset=function(e){const o=n.getFileId();return t.uploadAsset(o,e).then((t=>{const e=r.resourceIdFromAssetId(t);return h([t]).then((()=>(a.dispatchLocalContentEvent(f(t)),e)))}))},l.hasUploadableAsset=function(t){return n.getAllowedActions().uploadChanges&&(r.getUploadableImage(t)||r.getUploadableAttachment(t))},l.uploadAsset=function(e){const o=n.getFileId();return r.uploadAssets(o,e,t).then(h).then((t=>t.forEach((t=>a.dispatchLocalContentEvent(f(t))))))},l.uploadAssetsAsChanges=async(t,e)=>{const n=i(a.getActiveContent()).filter(l.hasUploadableAsset),o=async t=>{const e=r.getUploadableAttachment(t),n=e&&await l.addGoldAsset(e.content);r.replaceAttachmentWithResourceId(a.getActiveContent(),t.id,n,e)},s=async t=>{const e=r.getUploadableImage(t),n=e&&await l.addGoldAsset(e.url);r.replaceImageWithResourceId(a.getActiveContent(),t.id,n)};if(!n.length)return void e();let c=n.length;t(n.length);for(const e of n)await s(e),await o(e),c-=1,t(c)},l.getResource=function(t){const e=a.getActiveContent(),n=c&&c[t];if(!e||!c)throw"not-initialized";return n||(u.test(t)?e.getResource(t.substring(d.length)):t)},l.calculateImageDimensions=function(t){const n=l.getResource(t);return e(n)}}},65454:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function({config:t,webSocketShim:e,authenticationModel:n,colors:o}){if(!t||"string"!=typeof t.websocketUrl||!e||!n)throw new Error("invalid-args");let i;const s=r(this),a={},c=t=>{const e=t.sessionId,n=Array.from(e).reduce(((t,e)=>t+e.charCodeAt(0)),0)%o.length;return o[n]},l=t=>{a[t.sessionId]||t.sessionId!==i&&(a[t.sessionId]=function(t){const e={description:t.userId,color:c(t)},n=Object.assign(e,t);return n.type&&delete n.type,n}(t),s.dispatchEvent("sessionAdded",a[t.sessionId]))},d=t=>{a[t.sessionId]&&t.sessionId!==i&&(s.dispatchEvent("sessionRemoved",a[t.sessionId]),delete a[t.sessionId])},u={"session:joined":l,"session:list":t=>{Object.values(a).forEach(d),t.sessions.forEach(l)},"session:left":d};s.getSessions=()=>a,s.getSession=t=>a[t],s.hasRemoteSessions=()=>!!Object.keys(a).length,s.ensureConnection=async({fileId:r,sessionId:o,clientSecret:a})=>{if(i===o&&e.isOpen())return;const c=await n.getUserId();try{await e.start(t.websocketUrl,{fileId:r,userId:c,sessionId:o,clientSecret:a}),i=o}catch(t){s.dispatchEvent("sessionError",t)}},e.addEventListener("error",(t=>s.dispatchEvent("sessionError",t))),e.addEventListener("message",(t=>{t&&t.type||(console.error(t),s.dispatchEvent("sessionError",t));const e=u[t.type];if(e)return e(t)}))}},27023:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function({goldSessionModel:t,mapModel:e,webSocketShim:n}){const o=r(this),i=t=>t&&"nodeSelectionChanged"===t.action;n.addEventListener("message",(e=>{if(e&&"client:message"===e.type){const n=e.data;if(Array.isArray(n)){const r=n.slice(0).reverse().find(i);if(r){const n=t.getSession(e.sessionId),i=Object.assign({senderSession:n},r);n&&o.dispatchEvent(r.action,i)}}}})),e.addEventListener("nodeSelectionChanged",(async(e,r)=>{r&&t.hasRemoteSessions()&&n.send({action:"nodeSelectionChanged",nodeId:e})})),t.addEventListener("sessionAdded",(()=>{n.send({action:"nodeSelectionChanged",nodeId:e.getSelectedNodeId()})})),e.addEventListener("mapViewResetRequested",(()=>{n.send({action:"nodeSelectionChanged",nodeId:e.getSelectedNodeId()})}))}},57950:t=>{"use strict";t.exports={viewer:"view only",collaborator:"view & edit",invite:"invited"}},28890:(t,e,n)=>{"use strict";const r=n(37892),o="google",i=n(59050);t.exports=function(t,e,n,s,a){if(!(t&&e&&n&&s))throw new Error("invalid-args");let c;const l=this,d=a&&a.authenticationModel,u=a&&a.requireConfirmation,h=a&&a.allowUnlicensed,f=function(t){return d&&t&&d.authenticatedProfile((()=>t)),t},p=function(t){const e=!!["blocked","networkError"].includes(t)&&"google-blocked";throw d&&d.authenticationFailed(e),t},g=t=>(d&&d.setSuggestedEmail(t.email),t),m=(r,o,i)=>e.exec("license/request_license_using_google",{token:r,storageName:n}).catch((e=>{const n=t=>m(t,o,i-1);if(o&&["not-registered","domain-expired","domain-not-purchased"].includes(e))return!1;if("authentication-failed"===e&&i)return t.refreshToken().then(n);if(["server-error","network-error"].includes(e)&&i)return n(r);throw e})),v=function(t,e){return m(t.token,e,3).then((e=>r(o,t.email,e,t,{domain:t.hd})))},y=function(e,n){return d&&d.authenticationStarted(),t[e](i.extend({},s,n)).then(g).then((t=>v(t,h))).then((t=>(c=t,u?t:f(t)))).catch(p)};l.providerName=()=>o,l.confirm=()=>f(c),l.reauthenticateGold=function(){return d?d.getProfile().then((t=>t&&t.provider===o&&t.providerProfile)).then((t=>{if(t&&t.token)return t;throw"invalid-args"})).then((t=>v(t))).then(f):Promise.resolve(c)},l.getEmailAddress=function(){return t.dialogAuth(i.extend({},s,{prompt:"select_account"})).then((t=>{if(!t||!t.email)throw"server-error";return t})).then(g).then((t=>t.email))},l.backgroundAuthenticate=function(t){const e={};return t&&(e.login_hint=t),y("headlessAuth",e)},l.modalAuthenticate=function(t){return y("dialogAuth",{login_hint:t})},l.changeAccount=function(){return y("dialogAuth",{prompt:"select_account"})}}},60458:(t,e,n)=>{"use strict";const r=n(85714),o=n(43637),i="google:auth-response",s="google-authenticated#";t.exports=function(t,e,n){if(!t||!n||!e)throw new Error("invalid-args");const a=this;a.getUserProfile=function(t,e){return n.get("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:"Bearer "+t}}).catch((()=>{throw"networkError"})).then((n=>{if(n&&n.id){if(e&&n.id!==e)throw"userIdMismatch";return n.token=t,n}throw"networkError"}))},a.validateCachedToken=async function(n){const r=e.getJsonStorage().getItem(i),s=n.scope||t.scope;if(!r)throw"not-authenticated";if(r.expiry<Date.now())throw"not-authenticated";if(o(r.scope,s))throw"not-authenticated";return r.accessToken},a.authorize=function(n){const a=Math.random().toString(),c=n&&n.scope||t.scope,l=n&&n.redirectPage||"/google-authenticated.html",d={client_id:t.client_id,redirect_uri:e.getOrigin()+l,response_type:"token",scope:c,state:a,include_granted_scopes:"true",login_hint:n&&n.login_hint,prompt:n&&n.prompt},u=e.encodeUrlParams("https://accounts.google.com/o/oauth2/v2/auth",d),h=new Promise(((t,l)=>{let d=0;const u=function(n){const h=function(t){if(t.data&&t.data.startsWith(s)&&t.origin===e.getOrigin())return r(t.data.substring(s.length-1))}(n);if(h){if(d&&e.clearTimeout(d),e.removeMessageListener(u),!function(t,e,n){return!t.error&&t.state===n&&!(!t.access_token||!t.expires_in)&&!o(t.scope,e)}(h,c,a))return l("not-authenticated");e.getJsonStorage().setItem(i,{accessToken:h.access_token,expiry:Date.now()+1e3*parseInt(h.expires_in),scope:h.scope}),t(h.access_token)}};n&&n.targetFrame&&(d=e.setTimeout((()=>{e.removeMessageListener(u),l("not-authenticated")}),5e3)),e.addMessageListener(u)}));return n&&n.targetFrame?e.open(u,n.targetFrame,!0):e.popup(u),h},a.disconnect=function(){const t=e.getJsonStorage().getItem(i);return!!t&&n.get(`https://accounts.google.com/o/oauth2/revoke?token=${encodeURIComponent(t.accessToken)}`)},a.signOut=function(){e.getJsonStorage().remove(i)},a.getToken=function(){const t=e.getJsonStorage().getItem(i);return!!t&&!(t.expiry<Date.now())&&t.accessToken},a.refreshToken=function(t){return a.authorize(Object.assign({},t,{prompt:"none",redirectPage:"/google-authenticated-frame.html",targetFrame:"GoogleAuthIframe"}))}}},43637:t=>{"use strict";t.exports=function(t,e){const n=t&&t.split(" ")||[];return!!(e&&e.split(" ")||[]).find((t=>!n.includes(t)))}},99900:(t,e,n)=>{"use strict";const r=n(27564);t.exports=function(t){const e=function(t,n,o){return r(t).forEach((function(t,r){const i=function(t,e){return t?`${t}.${e}`:String(e)}(o,r+1);var s;(s=t)&&s.attr&&s.attr.group||(n[t.id]=i),e(t,n,i)})),n};return e(t,{})}},63782:(t,e,n)=>{"use strict";const r=n(89080),o=n(91614),i=n(37758),s=n(14343),a=n(95046);t.exports=function(t){const e=r(this),{collaborationModel:n,navigatorShim:c,maxInitialEvents:l}=t;if(!n||!c||!l)throw new Error("invalid-args");let d,u,h;e.restoreUpTo=function(t){if(!u)throw new Error("history model not initialised");return e.dispatchEvent("restoringHistory"),new Promise((e=>{c.setTimeout((()=>{n.initializeSession(n.getLocalSessionId(),JSON.parse(d),u.slice(0,t+1)),e()}),100)})).then((()=>e.dispatchEvent("activeIndex",t)))},e.getEventCount=function(){return u.length},e.getEventSummary=function(t){const e=u&&u[t],n=e&&o(e.cmd,e.args);return!!e&&{index:t,collaborator:e.collaborator?.displayName,ts:e.ts,description:n,nodeId:s(e.cmd,e.args),ephemeral:!n||i(e.cmd,e.args)}},n.addEventListener("newSession",((t,n,r,o)=>{if(!h){const i=Math.max(o.length-l,0),s=t&&t.attr&&t.attr["watermark-bytes"],c=o.slice(0,i);u=o.slice(i),d=JSON.stringify(a(r,n,c)),h=n,e.dispatchEvent("newSession"),u.length&&(e.dispatchEvent("eventCount",u.length),e.dispatchEvent("activeIndex",u.length-1)),e.dispatchEvent("hasWatermark",!!s)}})),n.addEventListener("localContentEvent remoteContentEvent",((t,n)=>{const r=n?t.collaborator||{sessionId:n}:{displayName:"You",sessionId:h},o=Object.assign({ts:Date.now(),collaborator:r},t);u.push(o),e.dispatchEvent("eventCount",u.length)}))}},25509:(t,e,n)=>{"use strict";const r=n(89080),o=n(59050);t.exports=function(t,e,n,i){let s=!1,a=!1;const c=r(this),l=function(t){n(t.url).then((function(e){const n=s&&s.position;s=o.extend({},t,{width:e.width,height:e.height,position:n||"left"}),a?c.dispatchEvent("stage","confirm"):c.save()}),(function(){c.dispatchEvent("stage","image-error")}))},d=function(t){"cancel"===t?c.dispatchEvent("cancel"):c.dispatchEvent("stage","image-error")},u=function(t,e){c.dispatchEvent("stage",t,e)},h=function(t){c.dispatchEvent("pickerActive"),e.pickImage(t,{notify:u}).then(l,d)};t.addEventListener("nodeIconEditRequested",(function(){c.editIconForSelectedNode()})),t.addEventListener("progressIconEditRequested",(function(){c.editIconProgressIcon()})),c.save=function(){a?s?t.setIcon("icon-editor",s.url,s.width,s.height,s.position,void 0,s.metaData):t.setIcon(!1):s&&t.dropImage(s.url,s.width,s.height,void 0,void 0,s.metaData),c.dispatchEvent("complete")},c.addPictureNode=function(){a=!1,c.pickImage()},c.editIconProgressIcon=function(){a=!0,s=o.clone(t.getIcon()),s?(c.dispatchEvent("reload"),c.dispatchEvent("stage","view")):c.pickImage()},c.editIconForSelectedNode=function(){a=!0,s=o.clone(t.getIcon()),s?c.dispatchEvent("stage","view"):c.pickImage()},c.getCurrentIcon=function(){return s},c.removeIcon=function(){s=!1,c.save()},c.setDimensions=function(t,e){s&&(s.width=parseFloat(t),s.height=parseFloat(e))},c.setPosition=function(t){s&&(s.position=t)},c.pickImage=function(){i?i.backgroundAuthenticate().then(h,(function(){c.dispatchEvent("stage","auth")})):h()},c.authorise=function(){i.modalAuthenticate().then(h,(function(){c.dispatchEvent("stage","auth-fail")}))}}},15257:(t,e,n)=>{"use strict";const r=n(54459);t.exports=function(t,e){const n=function(n,o){let i=n.url,s=!1,a=!1;const c=i&&r.isGoldAssetId(i);return e&&(i=e.getResource(i)),c&&o&&o.sendSignedGoldAsserUrls?(n.url=i,Promise.resolve()):(o&&o.imageScale&&(s=n.width*o.imageScale,a=n.height*o.imageScale),t.convertToPng(i,s,a).then((t=>n.url=t)))};Object.freeze(Object.assign(this,{localiseSingleIcon:function(t,e){const r=t&&t.attr&&t.attr.icon;return r&&n(r,e)},localiseBackgroundImage:async function(t,e){if(t?.attr?.themeOverrides?.canvas?.icon&&await n(t?.attr?.themeOverrides?.canvas?.icon,e),t?.theme?.canvas?.icon){const r=JSON.parse(JSON.stringify(t.theme));await n(r.canvas.icon,e),t.theme=r}},localiseIcons:async function(t,r,o){const i=r(t);return i&&i.length>0&&(await(e&&e.resignUrls?e.resignUrls():Promise.resolve()),await Promise.all(i.map((t=>n(t,o))))),t}}))}},59484:t=>{"use strict";t.exports=function(t,e,n){if(!t||!e||!n)throw new Error("invalid-args");let r,o=!1;n.addEventListener("fileLoaded",(function(e,n){o=n===t.defaultFileTitle})),n.addEventListener("renamed",(e=>{o=e===t.defaultFileTitle})),e.addEventListener("newSession",(function(t){r=t.getDefaultRootId()})),e.addEventListener("localContentEvent",(function(e){if(!o)return;const i=(t=>{if(!(t&&t.args&&Array.isArray(t.args)&&t.args.length&&["batch","updateTitle"].includes(t.cmd)))return!1;if("batch"===t.cmd){const e=t.args.find((t=>Array.isArray(t)&&"updateTitle"===t[0]&&t[1]===r));return e&&Array.isArray(e)&&e[2]}return t.args[0]===r&&t.args[1]})(e);i&&i!==t.defaultFileTitle&&n.renameFromDefault(i)}))}},70791:t=>{"use strict";t.exports=function(t,e,n){if(!t||!e||!n)throw new Error("invalid-args");const r=t.getQueryStringAsMap().intent;let o;r&&["trashFile","untrashFile","copyFile"].includes(r)&&(o="copyFile"===r?n.start:e[r],o&&e.addEventListener("goldFileLoadComplete",o))}},37758:t=>{"use strict";t.exports=function(t,e){return"updateAttr"===t&&e&&Array.isArray(e)&&"collapsed"===e[1]}},18079:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t){const e=this;e.setItem=function(e,n){return n?t.setItem(e,JSON.stringify(n)):(t.removeItem(e),!1)},e.getItem=function(e){const n=t.getItem(e);try{return JSON.parse(n)}catch(t){}},e.remove=function(e){t.removeItem(e)},e.getKeysWithPrefix=e=>t&&Object.keys(t).filter((t=>t.startsWith(e)))||[],e.removeKeysWithPrefix=function(e){return r.isEmpty(e)?0:function(e){const n=Object.keys(t),o=r.filter(n,(function(t){return 0===t.indexOf(e)}));return r.each(o,(function(e){t.removeItem(e)})),o.length}(e)}}},16952:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t,e){let n;const o=r(this),i=function(){const t={labels:n};t&&o.dispatchEvent("context",t)},s=function(r){n===r?(t.setLabelGenerator(!1,r),n=!1):r&&e[r]?(n=r,t.setLabelGenerator(e[r],r)):(n=!1,t.setLabelGenerator(!1,r)),i()};t.addEventListener("labelGeneratorChange",(function(t,r){n=!!(r&&t&&e[t])&&t,i()})),Object.keys(e).forEach((t=>{o[`toggle${t}`]=()=>s(t)})),o.deactivate=function(){n&&s(!1)}}},19949:t=>{"use strict";t.exports=function(){let t=0;return function(){return t+=1,1e3*t}}},34623:(t,e,n)=>{"use strict";const r=n(89080),o=n(78502);t.exports=function(t,e,n,i,s){const a=r(this),c=async function(t){const r=await n({export:{startFrom:t}}),s=o(r),a=JSON.stringify(s),c=await e.createFile(i.getSuggestedSubmapName(t),!1,a);return await(async t=>{if(t&&t.id&&t.id.split&&e.requestWatermarkForFileKey)try{const n=t.id.split("/"),r=n[n.length-1];await e.requestWatermarkForFileKey(`${r}.pointer`,!0)}catch(t){console.error(t)}})(c),c};Object.freeze(Object.assign(this,{extractSubmap:async function(){try{a.dispatchEvent("stage","progress");const e=i.getActivatedNodeIdsWithLayouts().sort(((t,e)=>e.layout.level-t.layout.level));for(const n of e){const e=n.nodeId,r=await c(e);i.replaceSubmapWithLink(e,s.getOrigin()+t.editorUrl+"/"+r.id)}a.dispatchEvent("stage","done")}catch(t){"not-authenticated"===t?a.dispatchEvent("stage","error-not-authenticated"):a.dispatchEvent("stage","error")}}}))}},23053:t=>{"use strict";t.exports=function t(e,n,r){if(!e||!n)throw new Error("invalid-args");const o=e.getPathInfo();return o&&o.goldFileShare?Promise.resolve([]):n.unaggregatedChanges(o,{fromChangeKey:r}).then((r=>{if(!r)return[];let o=[];return r.content&&r.content.length&&(o=o.concat(r.content)),r.ommittedFiles?t(e,n,r.lastFileKey).then((t=>o.concat(t))):o}))}},29103:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t,e,n,o){let i;const s=r(this),a=function(e,n,r,o){s.cleanup(),i=t.toObjectUrl(e,n),s.dispatchEvent("result",o,r+"."+o,i),s.dispatchEvent("stage","exported")},c=function(t){return o.getCurrentName()||t.title||"Exported-Mind-Mup"};s.cleanup=function(){i&&(t.revokeObjectUrl(i),i=void 0)},s.exportToMM=function(){return e.makeExportable().then((t=>{a(n(t),"application/x-freemind",c(t),"mm")}),(()=>{s.dispatchEvent("stage","error")}))},s.exportToMMXml=function(){e.makeExportable().then((t=>{a(n(t),"text/xml",c(t),"mm")}),(()=>{s.dispatchEvent("stage","error")}))},s.exportToMup=async()=>{s.dispatchEvent("stage","progress");try{const t=await e.makeExportable();a(JSON.stringify(t,null,2),"application/json",c(t),"mup")}catch(t){console.error(t),s.dispatchEvent("stage","error")}}}},47571:t=>{"use strict";t.exports=function(t,e){const n=/<image xlink:href="(https:\/\/[^"]*)"/g,r=[];let o,i=0;do{o=n.exec(t),o&&(r.push(t.slice(i,o.index)),r.push('<image xlink:href="'),r.push({url:o[1]}),i=o.index+o[0].length-1)}while(o);return i<t.length&&r.push(t.slice(i,t.length)),Promise.all(r.map((function(t){return"string"==typeof t?t:e(t.url)}))).then((t=>t.join("")))}},97002:(t,e,n)=>{"use strict";const r=n(95046),o=n(78502);t.exports=function(t,e,n,i,s,a){const c=function(t){return t&&t.resources&&(t.resources=void 0),t};Object.assign(this,{makeExportable:function(l,d){const u=function(t){const r=e.getActiveContent();return t&&t.export&&t.export.startFromSelected?r.findSubIdeaById(n.getSelectedNodeId())||e.getActiveContent():t?.export?.startFrom?r.findSubIdeaById(t?.export?.startFrom)||e.getActiveContent():r}(l),h=u.title||function(){const t=e.getActiveContent();return t.title||t.findSubIdeaById(t.getDefaultRootId()).title}(),f=o(r(JSON.parse(JSON.stringify(u)))),p=a&&a.localiserOptions||d&&{imageScale:!d.free&&l&&l.export&&parseFloat(l.export.scale),sendSignedGoldAsserUrls:!!d.sendSignedGoldAsserUrls};return f.title=h,a&&a.literalTheme||(f.attr&&f.attr.themeOverrides&&delete f.attr.themeOverrides,l&&l.export&&l.export.imageBackground?(f.theme=JSON.parse(JSON.stringify(i.getThemeJSON({canvas:{backgroundColor:l.export.imageBackground}}))),f?.theme?.canvas?.icon&&delete f.theme.canvas.icon):f.theme=i.getThemeJSON()),s&&(f.labels=s.getLabelMap()),t.localise(f,p).then(c)}})}},6642:(t,e,n)=>{"use strict";const r=n(59050),o=n(89080),i=n(1130),s=n(27564),a=n(78106),c=n(31385),l=n(45824),d={max:10,min:1},u={max:10,min:1},h=n(96887);t.exports=function({mapModel:t,nodeViewModel:e,maxBatchSize:n=2e3}){if(!t||!e)throw new Error("invalid-args");let f,p=!1;const g=o(this),m=t=>t&&t.ideas&&Object.keys(t.ideas).length,v=e=>!!e&&!!t.getEditingEnabled()&&!!t.getInputEnabled()&&void g.dispatchEvent("lineLabelEditRequested",e),y=function(e){return!!(t.getEditingEnabled()&&t.getInputEnabled()&&e&&e.type)},w=function(t){return t&&(!t.attr||!t.attr.group)},b=()=>{const n=t.getActivatedNodeIds().map((e=>t.findIdeaById(e))).filter((t=>t)),r={},o=n.map((t=>t&&t.attr&&t&&t.attr.style&&t.attr.style.fontMultiplier||1)),i=n.map((t=>e.getNodeViewForIdea(t))).filter((t=>t)),s=i.filter((t=>"surround"===t.theme?.borderType)),a=s.map((t=>t?.theme?.lineWidth||1)),c=!!n.find((t=>t.attr?.style?.cornerRadius)),l=Math.max.apply(this,o),f=Math.min.apply(this,o),m=Math.max.apply(this,a),v=Math.max.apply(this,a),y=s.map((t=>t?.theme?.cornerRadius)).filter((t=>Number.isFinite(t))),b=Math.min.apply(this,y),E=Math.max.apply(this,y),x=i.map((t=>t.theme?.nodeEditingContext?.allowedToggleAttributes||[])),S=!!s.length,A=n.map((t=>t.ideas&&Object.keys(t.ideas).length)),C=A.length&&A.reduce(((t,e)=>Math.min(t,e||0))),I=Array.isArray(x)&&x.length&&x.reduce(((t,e)=>t.filter((t=>e.includes(t)))));r.canStyle=!!n.find(w),r.canIncreaseFont=r.canStyle&&f<d.max,r.canDecreaseFont=r.canStyle&&l>d.min,r.canResetFont=r.canStyle&&(l>1||f<1),r.addLinkMode=p,r.canToggleCondensed=C>0&&Array.isArray(I)&&I.includes("condensed"),r.canStyleBorders=S,r.canIncreaseBorderWidth=S&&r.canStyle&&m<u.max,r.canDecreaseBorderWidth=S&&r.canStyle&&v>u.min,r.canResetBorderWidth=S&&r.canStyle&&(m>1||v<1),r.canIncreaseCornerRadius=S&&r.canStyle&&(!y.length||b<h.max),r.canDecreaseCornerRadius=S&&r.canStyle&&(!y.length||E>h.min),r.canResetCornerRadius=S&&r.canStyle&&c,g.dispatchEvent("context",r)},E=e=>{if(!t.isEditingEnabled()||!t.isEditingEnabled())return!1;const n=t.getIdea();t.applyToActivated((r=>{const o=((e,n,r)=>{const o=t.findIdeaById(e),i=o&&o.attr;return i&&i.style&&i.style.fontMultiplier||1})(r),i=parseFloat(o)+e;i<d.min||Math.abs(i-1)<.01?n.mergeAttrProperty(r,"style","fontMultiplier",!1):i>d.max||i<d.min||n.mergeAttrProperty(r,"style","fontMultiplier",i)}))};Object.assign(this,{editLineLabel:t=>v(t||f),setInputEnabled:t.setInputEnabled,isEditingEnabled:t.isEditingEnabled,updateLineProperty:(e,n,r)=>{let o=!1;return!!y(r=r||f)&&("connector"===r.type?o=t.getIdea().mergeAttrProperty(r.to,"parentConnector",e,n):"link"===r.type&&(o=function(e,n,r){const o=t.getIdea(),i=Object.assign({},o.getLinkAttr(e.ideaIdFrom,e.ideaIdTo,"style"));return i[n]=r,o.updateLinkAttr(e.ideaIdFrom,e.ideaIdTo,"style",i)}(r,e,n)),o&&g.dispatchEvent("lineUpdated"),o)},removeLine:e=>{if(!y(e=e||f))return!1;if("link"===e.type)t.removeLink("mouse",e.ideaIdFrom,e.ideaIdTo);else{if("connector"!==e.type)throw"invalid-args";t.selectNode(e.to),t.makeSelectedNodeRoot()}},getSelectedLine:()=>f,increaseNodeFontMultiplier:()=>{E(.25)},decreaseNodeFontMultiplier:function(){E(-.25)},nodeTextAlignLeft:()=>{t.updateStyle("mouse","textAlign","left")},nodeTextAlignRight:()=>{t.updateStyle("mouse","textAlign","right")},nodeTextAlignCenter:()=>{t.updateStyle("mouse","textAlign","center")},resetNodeFontMultiplier:()=>{t.updateStyle("mouse","fontMultiplier",!1)},transitiveCollapse:()=>{let e=1;const n=t.getSelectedNodeId(),r=t.getIdea(),o=r.findSubIdeaById(n),i=function(t,n){t.getAttr("collapsed")||m(t)&&(s(t).forEach((t=>i(t,n+1))),n>e&&(e=n))},c=function(t,n){t.getAttr("collapsed")||m(t)&&n>=e&&r.updateAttr(t.id,"collapsed",!0)};return i(o,1),r.batch((()=>{a(o,c,!0,1)}))},resetPositioning:function(){const e=t.getIdea(),n=t.getSelectedNodeId(),r=e.findSubIdeaById(n),o=t=>{e.updateAttr(t.id,"position",!1)};return e.batch((()=>{a(r,o,!0,1)}))},transitiveUncollapse:()=>{const e=[],n=[],r=t.getSelectedNodeId(),o=t.getIdea(),i=o.findSubIdeaById(r),a=function(t){t.getAttr("collapsed")?(n.push(t.id),s(t).forEach((t=>{m(t)&&e.push(t.id)}))):s(t).forEach(a)};return!!i&&(a(i),o.batch((()=>{e.forEach((t=>o.updateAttr(t,"collapsed",!0))),n.forEach((t=>o.updateAttr(t,"collapsed",!1)))})))},toggleAddLinkMode:()=>{if(!t.getEditingEnabled()||!t.getInputEnabled())return!1;p=!p,b()},toggleNodeStyleName:e=>{if(!t.getEditingEnabled()||!t.getInputEnabled()||!e||"string"!=typeof e)return!1;const n="styleNames",r=t.getSelectedNodeId(),o=t.getIdea(),s=o.findSubIdeaById(r).getAttr(n);o.updateAttr(r,n,i(s,e))},canStyleIdea:w,editSelectedNodeStyle:()=>{const e=t.getSelectedNodeId(),n=t.findIdeaById(e);w(n)&&g.dispatchEvent("editNodeStyle",n)},updateNodeStyles:e=>{if(!t.getEditingEnabled()||!t.getInputEnabled()||!e||0===Object.keys(e).length)return!1;const n=t.getIdea();t.applyToActivated((o=>{const i=t.findIdeaById(o);w(i)&&Object.keys(e).forEach((i=>{const s=e[i],a=t.getStyleForId(o,i);!s&&!a||r.isEqual(a,s)||n.mergeAttrProperty(o,"style",i,s)}))}))},FONT_INCREMENT:.25,FONT_MULTIPLIER_BOUNDS:d,BORDER_WIDTH_BOUNDS:u,CORNER_RADIUS_BOUNDS:h,resetLine:e=>{e=e||f;const n=t.getIdea();if(!y(e))return!1;if(!e||!["connector","link"].includes(e.type))return!1;if("connector"===e.type){const r=t.getCurrentLineAttr(e),o=r&&r.themeAutoColor,i=!!o&&{themeAutoColor:o,color:o},s=n.updateAttr(e.to,"parentConnector",i);return s&&g.dispatchEvent("lineUpdated"),s}n.resetLink(e.ideaIdFrom,e.ideaIdTo)&&g.dispatchEvent("lineUpdated")},getSelectedLineAttr:()=>!!y(f)&&t.getCurrentLineAttr(f),toggleCondensed:()=>{if(!t.getEditingEnabled())return!1;const e=t.getIdea();t.applyToActivated((t=>{const n=!!e.getAttrById(t,"condensed");e.updateAttr(t,"condensed",!n)}))},replaceSubmapWithLink:(e,n)=>{if(!e||!n)throw new Error("invalid-args");const r=t.getIdea(),o=r.findSubIdeaById(e),i=Object.values(o.ideas||{}).map((t=>t.id)),s=o.title||"",a=[n,c.stripLink(s)].filter((t=>t));return r.batch((()=>{i.forEach((t=>r.removeSubIdea(t))),r.updateTitle(e,a.join(" "))}))},getSuggestedSubmapName:e=>{if(!e)throw new Error("invalid args");const n=t.getIdea().findSubIdeaById(e).title||"";return l(n.trim()||"Untitled map")},getSelectedId:()=>t.getSelectedNodeId(),getActivatedNodeIdsWithLayouts:()=>{const e=t.getActivatedNodeIds(),n=t.getCurrentLayout();return e.map((t=>({nodeId:t,layout:n.nodes[t]})))},getAllColors:({maxColors:n}={})=>{const r=new Set,o=t.getCurrentLayout(),i=()=>n&&n<=r.size,s=t=>{t&&!i()&&r.add(t)},a=o?.nodes&&Object.keys(o?.nodes)||[];for(const t of a){if(i())break;const n=e.getNodeViewForIdeaId(t);s(n?.theme?.backgroundColor),s(n?.theme?.lineColor),s(n?.theme?.text?.color)}return Array.from(r)},collapseAll:()=>{const e=t.getIdea(),r=[],o=function(t){if(t>=r.length)return;const i=r.slice(t,t+n);e.updateAttrBulk(i,"collapsed",!0),o(t+n)};return e.traverse((t=>{!t.getAttr("collapsed")&&m(t)&&t.id!==e.id&&r.push(t.id)})),o(0)},removeAllStyling:()=>{const e=t.getIdea(),r=[],o=function(t){if(t>=r.length)return;const i=r.slice(t,t+n);e.batch((()=>{0===t&&e.updateAttr(e.id,"themeOverrides",!1),e.updateAttrBulk(i,"style",!1)})),o(t+n)};return e.traverse((t=>{t.getAttr("style")&&r.push(t.id)})),o(0)}}),t.addEventListener("connectorSelected",(t=>{if(!t)return!1;f=t,g.dispatchEvent("lineSelected",f)})),t.addEventListener("linkSelected",(t=>{f=t,g.dispatchEvent("lineSelected",f)})),t.addEventListener("lineLabelClicked",v),t.addEventListener("nodeClicked",(e=>{p?(t.toggleLink("mouse",e),g.toggleAddLinkMode()):t.selectNode(e)})),t.addEventListener("layoutChangeComplete",b),t.addEventListener("activatedNodesChanged",b)}},10081:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t,e,n){if(!t||!e)throw"invalid-args";let o=!1;const i=r(this),s=function(t){o!==t&&(e.setTitle(t),i.dispatchEvent("mapNameChanged",t)),o=t};t.addEventListener("fileLoaded",((t,e)=>s(e))),t.addEventListener("renamed",s),n&&n.metadataSynchronizer&&n.metadataSynchronizer.addEventListener("title",s),i.getCurrentName=()=>o}},39190:(t,e,n)=>{"use strict";const r=n(89080),o=n(31180);t.exports=function(t,e,n){if(!t||!e||!n)throw new Error("invalid-args");let i=[],s={},a=[],c=!1,l=!1,d="gold";const u=r(this),h=()=>{const t=c&&c.fileId;return t?Promise.resolve(t):Promise.reject("not-loaded")},f=t=>{const e=c&&c.allowedActions,n=!(!e||c.new||c.free),r=!!i.length,o=!!i.find((t=>"team access"===t.role)),s=e&&e.share,u=!(o||!s||!a||!a.length),h={tab:d,canLoad:n,canInvite:s,canCreateCrowdlink:s,canRemove:s&&r,hasShareList:r,sharingList:i.slice(0),canInviteSubteam:u,sharableSubteams:u&&a||[],crowdlink:l};return t&&(h.activity=t),h},p=t=>(u.dispatchEvent("error",t),Promise.reject(t)),g=t=>{u.dispatchEvent("context",f(t))},m=()=>{const r={};return n.listTeams().catch((()=>[])).then((t=>(s={},t&&t.length&&t.forEach((t=>{s[t.teamId]=t,t.allowedActions.includes("share-map")&&(r[t.teamId]=t)})),h()))).then((t=>(g("loading"),e.getSharedWith(t).then((t=>{const e=Object.keys(t.direct).map((e=>({group:"direct",description:e,item:e,role:t.direct[e],allowedActions:["unshare-map"]}))),n=t.subteams.map((t=>((t,e,n)=>{const r=[],i=n&&n.allowedActions&&n&&n.allowedActions.share,s=e&&e[t.teamId];return s&&delete e[s.teamId],(i||s&&s.allowedActions&&s.allowedActions.includes("unshare-map"))&&r.push("unshare-map"),{group:"subteam",affiliateProvider:o.getAffiliateProvider(t.teamId),description:t.description,item:t,role:t.sharedAs,allowedActions:r}})(t,r,c)));i=e.concat(n)}))))).then((()=>{a=Object.keys(r).map((t=>r[t]))})).then(g).catch((e=>{if("not-found"!==e)return p(e);t.redirectToHomePage()}))},v=t=>{if(!t)return!1;const e=new Date(1e3*t.expiry).toLocaleString();return Object.assign({},t,{expiryLocaleDate:e,accessLevelLabel:{collaborator:"Edit map",viewer:"Read-only"}[t.accessLevel]||t.accessLevel,hasPasswordLabel:t.hasPassword?"Link is password protected":"Not password protected"})};t.addEventListener("fileInfo",(t=>{c=t,g()})),u.load=()=>(i=[],m()),u.shareWithSubteam=(t,n)=>t&&n?h().then((r=>(g("saving"),e.shareWithSubteam(r,t.teamId,n)))).then((()=>m())).catch(p):Promise.reject(new Error("invalid-args")),u.addMultiple=(t,n)=>t.length?!!f().canInvite&&h().then((r=>{const o={};return t.forEach((t=>o[t]=n)),g("saving"),e.shareWith(r,o)})).then((()=>m())).catch(p):Promise.reject("no-changes"),u.removeSharing=t=>t?h().then((n=>{if("direct"===t.group){const r=c&&c.allowedActions,o={};return g("saving"),r.share?(o[t.item]=!1,e.shareWith(n,o)):e.removeOwnShare(n)}if("subteam"===t.group){const r=t.item&&t.item.teamId;if(r)return g("saving"),e.shareWithSubteam(n,r)}throw"invalid-item"})).then((()=>m())):Promise.reject("no-changes"),u.createPublicUrl=async({password:n,timeLimitHours:r,accessLevel:o})=>{g("Creating Crowd Link");const i=t.getFileKey(),s=await e.createPublicUrl({fileKey:i,password:n,timeLimitHours:r,accessLevel:o});l=v(s),g()},u.removePublicUrl=async()=>{g("Removing Crowd Link");const n=t.getFileKey();return await e.removePublicUrl({fileKey:n}),u.showCrowdlink()},u.getPublicUrl=async()=>{const n=t.getFileKey(),r=await e.getPublicUrl({fileKey:n});return v(r)},u.showGoldSharing=()=>{d="gold",g()},u.showCrowdlink=async()=>{d="crowdlink",g("Loading Crowd Link info"),l=await u.getPublicUrl(),g()}}},5631:(t,e,n)=>{"use strict";const r=n(89080),o=n(15450),i=n(11562),s=n(13612),a=n(48025),c=n(21614),l=n(93345);t.exports=function(t,e){let d;const u=r(this),h=e&&e.themesIndex||s,f=h.default,p=e&&e.autoThemedIdeaUtils||n(15198),g=(t,e)=>{const n=h[t=t||"default"],r=i({defaultTheme:f,selectedTheme:n,themeOverride:e});r&&(d=new o(r),u.dispatchEvent("themeJSONChanged",r),function(t,e,n){u.dispatchEvent("themesContext",function(t,e,n){const r={theme:!!t&&t,allowThemeOverrides:e&&!e.blockThemeOverrides};return n&&(r.themeOverrides=n),r}(t,e,n))}(t,r,e))},m=e=>{if(!e)return d;const n=t.getIdea(),r=n&&n.getAttr("themeOverrides"),s=h[e],a=i({defaultTheme:f,selectedTheme:s,themeOverride:r});return new o(a)},v=e=>{if(!t.isEditingEnabled())return!1;const n=t.getIdea(),r=n&&n.getAttr("theme")||"default";if(!n)return!1;g(r,e),n.batch((()=>{n.updateAttr(n.id,"theme",r),n.updateAttr(n.id,"themeOverrides",e),p.recalcIdeasAutoNodeAttrs(n,d,n,0,0)}))};t.setThemeSource(m),u.setTheme=e=>{if(!t.isEditingEnabled()||!e)return!1;const n=t.getIdea(),r=n&&n.getAttr("themeOverrides");if(!n)return!1;g(e,r),n.batch((()=>{n.updateAttr(n.id,"theme",e),p.recalcIdeasAutoNodeAttrs(n,d,n,0,0)}))},u.setThemeOverrides=v,u.getTheme=m,t.addEventListener("themeChanged",g),u.start=()=>{g("default")},u.getThemeAttribute=(t,e,n)=>{const r=m();return r&&r.attributeValue(t,e,n)},u.overrideThemeAttribute=(e,n)=>{const r=(()=>{const e=t.getIdea(),n=e&&e.getAttr("themeOverrides")||{},r=JSON.parse(JSON.stringify(n));return l(r)})();(void 0!==n||a({target:r,keyArray:e}))&&(c({target:r,keyArray:e,value:n}),v(r))},u.removeThemeOverrides=()=>{v(!1)}}},67526:(t,e,n)=>{"use strict";const r=n(59050),o=n(89080);t.exports=function(t){let e=[];const n=o(this),i=function(t){e=t&&t.slice&&t.slice(0)||[]},s=function(o){const s=t.getActivatedNodeIds();!o&&r.isEqual(e,s)||(i(s),n.dispatchEvent("filteredRowsChanged"))},a=s.bind(n,!0);i(t.getActivatedNodeIds()),t.addEventListener("activatedNodesChanged",s),t.addEventListener("nodeTitleChanged",a),n.predicate=function(t){return t&&r.include(e,t.id)},n.cleanup=function(){t.removeEventListener("activatedNodesChanged",s),t.removeEventListener("nodeTitleChanged",a)}}},25713:t=>{"use strict";t.exports={configurationAttributeName:"measurements-config",measurementAttributeName:"measurements"}},92050:(t,e,n)=>{"use strict";const r=n(59050),o=n(89080),i=n(90618),s=n(42529);t.exports=function(t,e,n){const a=o(this),c=function(){const n=t.getActiveContent(),o=n&&n.getAttr(e);return r.isArray(o)?o:[]};if(!t||!e||!n)throw"invalid-args";a.getMeasuresNames=c,a.getRawData=function(e){const o=t.getActiveContent(),s=[],a=o&&c();return o?(s.push(["Name"].concat(a)),o.traverse((function(t){e&&!e.predicate(t)||s.push([i(t.title)].concat(r.map(a,(function(e){const r=t.getAttr(n)||{},o=r[e]&&parseFloat(r[e]);if(void 0!==o&&!isNaN(o))return o}))))})),s):s},a.addUpMeasurementForAllNodes=function(e){const o={},i=t.getActiveContent();return i&&e?(i.traverse((function(t){const i=t.getAttr(n),a=function(t){if(t)return isNaN(parseFloat(t))?0:parseFloat(t)}(i&&i[e]);let c=new s,l=!1;void 0!==a&&(c=new s(a),l=!0),t.ideas&&r.each(t.ideas,(function(t){void 0!==o[t.id]&&(l=!0,c=c.add(o[t.id]))})),l&&(o[t.id]=c.toString())}),!0),o):{}},a.getMeasurementValues=function(e){const o=[],s=t.getActiveContent();return s?(s.traverse((function(t){const s={};e&&!e.predicate(t)||(r.each(r.extend({},t.getAttr(n)),(function(t,e){void 0!==t&&(isNaN(parseFloat(t))||(s[e]=parseFloat(t)))})),o.push({id:t.id,title:i(t.title),values:s}))})),o):o},a.addMeasure=function(n){const o=c(),i=t.getActiveContent();return!(!i||!n||""===n.trim())&&(n=n.trim(),!r.find(o,(function(t){return t.toUpperCase()===n.toUpperCase()}))&&(i.updateAttr(i.id,e,o.concat([n])),n))},a.removeMeasure=function(o){const i=t.getActiveContent(),s=o&&o.trim&&o.trim().length,a=s&&i&&c(),l=a&&r.without(a,o);return!(!i||!s)&&(r.isEqual(l,a)?void 0:(i.startBatch(),i.updateAttr(i.id,e,l),i.traverse((function(t){i.mergeAttrProperty(t.id,n,o,!1)})),i.endBatch(),o.trim()))},a.validate=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},a.setValue=function(e,r,o){const i=t.getActiveContent();return!(!i||!a.validate(o))&&i.mergeAttrProperty(e,n,r,parseFloat(o))},a.getTitle=function(){const e=t.getActiveContent(),n=e&&e.getDefaultRootId(),r=e&&n&&e.findSubIdeaById(n);return r&&r.title||"map measures"},t.addEventListener("mm-active-content-changed",((t,e)=>{t&&(e?a.dispatchEvent("measures-new-content-loaded"):a.dispatchEvent("measures-content-changed"))}))}},18029:(t,e,n)=>{"use strict";const r=n(59050),o=n(89080);t.exports=function(t,e,n){if(!t||!e)throw"invalid-args";let i,s,a,c=[],l=[],d=!1;const u=o(this),h=function(){return l.length&&l||t.getMeasuresNames()},f=function(){const t=h(),e=r.contains(t,a)&&a,n=r.contains(t,i)&&i,o=e&&n&&n===e,s=!o&&e,c=!(!t||!t.length);return{isActive:d,selectedMeasure:e,hasSelection:!!e,hasMeasures:c,labelledMeasure:n,canLabelSelected:!!s,hasLabelledSelected:!!o}},p=function(){u.dispatchEvent("measuresContext",f())},g=function(){u.dispatchEvent("measureRowsChanged"),p()};u.getTitle=function(){return t.getTitle()},u.editingMeasure=function(t,n){t&&n&&e.selectNode(n,!0,!0),e.setInputEnabled(!t,!0),u.dispatchEvent("measureEditing",t,n)},u.getMeasures=function(){return t.getMeasuresNames()},u.setActive=function(e){const n=d;d=e,e&&!n&&(l=t.getMeasuresNames(),u.getMeasurementValues(),!a&&l&&l.length&&u.setSelectedMeasure(l[0])),p()},u.setSelectedMeasure=function(t){a=t,p()},u.getSelectedMeasure=function(){return a},u.editWithFilter=function(t){s&&u.removeFilter(),s=t,s&&s.addEventListener&&s.addEventListener("filteredRowsChanged",g)},u.addUpMeasurementForAllNodes=function(e){return t.addUpMeasurementForAllNodes(e)},u.getMeasurementValues=function(){const e=t.getMeasurementValues(s);return c=e.slice(0),e},u.addMeasure=function(e){const n=t.addMeasure(e);return n&&u.setSelectedMeasure(n),n},u.removeMeasure=function(e){const n=t.removeMeasure(e);return a===n&&(a=!1),n},u.removeSelectedMeasure=function(){const t=f();t.hasSelection&&u.removeMeasure(t.selectedMeasure)},u.labelMeasure=function(t){return!(!i&&!t||i===t||t&&!r.contains(h(),t)||(t?e.setLabelGenerator((function(){return u.addUpMeasurementForAllNodes(t)})):e.setLabelGenerator(!1),i=t,p(),0))},u.labelSelectedMeasure=function(){return!!a&&u.labelMeasure(a)},u.validate=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},u.setValue=function(e,n,r){return t.setValue(e,n,r)},u.getRawData=function(e){const n=!e&&s;return t.getRawData(n)},u.removeFilter=function(){s&&s.cleanup&&s.cleanup(),s&&s.removeEventListener&&s.removeEventListener("filteredRowsChanged",g),s=void 0},u.showAddMeasure=function(){u.dispatchEvent("showAddMeasure")},e.addEventListener("labelGeneratorChange",(function(t){"measures"!==t&&(i=!1,p())})),t.addEventListener("measures-new-content-loaded",(()=>{l=t.getMeasuresNames(),u.getMeasurementValues(),u.dispatchEvent("startFromScratch")})),t.addEventListener("measures-content-changed",(function(){d&&(function(){const e=t.getMeasuresNames();u.listeners("measureRemoved").length>0&&r.each(r.difference(l,e),(function(t){u.dispatchEvent("measureRemoved",t)})),u.listeners("measureAdded").length>0&&r.each(r.difference(e,l),(function(t){u.dispatchEvent("measureAdded",t,e.indexOf(t))})),l=e,!a&&l&&l.length&&u.setSelectedMeasure(l[0])}(),function(){if(0===u.listeners("measureValueChanged").length)return;const t=c,e=function(t,e){const n=function(t){const e={};return r.each(t,(function(t){e[t.id]=t})),e}(e);let o=[];return r.each(t,(function(t){const e=n[t.id];o=o.concat(function(t,e){const n=[];return r.each(t.values,(function(r,o){r!==(e&&e.values&&e.values[o]||0)&&n.push(["measureValueChanged",t.id,o,r||0])})),e&&r.each(e.values,(function(r,o){(!t||!t.values||!t.values[o])&&n.push(["measureValueChanged",e.id,o,0])})),n}(t,e))})),o}(u.getMeasurementValues(),t);r.each(e,(function(t){u.dispatchEvent.apply(u,t)}))}(),p())})),u.editWithFilter(n)}},6450:(t,e,n)=>{"use strict";const r=n(80832),o=n(88948),i=n(78274),s=n(23447),a=n(80201),c=n(53638);t.exports=function(t,e,n,l=console){if(!t||!n||!e)throw new Error("invalid-args");const d=new i,u=new s({navigatorShim:e,clientId:t.client_id,interactionRequiredErrors:c.interactionRequiredErrors,ajaxPromise:n,logger:l}),h=new a({navigatorShim:e}),f=new o(Object.assign({scope:t.scope,clientId:t.client_id,endpointUrl:"https://login.microsoftonline.com/common/oauth2/v2.0/",navigatorShim:e,ajaxPromise:n,popupLauncher:h,pkceUtils:u,logger:l},c));Object.assign(this,{getUserProfile:async function(t,e){const o=await(t=>n.get("https://graph.microsoft.com/v1.0/me",{headers:{Authorization:"Bearer "+t}}).then((t=>{if(t.error)throw t.error;return{id:t.id,email:r(t.userPrincipalName)}})))(t).catch((()=>{throw"networkError"})),i=[o.id,o.email].map(r);if(o&&o.id){if(e&&!i.includes(r(e)))throw"userIdMismatch";{const e=await(t=>{const e=d.parseJWT(t),o=e?.tid;return o?n.get("https://graph.microsoft.com/v1.0/organization",{headers:{Authorization:"Bearer "+t}}).then((t=>{const e=t&&t.value&&t.value[0],n=e&&e.verifiedDomains&&e.verifiedDomains.length&&(e.verifiedDomains.find((t=>t.isDefault))||e.verifiedDomains[0]);return n?{domain:r(n.name),orgId:e&&e.id}:{}})):{}})(t);return Object.assign(o,{token:t},e)}}throw"networkError"}},f)}},20498:(t,e,n)=>{"use strict";const r="microsoft",o=n(37892);t.exports=function({microsoftOAuthApi:t,authenticationModel:e,goldApi:n,tokenParser:i}={},s){if(!(t&&e&&n&&i))throw new Error("invalid-args");let a;const c=function(t){const n=!!["blocked","networkError"].includes(t)&&"microsoft-blocked";throw e.authenticationFailed(n),t},l=function(t){return t&&e.authenticatedProfile((()=>t)),t},d=(t,e,r)=>{const o=i.parseJWT(t),s=o?.tid;return n.exec("license/request_license_using_microsoft",{token:t,personal:!s}).catch((n=>{if(e&&["not-registered","domain-expired","domain-not-purchased"].includes(n))return!1;if("server-error"===n&&r)return d(t,e,r-1);throw n}))},u=function(t){const e=s&&s.allowUnlicensed;return d(t.token,e,3).then((e=>o(r,t.email,e,t,{domain:t.domain})))},h=t=>(e.setSuggestedEmail(t.email),t),f=function(n,r,o){return e.authenticationStarted(),t[n](r).then(h).then((t=>u(t))).then((t=>(a=t,o?l(t):t))).catch(c)};Object.freeze(Object.assign(this,{providerName:function(){return r},confirm:()=>l(a),authResponseToProfile:e=>t.authResponseToProviderProfile(e).then((t=>u(t))).then((t=>l(t))).catch(c),backgroundAuthenticate:function(t,e){const n={login_hint:t};return e&&(n.additionalScopes=e),f("headlessAuth",n,!0)},modalAuthenticate:function(t){const e=s&&s.skipConfirmation;return f("dialogAuth",{login_hint:t},e)},changeAccount:function(){const t=s&&s.skipConfirmation;return f("dialogAuth",{prompt:"select_account"},t)}}))}},53638:t=>{"use strict";t.exports={interactionRequiredErrors:["interaction_required","consent_required","login_required","access_denied","invalid_grant"],storageKey:"ms:auth-response",messagePrefix:"oauth-authenticated#",endpointUrl:"https://login.microsoftonline.com/common/oauth2/v2.0/"}},16368:(t,e,n)=>{"use strict";const r="microsoft-teams",o=["Team.ReadBasic.All"],i=n(89080);t.exports=function(t){let e,n,s,a,c;const l=i(this),{microsoftOAuthApi:d}=t,u=()=>{e=!1,n=!1,n=!1,s=!1,c=!1,a=!1,l.dispatchEvent("popup-auth-close")},h=[],f=[],p=t=>{h.push(a.id),n({provider:r,token:t.token}),u()},g=t=>{"popup-auth-required"!==t?(s(t),u()):c&&c.popupAuthEvent?l.dispatchEvent(c.popupAuthEvent):l.dispatchEvent(t)};l.supports=t=>"microsoft"===t,l.getTeamIdentity=async(t,i)=>{if(!t)throw new Error("invalid-args");if(f.includes(t.id))return!1;if(h.includes(t.id))return{provider:r,token:t.token};if(e)return e;const l=e=new Promise(((t,e)=>{n=t,s=e}));return a=t,c=i,d.headlessAuth({login_hint:a.email,additionalScopes:o}).then(p).catch(g),l},l.dialogAuthForTeamIdentity=()=>d.dialogAuth({login_hint:a.email,additionalScopes:o}).then(p).catch(g),l.cancel=()=>{n&&(c&&c.disableSkipping||f.push(a.id),n()),u()}}},37892:t=>{"use strict";t.exports=function(t,e,n,r,o){if(!t||!e)throw"invalid-args";const i={provider:t,description:e};return n&&(i.license=n),r&&(i.providerProfile=r),Object.assign({},i,o)}},70129:t=>{"use strict";t.exports=function(t,e){return t?(e=e||"_",t.replace(/[,;#/\t\n\r]+/g,e).trim()):t}},82423:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t,e){let n,o,i,s,a;const c=r(this),l=function(){const e=o?a||i?a>t.delayWarning?"delayed":"active":"passive":"offline";n!==e&&(n=e,c.dispatchEvent("statusChanged",n))},d=function(t){o=t,l()};c.notifySavingChanged=function(t){i=t,s=s||t,l()},c.notifySaveDelay=function(t){a=t,(s||t)&&l()},c.notifyDocumentClosed=function(){d(!1)},e.addEventListener("network-status",d),o=e.isOnline()}},86825:(t,e,n)=>{"use strict";const r=n(48025),o=n(21614),i=n(89080),s=n(66661);t.exports=function(t,e,n){let a,c={},l=!1;const d=i(this),u=(t,r)=>{const o=n.getNodeThemeForLevelAndAttr(r,t),i=n.effectiveStylesForLevelAndAttr(r,t),s=e.buildNodeViewForNodeThemeAndAttr(o,i,t,"text");c=t,l=r,a=o,d.dispatchEvent("showNodePreview",s)},h=(t,e)=>{if(!c||!c.style)throw new Error("invalid-args");o({target:c.style,keyArray:t.split("."),value:e}),u(c,l)},f=e=>{if(!c)throw new Error("invalid-args");const n=c.style.fontMultiplier||1,r=parseFloat(n)+e;r<t.FONT_MULTIPLIER_BOUNDS.min||Math.abs(r-1)<.01?h("fontMultiplier",!1):r>t.FONT_MULTIPLIER_BOUNDS.max||r<t.FONT_MULTIPLIER_BOUNDS.min||h("fontMultiplier",r)},p=e=>{const n=c?.style?.borderWidth||t.BORDER_WIDTH_BOUNDS.min,r=parseFloat(n)+e;r>=t.BORDER_WIDTH_BOUNDS.min&&r<=t.BORDER_WIDTH_BOUNDS.max&&h("borderWidth",r)},g=e=>{const n=c?.style?.cornerRadius||a.cornerRadius||t.CORNER_RADIUS_BOUNDS.min,r=parseFloat(n)+e;r>=t.CORNER_RADIUS_BOUNDS.min&&r<=t.CORNER_RADIUS_BOUNDS.max&&h("cornerRadius",r)};Object.freeze(Object.assign(this,{getThemeValue:t=>r({target:a,keyArray:t.split(".")}),setStyleValue:h,showEditor:()=>d.dispatchEvent("showEditor"),hideEditor:()=>d.dispatchEvent("hideEditor"),saveChanges:()=>{t.updateNodeStyles(c.style),d.hideEditor()},increaseNodeFontMultiplier:()=>f(t.FONT_INCREMENT),decreaseNodeFontMultiplier:()=>f(-1*t.FONT_INCREMENT),resetNodeFontMultiplier:()=>h("fontMultiplier",!1),increaseBorderWidth:()=>p(1),decreaseBorderWidth:()=>p(-1),resetBorderWidth:()=>h("borderWidth",!1),increaseCornerRadius:()=>g(1),decreaseCornerRadius:()=>g(-1),resetCornerRadius:()=>h("cornerRadius",!1)})),t.addEventListener("editNodeStyle",(t=>{const e=n.getLevelForIdeaId(t.id),r=t.attr&&t.attr.style?s({},t.attr&&t.attr.style):{};u({style:r},e)}))}},32778:t=>{"use strict";t.exports=function(t){const e=this;e.refreshToken=()=>t.refreshToken(),e.headlessAuth=e=>t.validateCachedToken(e).catch((()=>t.refreshToken(e))).then((n=>t.getUserProfile(n,e&&e.login_hint))),e.authResponseToProviderProfile=e=>(t.storeAuthResponse(e),t.getUserProfile(e.access_token)),e.dialogAuth=function(e){return t.authorize(e).then((n=>t.getUserProfile(n,e&&e.login_hint)))},e.signOut=function(){return t.signOut()}}},88948:(t,e,n)=>{"use strict";const r=n(43637),o=n(86239);t.exports=function({scope:t,clientId:e,endpointUrl:n,storageKey:i,navigatorShim:s,pkceUtils:a,popupLauncher:c,ajaxPromise:l,messagePrefix:d="oauth-authenticated#",interactionRequiredErrors:u=[],logger:h}={}){if(!(t&&e&&n&&i&&s&&l&&d&&c&&a))throw new Error("invalid-args");if(!Array.isArray(u))throw new Error("invalid-args");const f=s.getJsonStorage(),p=e=>{if(!e)return t;const{additionalScopes:n}=e;return[t].concat(n||[]).join(" ")},g=async t=>{f.setItem(i,{accessToken:t.access_token,expiry:Date.now()+1e3*parseInt(t.expires_in),scope:t.scope,refreshToken:t.refresh_token})},m=(t={},e)=>{if(t.error&&u.includes(t.error))throw h?.error(t),"popup-auth-required";if(t.error)throw h?.error(t),"not-authenticated";if(!t.access_token||!t.expires_in)throw"network-error";if(r(t.scope,e))throw"not-authenticated";g(t)};Object.freeze(Object.assign(this,{validateCachedToken:async t=>{const e=f.getItem(i),n=p(t);if(!e)throw"not-authenticated";if(e.expiry<Date.now())throw"not-authenticated";if(r(e.scope,n))throw"not-authenticated";if(!e.accessToken)throw"not-authenticated";return e.accessToken},refreshToken:async t=>{const r=f.getItem(i),s=p(t),a=r?.refreshToken;if(!a)throw"not-authenticated";try{const t={tenant:"common",scope:s,grant_type:"refresh_token",refresh_token:a,client_id:e},r=await l.request({type:"POST",url:n+"token",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:new URLSearchParams(t).toString()});return m(Object.assign({refresh_token:a},r),s),r.access_token}catch(t){if(h?.error(t),"string"==typeof t)throw f.remove(i),t;if("string"==typeof t?.responseText){const e=o(t.responseText);e&&m(e,s)}throw"not-authenticated"}},storeAuthResponse:g,authorize:async(t={})=>{try{const{code:e,verifier:r,state:o}=a.createChallenge(),i=p(t),l=s.getOrigin()+"/oauth-authenticated.html",u=a.createPKCEURL({code:e,state:o,requiredScopes:i,endpointUrl:n,optional:t,redirectUri:l}),h=await c.openAndWaitForMessage(u,d),f=await a.completePKCEFlow({pkceResponse:h,state:o,verifier:r,endpointUrl:n,requiredScopes:i,redirectUri:l});return m(f,i),f.access_token}catch(t){if(h?.error(t),"string"==typeof t)throw t;throw"not-authenticated"}},signOut:async()=>{f.remove(i)}}))}},84230:(t,e,n)=>{"use strict";const r=n(37892),o=n(83530);t.exports=function(t,e,i){if(!t||!e)throw"invalid-args";const s=i&&i.saltGenerator||n(90898);let a,c;this.requestOneTimePassword=function(e){return e?(a=s(),c=e,t.exec("license/request_code",{identifier:e,one_time_pw:a})):Promise.reject("invalid-args")},this.authenticate=function(n){return n?a&&c?t.exec("license/request_license_using_code",{identifier:c,one_time_pw:a,code:n}).then((t=>{const n=o(t),i=r("one-time-password",n,t);return e.authenticatedProfile((()=>i)),i})).catch((t=>{throw e.authenticationFailed(),t})):Promise.reject("no-code-requested"):Promise.reject("invalid-args")}}},90898:t=>{"use strict";t.exports=function(){const t=function(){return(65536*(1+Math.random())||0).toString(16).substring(1)};return t()+"-"+t()}},55593:t=>{"use strict";t.exports=function(t){if(!t)throw new Error("invalid-args");const e=t.url.split("/");return"_v2"===e[0]?{fileId:e[1],version:2}:{fileId:t.url.slice(t.owner.length+1),version:1}}},23447:t=>{"use strict";t.exports=function({navigatorShim:t,clientId:e,interactionRequiredErrors:n,ajaxPromise:r,logger:o}={}){if(!(t&&e&&n&&r))throw new Error("invalid-args");let i;const s=async()=>{const e=t.uniqueString(32);return{code:(e=>{const n=t.bufferEncodeBase64(e),r={"+":"-","/":"_","=":""};return n.replace(/[+/=]/g,(t=>r[t]))})(await t.sha256Digest(e)),verifier:e,state:t.uniqueString(10)}},a=s().then((t=>i=t));Object.freeze(Object.assign(this,{createPKCEURL:({code:n,state:r,requiredScopes:o,endpointUrl:i,redirectUri:s,optional:a={}}={})=>{if(!(n&&r&&o&&i&&s))throw new Error("invalid-args");const c={code_challenge_method:"S256",code_challenge:n,response_type:"code",scope:o,client_id:e,redirect_uri:s,state:r,nonce:r,response_mode:"fragment"};return a?.login_hint&&(c.login_hint=a.login_hint),a?.prompt&&(c.prompt=a.prompt),t.encodeUrlParams(i+"authorize",c)},completePKCEFlow:async({pkceResponse:t={},state:i,verifier:s,endpointUrl:a,requiredScopes:c,redirectUri:l}={})=>{if(!(i&&s&&a&&c&&l))throw new Error("invalid-args");if(t.error){if(o?.error(t),n.includes(t.error))throw"popup-auth-required";throw"not-authenticated"}if(!t.code||t.state!==i)throw"network-error";const d={tenant:"common",scope:c,grant_type:"authorization_code",code:t.code,client_id:e,redirect_uri:l,code_verifier:s};return r.request({type:"POST",url:a+"token",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:new URLSearchParams(d).toString()})},createChallenge:()=>{if(!i)throw"not-authenticated";return s().then((t=>i=t)),i},asyncCreateChallenge:s,ready:a}))}},49525:t=>{"use strict";t.exports=function(t){if(!t)return;const e=[],n=[];return t.split("\n").forEach((t=>{const r=t.trim(),o=t.match(/^\t*/)[0].length,i=r.split(/\t+/);r&&i.forEach(((t,r)=>{((t,r)=>{const o={title:r},i=(t=>e.slice(0,t).reverse().find((t=>t)))(t);t&&i?(i.ideas=i.ideas||{},i.ideas[Object.keys(i.ideas).length+1]=o):n.push(o),e[t]=o})(o+r,t)}))})),n.length&&n}},73960:(t,e,n)=>{"use strict";const r=n(71283),o=n(61176),i=["USD","GBP","EUR"],s=["personal","team","domain"],a=Object.keys(r.planMetadata).map((t=>{const e=r.planMetadata[t],n=r.currencies[e.currency],i={period:`${e.period}ly`,periodSingle:e.period,id:t,price:parseFloat(e.price),prefix:n.prefix,postfix:n.postfix,CCY:e.currency,type:e.type,sources:n.sources,purchaseAction:e.purchaseAction};if(e.trialPeriodDays){const t=n.sources.filter((t=>"amazon-pay"!==t));i.sources=["invoice","enter-billing-address"].concat(t)}return e.typeLabel&&(i.typeLabel=e.typeLabel),e.requireUpgradeAction&&(i.requireUpgradeAction=e.requireUpgradeAction),o(i)})).sort(((t,e)=>t.CCY!==e.CCY?i.indexOf(t.CCY)-i.indexOf(e.CCY):t.type!==e.type?s.indexOf(t.type)-s.indexOf(e.type):t.price-e.price));t.exports=t=>t?a.filter((e=>t.includes(e.type))):a},73334:t=>{"use strict";t.exports=function(t){if(!t||!t.setInterval)throw"invalid-args";const e=this;let n;e.poll=function(r,o,i){const s=()=>new Promise((function(s,a){const c=i&&i.pollingInterval||1e4,l=i&&i.pollingFailurePredicate,d=function(){r().then((t=>{o(t)?(e.cancelPolling(),s(t)):l&&l(t)&&(e.cancelPolling(),a(t))})).catch((t=>{l&&!l(t)||(e.cancelPolling(),a(t))}))};e.cancelPolling(),n=t.setInterval(d,c),d()}));return i&&i.initialDelay?t.delay(i.initialDelay).then(s):s()},e.isPolling=()=>!!n,e.cancelPolling=function(){n&&(t.clearInterval(n),n=!1)}}},80201:(t,e,n)=>{"use strict";const r=n(85714);t.exports=function({navigatorShim:t}){if(!t)throw new Error("invalid-args");Object.freeze(Object.assign(this,{openAndWaitForMessage:(e,n)=>{if(!e||!n)throw new Error("invalid-args");const o=new Promise((e=>{const o=function(i){const s=function(e,n){if(e.data&&e.data.startsWith(n)&&e.origin===t.getOrigin())return r(e.data.substring(n.length-1))}(i,n);s&&(t.removeMessageListener(o),e(s))};t.addMessageListener(o)}));return t.popup(e),o}}))}},83530:t=>{"use strict";t.exports=function(t){return t&&t.email?t.email:t&&t.domain?t.domain:t&&t.account?t.account:"MindMup Free"}},5336:t=>{"use strict";t.exports={statusAttributeName:"progress",statusConfigAttr:"progress-statuses"}},83033:(t,e,n)=>{"use strict";const r=n(12623),o={testing:n(43297),tasks:n(65684)};t.exports=function(t,e,n,i){let s=o[t];return n&&(s=r(s,e+t+"/"+n+"/",i)),s}},65684:t=>{"use strict";t.exports={"not-started":{description:"Not Started",priority:1,style:{background:!1}},passing:{description:"Done",style:{background:"#00CC00"}},"under-review":{description:"Under review",style:{background:"#00CCFF"}},"in-progress":{description:"In Progress",priority:3,style:{background:"#FFCC00"}},blocked:{description:"Blocked",priority:4,style:{background:"#990033"}},parked:{description:"Parked",priority:2,style:{background:"#FF3300"}}}},43297:t=>{"use strict";t.exports={"not-started":{description:"Not Started",priority:1,style:{background:!1}},passing:{description:"Passed",style:{background:"#00CC00"}},"in-progress":{description:"In Progress",priority:2,style:{background:"#FFCC00"}},failure:{description:"Failed",priority:999,style:{background:"#FF3300"}}}},60960:t=>{"use strict";t.exports={testing:{title:"Testing: Colors",args:["testing"]},testingWithIcons:{title:"Testing: Flat Icons",args:["testing","/assets/progress/","flat",25]},testingWith3DIcons:{title:"Testing: 3D Icons",args:["testing","/assets/progress/","3d",64]},tasks:{title:"Tasks: Colors",args:["tasks"]},tasksWithIcons:{title:"Tasks: Flat Icons",args:["tasks","/assets/progress/","flat",25]},tasksWith3DIcons:{title:"Tasks: 3D Icons",args:["tasks","/assets/progress/","3d",64]}}},99288:(t,e,n)=>{"use strict";const r=n(89080),o=n(59050),i=n(5336),s=n(25713);t.exports=function(t){const e=r(this),n=function(e){return t.getAttr(i.statusConfigAttr)[e]},a=function(t){const e=n(t);return e&&e.priority},c=function(e){const r=t.getAttrById(e,i.statusAttributeName),s=r&&n(r);let a;s&&(s.icon&&t.updateAttr(e,"icon",!1),s.style&&(a=t.getAttrById(e,"style"),t.updateAttr(e,"style",o.omit(a,o.keys(s.style))))),t.updateAttr(e,i.statusAttributeName,!1)},l=function(t){c(t.id),o.each(t.ideas,l)};e.setStatusConfig=function(e){const n={};e?(o.each(e,(function(t,e){n[e]=o.clone(t),isNaN(n[e].priority)&&delete n[e].priority})),t.updateAttr(t.id,i.statusConfigAttr,n)):t.updateAttr(t.id,i.statusConfigAttr,!1)},e.getStatusConfig=function(){return t.getAttr(i.statusConfigAttr)},e.updateStatus=function(e,r){let s=!1;const l=function(e,r){const s=n(r);let a;return!!s&&(c(e),s.style&&(a=o.extend({},t.getAttrById(e,"style"),s.style),t.updateAttr(e,"style",a)),s.icon&&t.updateAttr(e,"icon",s.icon),t.updateAttr(e,i.statusAttributeName,r))};return l(e,r)&&(o.each(t.calculatePath(e),(function(t){const e=function(t){const e=o.uniq(o.map(t.ideas,(function(t){return t.getAttr(i.statusAttributeName)})));return 1===e.length?e[0]:!!o.some(e,a)&&o.max(e,a)}(t);e&&l(t.id,e)})),s=!0),s},e.setMeasurements=function(e){t.updateAttr(t.id,s.configurationAttributeName,e)},e.clear=function(){l(t)},e.refresh=function(){e.dispatchEvent("configChanged",t.getAttr(i.statusConfigAttr)),e.dispatchEvent("measurementsChanged",t.getAttr(s.configurationAttributeName))},t.addEventListener("changed",(function(n,r){n&&r&&"updateAttr"===n&&r[0]==t.id&&(r[1]===i.statusConfigAttr?e.dispatchEvent("configChanged",r[2]):r[1]===s.configurationAttributeName&&e.dispatchEvent("measurementsChanged",r[2]))}))}},12623:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t,e,n){const o={};return r.each(t,(function(t,i){const s=r.omit(t,"style"),a=i||"not-started";s.icon={height:n,width:n,position:"left",url:e+a+".png"},o[i]=s})),o}},72300:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(){const t=r(this);let e,n;t.editProgressIcon=function(r){return n=r,new Promise((function(n){e=n,t.dispatchEvent("progressIconEditRequested")}))},t.cancelEditProgressIcon=function(){e&&e(n)},t.setIcon=function(t,r,o,i,s,a,c){r?(n={url:r,width:o,height:i,position:s},c&&(n.metaData=c)):n=!1,e&&e(n)},t.dropImage=function(){},t.getIcon=function(){return n}}},32999:(t,e,n)=>{"use strict";const r=n(89080),o=n(99288),i=n(59050);t.exports=function(t,e,n){let s,a,c,l,d,u,h,f=!1;const p=r(this),g=p.addEventListener,m=function(){n&&n.log("CalcModel","Projection:"+h)},v=function(t){return i.find(e.getProjectionsFor(s),(function(e){return e.name===t}))},y=function(){h&&p.listeners("dataUpdated").length>0&&(l=e.dataAdapter(s,c),p.dispatchEvent("dataUpdated",v(h).iterator(l),c))},w=function(){p.dispatchEvent("progressContext",{isActive:f,isEnabled:!!u,currentStatusConfig:u})};p.setActive=function(t){f=t,w()},p.addEventListener=function(t,n){s&&"dataUpdated"===t&&0===p.listeners("dataUpdated").length&&(l=e.dataAdapter(s,c),m()),g(t,n),s&&"dataUpdated"===t&&n.apply(void 0,[v(h).iterator(l),c])},p.setFilter=function(t){i.isEqual(t,c)||(c=t,y())},p.getFilter=function(){return c},p.getActiveProjection=function(){return h},p.dataUpdated=function(t){s=t;const n=i.map(e.getProjectionsFor(s),(function(t){return t.name}));i.isEqual(n,d)||(d=n,p.dispatchEvent("projectionsChanged",d)),i.include(d,h)||(h=i.first(d)),y()},p.setActiveProjection=function(t){h!==t&&v(t)&&(h=t,m(),y())},p.getFilterPredicate=function(){const t=i.map(l||e.dataAdapter(s,c),(function(t){return t.id}));return function(e){return i.include(t,e.id)}},p.getContentStatusUpdater=function(){return a},p.bindContentListeners=function(){const e=t.getIdea(),n=function(){p.dataUpdated(e)};a=new o(e),u=a.getStatusConfig(),a.addEventListener("configChanged",(function(t){u=t,p.setFilter({}),w(),p.dispatchEvent("configChanged",t)})),t.addEventListener("nodeSelectionChanged",(function(){(p.getFilter()||{}).subtree&&n()})),e.addEventListener("changed",n),n()},p.resetProgress=function(){a&&a.clear()},p.setStatusConfig=function(t){a&&a.setStatusConfig(t)},p.updateActivatedStatus=function(e){t.applyToActivated((function(t){a.updateStatus(t,e)}))},p.toggleFilterProperty=function(e){c||(c={}),c[e]?delete c[e]:"subtree"===e?c.subtree=t.getCurrentlySelectedIdeaId:c[e]=!0,y()},p.setFilterStatus=function(t,e){if(!c){if(!u)return;c={}}c.statuses||(c.statuses=i.map(u,(function(t,e){return e})));const n=i.contains(c.statuses,t);n&&!e?(c.statuses=i.without(c.statuses,t),y()):!n&&e&&(c.statuses.push(t),y())},p.selectAllFilterStatuses=function(){c&&c.statuses&&(delete c.statuses,y())}}},19048:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t){const e=r.map(t,(function(t,e){return r.extend({key:e},t)})),n=r.sortBy(e,(function(t){return t.description||t.key}));return r.sortBy(n,(function(t){return-1*t.priority||0}))}},18659:(t,e,n)=>{"use strict";const r=n(59050),o=n(5336),i=n(25713);t.exports=function(){this.getProjectionsFor=function(t){const e=[],n=function(t){return t&&t.attr&&t.attr[o.statusConfigAttr]||{}}(t),s=function(){return r.reduce(this,(function(t,e){return t+e[1]}),0)},a=function(t,e){return{name:t,iterator:function(t,n){const o=e(t,n),i=r.reduce(o,(function(t,e){return t+e[1]}),0);return 0===i?[]:r.map(o,(function(t){const e=(100*t[1]/i).toFixed(0)+"%";return[t[0],e]}))}}},c=function(t,e){return{name:t,iterator:function(t){const o=r.map(function(){const n={};return r.each(t,(function(t){let r=1;const o=n[t.status]||0;e&&(r=e(t)),r&&(n[t.status]=o+r)})),n}(),(function(t,e){return[e,t]})).sort((function(t,e){const r=n[t[0]]||{},o=n[e[0]]||{},i=r.priority||0,s=o.priority||0;return i===s?r.description.localeCompare(o.description):s-i}));return r.each(o,(function(t){t[0]=n[t[0]]&&n[t[0]].description||t[0]})),o.total=s,o}}};return e.push(c("Counts")),e.push(a("Percentages",e[0].iterator)),r.each(function(t){return t&&t.attr&&t.attr[i.configurationAttributeName]||[]}(t),(function(t){const n=c("Total "+t,(function(e){return parseFloat(e.measurements&&e.measurements[t])||0}));e.push(n),e.push(a("Percentage "+t,n.iterator))})),e},this.dataAdapter=function(t,e){const n=t&&t.attr&&t.attr[o.statusConfigAttr]||{},s=[];return(e=e||{}).subtree&&(t=t.findSubIdeaById(e.subtree())||t),t.traverse((function(t){const a=t.attr&&t.attr[o.statusAttributeName];let c;!e.includeParents&&r.find(t.ideas,(function(t){return t.attr&&t.attr[o.statusAttributeName]===a}))||a&&n[a]&&(!e.statuses||r.include(e.statuses,a))&&(c={status:a,id:t.id},t.title&&(c.title=t.title),t.attr&&t.attr[i.measurementAttributeName]&&(c.measurements=t.attr[i.measurementAttributeName]),s.push(c))})),s}}},85714:t=>{"use strict";t.exports=function(t){const e=function(t){return decodeURIComponent(t.replace(/\+/g," "))};return t.substr(1).split("&").reduce((function(t,n){const r=n.split("=").map(e);return t[r[0]]=r[1],t}),{})}},63823:t=>{"use strict";t.exports=function(t,e,n){let r;const o=new Promise(((e,o)=>{r=t.setTimeout((()=>o("timeout")),n)}));return Promise.race([e,o]).then((e=>(t.clearTimeout(r),e))).catch((e=>{throw t.clearTimeout(r),e}))}},41089:t=>{"use strict";const e="authenticated-provider";t.exports=function(t,n,r){let o=!1;const i=this,s=n.slice(0),a=t=>{const e=t&&t.provider||o;return e&&s.find((t=>t.providerName()===e))};i.reauthenticate=function(){const n=r.getItem(e),o=a(n),i=n&&n.hint;return o?o.backgroundAuthenticate(i):(t.signOut(),Promise.resolve(!1))},t.addEventListener("authenticatedProfile",(t=>{const n=t&&{provider:t.provider,hint:t.providerProfile&&t.providerProfile.id};a(n)?r.setItem(e,n):r.setItem(e,!1)})),t.addEventListener("not-authenticated",(t=>{"signed-out"===t&&r.setItem(e,!1)})),i.setDefaultProviderName=t=>o=t,i.addAuthenticator=t=>s.push(t)}},81473:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t,e,n,o,i){if(!i)throw"invalid-args";this.startExport=function(s,a,c){let l=!1;const d=function(t){c&&c.notify&&c.notify(t)},u=(function(t){t&&t.toUpperCase()}(s),function(t){d("Uploading "+(t||""))}),h=function(e){return t[e].exporter||t[e]}(s);return h||Promise.reject("no exporter found"),o&&o.setFunnelId("export-"+s),d("Setting up the export"),e.generateExportConfiguration(s).then((t=>l=t)).then((()=>h(a,l))).then((function(t){return r.isEmpty(t)?Promise.reject("empty"):JSON.stringify(r.extend({},t,a))})).then((function(t){if(i.binaryStringSize(t)<l.maxSize)return t;if(l.free)throw o.step("layout-export","file-too-large-free"),"file-too-large-free";throw"file-too-large-gold"})).then((t=>n.save(t,l,{notify:u}))).then((()=>d("Processing your export"))).then((()=>function(t){let e=!1;const r=function(){return e};return Promise.race([function(t){return n.poll(t.signedOutputListUrl,{stoppedSemaphore:r,timeoutPeriod:3e5,sleepPeriod:2500})}(t),function(t){return n.poll(t.signedErrorListUrl,{stoppedSemaphore:r,timeoutPeriod:3e5,sleepPeriod:15e3}).then((function(){return Promise.reject("generation-error")}))}(t)]).then((function(){e=!0})).catch((function(t){throw e=!0,t}))}(l))).then((()=>function(e,n,o){const i={"output-url":n};return t[e].processor?t[e].processor(r.extend(i,o)):Promise.resolve(i)}(s,l.signedOutputUrl,a))).catch((t=>function(t,e,n){return"file-too-large"===t&&o.step("layout-export","file-too-large"),n?Promise.reject({reason:t,fileId:n}):Promise.reject(t)}(t,0,l&&l.s3UploadIdentifier)))}}},22172:t=>{"use strict";t.exports=function(t,e,n){let r=!1;if(!t||!e||!n)throw new Error("invalid-args");const o=this;o.knownImport=t=>["mmap"].includes(t),o.startImport=function(n,o,i){let s=!1;const a=function(t){i&&i.notify&&i.notify(t)},c=function(t){a("Uploading "+(t||""))};return a("Setting up the import"),t.generateImportMapConfiguration(n).then((t=>s=t)).then((()=>e.save(o,s,{notify:c}))).then((()=>a("Processing your import"))).then((()=>function(t){let n=!1;const r=function(){return n};return Promise.race([(t=>e.poll(t.signedOutputListUrl,{stoppedSemaphore:r,sleepPeriod:2500}))(t),(t=>e.poll(t.signedErrorListUrl,{stoppedSemaphore:r,sleepPeriod:15e3}).then((()=>Promise.reject("generation-error"))))(t)]).then((function(){n=!0})).catch((function(t){throw n=!0,t}))}(s))).then((()=>{r={importId:s.s3UploadIdentifier,importType:n}})).catch((t=>function(t,e){return e?Promise.reject({reason:t,fileId:e}):Promise.reject(t)}(t,s&&s.s3UploadIdentifier)))},o.finalise=(t,e)=>t&&e?r?n.exec("file/import_map/gold/finalise",{license:t,importType:r.importType,importId:r.importId,mapName:e}).then((t=>(r=!1,{id:`_v2/${t}`}))):Promise.reject("invalid-request"):Promise.reject("invalid-args")}},71504:t=>{"use strict";t.exports=function(t){let e=Math.max(1,t||1);return function(){const t=e;return e=Math.max(0,e-1),t}}},67247:(t,e,n)=>{"use strict";const r=n(59050),o=n(73334);t.exports=function(t,e,n){const i=this;i.save=(n,r,o)=>{const i=t.buildFormData();return Object.keys(r.fields).filter((t=>"key"!==t)).forEach((t=>i.append(t,r.fields[t]))),i.append("key",r.key),i.append("file",n),e.upload(r.url,i,o&&o.notify).catch((e=>{if(e&&403===e.status)throw"failed-authentication";if(e&&e.responseText)throw function(e){const n={EntityTooLarge:"file-too-large"};try{return n[t.buildAjaxXMLResponse(e).valueOf("Error Code")]||"network-error"}catch(t){return"network-error"}}(e.responseText);if(e&&e.statusText)throw e.statusText;throw"network-error"}))},i.poll=function(i,s){const a=Date.now(),c={timeout:s&&s.sleepPeriod,cache:"no-store"},l=n&&n.poller||new o(t);return s=r.extend({sleepPeriod:1e3,timeoutPeriod:12e4},s),l.poll((async()=>{const n=await e.get(i,c);return t.buildAjaxXMLResponse(n).valueOf("Contents Key")}),(t=>t),{pollingInterval:s.sleepPeriod,pollingFailurePredicate:function(){return a+s.timeoutPeriod<Date.now()||s.stoppedSemaphore&&s.stoppedSemaphore()}})},i.loadUrl=async(t,n)=>{const r=Object.assign({cache:"no-store"},n);n&&n.range&&(r.headers={Range:"bytes="+n.range.startByte+"-"});try{return await e.get(t,r)}catch(t){throw 404===(o=t).status||403===o.status?"not-found":n&&n.range&&416===o.status?"end-of-file":"network-error"}var o}}},91621:(t,e,n)=>{"use strict";const r=n(60117),o=n(85483),i=n(1207);t.exports=function(t,e,s,a,c,l,d){if(!(t&&e&&s&&a&&c&&l))throw"invalid-args";const u=this,h=d&&d.clientSecret,f=d&&d.GoldFileHistoryEvent||r,p=d&&d.GoldFileChangesEnvelopeBuilder||o,g=t.freeMapTitle||"Free mind map",m=d&&d.goldFileApi||n(80986),v=async()=>{const t=await e.authenticationModel.getLicense();if(t)return{license:t};throw"not-authenticated"},y=async t=>{const n=await v(),r=await(e.affiliateTeamIdentityProvider?.getAffiliateTeamIdentity()),o=Object.assign(n,{affiliateTeamIdentity:r});if(r&&t)try{await s.exec("subteam/affiliate/cache_teams",o)}catch(t){console.error(t)}return o},w=function(t,e){const n=e&&e.license,r=m.goldFileKey(t,n),o=Object.assign({},e,{fileId:r});return s.exec("file/upload_config",o)},b=(t,e)=>{if(!t||!t.license)throw"not-authenticated";if(!e)return Promise.reject(new Error("invalid-args"));const n=Object.assign({clientSecret:h,fileKey:m.goldFileKey(e,t.license)},t);return s.exec("file/session/start",n)},E=function(t,e,n){if(!t||!t.license)throw"not-authenticated";if(!e||e.new||e.free||e.legacy)return Promise.reject(new Error("invalid-args"));const r=m.goldFileKey(e,t.license);return s.exec("file/delete",Object.assign({fileKey:r,envelope:n},t))},x=function(t,e,n){if(!t||!t.license)throw"not-authenticated";if(!e||e.new||e.free||e.legacy)return Promise.reject(new Error("invalid-args"));const r=m.goldFileKey(e,t.license);return s.exec("file/undelete",Object.assign({fileKey:r,envelope:n},t))};u.getLoadConfig=function(e){return e?e.new?Promise.resolve({title:t.defaultFileTitle}):e.fileId?e.free?function(t){return s.exec("anonymous/url",{fileKey:t.fileId}).then((t=>({title:g,url:t})))}(e):e.goldFileShare?(t=>s.exec("file/shared_gold_load_config",{email:t.email,fileId:t.fileId,signature:t.signature}).then((t=>{const e=t&&t.metadata&&t.metadata.description;return t.title=e||"MindMup Gold",t})))(e):e.legacy?Promise.resolve(function(e){const n=t.legacyFreeUrl+encodeURIComponent(e.fileId);return{title:g,url:n}}(e)):(async t=>{const e=await y(!0),n=m.goldFileKey(t,e.license),r=Object.assign({fileKey:n,clientSecret:h},e),o=await s.exec("file/load_config",r),i=o&&o.metadata&&o.metadata.description||"MindMup Gold";return Object.assign(o,{title:i})})(e):Promise.reject("invalid-args"):Promise.reject("invalid-args")},u.getClientSecret=()=>h,u.generateImportMapConfiguration=function(t){return v().then((e=>s.exec("file/import_map/upload_config",Object.assign({},e,{convertFromType:t}))))},u.loadChangesHistoryFile=(t,e)=>{if(!t)throw new Error("invalid-args");return a.loadUrl(t,Object.assign({includeHeaders:!0,cache:"no-store"},e))},u.loadFile=function(t,e){if(!t||!e)return Promise.reject("invalid-args");if(t.new)return t.theme?Promise.resolve(Object.assign({},l,{attr:{theme:t.theme}})):Promise.resolve(l);const n=d&&d.useWatermark&&e.hasWatermark&&e.watermarkUrl||e.url;return a.loadUrl(n).then((t=>"string"==typeof t?JSON.parse(t):t)).catch((e=>{throw t&&t.free&&"not-found"===e?"free-map-not-found":e}))},u.renameFile=async(t,e)=>{if(!t||!e||t.new||t.free||t.legacy)return Promise.reject("invalid-args");const n=await v(),r=m.goldFileKey(t,n.license);return s.exec("file/rename",Object.assign({fileId:r,newName:e},n))},u.validFreeFileContent=function(e){return t&&t.maxFreeSize&&e.length>=t.maxFreeSize?Promise.reject("file-too-large"):Promise.resolve(e)},u.freeFileSaveConfiguration=function(t){return w(t)},u.goldFileChangesSaveConfiguration=async(t,e)=>{const n=await v(),r=Object.assign({fileKey:m.goldFileKey(t,n.license),sessionId:e},n);return s.exec("file/changes/upload_config",r)},u.getHistoryFileUrl=async(t,e)=>{if(!t||t.free||t.new)throw new Error("invalid-args");const n=await v(),r=m.goldFileKey(t,n.license),o=Object.assign({fileKey:r},e,n);return s.exec("file/changes/history_download_url",o)},u.unaggregatedChanges=async(t,e)=>{if(!t)throw new Error("invalid-args");if(t.free||t.new)return Promise.resolve(!1);const n=await v(),r=m.goldFileKey(t,n.license),o=Object.assign({fileKey:r,maxFiles:20},e,n);return s.exec("file/changes/unaggregated",o)},u.startSession=async t=>{const e=await v();return b(e,t)},u.endSession=async(t,e)=>{const n=await v(),r=Object.assign({fileKey:m.goldFileKey(t,n.license),sessionId:e},n);return s.exec("file/session/end",r)},u.goldFileSaveConfiguration=async t=>{const e=await v(),n=await w(t,e);if(n.free)throw"not-authenticated";return n},u.saveFreeFile=async(t,e)=>(await a.save(e,t),t),u.saveGoldFile=async(t,e)=>{const n="string"==typeof e?e:JSON.stringify(e);return await a.save(n,t),t},u.savedFileInfo=function(e){const n=m.fileIdFromSaveConfig(e),r={savedFileId:n,savedUrl:m.calculateFileUrl(t.editorUrl,n,e.free)};return e.allowedActions&&(r.allowedActions=e.allowedActions),r},u.createFile=function(t,e,n){const r={new:!0,title:t};return u.goldFileSaveConfiguration(r).then((t=>u.saveGoldFile(t,n))).then((t=>u.savedFileInfo(t))).then((t=>(t.id="_v2/"+t.savedFileId,t)))},u.deleteFile=async(t,e)=>{if(!t||t.new||t.free||t.legacy)throw new Error("invalid-args");const n=await v();return E(n,t,e)},u.deleteFileListItem=async t=>{if(!t||!t.fileId||2!==t.version)throw new Error("invalid-args");const n=await v(),r=await b(n,t),o=()=>r,i=new f(o),s=new p(e.authenticationModel,o),a=i.buildLocalControlEvent("trashed",[!0]),c=await s.nextEnvelope([a]);return E(n,t,c)},u.undeleteFile=async(t,e)=>{if(!t||t.new||t.free||t.legacy)return Promise.reject(new Error("invalid-args"));const n=await v();return x(n,t,e)},u.undeleteFileListItem=async t=>{if(!t||!t.fileId||2!==t.version)return Promise.reject(new Error("invalid-args"));const n=await v(),r=await b(n,t),o=()=>r,i=new f(o),s=new p(e.authenticationModel,o),a=i.buildLocalControlEvent("trashed",[!1]),c=await s.nextEnvelope([a]);return x(n,t,c)},u.fileItemDecorator=t=>v().then((e=>i(e.license,t))),u.listFiles=async()=>{const t=await y(!0),e=await s.exec("file/list_config",t);return(await a.loadUrl(e)).list.map((e=>i(t.license,e))).filter((t=>!(!t.context.recycleBin&&t.trashTs)))},u.buildSavedList=async()=>{const t=await v();return s.exec("file/build_saved_list",t)},u.requestWatermarkForFileKey=async function(t,e){const n=await v(),r=Object.assign({},n,{fileKey:t,force:e});return s.exec("file/request_watermark",r)},u.requestWatermark=async function(t){const e=await v(),n=m.goldFileKey(t,e.license);return u.requestWatermarkForFileKey(n,!1)},u.createPublicUrl=async({fileKey:t,password:e,timeLimitHours:n,accessLevel:r})=>{const o={license:(await v()).license,fileKey:t,password:e,timeLimitHours:n,accessLevel:r};return s.exec("file/crowdlink/create",o)},u.removePublicUrl=async({fileKey:t})=>{const e={license:(await v()).license,fileKey:t};return s.exec("file/crowdlink/remove",e)},u.getPublicUrl=async({fileKey:t})=>{const e={license:(await v()).license,fileKey:t};return s.exec("file/crowdlink/get",e)},u.updateTag=async(t,e,n)=>{const r=await v(),o=Object.assign({tag:n,fileKey:e},r);return s.exec("file/tag/"+t,o)},u.uploadAsset=async(t,e,n)=>{if(!t||!e)throw new Error("invalid-args");const r=await v();return(async()=>{const o=c.dataURLToBlob(e),i=(e=>{const o=e&&e.type,i=Object.assign({mapId:t,mimeType:o},r);return n?.isThumbnail&&(i.assetKey="thumbnail.png"),i})(o),l=await s.exec("asset/upload_config",i),d=l.key.split("/").pop();return await a.save(o,l),d})()},u.getAssetUrls=async(t,e,n)=>{if(!t||!e)return Promise.reject(new Error("invalid-args"));if(n&&n.goldFileShare&&n.email&&n.signature)return s.exec("asset/shared_gold_download_config",{email:n.email,mapId:t,signature:n.signature,assetIds:e});if(!e.length)return{};const r=await v();return s.exec("asset/download_config",Object.assign({mapId:t,assetIds:e},r))},u.getSharedWith=async t=>{if(!t)throw new Error("invalid-args");const e=await v();return s.exec("file/shared_with_complete",Object.assign({fileId:t},e))},u.shareWith=async(t,e)=>{if(!t||!e)throw new Error("invalid-args");const n=await v();return s.exec("file/share",Object.assign({fileId:t,share:e},n))},u.shareWithSubteam=async(t,e,n)=>{if(!t||!e)throw new Error("invalid-args");const r=await v();return s.exec("file/share_with_subteam",Object.assign({fileId:t,teamId:e,role:n},r))},u.removeOwnShare=async t=>{if(!t)throw new Error("invalid-args");const e=await v();return s.exec("file/remove_share_pointer",Object.assign({fileId:t},e))}}},39700:(t,e,n)=>{"use strict";const r=n(85714),o=n(31233);t.exports=function(t){if(!t)return!1;const e=t.indexOf("?"),n=e>=0&&t.substr(e),i=n&&r(n),s=i["X-Amz-Date"],a=s&&(t=>{const e=(t=>{const[e,n]=t.split("T"),r=[e.slice(0,4),e.slice(4,6),e.slice(6)],o=[n.slice(0,2),n.slice(2,4),n.slice(4)];return`${r.join("-")}T${o.join(":")}`})(t);return Math.floor(Date.parse(e)/1e3)})(s),c=i["X-Amz-Expires"],l=c&&parseInt(c);return!!(i&&l&&a)&&a+l>o()+300}},45824:t=>{"use strict";t.exports=function(t){return!!t&&t.replace(/[~#%&*{}+/\\:;<>?|'".]/g,"")}},31576:(t,e,n)=>{"use strict";const r=n(27564);t.exports=function(t,e){const n={},o=function(t){return t&&t.attr&&t.attr.group},i=function(t,e,n){const s=!n&&(!t.formatVersion||t.formatVersion<3);let a;n=n||(s?1:0),o(t)||!s&&!n||e(t,n),r(t).forEach((function(t){a=o(t)?n:n+1,i(t,e,a)}))},s=[];return i(t,(function(t,r){if(e&&e(t))return;const o=(s[r]||0)+1;s[r]=o,n[t.id]=String(r)+"."+o})),n}},51586:(t,e,n)=>{"use strict";const r=n(27564);t.exports=function(t){let e=0;const n=function(t,o){return r(t).forEach((function(t){var r;(r=t)&&r.attr&&r.attr.group||(o[t.id]=String(++e)),n(t,o)})),o};return n(t,{})}},58879:(t,e,n)=>{"use strict";const r=n(20360),o=n(54459);t.exports=function(t,e,n,i){if(!i||!i.uploadAssets)return Promise.resolve(JSON.stringify(t,null,2));if(!n||!e)return Promise.reject("invalid-args");if(!t)return Promise.resolve();const s=i&&i.fileId,a=i&&i.goldAsset||o,c=r(t).map((t=>((t=>{const e=t&&t.attr&&t.attr.icon,r=e&&e.url,o=r&&n.getResource(r);o&&o!==r&&0===r.indexOf("internal:")&&(e.url=o)})(t),a.uploadAssets(s,t,e))));return Promise.all(c).then((function(){return delete t.resources,JSON.stringify(t,null,2)}))}},73264:t=>{"use strict";t.exports=function(t){const e=Date.now()-864e5,n=t&&t.length&&t[0].header;return!!(n&&n.ts<e&&t.length>=100)}},33792:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(){const t=r(this);let e;t.register=function(n,r){if(t["toggle"+n])throw"Cannot re-register "+n;t["toggle"+n]=function(){e===n?t.hide():(e=n,t.dispatchEvent("show",n,r))},t["show"+n]=function(){e!==n&&(e=n,t.dispatchEvent("show",n,r))},t.dispatchEvent("registered",n)},t.hide=function(){e=!1,t.dispatchEvent("hide")}}},25950:(t,e,n)=>{"use strict";const r=n(56982),o=n(89080);t.exports=function(){let t,e,n="";const i=o(this),s=function(){e&&(t=((t,e)=>{const n=e&&e.trim().toLowerCase();return n?t.filter((t=>t.aliases&&((t,e)=>e.split(" ").every((e=>t.find((t=>t.startsWith(e))))))(t.aliases,n))):t})(e,n),i.dispatchEvent("changed"))};i.load=function(t){if(!Array.isArray(t))throw new Error("invalid-args");e=t.slice(0),s()},i.getStickersForCategory=e=>t.filter((t=>t.category===e)),i.getFirst=()=>t[0],i.isLoaded=()=>!!e,i.getCategories=()=>e?r(t.map((t=>t.category))):[],i.setFilter=function(t){t!==n&&(n=t||"",s(),i.dispatchEvent("filter-changed",n))}}},99441:(t,e,n)=>{"use strict";const r=n(89080),o=n(56982),i=n(59050),s="stickers",a=t=>{if(!t||!t.codepoint)throw new Error("invalid-args");return`emoji:${t.codepoint}`},c=(t,e)=>{const n=t&&"string"==typeof t&&t.split(":");if(!e||!n||2!==n.length||"emoji"!==n[0])throw new Error("invalid-args");return{codepoint:n[1],category:e}};t.exports=function(t){let e=!1;const n=r(this),{mapModel:l,mapEditorModel:d,ajaxPromise:u,stickerList:h,version:f}=t,p={},g=()=>{const t="In activated nodes",e=(()=>{const t=[];return l.getActivatedNodeIds().forEach((e=>{const n=l.findIdeaById(e),r=n&&n.attr&&n.attr[s];r&&Array.isArray(r)&&r.length&&t.push.apply(t,r)})),o(t)})().map((e=>c(e,t)));i.isEqual(e,p[t])||(p[t]=e,p[t].length?n.dispatchEvent("stickers-for-activated-loaded",t):n.dispatchEvent("no-stickers-for-activated-loaded"))},m=()=>{g(),(()=>{const t="In this map",e=(()=>{const t=[];return l.getIdea().traverse((e=>{const n=e&&e.attr&&e.attr[s];n&&Array.isArray(n)&&n.length&&t.push.apply(t,n)})),o(t)})().map((e=>c(e,t)));i.isEqual(e,p[t])||(p[t]=e,p[t].length?n.dispatchEvent("stickers-for-map-loaded",t):n.dispatchEvent("no-stickers-for-map-loaded"))})()};if(!(f&&l&&d&&u&&h))throw new Error("invalid-args");n.setActive=async t=>{e!==!!t&&(e=!!t,!h.isLoaded()&&t&&await(async()=>{n.dispatchEvent("loading");try{const t=await u.get(`/${f}/stickers.json`);Array.isArray(t)?h.load(t):n.dispatchEvent("loading-error")}catch(t){n.dispatchEvent("loading-error")}})(),t?(h.setFilter(""),l.addEventListener("activatedNodesChanged",g),l.getIdea().addEventListener("changed",m),m()):(l.removeEventListener("activatedNodesChanged",g),l.getIdea().removeEventListener("changed",m)))},n.getStickersForCategory=t=>{if(!e)throw new Error("not-active");if(!t)throw new Error("invalid-args");return p&&p[t]?p[t]:h.getStickersForCategory(t)},n.getMetadataCategories=()=>{if(!e)throw new Error("not-active");return h.getCategories()},h.addEventListener("changed",(()=>n.dispatchEvent("stickers-for-metadata-loaded"))),n.addStickerToActivatedNodes=t=>{if(!t)throw new Error("invalid-args");if(!l.getEditingEnabled()||!l.getInputEnabled())return!1;const e=a(t),n=l.getIdea();return l.applyToActivated((t=>{const r=n.findSubIdeaById(t),o=r&&r.getAttr(s)||[];r&&d.canStyleIdea(r)&&!o.includes(e)&&n.updateAttr(t,s,o.slice(0).concat([e]))})),!0},n.removeStickerFromActivatedNodes=t=>{if(!t)throw new Error("invalid-args");if(!l.getEditingEnabled()||!l.getInputEnabled())return!1;const e=a(t),n=l.getIdea();return l.applyToActivated((t=>{const r=n.findSubIdeaById(t),o=r&&r.getAttr(s);o&&d.canStyleIdea(r)&&o.includes(e)&&n.updateAttr(t,s,o.length>1&&o.filter((t=>t!==e))||!1)})),!0},n.removeAllStickersFromActivatedNodes=()=>{if(!l.getEditingEnabled()||!l.getInputEnabled())return!1;const t=l.getIdea();return l.applyToActivated((e=>{const n=t.findSubIdeaById(e);n&&n.getAttr(s)&&d.canStyleIdea(n)&&t.updateAttr(e,s,!1)})),!0}}},31030:(t,e,n)=>{"use strict";const r=n(89080),o=n(59050);t.exports=function(t){let e;const n=r(this),i=function(t){return 0===o.size(t.storyboards)},s=function(e,n,r,o){const i=t.getScenesForNodeId(n),s=function(t,e,n){const r={storyboards:{}};return r.storyboards[t]=e,n&&(r.type=n),r}(e,r,o);i.push(s),t.setScenesForNodeId(n,i)},a=function(){n.dispatchEvent("storyboardContext",function(){const n=t.getScenes(),r=e&&n&&n.length&&n.indexOfScene(e);return n?{hasScenes:n.length>0,notFirst:r>0,notLast:e&&r>-1&&r<n.length-1,isEnabled:t.getInputEnabled(),selectedScene:e}:{isEnabled:t.getInputEnabled()}}())};n.addScene=function(e,n,r){let o=t.getActiveStoryboardName(),i=1;o||(o=t.createStoryboard()),i=n?t.insertionIndexBefore(n):t.nextSceneIndex(),i?s(o,e,i,r):t.rebalanceAndApply([n],(function(n){s(o,e,t.insertionIndexBefore(n[0]),r)}))},n.moveSceneAfter=function(e,n){if(!e)return!1;if(n&&n.ideaId===e.ideaId&&n.index===e.index)return!1;let r,i;const s=t.getActiveStoryboardName(),a=t.getScenes(),c=a&&o.indexOf(a,o.find(a,(function(t){return t.ideaId===e.ideaId&&t.index===e.index})));if(!a||!a.length)return!1;if(-1===c)return!1;if(n){if(c>0&&(i=o.indexOf(a,o.find(a,(function(t){return t.ideaId===n.ideaId&&t.index===n.index}))),c===i+1))return!1;r=t.insertionIndexAfter(n)}else{if(0===c)return!1;r=t.insertionIndexAfter()}return r?t.updateSceneIndex(e,r,s):t.rebalanceAndApply([e,n],(function(e){t.updateSceneIndex(e[0],t.insertionIndexAfter(e[1]),s)})),!0},n.moveSelectedSceneLeft=function(){const r=t.getScenes(),o=e&&r.indexOfScene(e);0!==o&&(1===o?n.moveSceneAfter(e):n.moveSceneAfter(e,r[o-2]))},n.moveSelectedSceneRight=function(){const r=t.getScenes(),o=e&&r.indexOfScene(e);o!==r.length-1&&n.moveSceneAfter(e,r[o+1])},n.removeScenesForIdeaId=function(e){const n=t.getActiveStoryboardName(),r=n&&t.getScenesForNodeId(e);let s;return!!n&&(o.each(r,(function(t){t.storyboards&&t.storyboards[n]&&(delete t.storyboards[n],s=!0)})),!!s&&(t.setScenesForNodeId(e,o.reject(r,i)),!0))},n.removeScene=function(n){if(!n||!n.ideaId||!n.index){if(!e)return!1;n=e}const r=t.getActiveStoryboardName(),s=r&&t.getScenesForNodeId(n.ideaId);if(!r)return!1;o.each(s,(function(t){t.storyboards&&t.storyboards[r]&&t.storyboards[r]===n.index&&delete t.storyboards[r]})),t.setScenesForNodeId(n.ideaId,o.reject(s,i))},n.setSelectedScene=function(t){e&&e.matchesScene(t)||(e=t,a())},n.getSelectedScene=function(){return e},t.addEventListener("inputEnabled storyboardChangeComplete",a),t.addEventListener("storyboardSceneMoved",(function(t){t.from.matchesScene(e)&&n.setSelectedScene(t.to)})),t.addEventListener("storyboardSceneRemoved",(function(r){const i=t.getScenes();let s;o.isEmpty(i)&&n.setSelectedScene(!1),r.matchesScene(e)&&(s=o.find(i,(function(t){return t.index>e.index})),s||(s=i[i.length-1]),n.setSelectedScene(s))}))}},15513:(t,e,n)=>{"use strict";const r=n(78566);t.exports=function(t,e){if(!t)throw"invalid-args";this.getDimensionsForScene=function(n,o,i){const s=Math.floor(o/16),a={text:{height:i-2*s,width:o-2*s,"padding-top":s,"padding-bottom":s,"padding-left":s,"padding-right":s,toCss:function(){const t={};return Object.keys(a.text).forEach((e=>{"text"!==e&&"toCss"!==e&&(t[e]=r(a.text[e]))})),t}},image:{toCss:function(){return{"background-image":"","background-repeat":"","background-size":"","background-position":""}}}};let c=1,l=i,d=o,u=0,h=0;var f;return n.image&&("top"===n.image.position||"bottom"===n.image.position?(l=i/2-s,a.text["padding-"+n.image.position]=i/2,a.text.height=i/2-s):"left"!==n.image.position&&"right"!==n.image.position||(d=o/2-s,a.text["padding-"+n.image.position]=o/2,a.text.width=o/2-s),c=d/n.image.width,c>l/n.image.height&&(c=l/n.image.height),a.image={url:n.image.url,height:c*n.image.height,width:c*n.image.width},"top"===n.image.position?(a.image.top=.25*i-.5*a.image.height,a.image.left=(o-a.image.width)/2):"bottom"===n.image.position?(a.image.top=.75*i-.5*a.image.height,a.image.left=(o-a.image.width)/2):"left"===n.image.position?(a.image.top=(i-a.image.height)/2,a.image.left=(o/2-a.image.width)/2):"right"===n.image.position?(a.image.top=(i-a.image.height)/2,a.image.left=.75*o-.5*a.image.width):(a.image.top=(i-a.image.height)/2,a.image.left=(o-a.image.width)/2),a.image.toCss=function(){return{"background-image":'url("'+(e&&e.getResource(n.image.url)||n.image.url)+'")',"background-repeat":"no-repeat","background-size":r(c*n.image.width)+" "+r(c*n.image.height),"background-position":r(a.image.left)+" "+r(a.image.top)}}),f=n.title,/\n-/.test(f)&&(a.text["text-align"]="left"),u=t(n.title,a.text.width,a.text.height),a.text.fontSize=u.fontSize,a.text.lineHeight=u.lineHeight,h=(a.text.width-u.textWidth)/2,h>0&&(a.text.width=u.textWidth,a.text["padding-left"]+=h,a.text["padding-right"]+=h),a}}},35589:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function(t,e,n){const o=function(t){const e=[];return r.each(t.storyboard,(function(t){t.image&&t.image.url&&e.push(t.image)})),e};this.makeExportable=function(i){const s=e.getScenes(),a=s&&{storyboard:r.map(s,(function(t){return r.extend({title:t.title},n.getDimensionsForScene(t,800,600))}))};return r.isEmpty(s)?Promise.reject("empty"):t.localiseIcons(a,o,i)}}},58191:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t,e){r(this),Object.freeze(Object.assign(this,{createScenesFromSelectedNodes:function(){t.applyToActivated((t=>{e.addScene(t)}))},createScenesFromSelectedNodesWithChildren:function(){t.applyToActivated((t=>{e.addScene(t,!1,"with-children")}))},editNode:function(e){const n=t.getCurrentLayout()?.nodes[e];n&&(t.focusAndSelect(e),t.editNode(e))}}))}},39484:(t,e,n)=>{"use strict";const r=n(89080),o=n(59050),i=n(35455);t.exports=function(t,e,n){let s,a;const c=r(this),l=function(){const e=c.getActiveStoryboardName(),r=[],s=function(t,e){let n=t.title;return"with-children"===e&&o.each(t.sortedSubIdeas(),(function(t){n=n+"\n- "+t.title})),n};e?(t.getActiveContent().traverse((function(t){const i=t.getAttr(n);i&&o.each(i,(function(n){const o=parseFloat(n.storyboards[e]);let i,a;o&&(i={ideaId:t.id,title:s(t,n.type),index:o},a=t.getAttr("icon"),a&&(i.image=a),r.push(i))}))})),a=i(o.sortBy(r,"index"))):a=i(r)},d=function(t,e){return Math.abs(t-e)<1e-4},u=function(){const t=a;s&&(l(),function(t){const e=function(t,e){const n={removed:[],added:[],contentUpdated:[]};return i(t),i(e),o.each(t,(function(t){const r=e&&e.findScene(t);r?r.title===t.title&&o.isEqual(r.image,t.image)||n.contentUpdated.push(r):n.removed.push(t)})),o.each(e,(function(e){t&&t.findScene(e)||n.added.push(e)})),1===n.added.length&&1===n.removed.length&&0===n.contentUpdated.length&&n.added[0].ideaId===n.removed[0].ideaId?{moved:{from:n.removed[0],to:n.added[0]}}:n}(t,a);o.each(e.removed,(function(t){c.dispatchEvent("storyboardSceneRemoved",t)})),o.each(e.added,(function(t){c.dispatchEvent("storyboardSceneAdded",t)})),o.each(e.contentUpdated,(function(t){c.dispatchEvent("storyboardSceneContentUpdated",t)})),e.moved&&c.dispatchEvent("storyboardSceneMoved",e.moved),o.isEmpty(e.moved)&&o.isEmpty(e.removed)&&o.isEmpty(e.added)||c.dispatchEvent("storyboardChanged")}(t))};c.setInputEnabled=function(t){s=t,t&&u(),c.dispatchEvent("inputEnabled",t)},c.getInputEnabled=function(){return s},c.getActiveStoryboardName=function(){const n=t&&t.getActiveContent(),r=n&&n.getAttr(e);if(r&&r.length>0)return r[0]},c.createStoryboard=function(){const n=t&&t.getActiveContent(),r=n&&n.getAttr(e)||[],i="Storyboard "+(function(t){let e;return t?(e=t.length,o.each(t,(function(t){const n=t.match(/^Storyboard ([1-9]+)/),r=n&&n.length>1&&parseFloat(n[1])||0;r>e&&(e=r)})),e):0}(r)+1);if(n)return r.push(i),n.updateAttr(n.id,e,r),i},c.nextSceneIndex=function(){return a&&a.nextSceneIndex()},c.updateSceneIndex=function(t,e,n){const r=c.getScenesForNodeId(t.ideaId);return o.each(r,(function(r){r.storyboards&&r.storyboards[n]&&r.storyboards[n]===t.index&&(r.storyboards[n]=e)})),c.setScenesForNodeId(t.ideaId,r),o.extend({},t,{index:e})},c.getScenesForNodeId=function(e){const r=t.getActiveContent().getAttrById(e,n)||[];return JSON.parse(JSON.stringify(r))},c.setScenesForNodeId=function(e,r){t.getActiveContent().updateAttr(e,n,r)},c.scenesMatch=function(t,e){return!(!t||!e)&&t.ideaId===e.ideaId&&t.index===e.index},c.rebalance=function(t){const e=[],n=c.getActiveStoryboardName();let r=1;return o.each(a,(function(i){const s=o.find(t,(function(t){return c.scenesMatch(i,t)})),a=void 0!==s?o.indexOf(t,s):-1,l=c.updateSceneIndex(i,r,n);r++,a>=0&&(e[a]=l)})),e},c.rebalanceAndApply=function(e,n){t.getActiveContent().batch((function(){const t=c.rebalance(e);u(),n(t)}))},c.insertionIndexAfter=function(t){return t?function(){const e=o.indexOf(a,o.find(a,(function(e){return e.ideaId===t.ideaId&&e.index===t.index})));return!(e<0)&&(e===a.length-1?t.index+1:function(e){const n=a[e+1].index,r=(t.index+n)/2;return!d(r,n)&&!d(r,t.index)&&r}(e))}():function(){let t;return 0!==a.length&&(t=a[0].index/2,!d(t,a[0].index)&&t)}()},c.insertionIndexBefore=function(t){const e=t&&a.indexOfScene(t);return!!t&&!(e<0)&&function(e){const n=0===e?0:a[e-1].index,r=(t.index+n)/2;return!d(r,n)&&!d(r,t.index)&&r}(e)},c.getScenes=function(){return s||l(),a},t.addListener(u)}},35455:(t,e,n)=>{"use strict";const r=n(75033),o=n(59050);t.exports=function(t){if(t)return t.findScene=function(e){if(e)return r(e),o.find(t,(function(t){return e.matchesScene(t)}))},t.indexOfScene=function(e){const n=e&&t.findScene(e);return n?o.indexOf(t,n):-1},t.nextSceneIndex=function(){const e=o.max(t,(function(t){return t&&t.index}));return e&&e.index?e.index+1:1},t}},75033:(t,e,n)=>{"use strict";const r=n(59050);t.exports=function t(e){if(e)return e.matchesScene=function(t){return!(!e||!t)&&e.ideaId==t.ideaId&&e.index===t.index},e.clone=function(){return t(r.extend({},e))},e}},42455:t=>{"use strict";t.exports=function(t,e,n){if(!t||!e||!n)throw new Error("invalid-args");const r=this,o=async()=>{const e=await t.authenticationModel.getLicense();if(e)return e;throw"not-authenticated"};r.acceptInvitation=(t,n)=>t&&n?o().then((r=>e.exec("subteam/invite/accept",{license:r,inviteId:n,teamId:t}))):Promise.reject(new Error("invalid-args")),r.changeMemberRole=(t,n,r)=>t&&n&&r?o().then((o=>e.exec("subteam/member/change_role",{license:o,teamId:t,memberAccount:n,role:r}))):Promise.reject(new Error("invalid-args")),r.create=t=>t&&t.trim()?o().then((n=>e.exec("subteam/create",{license:n,teamName:t}))):Promise.reject(new Error("invalid-args")),r.delete=t=>t?o().then((n=>e.exec("subteam/delete",{license:n,teamId:t}))):Promise.reject(new Error("invalid-args")),r.invite=(t,n,r)=>t&&n&&r?o().then((o=>e.exec("subteam/invite/new",{license:o,inviteEmail:t,teamId:n,role:r}))):Promise.reject(new Error("invalid-args")),r.listInvitations=t=>t?o().then((n=>e.exec("subteam/invite/list",{license:n,teamId:t}))):Promise.reject(new Error("invalid-args")),r.listTeams=async()=>{const n=await(async()=>({license:await o(),affiliateTeamIdentity:await t.affiliateTeamIdentityProvider.getAffiliateTeamIdentity()}))();return e.exec("subteam/list",n)},r.removeMember=(t,n)=>t&&n?o().then((r=>e.exec("subteam/member/remove",{license:r,memberAccount:n,teamId:t}))):Promise.reject(new Error("invalid-args")),r.listAllowedMembers=t=>t?o().then((n=>e.exec("subteam/allowed_members_list_url",{license:n,teamId:t}))).then((t=>n.loadUrl(t))).then((t=>Array.from(t.querySelectorAll("Key")).map((t=>t.textContent.split("/")[2])).map((t=>t.slice(0,t.length-5))))):Promise.reject(new Error("invalid-args"))}},13984:(t,e,n)=>{"use strict";const r=n(65765),o=n(15444),i=n(65209),s="MindMup Gold is not active";t.exports=function(t){return t?r(t)&&t.period&&t.price?"Payment failed for "+t.period+"ly renewal of "+t.price+" on "+o(t):i(t)?t.expiry?t&&"trial"===t.status?`MindMup Gold is active as a trial until ${o(t)}. An invoice has been sent to the registered email address (${t.email}).`:t.period?"MindMup Gold is active, "+t.period+"ly renewal of "+t.price+" next due on "+o(t):"MindMup Gold is active until "+o(t)+". It will not automatically renew.":"MindMup Gold is active. It will not automatically renew.":s:s}},65209:t=>{"use strict";t.exports=function(t){return!!(t&&t.status&&["trial","active","cancelled","overdue"].includes(t.status))}},57932:(t,e,n)=>{"use strict";const r=n(89080),o=n(59050),i=n(65209),s=n(97945),a=n(19949),c=n(71504),l=t=>{if(!t||!t.license)throw"network-error";return"string"==typeof t.license?JSON.parse(t.license):t.license};t.exports=function(t,e,n,d,u){let h,f=!1,p=!1;const g=r(this),m=function(){return t.getLicense().then((t=>{const e=u&&u.reauthenticateGold;return!t&&e?e().then((t=>t&&t.license)):t})).then((t=>t||Promise.reject("not-registered")))},v=function(t,n){return m().then((r=>e.exec(n,o.extend({},t,{license:r}))))},y=function(e,n,r){const o=h&&h.status,i=r&&r.silent;return i||g.dispatchEvent("updating-subscription"),v(e,n).then((e=>(e&&e.license&&t.updatedLicense(l(e)),g.getGoldAccountDetails(!0,!1,r).then((()=>{const t=h&&h.status;"active"!==o&&"active"===t&&g.dispatchEvent("subscriptionPurchased")})).then((()=>e))))).catch((t=>{throw i||(r&&r.knownErrors&&r.knownErrors.includes(t)?g.dispatchEvent("updating-subscription-failed-known-reason"):g.dispatchEvent("updating-subscription-failed")),t}))},w=function(e,n,r){if(!e)return Promise.reject("invalid-args");const o={email:e};return r&&["subAccount","dataAction"].forEach((t=>{r[t]&&(o[t]=r[t])})),y(o,n,r).then((e=>(r&&r.signoutOthersRequired&&t.signoutOthersRequired(),e)))},b=e=>{const n=l(e);return t.updatedLicense(n).then((()=>g.dispatchEvent("accountRegistered",n)))},E=function(e,n,r){return!e&&h&&(n&&h||i(h)&&h&&h.expiry&&1e3*h.expiry>Date.now())&&h?t.getProfile().then((t=>s(t,h))):g.getSubscription(r).then((function(e){return t.getProfile().then((t=>{const n=s(t,e,r);return g.dispatchEvent("goldAccountInfo",n),e?(n.active?g.dispatchEvent("subscribed",n):g.dispatchEvent("expiredSubscription",n),n):(g.dispatchEvent("notRegistered",n,"not-registered"),Promise.reject("not-registered"))}))})).catch((t=>{throw g.dispatchEvent("load-subscription-failed",t),t}))},x=()=>{const t=c(3);return d.retry((()=>m().then((t=>e.exec("license/subscription",{license:t}))).then((t=>(h=t,t)))),{backoff:a(),shouldRetry:e=>(console.log("shouldRetry! reason",e),!(!t()||"not-authenticated"!==e))})};t.addEventListener("authenticatedProfile",(function(e){const n=u&&u.getGoldAccountDetailsOnRegistration;e&&e.license&&(n||e.provider!==t.fallBackProviderName())?(g.dispatchEvent("retrievingSubscription"),g.getGoldAccountDetails(!0).catch((function(e){(function(t){return["not-authenticated","not-registered"].includes(t)})(e)&&t.signOut()}))):g.dispatchEvent("notRegistered")})),g.setAgreedSubscription=t=>{f=t},g.hasAgreedSubscription=()=>f,g.subscriptionAdministration=y,["not-authenticated","authenticating"].forEach((function(e){t.addEventListener(e,(function(){h=!1,g.dispatchEvent(e)}))})),g.changeSubAccountRole=(t,e)=>y({email:t,role:e},"license/subaccount/change_role"),g.requestSubAccountRemoval=t=>{p=t,g.dispatchEvent("subAccountContext",{subAccountToRemove:t})},g.confirmSubAccountRemoval=t=>p?g.removeLinkedEmail(p.email,t).then((()=>{p=!1,g.dispatchEvent("subAccountContext",{subAccountToRemove:!1}),g.dispatchEvent("subAccountRemoved")})):Promise.resolve(),g.confirmSubAccountMoveToMe=()=>g.confirmSubAccountRemoval("moveToCaller"),g.register=function(t,r){return e.exec("license/register",{to_email:r,account_name:t,source:n}).then(b)},g.registerGoogleDomain=function(t){return e.exec("license/register_google_domain",{token:t,source:n}).then(b)},g.registerMicrosoftOrganisation=function(t){return e.exec("license/register_microsoft_organisation",{token:t}).then(b)},g.listAccountinvitations=()=>v({},"license/email/link_requests"),g.removeAccountInvitation=t=>t?v({email:t},"license/email/remove_link_request"):Promise.reject(new Error("invalid-args")),g.addLinkedEmail=function(t,e,n){return w(t,"license/email/link_request",Object.assign({},n,{subAccount:e})).then((()=>g.dispatchEvent("linkedEmailNotification",{invitationEmailAddress:t,subAccount:e})))},g.removeLinkedEmail=function(t,e){return w(t,"license/email/unlink",{dataAction:e,signoutOthersRequired:!0})},g.cancelSubscription=function(){return y({},"stripe/cancel_subscription")},g.enableAtlas=()=>y({},"atlas/enable"),g.disableAtlas=()=>y({},"atlas/disable"),g.enableGoldStorage=()=>y({},"license/gold/enable"),g.disableGoldStorage=()=>y({},"license/gold/disable"),g.enableShareFreely=()=>y({},"license/share_freely/enable"),g.disableShareFreely=()=>y({},"license/share_freely/disable"),g.enableMailingInvitations=()=>y({},"license/mailing_invitations/enable"),g.disableMailingInvitations=()=>y({},"license/mailing_invitations/disable"),g.enableMicrosoftTeams=async t=>{await y({},"license/microsoft_teams/enable"),t||g.dispatchEvent("subteam-reload-required")},g.disableMicrosoftTeams=async()=>{await y({},"license/microsoft_teams/disable"),g.dispatchEvent("subteam-reload-required")},g.getSubscription=function(t){return x().catch((e=>{if("not-authenticated"===e&&t&&t.retryOnNoAuthenticated)return x();throw e}))},g.getGoldAccountDetails=E,g.reloadAccountDetailsAfterPurchase=()=>E(!0,!1,{purchaseComplete:!0}),g.getAccountInfoForLicense=function(){let e;return t.getProfile().then((t=>e=t)).then((()=>g.getSubscription())).then((t=>t&&s(e,t)))},g.showPersonalAccountSignup=()=>g.dispatchEvent("showPersonalAccountSignup"),g.showChangeCard=()=>g.dispatchEvent("showChangeCard"),g.showBillingPortal=()=>g.dispatchEvent("showBillingPortal")}},65765:t=>{"use strict";t.exports=function(t){return!(!t||!["delinquent","overdue"].includes(t.status))}},23873:(t,e,n)=>{"use strict";const r=n(89080),o=n(59050);t.exports=function(t){let e,n,i={CCY:t[0].CCY};const s=r(this),a=function(t){return!(!t||!t.id||!e&&!e.length||!o.find(e,(function(e){return e.id===t.id})))},c=function(t){t!==n&&(n=t,s.dispatchEvent("planSelected",t))},l=function(r){if(!r)throw new Error("must set filter");const l=t.filter((t=>t.CCY===r.CCY)).filter((t=>{return e=t.purchaseAction,!r.actions||r.actions.includes(e);var e}));i=r,(!e||o.difference(e,l).length||o.difference(l,e).length)&&(e=l,a(n)||c(!!e.length&&e[0]),s.dispatchEvent("subscriptionPlansChanged",e,n))};s.getSelectedPlan=function(){return n},s.findPlanForPredicate=e=>t.find(e),s.availablePlans=function(){return e&&e.slice(0)},s.setSelectedPlan=function(t){return!!(t&&t.id&&a(t))&&(c(t),!0)},s.filterPlans=function(t){l({actions:t,CCY:i.CCY})},s.getSelectedCurrency=()=>n.CCY,s.setSelectedCurrency=e=>{if(!t.map((t=>t.CCY)).includes(e))throw new Error("invalid-args");return s.dispatchEvent("currencySelected",e),l(Object.assign({},i,{CCY:e}))},s.getAvailableCurrencies=()=>Array.from(new Set(t.map((t=>t.CCY)))),s.getUpgradePlan=(e,n)=>t.find((t=>t.requireUpgradeAction&&t.type===n&&e.includes(t.requireUpgradeAction))),l(i)}},15444:t=>{"use strict";t.exports=function(t){const e=t&&t.expiry,n=e&&new Date(1e3*e);return n&&n.toDateString()||""}},71498:(t,e,n)=>{"use strict";const r=n(73334),o=n(56376),i=n(83693),s=n(39700);t.exports=function(t,e,n,a,c){if(!(t&&e&&n&&a))throw new Error("invalid-args");const l=c&&c.Poller||r,d=c&&c.Task||o,u=c&&c.taskIdGenerator||i;this.newTaskId=u,this.build=async r=>{if(!r)throw new Error("invalid-args");const o=new l(n);return await(async()=>{if(!await a())throw"not-authenticated";return!0})(),new d(r,o,a,t,e,s)}}},78899:t=>{"use strict";t.exports=function(t){this.retry=function(e,n){return new Promise((function(r,o){const i=function(){e().then(r,(function(e){n&&n.shouldRetry&&!n.shouldRetry(e)?o(e):n&&n.backoff?(t.setTimeout(i,n.backoff()),n&&n.notify&&n.notify("Network problem... Will retry shortly")):i()}))};i()}))}}},56376:t=>{"use strict";t.exports=function(t,e,n,r,o,i){if(!(t&&e&&n&&r&&o&&i))throw new Error("invalid-args");let s;const a=this,c=async(e,o)=>{const i=await n();return r.exec(e,Object.assign({},o,{license:i,taskId:t}))},l=async()=>{const t=await(async()=>{if(!s||!i(s)){const t=await c("task/url");s=t}return s})(),e=await o.loadUrl(t).catch((()=>!1));return e&&e.length?a.metadata=e.reduce(((t,e)=>Object.assign(t,e)),{}):a.metadata={},a.metadata},d=()=>(e.cancelPolling(),c("task/cancel")),u=async t=>{if(e.isPolling())throw new Error("invalid-state");return e.poll(l,(e=>!(!e||"cancelled"!==e.status)||t(e)),{pollingInterval:2e3,initialDelay:1e3})};a.id=()=>t,a.metadata={},a.waitFor=u,a.cancelIfWaiting=()=>{if(e.isPolling())return d()},a.cancel=d,a.exec=c,a.execAndWaitFor=(t,e,n)=>c(t,e).then((()=>u(n)))}},46350:t=>{"use strict";t.exports=function(t){if(!t||"function"!=typeof t)throw new Error("invalid-args");const e={};this.textWidth=function(n,r){if(!(r&&r.weight&&r.family&&r.fontSize))throw new Error(`invalid-args;fontMetrics:${r}`);return e[r.family]||(e[r.family]={}),e[r.family][r.weight]||(e[r.family][r.weight]={}),e[r.family][r.weight].hasOwnProperty(n)||(e[r.family][r.weight][n]=t(n,r)),e[r.family][r.weight][n]}}},56765:t=>{"use strict";t.exports=function(t){if(!t)return"older";const e=new Date,n=new Date(t);return e.getFullYear()===n.getFullYear()?e.getMonth()===n.getMonth()?e.getDate()===n.getDate()?"same-day":e.getDate()===n.getDate()+1?"last-day":"same-month":e.getMonth()===n.getMonth()+1?"last-month":"same-year":e.getFullYear()===n.getFullYear()+1?"last-year":"older"}},1683:t=>{"use strict";t.exports=function(t){return["alt","shift","ctrl","meta"].filter((e=>t[e+"Key"])).concat((t=>{const e=t.key&&({" ":"SPACE",ArrowUp:"UP",ArrowDown:"DOWN",ArrowLeft:"LEFT",ArrowRight:"RIGHT",Delete:"DEL",Escape:"ESC"}[t.key]||t.key.toUpperCase());if(t.altKey||"DEAD"===e){const e=t.code;if(e)return e.replace(/^(Key|Digit|Numpad)/i,"")}return e})(t)).join("+").toUpperCase()}},1130:t=>{"use strict";t.exports=function(t,e){if(Array.isArray(t)){if(!t.includes(e))return[e].concat(t);const n=t.filter((t=>t!=e));if(0===n.length)return;return n}return[e]}},78274:t=>{"use strict";t.exports=function(){Object.freeze(Object.assign(this,{parseJWT:t=>{try{const e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(atob(e))}catch(t){return!1}}}))}},33801:t=>{"use strict";t.exports=function(t,e){if(!e||e<0)return t;const n=t&&t.length&&t.split(" ")||[],r=[];let o=0,i=!1;for(;r.length<n.length&&o+n[r.length].length<e;)o+=n[r.length].length+1,r.push(n[r.length]);return i=r.join(" "),r.length<n.length?i+"...":i}},42404:(t,e,n)=>{"use strict";const r=n(89080);t.exports=function(t,e,n,o,i){let s,a,c,l,d,u,h=0,f=!1;const p=r(this),g=function(){const t=!!c&&c.length>0;p.dispatchEvent("fileChangeContext",{unsaved:t})},m=function(){return"unsaved-changes"+t.getPath()},v=()=>{const t=m();t!==s&&n.remove(t),s&&c&&c.length&&(n.remove(s),s=void 0,c=[])},y=t=>{if(c&&c.length){const e="This document has unsaved changes. If you leave now, you might lose data. If you are experiencing connectivity problems, cancel and save the data locally using File->Download As->MindMup";return t.returnValue=e,t.preventDefault(),e}};p.notifyFileSaving=function(){d=Date.now()},p.notifyFileSaved=function(){a&&(u=d,u>h&&(p.dispatchEvent("noUnsavedChanges"),v(),g()))},p.discardUnsavedChanges=function(){v(),p.dispatchEvent("unsavedChangesConfirmed")},p.getUnsavedChanges=function(){if(a)return n.getItem(m())},p.applyUnsavedChanges=function(t){if(!t&&!a)return;const r=t||n.getItem(m());r&&r.length&&(v(),r.forEach((t=>{e.triggerRemoteContentEvent(t,e.getLocalSessionId())}))),p.dispatchEvent("unsavedChangesConfirmed")},p.start=e=>{a||(t.addWindowEventListener("beforeunload",y),g(),a=e&&e.fileId,f=e,s=m(),c=n.getItem(s)||[],c.length&&i&&p.dispatchEvent("unsavedChangesPending"),p.dispatchEvent("started"))},p.halt=()=>{t.removeWindowEventListener("beforeunload",y),v(),g(),a=!1,f=!1,s=!1,c=!1,p.dispatchEvent("halted")},p.localContentEvent=t=>{if(!a)throw new Error("not-initialised");if(h=Date.now(),p.dispatchEvent("unsavedChanges"),l){if(f&&f.free)return void p.dispatchEvent("free-map-subscriber-edit");if(f&&f.gold)return void e.error("readonly")}m()!==s&&(s=m(),c=n.getItem(s)||[]),c.push(t),g();try{n.setItem(s,c)}catch(t){p.dispatchEvent("unsavedChangesStorageWarning")}},o&&o.addEventListener("goldAccountInfo",(t=>{l=t&&t.active}))}},70098:t=>{"use strict";t.exports=function({webSocketShim:t,navigatorShim:e}){let n=!1;const r=this,o=[];e.setInterval((()=>{const e=o.length,r=o.slice(0,e),i=r.map((t=>t.data));if(!n&&r.length&&t.isOpen()){n=!0;try{t.send(i),r.forEach((t=>t.resolve()))}catch(t){r.forEach((e=>e.reject(t)))}o.splice(0,e),n=!1}}),2e3),Object.keys(t).forEach((e=>{r[e]=t[e]})),r.send=t=>new Promise(((e,n)=>{o.push({data:t,resolve:e,reject:n})}))}},12287:(t,e,n)=>{"use strict";const r=n(89080),o="error";t.exports=function({navigatorShim:t}){if(!t||"function"!=typeof t.buildWebSocket)throw new Error("invalid-args");let e,n;const i=r(this),s={close:async()=>{e=!1,n&&t.isOnline()&&(await t.delay(1e3),i.start(n.websocketUrl,n.params))},message:t=>{try{const e=JSON.parse(t.data);i.dispatchEvent("message",e)}catch(t){i.dispatchEvent("protocolError",t,"dataDeserializationError")}},error:t=>{i.dispatchEvent(o,t,"socketError")}},a=()=>{if(e){n=!1,Object.keys(s).forEach((t=>{try{e.removeEventListener(t,s[t])}catch(e){i.dispatchEvent(o,e,{removeEventListener:t})}}));try{e.close(),i.dispatchEvent("close")}catch(t){i.dispatchEvent(o,t,"closeSocketError")}e=!1}};i.start=async(r,o)=>{if(!r||"string"!=typeof r)throw new Error("invalid-args");a();const i=t.encodeUrlParams(r,o);e=await t.buildWebSocket(i),n={websocketUrl:r,params:o},Object.keys(s).forEach((t=>e.addEventListener(t,s[t])))},i.isOpen=()=>e&&e.readyState===e.OPEN,i.stop=a,i.send=t=>{if(!e){const t=new Error("invalid-socket");throw i.dispatchEvent(o,t,"sendingDataWithNoSocketError"),t}try{e.send(JSON.stringify({action:"clientmessage",data:t}))}catch(t){throw i.dispatchEvent(o,t,"sendingDataError"),t}},t.addEventListener("network-status",(t=>{if(n&&t&&!i.isOpen())return i.start(n.websocketUrl,n.params)}))}},70517:(t,e,n)=>{"use strict";const r=n(89080),o=n(90618),i=n(59050);t.exports=function(t,e,n){let s={},a=!1,c={};const l=r(this),d=function(t){return s[t]},u=function(t){return o(t&&t.title,40)},h=function(e){const n=function(e){const n=t.getActiveContent();return n.id===e?n:n.findSubIdeaById(e)}(e);return u(n)},f=function(){const t=!(!e.getIdea()||!c[e.getSelectedNodeId()]);l.dispatchEvent("writerContext",{isEnabled:a,hasSelection:t})},p=function(t){const e=c[t];l.dispatchEvent("activeNodeChanged",e&&t),f()};l.setText=function(e,r){const o=c[e]&&c[e].isTemp;let i,s;r?(i=t.getActiveContent().getAttrById(e,n)||{index:d(e)},i.text=r):i=!1,s=!i&&o,s||t.getActiveContent().updateAttr(e,n,i)||(s=o),s&&(delete c[e],l.dispatchEvent("noteRemoved",e))},l.editNoteForSelectedNode=function(){l.editNoteForNodeId(e.getSelectedNodeId())},l.editNoteForNodeId=function(t){var n;if(e.isEditingEnabled())return c[t]||(c[t]={index:d(t),nodeId:t,title:h(t),isTemp:!0}),(n=c[t])&&(l.setActiveNodeId(n.nodeId),l.dispatchEvent("noteEditRequested",n)),!!n},l.removeSelected=function(){l.setText(e.getSelectedNodeId())},l.removeNoteForNodeId=function(t){e.isEditingEnabled()&&l.setText(t)},l.setActiveNodeId=function(t){e.centerOnNode(t)},t.addListener((function(t){const e=i.keys(c),r=function(t){let e=1;const r={};return s={},t.traverse((function(t){s[t.id]=e++,t.attr&&t.attr[n]&&(r[t.id]=i.extend({},t.attr[n],{nodeId:t.id,title:u(t),index:d(t.id)}))})),r}(t),o=i.keys(r);let a=!1;i.difference(e,o).forEach((function(t){c[t].isTemp?r[t]=c[t]:(l.dispatchEvent("noteRemoved",t),a=!0)})),i.difference(o,e).forEach((function(t){l.dispatchEvent("noteAdded",r[t]),a=!0})),i.intersection(o,e).forEach((function(t){const e=r[t];c[t].text?(c[t].text===e.text&&c[t].title===e.title||l.dispatchEvent("noteChanged",e),c[t].index!==e.index&&(l.dispatchEvent("noteMoved",e),a=!0)):(l.dispatchEvent("noteAdded",e),a=!0)})),c=r,a&&f()})),l.requestContextMenu=function(t,n){return l.dispatchEvent("contextMenuRequested",e.getSelectedNodeId(),t,n,!0),!0},l.setInputEnabled=function(t){a=t,f()},l.toggleActiveNoteFolded=function(){l.dispatchEvent("noteToggleFoldRequested",e.getSelectedNodeId())},l.foldInactiveNotes=function(){l.dispatchEvent("foldInactiveNotesRequested")},l.toggleNoteFolded=function(t){l.dispatchEvent("noteToggleFoldRequested",t)},l.canImportFromAttachment=function(e){const n=t.getActiveContent().getAttrById(e,"attachment");return n&&"text/html"===n.contentType&&!n.dataUriEncoded&&n.content},l.importFromAttachment=function(e){const r=t.getActiveContent().getAttrById(e,"attachment"),o=l.canImportFromAttachment(e)&&(i=r.content)&&i.replace(/\n+/g," ").replace(/<\/p><p>/gi,"\n\n").replace(/<\/?p>/gi,"\n\n").replace(/<\/div><div>/gi,"\n\n").replace(/<\/?div>/gi,"\n\n").replace(/<br\/?>/gi,"\n\n").replace(/<\/li><\/[uo]l>/gi,"\n\n").replace(/<\/?[uo]l>/gi,"\n\n").replace(/<\/li>/gi,"\n\n").replace(/<li>/gi,"* ").replace(/<\/?i>/gi,"_").replace(/<\/?b>/gi,"**").replace(/<\/h[0-9]>/gi,"\n\n").replace(/<h1>/gi,"\n\n# ").replace(/<h2>/gi,"\n\n## ").replace(/<h3>/gi,"\n\n### ").replace(/<h4>/gi,"\n\n#### ").replace(/<h[0-9]>/gi,"\n\n").replace(/<a[^>]*href="([^"]*)"[^>]*>([^<]*)<\/a>/gi,"[$2]($1)").replace(/<a[^>]*href='([^']*)'[^>]*>([^<]*)<\/a>/gi,"[$2]($1)").replace(/<a[^>]*href=([^"'][^ ]*) [^>]*>([^<]*)<\/a>/gi,"[$2]($1)").replace(/<[^>]*>/g,"").replace(/\n\n+/g,"\n\n").trim();var i;return!!o&&(t.getActiveContent().batch((function(){t.getActiveContent().updateAttr(e,"attachment",!1),t.getActiveContent().updateAttr(e,n,{text:o})})),!0)},e.addEventListener("nodeSelectionChanged",(function(t,e){e&&a&&p(t)})),e.addEventListener("decorationActionRequested",(function(t,n){"note"===n&&(e.isEditingEnabled()?l.editNoteForNodeId(t):p(t))}))}},92995:(t,e,n)=>{"use strict";const r=n(83810),o=n(52092),i=n(40066),s=n(51238),a=n(1229),c=n(51197),l=n(67247),d=n(91621),u=n(58463),h=n(89142),f=n(52979),p=n(44136),g=n(75833),m=n(25509),v=n(53701),y=n(17662),w=n(70517),b=n(16429),E=n(59484),x=n(3088),S=n(82423),A=n(15257),C=n(39484),I=n(15513),k=n(31030),F=n(58191),M=n(52956),T=n(43361),P=n(87522),L=n(42404),O=n(45942),_=n(65476),R=n(40796),U=n(11421),D=n(34623),N=n(53691),j=n(22281),B=n(86508),W=n(98591),q=n(59193),z=n(17807),V=n(49560),G=n(75282),K=n(70791),H=n(12274),$=n(25524),Y=n(50268),J=n(23873),X=n(442),Q=n(52720),Z=n(32680),tt=n(53235),et=n(89260),nt=n(53020),rt=n(24287),ot=n(60868),it=n(7e3),st=n(12704).formatNoteToHtml,at=n(39190),ct=n(97002),lt=n(68052),dt=n(85483),ut=n(74230),ht=n(42455),ft=n(57319),pt=n(64645),gt=n(73960),mt=n(53505),vt=n(71597),yt=n(55194),wt=n(26205),bt=n(24492),Et=n(83693);n(63505),n(7217),n(89124),n(61665),n(90885),n(56646),n(451),n(33849),n(19942),n(80415),n(91140),n(65441),n(52635),n(65170),n(52733),n(460),n(91747),n(56827),n(62834),n(31008),n(33795),n(86010),n(29858),n(60880),n(86620),n(45221),n(66163),n(40500),n(58493),n(98605),n(94519),n(41652),n(43920),n(85717),n(94995),t.exports=function(){const t=new i,e=new y(o,t),n=new c(1e3),xt=t.getJsonStorage(),St=new J(gt(o.allowedAccountTypes)),At=new u(t),Ct=new a(At,o.goldAWSApiUrl),It=j(o,Ct,t,window,At),kt=new Z(Ct,It.authenticationModel),Ft=new l(t,At),Mt=new h(t),Tt=Et(),Pt=new d(o,It,Ct,Ft,t,B,{useWatermark:!0,clientSecret:Tt}),Lt=new ft,Ot=new p(Pt,v,e,Lt),_t=nt(o,n,t,Lt,Ot.getResource),Rt=new f(Mt,e,Ot),Ut=new g(Mt,e,Ot,{subscriptionModel:It.subscriptionModel}),Dt=new G(t,Ot),Nt=t.getMMVersion(),jt=et(Object.assign({config:o,ajaxPromise:At,storage:xt,version:Nt,imagePicker:Rt},_t)),Bt=Y(_t.mapModel,Rt,Ot.calculateImageDimensions,jt.colorPickerModel,!1,Ot.getResource),Wt=new m(_t.mapModel,Rt,Ot.calculateImageDimensions),qt=document.querySelector("mapeditor"),zt=new w(_t.collaborationModel,_t.mapModel,"note"),Vt=new b(_t.mapModel,Ut,t,zt,{resourceManager:Ot}),Gt=new $(o,t,At,"/assets/image-placeholder.svg"),Kt=new A(Gt,Ot),Ht=new H([Dt.localiseSingleAttachment,Kt.localiseSingleIcon],{resourceManager:Ot,localiseBackgroundImage:Kt.localiseBackgroundImage}),$t=new ct(Ht,_t.collaborationModel,_t.mapModel,_t.themeProvider,_t.nodeViewModel,{localiserOptions:{imageScale:1},literalTheme:!0}).makeExportable,Yt=new X(o,$t,t,Gt,_t.themeProvider,_t.mapModel),Jt=new S(o,t),Xt=new O,Qt=new dt(It.authenticationModel,_t.collaborationModel.getLocalSessionId),Zt=bt({config:o,navigatorShim:t,authenticationModel:It.authenticationModel,goldApi:Ct,mapModel:_t.mapModel}),te=new _({collaborationModel:_t.collaborationModel,s3FileModel:Pt,pageState:e,navigatorShim:t,networkStatusDispatcher:Jt,resourceManager:Ot,goldFileChangesCache:Xt,envelopeBuilder:Qt,goldFileHistoryEnvelopeSorter:new R},{thumbnailBuilder:Yt,disableReupload:!0,goldSessionModel:Zt.goldSessionModel,webSocketShim:Zt.webSocketShim}),ee=new L(t,_t.collaborationModel,xt,It.subscriptionModel,!0),ne=new x({config:o,navigatorShim:t,subscriptionModel:It.subscriptionModel,collaborationModel:_t.collaborationModel,pageState:e,s3FileModel:Pt,resourceManager:Ot,goldFileChangesModel:te,jsonStorage:xt,unsavedChangesModel:ee},{thumbnailBuilder:Yt}),re=new ht(It,Ct,Ft),oe=new at(ne,Pt,re),ie=lt(o,Mt,It.subscriptionModel,t,Pt,kt,Ft,Ct),se=ot(o,_t.collaborationModel,_t.mapModel,t),ae=new C(_t.collaborationModel,"storyboards","storyboard-scenes"),ce=new I(M,Ot),le=new k(ae,_t.mapModel),de=new F(_t.mapModel,le),ue=new T(n),he=rt(o,kt,Ft,n,ue,t,_t.collaborationModel,_t.mapModel,_t.themeProvider,Kt,Ht,ae,ce,At,It,Ct,ne,_t.nodeViewModel,te),fe=new P(ne,_t.collaborationModel,ee,te),pe=new U(o,Pt,he.localMapContentExporter.makeExportable,ne),ge=new D(o,Pt,he.localMapContentExporter.makeExportable,jt.mapEditorModel,t),me=N(o,Ct,It.subscriptionModel,It.authenticationModel,It.reauthenticator,t),ve=new s(Ot,{skipConfirmation:!0}),ye=new vt,we=new mt(ye,Pt,o.editorUrl,t,{pageState:e}),be=ut(_t.mapModel,_t.mapThemeModel,{packers:[new W(Ot,e),new q(Ot,e)],unpackers:[new z(Gt,{pageState:e}),new V(t,e),ve],goldFileChangesModel:te},t),Ee=new tt(_t.mapModel),xe=new pt(o,t),Se=yt(Lt,t,ne),Ae=new wt({storage:xt,goldApi:Ct,authenticationModel:It.authenticationModel,source:t.getHostName()}),Ce=t.getHashStringValue("editingContext"),Ie=Object.assign({assetUploadController:ve,attachmentEditorController:Vt,fileChangesModel:fe,cognito:me,confirmationSender:Ae,contextMenuModel:Ee,copyFileController:pe,goldPageState:e,goldFileChangesModel:te,goldFileListModel:we,goldFunnelModel:ue,iconEditorController:Wt,mapCreatorModel:xe,mapSharingModel:oe,navigatorModel:t,networkStatusDispatcher:Jt,pageController:ne,s3FileModel:Pt,storyboardMapMediator:de,storyboardModel:ae,storyboardController:le,subteamApi:re,unsavedChangesModel:ee,linkedSubmapController:ge,writerModel:zt},Zt,It,jt,_t,he,Bt,Se,be,ie,se);_t.collaborationModel.addEventListener("newSession",(()=>Ae.confirm("map-loaded"))),Q(o,It.subscriptionModel,St,It.authenticationModel,t,Ft,Ct),new K(t,ne,pe),it(Ie,qt),window.components=Ie,It.subscriptionModel.addEventListener("goldAccountInfo",(t=>{t&&t.subscription&&we.setAllowedActions(t.subscription.actions)})),It.authenticationModel.addEventListener("authenticatedProfile not-authenticated",(e=>{"signed-out"!==e||t.redirect("/")})),ne.addEventListener("ready",(()=>{const t=_t.collaborationModel.getActiveContent();_t.mapModel.setIdea(t),Bt.progressModel.bindContentListeners(),_t.mapModel.focusAndSelect(t.getDefaultRootId())})),E(o,_t.collaborationModel,ne),r("[data-mm-hotkey]").macifyHotkeys(t),r("[data-mm-subscription-profile]").subscriptionProfileWidget(It.subscriptionModel),r('[data-mm-role="copyFileWidget"]').copyFileWidget(pe,ne),r("body").splittableWidget(jt.splittableModel,_t.mapModel,!0),t.isMobile()&&t.isTouch()&&r("body").addClass("touchdevice"),r('[data-mm-role="iconEditorWidget"]').iconEditorWidget(Wt,Ot.getResource),r('[data-mm-role="file-name"]').fileNameWidget(ne,te),r('[data-mm-role="attachmentEditorWidget"]').attachmentEditorWidget(Vt),r('[data-mm-role="contactLink"]').contactLinkWidget(o,t),Ie.domMapController=_t.initialiseWidgets(qt,Zt,jt.splittableModel),jt.initialiseWidgets({stage:r("[data-mapjs-role=stage]"),domMapController:Ie.domMapController,navigatorShim:t,domImageDimensionCalculator:v,pageState:e,resourceManager:ve,urlDownloader:Gt}),he.initialiseWidgets(),se.initialiseWidgets(),ie.initialiseWidgets(),Se.initialiseWidgets(),Zt.initialiseWidgets(),r("mapmenu").menuBarWidget(t),r("[data-mm-node-context]").nodeContextWidget(_t.mapModel),r("a[download]").downloadLinkWidget(t),r("[data-mm-show-hotkey]").showHotkeyWidget(r(document)),r('contextmenu[data-mm-role~="node-context"]').contextMenuWidget(Ee,r("mapeditor"),r("body")),r('contextmenu[data-mm-role~="writer-context"]').contextMenuWidget(new tt(zt),r("#writer"),r("body"),{smallContexts:["contextMenuRequested"]}),r("[data-mm-role=keyboard-color]").keyboardColorWidget(_t.mapModel,jt.mapEditorModel,_t.themeProvider),r("#searchWidget").searchWidget(_t.mapModel),r('[data-mm-role~="popup-link"]').popupLinkWidget(t),r("[data-mm-role~=selectable-read-only]").selectableReadOnlyInputWidget(),r("[data-mm-role~=full-screen-view]").fullScreenControlWidget(t),r("tabbedsection").tabbedSectionWidget(),r("[data-mm-sidebar-name]").sidebarWidget(jt.splittableModel),r("#storyboard").storyboardWidget(le,ae,ce,de,jt.splittableModel),r("#writer").writerWidget(zt,jt.splittableModel,st),r("[data-mm-install-hotkey]").installHotkeyWidget(),r("[data-mm-context-menu-context]").contextDisablerWidget(Ee,"context","data-mm-context-menu-context"),r("[data-mm-storyboard-context]").contextDisablerWidget(le,"storyboardContext","data-mm-storyboard-context"),r("[data-mm-file-save-context]").contextDisablerWidget(ee,"fileChangeContext","data-mm-file-save-context"),r("[data-mm-file-info-toggle]").fileInfoValueToggleWidget(ne),r("[data-mm-writer-context]").contextDisablerWidget(zt,"writerContext","data-mm-writer-context"),r("[data-mm-themes-context]").contextDisablerWidget(_t.mapThemeModel,"themesContext","data-mm-themes-context"),r("[data-mm-argument-mapping-context]").contextDisablerWidget(jt.argumentMappingModel,"argumentMappingContext","data-mm-argument-mapping-context"),r("[data-mm-map-sharing-context]").contextDisablerWidget(oe,"context","data-mm-map-sharing-context"),r("mapeditor").storyboardKeyHandlerWidget(le,ae,_t.mapModel,"+"),r("[data-mm-role~=blob-downloader-link]").blobDownloaderLinkWidget(t),r("[data-mm-role~=blob-tab-loader-link]").blobDownloaderLinkWidget(t,!0),r("#gold-map-sharing-modal").goldMapSharingWidget(oe),r("[data-mm-role~=file-timestamp]").fileTimestampWidget(te),r('[data-mm-role~="anonymous-files"]').anonymousFilesWidget(xt),r('[data-mm-role~="file-tags-list"]').fileTagsWidget(we),window.components=Ie,be.initialiseWidgets(),It.reauthenticator.reauthenticate().catch((()=>!0)),Ce&&r("body").addClass(Ce)}},94937:(t,e,n)=>{"use strict";const r=n(83810);n(9725),r.fn.accountInfoValueToggleWidget=function(t,e){const n="data-mm-account-info-value",o="data-mm-account-info-toggle-class";return r(this).dispatchedEventToggleWidget(t,["load-subscription-failed","goldAccountInfo"],"data-mm-account-info-toggle",n,o).dispatchedEventToggleWidget(e,["not-authenticated"],!1,n,o)}},61574:(t,e,n)=>{"use strict";const r=n(83810);n(48577),r.fn.accountInfoValueWidget=function(t){return r(this).dispatchedEventValueWidget(t,["subscribed","expiredSubscription","accountRegistered"],"mm-subscription-value")}},19083:(t,e,n)=>{"use strict";const r=n(1683);t.exports=function(t,e,n){const o=e.split(" ").map((t=>t.toUpperCase()));t.addEventListener("keydown",(t=>{/INPUT|TEXTAREA/.test(t.target&&t.target.tagName)||t.target.hasAttribute("contenteditable")||o.includes(r(t))&&n(t)}))}},88891:(t,e,n)=>{"use strict";const r=n(83810);r.fn.addLinkCrosshairsWidget=function(t){return r.each(this,(function(){const e=this;t.addEventListener("context",(function(t){t.addLinkMode?e.addClass("mapjs-add-link"):e.removeClass("mapjs-add-link")}))}))}},61665:(t,e,n)=>{"use strict";const r=n(83810);r.fn.addMeasureWidget=function(t){return r.each(this,(function(){const e=this,n=e.find('[data-mm-role~="measure-name"]'),r=e.find('[data-mm-role~="add-measure"]'),o=function(){const r=n.val();r&&t.addMeasure(r)?e.addClass("hidden"):(n.parents("div.control-block").addClass("error"),n.focus())};e.on("show",(function(){n.val(""),n.parents("div.control-block").removeClass("error"),n.focus()})),n.on("keyup",(function(t){13===t.keyCode&&o()})),r.click(o)}))}},95796:(t,e,n)=>{"use strict";n(83810).fn.addToRowAtIndex=function(t,e){const n=this,r=n.attr("data-mm-role"),o=t.children(`[data-mm-role~="${r}"]`).eq(e);return o.length?n.insertBefore(o):n.appendTo(t),n}},73558:t=>{"use strict";t.exports=function(t){const e=new DOMParser,n=(t=>{if(t.responseXML)return t.responseXML;if(t.responseText)return e.parseFromString(t.responseText,"text/xml");if("string"==typeof t)return e.parseFromString(t,"text/xml");if(t&&"function"==typeof t.querySelector)return t;throw new Error("invalid-args")})(t);this.xmldoc=n,this.valueOf=function(t){return n&&n.querySelector(t)?.textContent}}},85717:(t,e,n)=>{"use strict";const r=n(83810);r.fn.anonymousFilesWidget=function(t){if(!t)throw new Error("invalid-args");return r.each(this,(function(){const e=this,n=e.find('[data-mm-role~="file-list-container"]'),r=e.find('[data-mm-role~="file-list-template"]').detach();r.attr("data-mm-role",!1),e.on("show",(()=>{const e=t.getKeysWithPrefix("_free/");n.empty(),e.forEach((e=>{const o=r.clone(),i=t.getItem(e),s=new Date(i.ts);o.find('[data-mm-role~="anonymous-file-title"]').text(i.title).attr("href",`/map/${e}`),o.find('[data-mm-role~="anonymous-file-ts"]').text(s.toLocaleString()),o.appendTo(n)}))}))}))}},65442:(t,e,n)=>{"use strict";const r=n(83810);r.fn.atlasPrepopulationWidget=function(t){return r.each(this,(function(){const e=this;e.find("[data-mm-export-parameter=slug]").domElements.forEach((e=>{e.addEventListener("change",(function(){const n=e.value;e.value=t.sanitize(n),e.dispatchEvent(new Event("checkForExists",{bubbles:!0}))}))})),e.on("show",(function(){!function(){const n=t.getExportValues();e.find("[data-mm-export-parameter=title]").attr("placeholder",n.title).val(n.title),e.find("[data-mm-export-parameter=description]").attr("placeholder",n.description).val(n.description),e.find("[data-mm-export-parameter=slug]").attr("placeholder",n.slug).val(n.slug).trigger("checkForExists"),n.gaClientCode?e.find("[data-mm-export-parameter=gaClientCode]").val(n.gaClientCode):e.find("[data-mm-export-parameter=gaClientCode]").val("")}()}))}))}},54909:(t,e,n)=>{"use strict";const r=n(83810);n(20284),r.fn.atlasRepublishingWidget=function(t){return r.each(this,(function(){const e=this,n=e.find('[data-mm-export-parameter~="slug"]'),r=function(t){const n=e.find('[data-mm-atlas-publishing~="'+t+'"]');return e.find("[data-mm-atlas-publishing]").addClass("hidden"),n.removeClass("hidden"),n.length},o=function(t){r("error-"+t)||r("error"),e.trigger("errorShown")},i=function(){const i=n.val();r("checking"),t.slugExists(i).then((function(t){r(t?"published":"not-published"),e.trigger("checkForExistsFinished")}),o)};n.on("checkForExists",i),e.on("publishResult",i),e.find('[data-mm-role~="unpublish-atlas"]').click((function(){const i=n.val();e.showSection("unpublishing"),t.removePublishedMap(i).then((function(){r("not-published"),e.showSection("unpublished"),e.trigger("unpublishFinished")}),o)}))}))}},90885:(t,e,n)=>{"use strict";const r=n(83810);r.fn.attachmentEditorWidget=function(t){return r.each(this,(function(){const e=this,n=e.find("[data-mm-attachment-action]"),r=e.find("[data-mm-attachment-detail]");t.addEventListener("view",(function(t,e){r.domElements.forEach((function(e){const n=t[e.getAttribute("data-mm-attachment-detail")];n?(e.classList.remove("hidden"),"A"===e.tagName?e.setAttribute("href",n):"IFRAME"===e.tagName?e.setAttribute("src",n):e.innerHTML=n):e.classList.add("hidden")})),n.domElements.forEach((function(n){e[n.getAttribute("data-mm-attachment-action")]?n.classList.remove("hidden"):n.classList.add("hidden"),"download"===n.getAttribute("data-mm-attachment-action")&&n.setAttribute("download",t.name||"attachment.html")}))})),e.on("hide",(function(){t.cleanup(),e.find("iframe").attr("src","")}))}))}},56646:(t,e,n)=>{"use strict";const r=n(83810);r.fn.blobDownloaderLinkWidget=function(t,e){return r.each(this,(function(){(!e&&!t.isBlobDownloadSupported()||e&&t.isBlobDownloadSupported())&&this.remove()}))}},97036:(t,e,n)=>{"use strict";const r=n(85224),o=n(73361),i=n(75249),s=new(n(46350))(new(n(65879))(new o).textWidth);t.exports=function(t,e,n){const o=new r.TSpanTextEngine(s.textWidth,r.NaiveLineBreak,{dontSpecifyLength:!0});return'<?xml version="1.0" encoding="UTF-8"?>\n'+r.generateSvg(t,o,new i(o),n)}},65879:t=>{"use strict";t.exports=function(t){if(!t||!t.cssFont)throw new Error("invalid-args");const e=document.createElement("canvas").getContext("2d");this.textWidth=function(n,r){if("string"!=typeof n||!r)throw new Error("invalid-args");const o=Object.assign({},r,{fontSize:10}),i=t.cssFont(o);return e.font=i,e.measureText(n).width/10}}},69360:(t,e,n)=>{"use strict";const r=n(83810);n(28061),n(20284),r.fn.changeCardWidget=function(t,e,n){return r.each(this,(function(){let r;const o=this.sectionHandlerWidget();t.addEventListener("showChangeCard",(()=>{const i=n.newTaskId();return e.open(`/stripe-checkout-launch.html?launchType=update&taskId=${i}`,"stripe-payments"),o.showProgressMessage("Waiting for new card details..."),o.removeClass("hidden"),n.build(i).then((t=>(r=t,r.waitFor((t=>t&&"succeeded"===t.status))))).then((()=>(o.showSection("card-updated"),t.getGoldAccountDetails(!0)))).then((()=>o.trigger("changeCard:complete")))})),t.addEventListener("showBillingPortal",(()=>{const t=n.newTaskId();e.redirect(`/stripe-checkout-launch.html?launchType=portal&taskId=${t}`)})),o.on("hide",(()=>{if(r)return r.cancelIfWaiting()}))}))}},75260:(t,e,n)=>{"use strict";const r=n(83810);r.fn.clipboardActionWidget=function(){return r.each(this,(function(){const t=this;t.on("click",(function(e){const n=e.currentTarget.getAttribute("data-mm-clipboard-action");e.currentTarget.ownerDocument.execCommand(n),t.addClass("success")})),t.on("transitionend",(()=>{t.removeClass("success")}))}))}},44953:(t,e,n)=>{"use strict";const r=n(83810);r.fn.clipboardWidget=function(t,e){if(!t||!e)throw"invalid-args";return r.each(this,(function(){const n=this,r=["INPUT","TEXTAREA","SELECT"],o=function(e){if(!t.isEnabled())return!1;if(!e.target)return!1;const n=e.target.tagName.toUpperCase(),o=e.target.closest("[contenteditable]");return-1===r.indexOf(n)&&!o},i=function(n){if(o(n)){const r=t[n.type]();[e.getNativeContentType(),"text/plain","text/html"].forEach((function(t){n.clipboardData.setData(t,e.serialize(r,t))})),n.preventDefault()}};n.on("copy",i),n.on("cut",i),n.on("paste",(function(n){if(o(n)){const r=e.deserialize(n.clipboardData);r&&(t.paste(r),n.preventDefault())}}))}))}},60023:(t,e,n)=>{"use strict";const r=n(83810);n(20284),n(28061),n(19131),r.fn.cognitoChangePasswordWidget=function(t,e,n){return r.each(this,(function(){const r=this,o="cognito-change-password"===r.attr("data-mm-initial-section"),i=r.find('[data-mm-section~="cognito-change-password"]'),s=r.find('[data-mm-role~="cognito-can-change-password"]'),a=r.find('[data-mm-role~="cognito-change-password"]'),c=r.find('[name="cognito-old-password"]'),l=r.find('[name="cognito-new-password"]'),d=r.find('[name="cognito-new-password-retype"]'),u=function(){i.displayError(),c.val(""),l.val(""),d.val(""),r.trigger("cleanupComplete")},h=function(){e.getProfile().then((function(t){t?s.removeClass("hidden"):s.addClass("hidden"),r.trigger("checkedForCanChangePassword")}),(function(){s.addClass("hidden"),r.trigger("checkedForCanChangePassword")}))};r.on("show",(function(){h(),u(),o&&r.showSection("cognito-change-password")})),r.on("hide",(function(){u()})),o&&r.sectionHandlerWidget(),a.click((function(){const e=c.val(),n=l.val(),s=d.val();let a=!1;i.displayError(),e||(i.displayError("cognito-no-old-password"),a=!0),n||(i.displayError("cognito-no-new-password",a),a=!0),e&&e===n&&(i.displayError("cognito-same-new-password",a),a=!0),n!==s&&(i.displayError("cognito-password-retype-mismatch",a),a=!0),a?r.trigger("changePasswordButtonClickError"):(r.showProgressMessage("Changing password, please wait..."),t.changePassword(e,n).then((function(){o?r.showSection("cognito-change-password-success"):r.trigger("show")}),(function(t){r.showSection("cognito-change-password"),i.displayError(t||"cognito-change-password-failed"),r.trigger("changePasswordButtonClickError")})))})),n.addEventListener("authenticatedProfile",h),n.addEventListener("not-authenticated",(function(){s.addClass("hidden")}))}))}},72695:(t,e,n)=>{"use strict";const r=n(83810),o=n(85752);n(20284),n(28061),n(19131),n(99998),r.fn.cognitoSetPasswordWidget=function(t,e,n){return r.each(this,(function(){const r=this.sectionHandlerWidget(),i=r.find("[data-mm-section~=password-form]"),s=r.find('[data-mm-role~="cognito-reset-password"]'),a=r.find('[data-mm-role~="cognito-request-validation-code"]'),c=r.find('[name="cognito-password"]'),l=r.find('[name="cognito-password-retype"]'),d=r.find('[name="cognito-password-verify"]'),u=r.find('[data-mm-role~="cognito-sent-to-email"]'),h=function(){c.val(""),l.val(""),d.val(""),u.text("")};r.on("show",(function(){h(),r.showSection("initial")})),r.on("hide",(function(){h()})),a.click((()=>e.getProfile().then((t=>o(t.license))).then((e=>(r.displayError(),r.showProgressMessage("Requesting validation code, please wait..."),t.requestPasswordReset(e)))).then((t=>{t&&t.maskedEmail&&r.find('[data-mm-role~="cognito-sent-to-email"]').text(t.maskedEmail),r.showSection("password-form")})).catch((t=>r.showError(t))).then((()=>r.trigger("click-complete"))))),s.click((function(){const e=c.val(),o=l.val(),s=d.val(),a=s&&s.trim&&s.trim();let u=!1;if(i.displayError(),a||(i.displayError("no-cognito-verification-code",u),u=!0),e?e!==o&&(i.displayError("cognito-password-mismatch",u),u=!0):(i.displayError("no-cognito-password",u),u=!0),!u)return r.showProgressMessage("Resetting password, please wait..."),t.completePendingUserAction(e,a).then((()=>{n.sendContext(),r.showSection("complete")})).catch((t=>{i.displayError(t||"cognito-set-password-failed"),r.showSection("password-form")})).then((()=>r.trigger("click-complete")));r.trigger("click-complete")}))}))}},14513:(t,e,n)=>{"use strict";const r=n(83810);n(20284),n(28061),n(19131),r.fn.cognitoSigninWidget=function(t,e){return r.each(this,(function(){const n=this.sectionHandlerWidget(),r=n.find('[data-mm-section~="cognito-signin"]'),o=n.find('[data-mm-role~="cognito-signin"]'),i=n.find('[data-mm-role~="cognito-reset-password"]'),s=n.find('[data-mm-role~="cognito-set-new-password"]'),a=n.find('[data-mm-role~="cognito-request-validation-code"]'),c=r.find('[name="cognito-username"]'),l=r.find('[name="cognito-password"]'),d=r.find('[name="cognito-password-retype"]'),u=r.find('[name="cognito-password-verify"]'),h=n.find('[data-mm-role~="cognito-sent-to-email"]'),f=function(t,o){return n.showProgressMessage("Signing in, please wait..."),n.trigger("authenticating"),e.authenticate(t,o).then((()=>{n.addClass("hidden"),n.trigger("authenticated")})).catch((t=>{"new-password-required"===t?(l.val("").focus(),d.val(""),n.showSection("cognito-"+t),n.trigger("newPasswordRequired")):"no-user"===t||"no-password"===t?(r.displayError("cognito-signin-"+t),n.showSection("cognito-signin-"+t),n.trigger("noCognitoUser")):(n.showSection("cognito-signin"),r.displayError("cognito-signin-failed"),n.trigger("not-authenticated"))}))},p=function(){r.displayError(),l.val(""),d.val(""),c.val(""),u.val(""),h.text("")};n.on("show",(function(){p(),n.showSection("cognito-signin")})),n.on("hide",(function(){p()})),o.click((function(){const t=c.val().trim().toLowerCase(),e=l.val();let o=!1;t||(r.displayError("no-cognito-username"),o=!0),t&&t.indexOf("@")>-1&&(r.displayError("email-entered-in-acount-name"),o=!0),e||(r.displayError("no-cognito-password",o),o=!0),o||(r.displayError(),f(t,e)),n.trigger("signinButtonClicked")})),a.click((function(){const e=c.val();let o=!1;e||(r.displayError("no-cognito-username"),o=!0),e&&e.indexOf("@")>-1&&(r.displayError("email-entered-in-acount-name"),o=!0),o||(r.displayError(),n.showProgressMessage("Requesting validation code, please wait..."),t.requestPasswordReset(e).then((t=>{t&&t.maskedEmail&&n.find('[data-mm-role~="cognito-sent-to-email"]').text(t.maskedEmail),n.showSection("cognito-verify-password-reset")})).catch((t=>{"no-user"===t?(r.displayError("cognito-signin-"+t),n.showSection("cognito-signin-"+t),n.trigger("noCognitoUser")):(n.showSection("cognito-request-password-reset"),r.displayError(t||"cognito-request-password-failed"))}))),n.trigger("requestValidationCodeButtonClicked")})),s.click((()=>{const e=l.val(),o=d.val();let i=!1;r.displayError(),e?e!==o&&(r.displayError("cognito-password-mismatch",i),i=!0):(r.displayError("no-cognito-password",i),i=!0),i||(n.showProgressMessage("Setting new password, please wait..."),t.completePendingUserAction(e).then((()=>{const t=c.val();f(t,e)})).catch((t=>{n.showSection("cognito-new-password-required"),r.displayError(t||"cognito-new-password-required-failed")}))),n.trigger("setNewPasswordButtonClicked")})),i.click((function(){const e=c.val(),o=l.val(),i=d.val(),s=u.val(),a=s&&s.trim&&s.trim();let h=!1;r.displayError(),a||(r.displayError("no-cognito-verification-code",h),h=!0),o?o!==i&&(r.displayError("cognito-password-mismatch",h),h=!0):(r.displayError("no-cognito-password",h),h=!0),h||(n.showProgressMessage("Resetting password, please wait..."),t.completePendingUserAction(o,a).then((function(){return f(e,o)})).catch((t=>{n.showSection("cognito-verify-password-reset"),r.displayError(t||"cognito-request-password-failed")})))}))}))}},19034:(t,e,n)=>{"use strict";const r=n(83810);r.fn.collapsibleWidget=function(){return r.each(this,(function(){const t=this;t.find("[data-mm-role~=collapsible-header]").on("click",(()=>{t.toggleClass("collapsed")}))}))}},24859:(t,e,n)=>{"use strict";const r=n(83810),o=n(36954);n(20284),n(43737),r.fn.colorPickerWidget=function(t,e={}){return r.each(this,(function(){const n=this.sectionHandlerWidget(),r=e.colorHelper||new o,i=n.find("[data-mm-swatch-template]"),s=n.find("[data-mm-role=pick-image]"),a=n.find("[data-mm-role=upload-progress]"),c=n.find('[data-mm-role="standard-colors"]'),l=n.find('[data-mm-role="in-map-colors"]'),d=(e,n)=>{n.forEach((n=>{const r=i.clone(),o=(s=n).startsWith("#")?s:`#${s}`;var s;r.css("background-color",o),r.click((()=>{t.colorPicked(o)})),e.append(r)}))};n.typeahead(r.findColor,(function(e){const o=e&&r.validColor(e.toLowerCase());(o||"default"===e)&&(t.colorPicked(o),n.addClass("hidden"))}),(function(t,e){t.find("[data-mm-role=color]").css("background-color",e),t.find("[data-mm-role=content]").text(e)})),i.remove(),i.removeProp("data-mm-swatch-template"),d(c,t.getColors()),n.on("show",(()=>{l.empty(),d(l,t.getInMapColors())})),s.click((async()=>{if(e.imagePicker){s.attr("disabled",!0),s.addClass("disabled"),a.removeClass("hidden");try{const n=await e.imagePicker.pickImage();t.imagePicked(n)}catch(t){}finally{s.attr("disabled",""),s.removeClass("disabled"),a.addClass("hidden")}}n.trigger("pick-image-click-complete")}))}))}},63505:(t,e,n)=>{"use strict";const r=n(83810);r.fn.contactLinkWidget=function(t,e){return r.each(this,(function(){const n=this,r=/^mailto:/i.test(t.contactLink);n.is("A")?(n.attr("href",t.contactLink),r||n.attr("target","_blank").on("click",(function(){return e.popup(t.contactLink),!1}))):n.on("click",(function(){r?e.locationReplace(t.contactLink):e.popup(t.contactLink)}))}))}},451:(t,e,n)=>{"use strict";const r=n(83810);r.fn.contextDisablerWidget=function(t,e,n){return r.each(this,(function(){const r=this;t.addEventListener(e,(function(t){r.domElements.forEach((e=>{const r=function(t,e,n){const r=t.getAttribute(e),o=r&&r.split&&r.split("=="),i=r&&r.split&&r.split("!=");return o&&2===o.length?n&&n[o[0]]===o[1]:i&&2===i.length?!n||!n[i[0]]||n[i[0]]!==i[1]:r&&"!"===r[0]?!n||!n[r.substring(1)]:n&&n[r]}(e,n,t);r?e.classList.remove("disabled"):e.classList.add("disabled")}))}))}))}},19942:(t,e,n)=>{"use strict";const r=n(83810),o=n(78566);r.fn.contextMenuWidget=function(t,e,n,i){return r.each(this,(function(){let r=!1;const s=this,a=i&&i.contextMenuEvent||"context",c=i&&i.contextClasses||{r1:["connectorSelected:argument-mapping","showNodeStyle"],r2:["lineSelected"],c4:["lineSelected","showNodeStyle"],c5:["connectorSelected:argument-mapping"]},l=function(){r&&(r=!1,window.clearTimeout(r))},d=function(){l(),s.addClass("hidden"),s.removeEventListener("mouseenter",u),s.removeEventListener("mouseout",h),n.removeEventListener("click touch keydown",d),e.removeEventListener("scroll",d)},u=function(){n.removeEventListener("click",d)},h=function(){n.addEventListener("click",d)};t.addEventListener(a,(t=>{if(!t||!t.position)return void d();const i=[];Object.keys(c).forEach((e=>{c[e].forEach((n=>{t[n]&&i.push(e)}))})),function(t,i,a){let f,p;l(),e.removeEventListener("scroll",d),s.removeClass("top-arrow bottom-arrow left-arrow right-arrow hidden"),Object.keys(c).forEach((t=>s.removeClass(t))),a&&a.forEach((t=>s.addClass(t))),f=t-.5*s.outerWidth(),p=i-s.outerHeight()-20,p<20?(p=i+20,s.addClass("top-arrow")):s.addClass("bottom-arrow"),f<0?(f=t-15,s.addClass("left-arrow")):f+s.outerWidth()>n.innerWidth()&&(f=t-s.outerWidth()+15,s.addClass("right-arrow")),s.css({left:o(f),top:o(p)}),a&&a.length||n.addEventListener("click",d),s.addEventListener("mouseenter",u),s.addEventListener("mouseout",h),n.addEventListener("touch keydown",d),r=window.setTimeout((function(){e.addEventListener("scroll",d)}),200)}(t.position.x,t.position.y,i)})),s.addEventListener("contextmenu",(function(t){return t.preventDefault(),t.stopPropagation(),!1})),s.find("[data-mm-keep-context-menu]").addEventListener("click touch keydown",(t=>{t&&t.stopPropagation()}))}))}},58493:(t,e,n)=>{"use strict";const r=n(83810);r.fn.copyFileWidget=function(t,e){return r.each(this,(function(){const n=this,r=n.find('[data-mm-role~="copied-name"]'),o=n.find('[data-mm-role~="submit"]'),i=n.find('[data-mm-role~="editCopy"]');let s;o.click((function(){const e=r.val();e&&e.trim().length?t.copyTo(e):(r.addClass("validation-error"),r.focus())})),e.addEventListener("fileLoaded",(function(t,e){s=e})),e.addEventListener("renamed",(function(t){s=t})),i.on("click",(function(){t.editCopy()})),n.on("show",(function(){r.val("Copy of "+s),r.removeClass("validation-error")}))}))}},9621:t=>{"use strict";t.exports=function(t){const e=document.createElement("div");return e.innerHTML=t,Array.from(e.children)}},43714:(t,e,n)=>{"use strict";const r=n(83810);n(20284),r.fn.crowdlinkSharingWidget=function(t){if(!t)throw new Error("invalid-args");return r.each(this,(function(){const e=this.sectionHandlerWidget(),n=t=>{var n;"crowdlink"===t.tab&&((n=t.crowdlink)&&Object.keys(n).forEach((t=>{"url"===t?(e.find('[data-mm-role~="crowdlink.url-input"]').val(n.url).attr("data-mm-val",n.url),e.find('[data-mm-role~="crowdlink.url-link"]').attr("href",n.url)):e.find(`[data-mm-role~="crowdlink.${t}"]`).text(n[t])})),n?.url?e.showSection("crowdlink-active"):e.showSection("crowdlink-not-active"))};e.on("show",(()=>{t.addEventListener("context",n)})),e.on("hide",(()=>{t.removeEventListener("context",n)})),e.find('[data-mm-role~="create-crowdlink"]').click((()=>{const n=e.find('[name="crowdlink-password"]').val(),r=parseInt(e.find('[name="crowdlink-expiration-hours"]').val()),o=e.find('[name="crowdlink-access-level"]').val();return t.createPublicUrl({password:n,timeLimitHours:r,accessLevel:o})}))}))}},9725:(t,e,n)=>{"use strict";const r=n(83810),o=n(59050);r.fn.dispatchedEventToggleWidget=function(t,e,n,i,s){return r.each(this,(function(){const r=this,a=e.join(" "),c=r.attr(s)||"hidden";t.addEventListener(a,(function(t){const e=function(t){const e=n&&r.attr(n);let o,i=e&&e.split("."),s=t;if(!i)return[];for(;s&&i.length>1;)s=s[i[0]],i=i.slice(1);return s&&i.length&&s[i[0]]?(o=s[i[0]],o?Array.isArray(o)?o:[o]:[]):void 0}(t),s=r.attr(i),a="!"===s[0],l=a?s.slice(1):s,d=l&&l.split(" ")||[];let u=!1;e&&e.length&&"*"===l||o.intersection(e,d).length?u=!0:e&&e.length||!o.contains(d,"none")||(u=!0),a&&(u=!u),u?r.removeClass(c):r.addClass(c)}))}))}},48577:(t,e,n)=>{"use strict";const r=n(83810);r.fn.dispatchedEventValueWidget=function(t,e,n,o){return r.each(this,(function(){const r=this,i=o&&r.attr("data-"+o),s=r.attr("data-"+n),a=s&&s.split(".")||[],c=e.join(" ");t.addEventListener(c,(function(t){const e=((t,e)=>{let n=t.slice(0),r=e;for(;r&&n.length>1;)r=r[n[0]],n=n.slice(1);return r&&n.length&&r[n[0]]||""})(a,t);i?r.attr(i,e):r.text(e||"")}))}))}},19131:(t,e,n)=>{"use strict";const r=n(83810);r.fn.displayError=function(t,e){return r.each(this,(function(){const n=this;e||n.find("[data-mm-role~=error]").addClass("hidden"),t&&(n.find('[data-mm-role~=error][data-mm-reason~="'+t.replace(/"/g,"")+'"]').removeClass("hidden"),0===n.find("[data-mm-role~=error]:not(.hidden)").length&&n.find("[data-mm-role~=error]:not([data-mm-reason])").removeClass("hidden"))}))}},53701:t=>{"use strict";t.exports=function(t){const e=new Image;return new Promise((function(n,r){e.onload=function(){n({width:e.width,height:e.height})},e.onerror=function(){r()},e.src=t}))}},33849:(t,e,n)=>{"use strict";const r=n(83810);r.fn.downloadLinkWidget=function(t){return r.each(this,(function(){t.isDownloadSupported()||this.attr("target","_blank")}))}},2645:(t,e,n)=>{"use strict";const r=n(83810),o=n(41076);n(20284),n(99998),n(28061),r.fn.emailAuthenticationWidget=function(t){return r.each(this,(function(){const e=this.sectionHandlerWidget(),n=e.find("input[name=gold-account-identifier]"),r=e.find('[data-mm-role~="send-email"]'),i=e.find('[data-mm-role~="confirm-one-time-code"]'),s=e.find("input[name=gold-account-one-time-code]"),a=function(t){e.showError(t)},c=()=>{const t=s.val().trim();return t?(i.removeClass("disabled"),s.removeClass("validation-error"),t):(i.addClass("disabled"),void s.addClass("validation-error"))},l=function(){const n=c();n&&(e.showProgressMessage("Signing in, please wait..."),t.authenticate(n).then((function(){e.addClass("hidden")}),a))},d=()=>{const t=n.val().trim();return o(t)?(r.removeClass("disabled"),n.removeClass("validation-error"),t):(r.addClass("disabled"),void n.addClass("validation-error"))},u=function(){const n=d();n&&(e.showProgressMessage("Signing in, please wait..."),t.requestOneTimePassword(n).then((function(){i.addClass("disabled"),s.val(""),e.showSection("enter-one-time-code")}),a))};n.on("input",d),s.on("input",c),n.on("keydown",(function(t){13===t.keyCode&&u()})),s.on("keydown",(function(t){13===t.keyCode&&l()})),e.on("show",(function(){s.val(""),s.removeClass("validation-error"),e.showSection("not-authenticated"),d(),n.removeClass("validation-error")})),r.click(u),i.click(l)}))}},19446:(t,e,n)=>{"use strict";const r=n(83810);r.fn.eventVisibilityWidget=function(t){return r.each(this,(function(){const e=this,n=e.attr("data-mm-show-events"),r=e.attr("data-mm-hide-events");n&&t.addEventListener(n,(function(t){e.removeClass("hidden"),function(t){e.find("[data-mm-show-default]").removeClass("hidden"),e.find("[data-mm-event-arg]").addClass("hidden");const n=e.find('[data-mm-event-arg~="'+t+'"]');n.removeClass("hidden"),n.domElements.forEach((t=>{const e=t.parentElement;Array.from(e.children).filter((t=>t.matches("[data-mm-show-default]"))).forEach((t=>t.classList.add("hidden")))})),(()=>{const t=e.find("[data-mm-request-focus]").visibleOnly().first();t.length&&t.focus()})()}(t),function(t){e.find("[data-mm-event-val]").text(t)}(t)})),r&&t.addEventListener(r,(function(){e.addClass("hidden")}))}))}},41652:(t,e,n)=>{"use strict";const r=n(83810);n(9725),r.fn.fileInfoValueToggleWidget=function(t){return r.each(this,(function(){return this.dispatchedEventToggleWidget(t,["fileInfo"],"data-mm-file-info-toggle","data-mm-file-info-value","data-mm-file-info-toggle-class")}))}},80415:(t,e,n)=>{"use strict";const r=n(83810);r.fn.fileNameWidget=function(t,e,o){const i=n(60468),s=o||{};return r.each(this,(function(){let n;const r=this,o=this.domElements[0],a=function(){const t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!1),o.dispatchEvent(t)},c=function(t){s.readOnly||r.attr("disabled",t),t?r.addClass("in-progress"):r.removeClass("in-progress")},l=function(t){n!==t&&(n=t,r.val(t),a())};i(o,{minWidth:!0}),t.addEventListener("fileLoaded",(function(t,e){c(!1),r.removeClass("error").addClass("active"),l(e)})),t.addEventListener("renameFailed",(function(){c(!1),r.addClass("error")})),t.addEventListener("renamingFile",(function(){c(!0),r.removeClass("renamed"),r.removeClass("error")})),t.addEventListener("renamed",(function(t){c(!1),r.removeClass("error"),r.addClass("renamed"),t&&l(t)})),e&&e.addEventListener("title",l),s.readOnly?r.attr({disabled:!0,tabIndex:""}):r.on("focus",(function(){n=r.val()})).on("blur",(function(){const e=r.val().trim();0===e.length?(r.val(n),a()):(e!==n||r.hasClass("error"))&&t.renameFile(e)})).on("keyup",(function(t){13===t.keyCode?r.blur():27===t.keyCode&&(r.val(n),a(),r.blur())}))}))}},94995:(t,e,n)=>{"use strict";const r=n(83810),o=n(33801);n(28061),n(99998),r.fn.fileTagsWidget=function(t){return r.each(this,(function(){let e=[];const n=this.addClass("hidden").sectionHandlerWidget(),i=n.find('[data-mm-role~="tag-list"]'),s=n.find('[data-mm-role~="empty-tag-list"]'),a={all:i.find('[data-mm-template~="template-checked"]').remove(),some:i.find('[data-mm-template~="template-some-checked"]').remove(),none:i.find('[data-mm-template~="template-unchecked"]').remove()},c=n.find('[name="tagFilter"]'),l=n.find('[data-mm-role~="addTag"]'),d=()=>{n.showProgressMessage("Loading tags, please wait..."),i.empty(),s.addClass("hidden");const o=c.val().trim(),d=t.tagsForFiles(e),u=Object.keys(d).sort(),h=[];u.forEach((t=>{const e=d[t],s=(a[e]||a.none).clone();if(s.find('[data-mm-role~="tag"]').text(t),o&&-1===t.indexOf(o))return s.addClass("disabled"),void h.push(s);s.click((()=>{"all"===d[t]?n.trigger(r.Event("removeTag",{tag:t})):n.trigger(r.Event("addTag",{tag:t}))})),s.appendTo(i)})),h.forEach((t=>t.appendTo(i))),i.children().length||s.removeClass("hidden"),o&&!u.includes(o)?l.removeClass("disabled"):l.addClass("disabled"),n.showSection("tag-list")},u=r=>(n.showProgressMessage("Adding tag, please wait..."),t.addTagForFiles(r,e).then(d).catch((t=>n.showError(t)))),h=()=>{if(l.hasClass("disabled"))return;const t=c.val().trim();t&&u(t)};n.on("removeTag",(r=>{return o=r.tag,n.showProgressMessage("Removing tag, please wait..."),void t.removeTagForFiles(o,e).then(d).catch((t=>n.showError(t)));var o})),n.on("addTag",(t=>u(t.tag))),Object.keys(a).forEach((t=>{a[t].removeProp("data-mm-template")})),c.on("keyup",d),c.on("keydown",(function(t){13===t.keyCode&&c.isTarget(t)&&h()})),n.on("show",(()=>{n.showProgressMessage("Loading, please wait..."),c.val(""),t.ensureReady().then((()=>{const r=n.find('[data-mm-role~="file-description"]');if(e=t.getActivatedFiles(),e&&e.length)return 1===e.length?r.text(o(e[0].description,35)):r.text("Multiple maps selected"),!0;n.showError("no-selected-file")})).then((t=>{t&&d()})).then((()=>n.trigger("showList-complete")))})),n.on("hide",(()=>{e=[],t.toggleContextMenuForFile()})),l.click(h)}))}},43920:(t,e,n)=>{"use strict";const r=n(83810);r.fn.fileTimestampWidget=function(t){return r.each(this,(function(){const e=this;t.addEventListener("event-upload-success",(()=>{e.removeClass("hidden"),e.find("[data-mm-role=time]").text((new Date).toLocaleString())}))}))}},14487:(t,e,n)=>{"use strict";const r=n(83810);r.fn.focusTransferWidget=function(t){return r.each(this,(function(){const e=this;e.on("show",(function(){e.find("[data-mm-request-focus]").visibleOnly().focus()})).on("hide",(function(){t&&document.activeElement.closest(".hidden")&&t.focus()}))}))}},5643:(t,e,n)=>{"use strict";const r=n(83810);r.fn.fontPickerWidget=function(t){if(!t)throw new Error("invalid-args");return r.each(this,(function(){const e=this.find('[data-mm-role~="font-selector"]'),n=this.find("[data-mm-role=template]").remove().attr("data-mm-role","");t.getTextFontFamilyKeys().forEach((r=>{const o=n.clone();o.find("a").text(r).on("click",(()=>{t.fontPicked(r)})).css({"font-family":t.getFontFamily(r)}),e.append(o)}))}))}},36423:t=>{"use strict";t.exports=function(t){const e=new DOMParser,n=function(t,e){const r={title:t.getAttribute("TEXT")||""},o=Array.from(t.children).filter((t=>t.matches("node"))),i=function(t,e){const n={},r=Array.from(t.children).find((t=>t.matches("richcontent"))),o=r&&r.querySelector("body");return t.getAttribute("BACKGROUND_COLOR")&&(n.style={background:t.getAttribute("BACKGROUND_COLOR")}),(e&&e.collapsed||"true"===t.getAttribute("FOLDED"))&&(n.collapsed="true"),o&&(n.attachment={contentType:"text/html",content:o.innerHTML}),n}(t,e),s=o.map((function(t){return n(t,i)})),a={};return Object.keys(i).length&&(r.attr=i),s.length>0?(s.forEach(((t,e)=>{const n="left"===o[e].getAttribute("POSITION")?-1:1;a[n*(e+1)]=t})),r.ideas=a):r.attr&&r.attr.collapsed&&delete r.attr.collapsed,r},r=e.parseFromString(t,"text/xml").querySelector("map > node"),o=n(r);return o.formatVersion=2,o}},29858:(t,e,n)=>{"use strict";const r=n(83810);r.fn.fullScreenControlWidget=function(t){return r.each(this,(function(){t.fullScreenEnabled()?this.on("click",(function(e){const n=e.currentTarget&&e.currentTarget.getAttribute("data-mm-target-selector");t.requestFullScreen(document.querySelector(n))})):this.addClass("hidden")}))}},32922:(t,e,n)=>{"use strict";const r=n(83810);r.fn.goldCurrencySelectorWidget=function(t){return r.each(this,(function(){const e=this;var n,o;t.addEventListener("currencySelected",(function(t){e.val(t)})),e.on("change",(function(){const n=e.val();n&&t.setSelectedCurrency(n)})),n=t.getAvailableCurrencies(),o=t.getSelectedCurrency(),e.empty(),n.forEach((t=>{r("<option></option>").html(t).val(t).appendTo(e)})),e.val(o)}))}},91140:(t,e,n)=>{"use strict";n(20284);const r=n(83810);r.fn.goldDriveImportWidget=function(t){return r.each(this,(function(){const e=this.sectionHandlerWidget(),n=e.find("[data-mm-role~=import-file-name]"),r=e.find('[data-mm-role~="inprogress-message"]'),o=r.text()||"Please wait...",i=function(t){r.text(t||o),e.showSection("inprogress")},s=function(){const e=n.val();e&&e.trim().length?(t.save(e),i()):(n.addClass("validation-error"),n.focus())};e.find("[data-mm-role~=save]").on("click",s),n.on("keypress",(function(t){13===t.which&&s()})),t.addEventListener("progress",(t=>{i(t)})),t.addEventListener("error",(function(t){const n=e.find('[data-mm-error~="'+t+'"]');if("not-subscribed"===t)return e.showSection("not-subscribed");e.find("[data-mm-error]").addClass("hidden"),n.length>0?n.removeClass("hidden"):e.find('[data-mm-error~="default"]').removeClass("hidden"),e.showSection("error")})),t.addEventListener("readyToSave",(function(t){n.val(t),e.showSection("initial")})),t.addEventListener("requestConfirmation",(function(t){e.showSection("confirmation-"+t)})),t.addEventListener("complete",(function(){e.showSection("complete")}))}))}},20612:(t,e,n)=>{"use strict";const r=n(83810),o=n(41076),i=/<([^>]+)>/,s=t=>{const e=t&&t.match&&t.match(i);return e&&e.length&&e.length>1?e[1]:t};r.fn.goldMapDirectShareWidget=function(t){if(!t)throw new Error("invalid-args");return r.each(this,(function(){const e=this,n=e.find('[data-mm-role~="add-emails"]'),r=e.find('[data-mm-role~="sharing-role-selector"]'),i=e.find('[data-mm-role~="emails-to-add"]'),a=()=>{const t=i.val().split(/[\n\r\s;,]+/).map(s);return t&&t.length&&t.filter((t=>o(t)))||[]};i.on("input change",(()=>{a().length?n.removeClass("disabled"):n.addClass("disabled")})),n.click((()=>{let e=a();const n=r.val();i.val("").trigger("change"),e.length&&(e.length>10&&(e=e.slice(0,10)),t.addMultiple(e,n))}))}))}},15619:(t,e,n)=>{"use strict";const r=n(83810),o=n(4093);r.fn.goldMapSharedWithWidget=function(t,e,n){return r.each(this,(function(){const r=this,i=r.find('[data-mm-role~="remove-sharing-item"]');r.find('[data-mm-role~="share-description"]').text(t.description),r.find('[data-mm-role~="share-role"]').text(e||"shared"),("subteam"===t.group||t.affiliateProvider)&&r.find('[data-mm-role~="team-provider"]').addClass(o(t.affiliateProvider)),t&&t.allowedActions&&t.allowedActions.includes("unshare-map")&&"team access"!==e?i.click((()=>{r.hasClass("disabled")||(n.removeSharing(t),r.remove())})):i.remove()}))}},61048:(t,e,n)=>{"use strict";const r=n(83810),o=n(57950),i={"is-owner":"Owns this map",domain_account:"Sharing with Organisational accounts is not currently supported"};n(20284),n(15619),r.fn.goldMapSharingListWidget=function(t){if(!t)throw new Error("invalid-args");return r.each(this,(function(){const e=this,n=e.find("[data-mm-role~=shared-error-container]"),r=e.find("[data-mm-role~=shared-error-template]").detach(),s=e.find('[data-mm-role~="sharing-list-container"]'),a=e.find("[data-mm-role~=shared-with-template]").detach(),c=n=>{let r=0;s.empty(),n.hasShareList?(n.sharingList.forEach((e=>{r+=1,a.clone().goldMapSharedWithWidget(e,o[e.role]||e.role,t).appendTo(s)})),r?e.showSection("show-list"):e.showSection("no-shared-emails")):e.showSection("no-shared-emails")},l=t=>{"gold"===t.tab&&(t.activity||(t.hasErrors?(t=>{let o=0;n.empty(),Object.keys(t.errors).forEach((e=>{const s=t.errors[e],a=s&&i[s.reason];a&&(o+=1,r.clone().text(s.email+": "+a).appendTo(n))})),o?e.showSection("show-save-errors"):c(t)})(t):c(t)))};e.on("show",(()=>{t.addEventListener("context",l)})),e.on("hide",(()=>{t.removeEventListener("context",l)}))}))}},94519:(t,e,n)=>{"use strict";const r=n(83810),o={saving:"Saving sharing information, please wait...",loading:"Loading sharing information, please wait..."};n(20284),n(99998),n(28061),n(83378),n(61048),n(20612),n(43714),r.fn.goldMapSharingWidget=function(t){if(!t)throw new Error("invalid-args");return r.each(this,(function(){const e=this.sectionHandlerWidget().goldMapSharingListWidget(t).goldMapDirectShareWidget(t).crowdlinkSharingWidget(t),n=t=>{e.showError(t)},r=t=>{t.activity&&e.showProgressMessage(o[t.activity]||t.activity)},i=e.find('[data-mm-role~="subteam-sharing-list"]').goldMapSubteamSharingListWidget(t);e.on("show",(()=>{e.showProgressMessage(o.loading),e.find("tabbedsection").trigger("resetdefaulttab"),i.trigger("enable"),t.addEventListener("context",r),t.addEventListener("error",n),t.load(),t.showGoldSharing()})),e.on("hide",(()=>{i.trigger("disable"),t.removeEventListener("context",r),t.removeEventListener("error",n)}))}))}},83378:(t,e,n)=>{"use strict";const r=n(83810),o=n(31180),i=n(4093);r.fn.goldMapSubteamSharingListWidget=function(t){if(!t)throw new Error("invalid-args");return r.each(this,(function(){const e=this,n=e.find('[data-mm-role~="subteam-list-container"]'),r=e.find("[data-mm-role~=subteam-list-template]").detach(),s=e=>{n.empty(),e.sharableSubteams.forEach((e=>{const s=r.clone(),a=o.getAffiliateProvider(e.teamId);s.find('[data-mm-role~="subteam-description"]').text(e.description),s.find('[data-mm-role~="team-provider"]').addClass(i(a)),s.find("[subteam-share-with-role]").click((function(n){const r=n.currentTarget.getAttribute("subteam-share-with-role");t.shareWithSubteam(e,r)})),s.appendTo(n)}))};e.on("enable",(()=>{t.addEventListener("context",s)})),e.on("disable",(()=>{n.empty(),t.removeEventListener("context",s)}))}))}},39513:(t,e,n)=>{"use strict";const r=n(83810),o=n(88218);r.fn.goldPlanOptionWidget=function(t){return r.each(this,(function(){this.attr("value",JSON.stringify(t)),this.text(o(t))}))}},21705:(t,e,n)=>{"use strict";const r=n(83810),o=n(59050);n(39513),r.fn.goldPlanSelectorWidget=function(t){return r.each(this,(function(){const e=this,n=function(t,n){e.empty(),o.each(t,(function(t){r("<option></option>").goldPlanOptionWidget(t).appendTo(e)})),e.val(JSON.stringify(n))};t.addEventListener("subscriptionPlansChanged",n),t.addEventListener("planSelected",(function(t){e.val(JSON.stringify(t))})),e.on("change",(function(){const n=e.val(),r=n&&JSON.parse(n);r&&t.setSelectedPlan(r)})),n(t.availablePlans(),t.getSelectedPlan())}))}},85575:t=>{"use strict";t.exports=function({goldSessionNodeSelectionTracker:t,goldSessionModel:e,mapView:n,splittableModel:r,navigatorShim:o}){if(!(t&&e&&n&&r))throw new Error("invalid-args");const i={},s={},a=t=>{const{nodeId:e,senderSession:o}=t,{sessionId:a}=o,c=n.nodeWithId(e);if(c){delete s[a];const e=c.querySelector('[data-mm-role~="gold-session-dots"]')||(t=>{const e=t.ownerDocument.createElement("div");return e.setAttribute("data-mm-role","gold-session-dots"),e.classList.add("gold-session-dots"),t.append(e),e})(c),n=i[a]||((t,e)=>{const n=t.createElement("microSwatch");return n.style.backgroundColor=e.senderSession.color,i[e.senderSession.sessionId]=n,n.setAttribute("data-mm-tooltip",e.senderSession.description),n.classList.add("tooltip-below"),n.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),r.showGoldSessions()})),n})(c.ownerDocument,t);e.append(n)}else s[a]=t};t.addEventListener("nodeSelectionChanged",a),o.setInterval((()=>{Object.values(s).forEach(a)}),2e3),e.addEventListener("sessionRemoved",(({sessionId:t})=>{const e=i[t];e&&(e.remove(),delete i[t])}))}},36424:(t,e,n)=>{"use strict";const r=n(83810);n(20284),r.fn.goldSessionsSidebarWidget=function({goldSessionModel:t,navigatorShim:e}){if(!t||!e)throw new Error("invalid-args");return r.each(this,(function(){const n=this.sectionHandlerWidget(),r=n.find('[data-mm-role~="template"]'),o=r.parent();r.remove(),t.addEventListener("sessionAdded",(t=>{const e=r.clone().appendTo(o);e.attr({"data-mm-role":"session","data-session-id":t.sessionId}),e.find('[data-mm-role="description"]').text(t.description).attr({"data-mm-tooltip":t.description}),e.find('[data-mm-role="session-color"]').css({backgroundColor:t.color}),n.showSection("active")})),t.addEventListener("sessionRemoved",(t=>{n.find(`[data-mm-role~=session][data-session-id="${t.sessionId}"]`).remove(),0===n.find("[data-mm-role~=session]").length?n.showSection("alone"):n.showSection("active")})),t.addEventListener("sessionError",(()=>{n.showSection("blocked")})),e.addEventListener("network-status",(t=>{t||n.showSection("offline")})),n.showSection("alone")}))}},7643:t=>{"use strict";t.exports=function(t){const e=t.getBoundingClientRect(),n=Array.from(t.parentElement.children).filter((e=>e!==t)).filter((t=>{const n=t.getBoundingClientRect();return e.top<n.top&&Math.abs(e.left-n.left)<3}));return n.sort(((t,e)=>t.getBoundingClientRect().top-e.getBoundingClientRect().top)),n[0]||t}},67801:t=>{"use strict";t.exports=function(t){const e=t.getBoundingClientRect(),n=Array.from(t.parentElement.children).filter((e=>e!==t)).filter((t=>{const n=t.getBoundingClientRect();return e.top>n.top&&Math.abs(e.left-n.left)<3}));return n.sort(((t,e)=>e.getBoundingClientRect().top-t.getBoundingClientRect().top)),n[0]||t}},33892:(t,e,n)=>{"use strict";const r=n(83810),o=n(56765),i=n(33801),s={"same-day":"Today","last-day":"Yesterday","same-month":"This month","last-month":"Last month","same-year":"This year","last-year":"Last year",older:"A while ago..."};n(85184),r.fn.historyEventsWidget=function(t){const{historyModel:e,pageController:n,isReadOnly:a}=t,c="event-card",l="event-bucket",d=`[data-mm-role~="${c}"]`;if(!e||!n)throw new Error("invalid-args");return r.each(this,(function(){let t=0;const r=this,u={},h=r.find("[data-mm-role=template]"),f=r.find("[data-mm-role=read-only-header]"),p=r.find("[data-mm-role=bucket-template]"),g=h.parent(),m=t=>{g.find(`${d}.active`).removeClass("active"),g.find(`${d}[data-mm-index="${t}"]`).addClass("active").mmScrollIntoView()},v=async function(t){const r=e.getEventSummary(t),d=function(t){const e=o(t);if(!u[e]){let t=g.find(`[data-mm-role=${l}][data-mm-bucket-name=${e}]`);t.length||(t=p.clone().attr({"data-mm-role":l,"data-mm-bucket-name":e}).prependTo(g),t.find("[data-mm-role=bucket-label]").text(s[e]),t.find("[data-mm-role=bucket-header]").on("click",(()=>{t.toggleClass("collapsed")}))),u[e]=t.find("[data-mm-role=bucket-events]")}return u[e]}(r.ts),f=h.clone().prependTo(d).attr({"data-mm-role":c,"data-mm-index":t,tabIndex:1}).on("click",(()=>{a?m(t):e.restoreUpTo(t)})).on("dblclick",(()=>{a&&n.openHistory(t)})),v=f.find("[data-mm-role=event-time]"),y=f.find("[data-mm-role=collaborator]"),w=f.find("[data-mm-role=description]");r.ephemeral&&f.addClass("ephemeral"),r.ts?v.text(new Date(r.ts).toLocaleString()):v.remove(),r.collaborator?y.text(r.collaborator):y.remove(),w.text(i(r.description,200))},y=e=>{for(let n=t;n<e;n++)v(n);t=e};p.remove(),h.remove(),a||f.remove(),e.addEventListener("eventCount",(t=>{r.hasClass("hidden")||y(t)})),e.addEventListener("activeIndex",(t=>{r.hasClass("hidden")||m(t)})),e.addEventListener("hasWatermark",(t=>{const e=r.find("[data-mm-role=watermark-message]");t?e.removeClass("hidden"):e.addClass("hidden")})),r.on("show",(()=>Promise.resolve().then((()=>{r.find("[data-mm-role=loading]").removeClass("hidden"),g.addClass("hidden")})).then((()=>y(e.getEventCount()))).then((()=>{r.find("[data-mm-role=loading]").addClass("hidden"),g.removeClass("hidden"),r.trigger("show:complete")}))))}))}},92702:t=>{"use strict";t.exports=function(t){if(!t)return;const e=[],n=[],r=function(t,e){return t.children?Array.from(t.children).filter((t=>t.tagName&&e.includes(t.tagName.toUpperCase()))):[]},o=function(t,r){const o=function(t){return t?t.trim().replace(/\t+/g," "):""}(t.textContent);o&&((t,r)=>{const o={title:r},i=(t=>e.slice(0,t).reverse().find((t=>t)))(t);t&&i?(i.ideas=i.ideas||{},i.ideas[Object.keys(i.ideas).length+1]=o):n.push(o),e[t]=o})(r,o)},i=function(t){Array.from(t.querySelectorAll("td")).forEach(o)},s=function(t,e){r(t,["LI","UL","OL"]).forEach((t=>{"LI"===t.tagName.toUpperCase()?function(t,e){const n=r(t,["UL","OL"]).map((e=>t.removeChild(e)));o(t,e),n.forEach((t=>s(t,e+1)))}(t,e):s(t,e+1)}))},a=(t=>{const e=new DOMParser;try{return e.parseFromString(t,"text/html")}catch(t){return!1}})(t);return!!a&&(Array.from(a.querySelectorAll("table")).forEach((function(t){Array.from(t.querySelectorAll("tr")).forEach(i)})),Array.from(a.querySelectorAll(":not(li):not(ul):not(ol) > ul, :not(li):not(ul):not(ol) > ol")).forEach((t=>s(t,0))),n.length&&n)}},65170:(t,e,n)=>{"use strict";const r=n(83810);r.fn.iconEditorWidget=function(t,e){return r.each(this,(function(){const n=this,r=n.find("[data-mm-role~=download]"),o=n.find("[data-mm-role~=icon-height]"),i=n.find("[data-mm-role~=icon-position]"),s=n.find("[data-mm-role~=icon-width]"),a=n.find("[data-mm-role~=icon-img]"),c=n.find("[data-mm-role~=icon-upload-img]"),l=n.find("[data-mm-role~=dimensions-ratio]"),d=n.find('[data-mm-role~="submit"]'),u=function(){const n=t.getCurrentIcon()||{};let c=n.url;e&&(c=e(n.url)),a.attr("src",c),r.attr("href",n.url),o.val(n.height),s.val(n.width),i.val(n.position)};n.on("show",u),t.addEventListener("reload",u),t.addEventListener("stage",(function(t,e){"confirm"===t?u():"uploading"===t&&c.attr("src",e)})),d.on("click",(function(){const e=n.find("input.validation-error");e.length?e.first().focus():(t.setDimensions(s.val(),o.val()),t.setPosition(i.val()),t.save())})),s.on("change",(function(){const t=parseFloat(s.val());if(isNaN(t)||isNaN(s.val()))return!1;if(l.domElements[0].checked){const e=a.domElements[0].getBoundingClientRect();o.val(Math.round(e.height*t/e.width))}d.removeClass("hidden")})),o.on("change",(function(){const t=parseFloat(o.val());if(isNaN(o.val())||isNaN(t))return!1;if(l.domElements[0].checked){const e=a.domElements[0].getBoundingClientRect();s.val(Math.round(e.width*t/e.height))}d.removeClass("hidden")})),i.on("change",(function(){d.removeClass("hidden")}))}))}},81876:(t,e,n)=>{"use strict";const r=n(83810);r.fn.inputFocusWidget=function(){return r.each(this,(function(){this.on("click",(function(t){const e=t.target.getAttribute("data-mm-input-focus"),n=t.target.ownerDocument.querySelector(e);n&&(n.focus(),n.select())}))}))}},38450:(t,e,n)=>{"use strict";const r=n(83810);r.fn.inputValidationWidget=function(){const t={number:function(t){return!isNaN(parseFloat(t))},nonBlank:function(t){return t&&t.trim().length>0},positive:function(t){return parseFloat(t)>0},accountName:function(t){return t&&t.trim().length>0&&-1===t.indexOf("@")}};return r.each(this,(function(){this.on("input",(function(e){const n=e.target,r=n.getAttribute("data-mm-validate-input");t[r](n.value)?n.classList.remove("validation-error"):n.classList.add("validation-error")}))}))}},86620:(t,e,n)=>{"use strict";const r=n(83810),o=n(19083);r.fn.installHotkeyWidget=function(){const t={"ALT+":String.fromCharCode(8997),"SHIFT+":String.fromCharCode(8679),"CTRL+":"^","META+":String.fromCharCode(8984),UP:String.fromCharCode(8593),DOWN:String.fromCharCode(8595),BACKSPACE:String.fromCharCode(9003)};return r.each(this,(function(){const e=this,n=function(t){e.hasClass("disabled")||(e.attr("data-mm-hotkey-propagate")||(t.stopPropagation(),t.preventDefault()),e.trigger("click"))},r=e.attr("data-mm-install-hotkey"),i=function(e){let n=e||"";return Object.keys(t).forEach((e=>{n=n.replace(t[e],e)})),n}(e.attr("data-mm-hotkey")),s=e.attr("data-mm-additional-hotkeys"),a=document.querySelector(r);o(a,i,n),s&&o(a,s,n)}))}},62834:(t,e,n)=>{"use strict";const r=n(83810),o=n(36954),i=n(8035);n(43737),r.fn.keyboardColorWidget=function(t,e,n){return r.each(this,(function(){const r=this,s=new o;return r.typeahead(s.findColor,(function(o){const a=o&&s.validColor(o.toLowerCase()),c=n.getNodeTheme(t.getSelectedNodeId());(a||"default"===o)&&(e.updateNodeStyles(function(t,e){return e&&"surround"!==e.borderType?{text:{color:t},backgroundColor:!1,background:!1}:{text:{color:t&&e&&e.text[i(t)]},backgroundColor:t,background:!1}}(a,c)),r.addClass("hidden"))}),(function(t,e){t.find("[data-mm-role=color]").css("background-color",e),t.find("[data-mm-role=content]").text(e)}))}))}},23446:(t,e,n)=>{"use strict";const r=n(83810);n(20284),r.fn.localExportWidget=function(t){return r.each(this,(function(){const e=this.sectionHandlerWidget();t.addEventListener("result",(function(t,n,r){e.find("[data-mm-role~=data-mm-export-result]").attr({download:n,href:r}),e.find("[data-mm-role~=output-url]").val(r),e.find("[data-mm-role~=output-title]").val(n)})),t.addEventListener("stage",(function(t){e.removeClass("hidden"),e.showSection({progress:"inprogress",exported:"done",error:"error"}[t])})),e.on("hide",t.cleanup)}))}},33795:(t,e,n)=>{"use strict";const r=n(83810);r.fn.macifyHotkeys=function(t){return t.isMac()?r.each(this,(function(){const t=this.domElements[0],e=t.getAttribute("data-mm-hotkey");/\^/.test(e)&&t.setAttribute("data-mm-hotkey",e.replace("^",String.fromCharCode(8984)))})):this}},85806:(t,e,n)=>{"use strict";const r=n(83810),o=n(99923);n(20284),r.fn.measuresExportWidget=function(t,e){return r.each(this,(function(){const n=this.sectionHandlerWidget(),r=n.find('[data-mm-role~="measures-export-type"]'),i=n.find('[data-mm-role~="export-measures"]'),s=n.find('[data-mm-role~="send-to-drive-url"]'),a=function(){i.addClass("disabled"),function(){const n="measures-all"===r.val(),a=(c=o(t.getRawData(n)),/^data:[a-z]*\/[a-z]*/.test(c)?e.toObjectUrl(e.dataUriToBlob(c)):e.toObjectUrl(c,"text/tab-separated-values"));var c;i.attr("download",t.getTitle()).attr("href",a).removeClass("disabled"),s.val(a)}()};n.on("show",(function(){n.showSection("initial"),a(),r.focus()})),r.on("change",a)}))}},54243:(t,e,n)=>{"use strict";n(95796),n(47820),n(6697);const r=n(83810);r.fn.measuresSheetWidget=function(t,e){const n=e||{};return r.each(this,(function(){let e=!1;const o=this,i=o.find("[data-mm-role=measurements-table]"),s=o.find("[data-mm-role=no-measures]"),a=o.find("[data-mm-role=measurement-template]"),c=a.parent(),l=o.find("[data-mm-role=idea-template]"),d=l.find("[data-mm-role=value-template]").detach(),u=l.parent(),h=o.find("[data-mm-role=summary-template]"),f=h.parent(),p=function(t){return t?c.children().domElements.map((t=>r(t).find("[data-mm-role=measurement-name]").text())).indexOf(t):-1},g=function(e,n){const r=a.clone().addToRowAtIndex(c,n),o=function(){t.setSelectedMeasure(e)};r.find("[data-mm-role=measurement-name]").text(e).click(o),r.find("[data-mm-role=remove-measure]").click((function(){t.removeMeasure(e)})),h.clone().addToRowAtIndex(f,n).text("0").click(o),i.removeClass("hidden"),s.addClass("hidden")},m=function(n,r){n!==e&&(e=n,t.editingMeasure(n,r))},v=function(e,n,r,o,i){const s=e.children("[data-mm-role=value-template]").eq(i),a=d.clone();return a.text(n||"0").on("change",(function(e){t.setValue(r,o,e.newValue)||e.preventDefault()})).on("focus",(function(){t.setSelectedMeasure(o),m(!0,r)})).on("blur",(function(){m(!1,r)})).on("keydown",(t=>{27===t.which&&(a.blur(),t.preventDefault(),t.stopPropagation())})),s.length?a.insertBefore(s):a.appendTo(e),a},y=function(t){const e=t.selectedMeasure&&p(t.selectedMeasure),n=t.labelledMeasure&&p(t.labelledMeasure);t.hasMeasures?(i.removeClass("hidden"),s.addClass("hidden"),c.children().removeClass("mm-selected").removeClass("mm-labelled"),f.children().removeClass("mm-selected"),o.find("[data-mm-nodeid]").children().removeClass("mm-selected"),e&&(c.children().eq(e).addClass("mm-selected"),f.children().eq(e).addClass("mm-selected"),o.find("[data-mm-nodeid]").domElements.forEach((t=>{const n=t&&t.children&&Array.from(t.children)[e];n&&n.classList.add("mm-selected")}))),n&&c.children().eq(n).addClass("mm-labelled")):(i.addClass("hidden"),s.removeClass("hidden"))},w=function(t,e,n){const s=function(t){return o.find('[data-mm-nodeid="'+t+'"]')}(t),a=p(e);a>=0&&(s.children().eq(a).text(n),i.trigger(r.Event("change",{column:a})))},b=function(t,e){g(t,e),u.children().domElements.forEach((n=>{const o=r(n);v(o,"0",o.attr("data-mm-nodeid"),t,e)}))},E=function(t){const e=p(t);e<0||(c.children().eq(e).remove(),f.children().eq(e).remove(),u.children().domElements.forEach((t=>{const n=t&&t.children&&Array.from(t.children)[e];n&&n.remove()})))},x=function(e){u.children("[data-mm-role=idea-template]").remove(),t.getMeasurementValues().forEach((function(t){const n=l.clone().appendTo(u).attr("data-mm-nodeid",t.id);n.find("[data-mm-role=idea-title]").domElements.forEach((e=>{e.innerText=((t,e)=>{if(!t)return"";const n=t.getAttribute("data-mm-truncate");return n&&e.title.length>n?e.title.substring(0,n)+"...":e.title})(e,t)})),e.forEach((e=>{v(n,t.values[e],t.id,e)}))})),o.find("[data-mm-role=measurements-table]").trigger("change")},S=function(){c.children("[data-mm-role=measurement-template]").remove(),f.children("[data-mm-role=summary-template]").remove();const e=t.getMeasures();e.forEach(g),x(e)},A=function(){x(t.getMeasures())};a.detach(),h.detach(),l.detach(),n.readOnly?o.find("[data-mm-role=measures-editor]").remove():(i.editableTableWidget({editor:o.find("[data-mm-role=measures-editor]"),cloneProperties:r.fn.editableTableWidget.defaultOptions.cloneProperties.concat(["outline","box-shadow","-webkit-box-shadow","-moz-box-shadow"])}).on("validate",(function(e){t.editingMeasure(!0),t.validate(e.newValue)||e.preventDefault()})),o.find("[data-mm-role=measures-editor]").on("focus",m.bind(o,!0,!1)).on("blur",m.bind(o,!1,!1))),i.numericTotaliser(),o.on("show",(function(){S(),t.addEventListener("startFromScratch",S),t.addEventListener("measureRowsChanged",A),t.addEventListener("measureValueChanged",w),t.addEventListener("measureAdded",b),t.addEventListener("measureRemoved",E),t.addEventListener("measuresContext",y),t.setActive(!0)})),o.on("hide",(function(){t.removeEventListener("startFromScratch",S),t.removeEventListener("measureRowsChanged",A),t.removeEventListener("measureValueChanged",w),t.removeEventListener("measureAdded",b),t.removeEventListener("measureRemoved",E),t.removeEventListener("measuresContext",y),t.setActive(!1),o.parent().parent().children("[tabindex]").focus()})),t.addEventListener("measureLabelShown",(function(t){c.children().removeClass("mm-active");const e=p(t);e>=0&&c.children().eq(e).addClass("mm-active")}))}))}},45221:(t,e,n)=>{"use strict";const r=n(83810);r.fn.menuBarWidget=function(t){return r.each(this,(function(){const e=this;e.find("topmenu").attr("tabindex",1).on("blur",(function(t){r(t.currentTarget).find(".expanded").removeClass("expanded")})).on("mouseover",(function(t){const e=r(t.currentTarget);e.parent().children(":focus").length>0&&e.focus()})),e.find("menusection > menuitem").on("click",(function(n){const o=r(n.currentTarget);e.find(".expanded").domElements.filter((t=>t!==n.currentTarget)).forEach((t=>t.classList.remove("expanded"))),o.next().is("submenu")?o.toggleClass("expanded"):(o.attr("href")?t.open(o.attr("href")):o.attr("data-mm-goto")&&t.redirect(o.attr("data-mm-goto")),o.parents("topmenu").blur())})),e.find("topmenu > submenu > menusection > menuitem").on("mouseenter",(function(t){const n=r(t.currentTarget);e.find(".expanded").domElements.filter((e=>e!==t.currentTarget)).forEach((t=>t.classList.remove("expanded"))),n.next().is("submenu")&&n.addClass("expanded")})),e.find("menusection > menuitem").domElements.forEach((function(t){const e=r(t);e.next().is("submenu")&&e.addClass("has-submenu")})),e.on("mouseleave",(function(){e.find(":focus").blur()}))}))}},47820:(t,e,n)=>{"use strict";const r=n(83810),o=n(78566);r.fn.editableTableWidget=function(t){return r.each(this,(function(){let e;const n=Object.assign({},r.fn.editableTableWidget.defaultOptions,t),i=this,s=n.editor.css({position:"absolute",boxSizing:"border-box"}).addClass("hidden").appendTo(i.parent()),a=t=>{const e=t.domElements[0].getBoundingClientRect(),n={top:o(e.top),left:o(e.left),width:o(e.width),height:o(e.height)};s.css(n)},c=function(t){e=i.find("td:focus"),e.length&&(s.val(e.text()).removeClass("error").removeClass("hidden"),n.cloneProperties.forEach((t=>{s.css(t,e.domElements[0].style[t])})),a(e),s.focus(),t&&s.domElements[0].select())},l=function(){const t=s.val(),n=r.Event("change",{newValue:t,cancelable:!0}),o=e.html();if(e.text()===t||s.hasClass("error"))return!0;e.text(t).trigger(n),n.defaultPrevented&&e.html(o)},d=function(t,e){return 39===e?t.next("td"):37===e?t.prev("td"):38===e?t.parent().prev().children().eq(t.index()):40===e?t.parent().next().children().eq(t.index()):[]};s.on("blur",(function(){l(),s.addClass("hidden")})).on("keydown",(function(t){const n=t.target;if(13===t.which)l(),s.addClass("hidden"),e.focus(),t.preventDefault(),t.stopPropagation();else if(27===t.which)s.val(e.text()),t.preventDefault(),t.stopPropagation(),s.addClass("hidden"),e.focus();else if(9===t.which)e.focus();else if(n.selectionEnd-n.selectionStart===n.value.length){const n=d(e,t.which);n.length>0&&(n.focus(),t.preventDefault(),t.stopPropagation())}})).on("input paste",(function(){const t=r.Event("validate",{newValue:s.val(),cancelable:!0});e.trigger(t),t.defaultPrevented?s.addClass("error"):s.removeClass("error")})),i.on("click keypress dblclick",c).css("cursor","pointer").on("keydown",(function(t){const e=d(r([t.target]),t.which);e.length>0?(e.focus(),t.stopPropagation(),t.preventDefault()):13===t.which?(c(!1),t.stopPropagation(),t.preventDefault()):17!==t.which&&91!==t.which&&93!==t.which||c(!0)})),i.find("td").prop("tabindex",1),window.addEventListener("resize",(function(){s.visibleOnly().length&&a(e)}))}))},r.fn.editableTableWidget.defaultOptions={cloneProperties:["padding","padding-top","padding-bottom","padding-left","padding-right","text-align","font","font-size","font-family","font-weight","border","border-top","border-bottom","border-left","border-right"],editor:r("<input>")}},85184:(t,e,n)=>{"use strict";n(83810).fn.mmScrollIntoView=function(){const t=this.domElements[0],e=t&&(t.scrollIntoViewIfNeeded||t.scrollIntoView);return e&&e.apply(t,[!1]),this}},83810:(t,e,n)=>{"use strict";const r="single-element-expected",o=n(56982),i=n(9621),s=function t(e){if(!e||!Array.isArray(e))throw new Error("invalid-args");const n=this,i=o(e).filter((t=>t)),s=e=>Object.getPrototypeOf(e)===t.prototype?e.domElements[0]:"string"==typeof e?document.querySelector(e):void 0,a=(t,e,n)=>{n||0===n?t.setAttribute(e,n):t.removeAttribute(e,n)},c=(t,e)=>!(e&&t&&!t.matches(e))&&t,l=t=>{const e=t.parentElement;return e?[e].concat(l(e)):[]};n.click=t=>{if(!i.length)return!1;if(!t){if(i.length>1)throw new Error(r);i[0].click()}return i.forEach((e=>{e.addEventListener("click",t)})),n},n.eq=e=>{const n=i[e];return new t(n?[n]:[])},n.dblclick=t=>{if(!i.length)return!1;if(!t){if(i.length>1)throw new Error(r);n.trigger("dblclick")}return i.forEach((e=>{e.addEventListener("dblclick",t)})),n},n.domElements=i.slice(0),n.length=i.length,n.data=function(t){if(!i.length)return!1;if(arguments.length>2)throw new Error("invalid-args");if(2===arguments.length){const e=arguments[1];return i.forEach((n=>{const r=Object.assign({},n.mmData);r[t]=e,n.mmData=r})),n}if(i.length>1)throw new Error(r);if(!arguments.length)return Object.assign({}.domElements[0].mmData);if("string"==typeof t)return Object.assign({},i[0].mmData)[t];throw new Error("invalid-args")},n.attr=function(t,e){if(arguments.length>2)throw new Error("invalid-args");if(2===arguments.length)return i.forEach((n=>{a(n,t,e)})),n;if(1===arguments.length&&"object"==typeof t){const t=arguments[0];return i.forEach((e=>{Object.keys(t).forEach((n=>a(e,n,t[n])))})),n}if("string"!=typeof t)throw new Error("invalid-args");if(!i.length)return!1;if(i.length>1)throw new Error(r);return i[0].hasAttribute(t)?i[0].getAttribute(t):void 0},n.prop=function(t,e){if(2===arguments.length)return i.forEach((n=>{n[t]=e||!1})),n;if(i.length>1)throw new Error(r);return!!i.length&&i[0][t]},n.removeProp=t=>{if(!t)throw new Error("invalid-args");return!!i.length&&(i.forEach((e=>{delete e[t]})),n)},n.val=function(){if(!i.length)return!1;if(arguments.length){const t=arguments[0]||"";return i.forEach((e=>e.value=t)),n}if(i.length>1)throw new Error(r);return i[0].value},n.parent=()=>{if(!i.length)return new t([]);if(i.length>1)throw new Error(r);return new t([i[0].parentElement])},n.on=(t,e)=>{const r=t.split(" ");return i.forEach((t=>{r.forEach((r=>{t.addEventListener(r,(t=>e.apply(n,[t])))}))})),n},n.addEventListener=(t,e)=>{const r=t.split(" ");return i.forEach((t=>{r.forEach((n=>{t.addEventListener(n,e)}))})),n},n.removeEventListener=(t,e)=>{const r=t.split(" ");return i.forEach((t=>{r.forEach((n=>{t.removeEventListener(n,e)}))})),n},n.addClass=t=>(t.split(" ").forEach((t=>{i.forEach((e=>e.classList.add(t)))})),n),n.toggleClass=t=>(t.split(" ").forEach((t=>{i.forEach((e=>e.classList.toggle(t)))})),n),n.removeClass=t=>(t.split(" ").forEach((t=>{i.forEach((e=>e.classList.remove(t)))})),n),n.hasClass=t=>!!i.find((e=>e.classList.contains(t))),n.each=e=>(i.forEach((n=>e.apply(new t([n])))),n),n.find=e=>{const n=i.map((t=>Array.from(t.querySelectorAll(e)))).flat();return new t(n)},n.filter=e=>{if("function"==typeof e)return new t(i.filter(e));const n=i.filter((t=>t.matches(e)));return new t(n)},n.children=e=>{const n=i.map((t=>Array.from(t.children))).flat().filter((t=>c(t,e)));return new t(n)},n.visibleOnly=()=>{const e=i.filter((t=>!t.closest(".hidden")));return new t(e)},n.parents=e=>{const n=i.map((t=>l(t))).flat().filter((t=>c(t,e)));return new t(n)},n.first=()=>new t(i.slice(0,1)),n.last=()=>new t(i.slice(-1)),n.index=()=>{if(1!==i.length)throw new Error(r);const t=i[0],e=t&&t.parentElement;if(!e)throw new Error("child-element-expected");return Array.from(e.children).indexOf(t)},n.next=e=>{const n=i.map((t=>t.nextElementSibling));return new t(n.filter((t=>c(t,e))))},n.prev=e=>{const n=i.map((t=>t.previousElementSibling));return new t(n.filter((t=>c(t,e))))},n.is=t=>{if(!i.length)return!1;if(i.length>1)throw new Error(r);return i[0].matches(t)},n.appendTo=t=>{const e=s(t);return e&&i.forEach((t=>e.append(t))),n},n.prependTo=t=>{const e=s(t);return e&&i.forEach((t=>e.prepend(t))),n},n.prepend=e=>{if(i.length>1)throw new Error(r);return(e&&Object.getPrototypeOf(e)===t.prototype?e:new t(e)).prependTo(n),n},n.append=e=>{if(i.length>1)throw new Error(r);return(e&&Object.getPrototypeOf(e)===t.prototype?e:new t(e)).appendTo(n),n},n.insertBefore=e=>{const o=e&&Object.getPrototypeOf(e)===t.prototype&&e.domElements[0],s=o&&o.parentElement;if(!o||!s)throw new Error("invalid-args");if(e.domElements.length>1)throw new Error(r);return i.forEach((t=>{s.insertBefore(t,o)})),n},n.insertAfter=e=>{const o=e&&1===e.length&&Object.getPrototypeOf(e)===t.prototype&&e.domElements[0];if(e&&e.domElements&&e.domElements.length>1)throw new Error(r);if(!o)throw new Error("invalid-args");return i.forEach((t=>{o.insertAdjacentElement("afterend",t)})),n},n.remove=()=>(i.forEach((t=>{try{t.parentElement&&t.remove()}catch(t){}})),n),n.detach=n.remove,n.clone=()=>{const e=i.map((t=>t.cloneNode(!0)));return new t(e)},n.isTarget=t=>t&&t.target&&i.includes(t.target),n.text=function(){if(arguments.length){const t=arguments[0]||"";return i.forEach((e=>e.innerText=t)),n}if(!i.length)return!1;if(i.length>1)throw new Error(r);return i[0].innerText},n.html=function(){if(arguments.length){const t=arguments[0]||"";return i.forEach((e=>e.innerHTML=t)),n}if(!i.length)return!1;if(i.length>1)throw new Error(r);return i[0].innerHTML},n.empty=()=>(i.forEach((t=>{t.innerHTML=""})),n),n.css=function(t){if(2===arguments.length&&"string"==typeof arguments[0])return i.forEach((t=>{const e=arguments[0],n=arguments[1];t.style[e]=n||""})),n;if(1!==arguments.length)throw new Error("invalid-args");if("string"==typeof t){if(i.length>1)throw new Error(r);return i[0].style[t]}return i.forEach((e=>{Object.keys(t).forEach((n=>{try{e.style[n]=t[n]||""}catch(t){throw console.error({key:n,e:t}),t}}))})),n},n.innerWidth=function(){if(!i.length)return 0;if(i.length>1)throw new Error(r);return i[0].clientWidth},n.innerHeight=function(){if(!i.length)return 0;if(i.length>1)throw new Error(r);return i[0].clientHeight},n.outerWidth=function(){if(!i.length)return 0;if(i.length>1)throw new Error(r);return i[0].getBoundingClientRect().width},n.outerHeight=function(){if(!i.length)return 0;if(i.length>1)throw new Error(r);return i[0].getBoundingClientRect().height},n.not=function(e){return e?"string"==typeof e?new t(i.filter((t=>!t.matches(e)))):e&&Object.getPrototypeOf(e)===t.prototype?new t(i.filter((t=>!e.domElements.includes(t)))):new t(i.filter((t=>t!==e))):n},n.removeAttr=t=>n.attr(t,!1)},a=function(t){if(t&&Object.getPrototypeOf(t)===s.prototype)return t;if("string"==typeof t){if(t.trim().startsWith("<")){const e=i(t);return new s(e)}{const e=Array.from(document.querySelectorAll(t));return new s(e)}}return Array.isArray(t)?new s(t):new s([t])};s.prototype.focus=function(){return this.domElements&&this.domElements.length&&this.domElements[0].focus(),this},s.prototype.blur=function(t){return this.domElements&&this.domElements.length?(t?this.domElements.forEach((e=>{e.addEventListener("blur",t)})):this.domElements.forEach((t=>{t.blur(),t.dispatchEvent(new Event("blur",{bubbles:!0}))})),this):this},s.prototype.trigger=function(t,e){const n=Object.assign({bubbles:!0},e),r="string"==typeof t?new Event(t,n):t;return this.domElements&&this.domElements.length&&this.domElements.forEach((t=>{t.dispatchEvent(r)})),this},a.Event=(t,e)=>{const n=new Event(t,Object.assign({bubbles:!0},e));return e&&(delete e.cancelable,delete e.bubbles),Object.assign(n,e)},a.each=(t,e)=>t.each(e),a.fn=s.prototype,t.exports=a},25467:(t,e,n)=>{"use strict";const r=n(83810);r.fn.modalContainerWidget=function(){return this.each((function(){const t=this;if(t.is("[data-mm-dismissible]")){const e=t.attr("data-mm-dismissible"),n=function(e){e.preventDefault(),e.stopPropagation(),t.addClass("hidden")};"buttonOnly"!==e&&t.on("keydown",(function(t){27===t.which&&n(t)})).click((function(t){t.target===this&&n(t)})),t.find('[data-mm-role~="dismiss"]').click(n)}t.on("keydown",(e=>{if(13===e.which){const n=r(e.target),o=t.find(".primaryAction").visibleOnly().first();n.is("A")||n.is("BUTTON")||!o.length||(e.stopPropagation(),e.preventDefault(),o.click())}}))}))}},26795:(t,e,n)=>{"use strict";const r=n(83810);r.fn.modelActionWidget=function(t){return r.each(this,(function(){const e=this,n=e.attr("data-mm-model-action");e.on("click",(function(){e.hasClass("disabled")||t[n]()}))}))}},66163:(t,e,n)=>{"use strict";const r=n(83810);r.fn.moveToFolderWidget=function(t,e,n,o){let i;return t.addEventListener("fileLoaded",(function(t){i=t})),r.each(this,(function(){const t=this;t.on("click",(function(){t.parents().filter((t=>t===t.ownerDocument.activeElement)).blur(),e.getProfile().then((t=>o.pickFolder(t,"Select a destination folder"))).then((t=>n.moveToFolder(i,t)))}))}))}},40066:(t,e,n)=>{"use strict";const r=n(89080),o=n(73558),i=n(73334),s=n(85714),a=n(18079),c=n(11856),l=function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n);return e},d=function(t,e){return new Promise(((n,r)=>{const o=new window.FileReader;o.onload=function(t){n(t.target.result)},o.onerror=r,o[t](e)}))};t.exports=function(){const t=r(this),e=function(){t.dispatchEvent("network-status",t.isOnline())},n=c(window),u=new a(n);t.createPoller=()=>new i(window),t.redirect=function(t){window.location.assign(t)},t.getQueryStringAsMap=function(){return s(window.location.search)},t.getHashAsMap=function(){return s(window.location.hash)},t.getHashStringValue=t=>{const e=s(window.location.hash);return e&&e[t]},t.writeDocumentCookieValue=(t,e)=>{const n=`${t}=${e}${"https:"===document.location.protocol?";secure":""}`;document.cookie=n},t.getDocumentCookieValue=t=>{const e=document.cookie&&document.cookie.split(";"),n=e&&e.find((e=>e&&e.trim().startsWith(t))),r=n&&n.split("=");return r&&r.length>1&&r[1]||""},t.getQueryString=()=>window.location.search,t.getHostName=function(){return window.document.location.hostname},t.getOrigin=()=>window.document.location.origin,t.storeForSession=(t,e)=>window.sessionStorage.setItem(t,e),t.getForSession=t=>window.sessionStorage.getItem(t),t.getJsonStorage=()=>u,t.replaceUrl=function(t,e){window.history.replaceState({},t,e),window.document.title=t},t.clearQueryString=function(){window.history.replaceState({},window.document.title,window.location.pathname)},t.locationReplace=function(t){window.location.replace(t)},t.setTitle=function(t){window.document.title=t},t.getPath=function(){return window.location.pathname},t.hasWindowFlag=t=>!!window[t],t.popup=function(t,e,n){const r=n&&n.height||600,o=n&&n.width||600;window.open(t,e||"",`menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=${r},width=${o}`)},t.open=function(t,e,n){const r=window.open(t,e||"");return n||r.focus(),r},t.isDownloadSupported=function(){return void 0!==document.createElement("a").download},t.setTitle=function(t){document.title=t},t.isOnline=function(){return window.navigator.onLine},t.isMac=function(){return"MacIntel"===window.navigator.platform},t.beforeUnload=function(t){window.addEventListener("beforeunload",t)},t.isSafari=function(){return window.safari||window.navigator.vendor&&window.navigator.vendor.includes("Apple")},t.isBlobDownloadSupported=function(){return!0},t.addMessageListener=function(t){window.addEventListener("message",t,!1)},t.removeMessageListener=function(t){window.removeEventListener("message",t)},t.downloadAsDataUri=function(t,e){return new Promise(((n,r)=>{const o=new window.FileReader,i=new window.XMLHttpRequest;o.onload=function(){n(o.result)},o.onerror=r,i.responseType="arraybuffer",i.open("GET",t,!0),i.onload=function(){const t=new window.Blob([i.response],{type:i.getResponseHeader("content-type")});o.readAsDataURL(t)},i.onerror=r,e&&e.headers&&Object.keys(e.headers).forEach((t=>i.setRequestHeader(t,e.headers[t]))),i.send(),i.onprogress=function(t){e&&e.notify&&e.notify(t.loaded,t.total)}}))},t.convertToPng=function(t,e,n){return new Promise(((r,o)=>{const i=new window.Image,s=window.setTimeout((function(){o("network-error")}),4e4);i.addEventListener("load",(function(){window.clearTimeout(s);try{r(function(t){const r=Math.min(e||t.width,t.width),o=Math.min(n||t.height,t.height),i=document.createElement("canvas");return i.setAttribute("width",r),i.setAttribute("height",o),i.getContext("2d").drawImage(t,0,0,r,o),i}(this).toDataURL("image/png"))}catch(t){o(t)}})),i.addEventListener("error",(function(t){window.clearTimeout(s),o(t)})),i.setAttribute("crossOrigin","anonymous"),i.src=t}))},t.toObjectUrl=function(t,e){return e?window.URL.createObjectURL(new window.Blob([t],{type:e})):window.URL.createObjectURL(t)},t.toBlob=function(t,e){return new window.Blob([t],{type:e})},t.dataURLToBlob=function(t){const e=";base64,";return-1===t.indexOf(e)?function(t){const e=t.split(","),n=e[0].split(":")[1],r=decodeURIComponent(e[1]);return new window.Blob([r],{type:n})}(t):function(t,e){const n=t.split(e),r=n[0].split(":")[1],o=window.atob(n[1]);return new window.Blob([l(o)],{type:r})}(t,e)},t.reloadPage=function(){window.location.reload()},t.getMMVersion=()=>document.querySelector("meta[name=version]").getAttribute("content"),t.revokeObjectUrl=function(t){window.URL.revokeObjectURL(t)},t.isTouch=function(){return!!("ontouchstart"in document.documentElement)},t.loadScript=function(t){const e=document.createElement("script");e.setAttribute("src",t),e.setAttribute("async","true"),e.setAttribute("defer","true"),document.body.appendChild(e)},t.isMobile=function(){const t=/iPad|iPhone|iPod/.test(window.navigator.platform),e="MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>2,n=/Android/i.test(window.navigator.platform)||/Android/i.test(window.navigator.userAgent);return t||e||n},t.fullScreenEnabled=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},t.requestFullScreen=function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()},t.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},t.buildFormData=function(){return new window.FormData},t.buildXMLHttpRequest=function(){return new window.XMLHttpRequest},t.fetch=(t,e)=>window.fetch(t,e),t.setTimeout=function(t,e){return window.setTimeout(t,e)},t.buildAbortController=()=>new window.AbortController,t.clearTimeout=function(t){return t&&window.clearTimeout(t)},t.setInterval=function(t,e){return window.setInterval((async()=>{try{await t()}catch(t){console.error(t)}}),e)},t.clearInterval=function(t){return window.clearInterval(t)},t.getWindow=function(){return window},t.parseXML=function(t){return(new DOMParser).parseFromString(t,"text/xml")},t.buildAjaxXMLResponse=function(t){return new o(t)},t.createElement=function(t){return document.createElement(t)},t.readFileAsDataURL=function(t){return d("readAsDataURL",t)},t.readFileAsText=function(t){return d("readAsText",t)},t.addWindowEventListener=function(t,e){return window.addEventListener(t,e)},t.removeWindowEventListener=function(t,e){return window.removeEventListener(t,e)},t.binaryStringSize=function(t){return new window.Blob([t],{type:"text/plain"}).size},window.addEventListener("online",e),window.addEventListener("offline",e),t.tryGettingStorageItem=function(t,e){try{return window[t+"Storage"].getItem(e)}catch(t){return!1}},t.trySettingStorageItem=function(t,e,n){try{return n?window[t+"Storage"].setItem(e,n):window[t+"Storage"].removeItem(e),!0}catch(t){return!1}},t.getRuntimeInfo=function(){return{language:window.navigator.language,platform:window.navigator.platform,origin:window.origin||`${window.location.protocol}://${window.location.host}`,userAgent:window.navigator.userAgent,path:window.location.pathname}},t.delay=function(t){return new Promise((e=>{window.setTimeout(e,t)}))},t.browserInfo=function(){return{agent:window.navigator&&window.navigator.userAgent,url:window.location&&window.location.href,platform:window.navigator&&window.navigator.platform,screen:{height:window.screen&&window.screen.height,width:window.screen&&window.screen.width}}},t.closeWindow=function(){return window.close()},t.encodeUrlParams=function(t,e){return e&&0!==Object.keys(e).length?`${t}?${Object.keys(e).filter((t=>e[t])).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}`:t},t.requestAnimationFrame=t=>window.requestAnimationFrame(t),t.buildWebSocket=t=>new Promise(((e,n)=>{const r=new window.WebSocket(t);r.addEventListener("open",(()=>e(r))),r.addEventListener("error",n)})),t.uniqueString=(t=32)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=(()=>{const e=new Uint8Array(t);return window.crypto.getRandomValues(e),e})().map((t=>e.charCodeAt(t%e.length)));return String.fromCharCode(...n)},t.bufferEncodeBase64=function(t){const e=new Uint8Array(t);return window.btoa(String.fromCharCode(...e))},t.sha256Digest=t=>{const e=new TextEncoder;return window.crypto.subtle.digest("SHA-256",e.encode(t))}}},52733:(t,e,n)=>{"use strict";const r=n(83810);r.fn.nodeContextWidget=function(t){return r.each(this,(function(){const e=this,n=function(t){e.domElements.forEach((function(e){!function(e){const n=e.getAttribute("data-mm-node-context"),r="!"===n[0],o=r?n.slice(1):n,i=!t||!t[o];return r?!i:i}(e)?e.classList.remove("disabled"):e.classList.add("disabled")}))};t.addEventListener("layoutChangeComplete",(function(){const e=t.getSelectedNodeId();n(t.contextForNode(e))})),t.addEventListener("nodeSelectionChanged",(function(e,r){r&&n(t.contextForNode(e))}))}))}},42464:(t,e,n)=>{"use strict";const r=n(83810);r.fn.nodeLineAttrWidget=function(t){return r.each(this,(function(){const e=this,n=e.attr("data-mm-node-line-attr"),r=e.attr("data-mm-node-line-value"),o=e.attr("data-mm-node-line-show-on"),i=e.attr("data-mm-node-line-value-relative"),s=()=>{const e=t.getSelectedLine(),r=t.getSelectedLineAttr()||{},o=e&&e.connectorEditingContext&&e.connectorEditingContext.defaults||{};return r[n]||o[n]||!1};e.click((function(){t.updateLineProperty(n,(()=>{if(!i)return!(!r||"false"===r)&&r;const t=(parseInt(s())||1)+parseInt(r);return Math.max(1,t)})())})),t.addEventListener("lineSelected lineUpdated",(function(){i||((()=>{const t=s();return void 0!==o?t===o||!t&&"false"===o:"false"===r?!!t:r!==t})()?e.removeClass("hidden"):e.addClass("hidden"))}))}))}},6049:(t,e,n)=>{"use strict";const r=n(83810);r.fn.nodeLineColorWidget=function(t,e){return r.each(this,(function(){this.click((function(){t.isEditingEnabled()&&e.pickColor().then((function(e){t.updateLineProperty("color",e)}))}))}))}},434:(t,e,n)=>{"use strict";const r=n(83810),o=n(637),i=n(12394);r.fn.nodeLineLabelEditorWidget=function(t,e){const s=n(60468);return r.each(this,(function(){const n=this;t.addEventListener("lineLabelEditRequested",(function(a){const c=(a&&r(i(a,n.domElements[0]))).domElements[0],l=e.getLineProperties(a),d=o(l.connection,l.fromBox,l.toBox,l.connection.d),u=c.querySelector("text.mapjs-connector-text"),h=l.connection.label,f=u&&u.getClientRects()[0],p=r("<input>").appendTo(n),g={};f?(g.width=f.width,g.height=f.height):(g.width=100,g.height=20),p.val(h),p.css({fontSize:l.connection.theme.label.text.font.sizePx+"px",fontWeight:l.connection.theme.label.text.font.weight,position:"absolute",left:Math.round(d.x-g.width/2)+"px",top:Math.round(d.y-g.height)+"px",width:g.width+"px",minWidth:g.width+"px",height:g.height+"px",transform:c.style.transform}),p.addClass("mapjs-connector-text").attr("placeholder","line label"),t.setInputEnabled(!1),p.on("blur",(function(){const e=p.val().trim();t.setInputEnabled(!0),e!==h&&t.updateLineProperty("label",e,a),p.remove()})).on("keyup",(function(t){13===t.keyCode?p.blur():27===t.keyCode&&(p.val(h),p.blur())})),s(p.domElements[0]),p.focus(),p.domElements[0].select()}))}))}},88229:(t,e,n)=>{"use strict";const r=n(83810),o={background:"backgroundColor",borderColor:"lineColor"};r.fn.nodeStyleEditorColorPickerWidget=function(t,e){return r.each(this,(function(){const n=this,r=n.attr("data-mm-node-style-color"),i=o[r]||r;n.click((()=>{t.pickColor().then((t=>e.setStyleValue(r,t))).catch((()=>{e.showEditor()})),e.hideEditor()})),e.addEventListener("showNodePreview",(()=>{const t=e.getThemeValue(i);n.domElements[0].style.backgroundColor=t}))}))}},97536:(t,e,n)=>{"use strict";const r=n(83810);r.fn.nodeStyleEditorFontSelectorWidget=function(t,e){if(!t||!e)throw new Error("invalid-args");return r.each(this,(function(){const n=this,r=n.find("[data-mm-role=template]").detach().attr("data-mm-role","");Object.keys(e).forEach((o=>{const i=r.clone();i.find("a").text(o).on("click",(()=>{t.setStyleValue("fontFamily",o)})).css({"font-family":e[o]}),n.append(i)}))}))}},53804:(t,e,n)=>{"use strict";const r=n(83810);n(20284),r.fn.nodeStyleEditorWidget=function(t,e){return r.each(this,(function(){const n=this.sectionHandlerWidget(),r=n.find('[data-mm-role~="node-preview"]'),o=n.find('[name="style-selector"]');n.find("[data-mm-style-tool]").addClass("hidden"),n.find(`[data-mm-style-tool="${o.val()}"]`).removeClass("hidden"),o.on("change",(()=>{n.find("[data-mm-style-tool]").addClass("hidden"),n.find(`[data-mm-style-tool~="${o.val()}"]`).removeClass("hidden")})),t.addEventListener("showNodePreview",(t=>{n.removeClass("hidden");const o=r.parent().domElements[0].getBoundingClientRect(),i={x:(o.width-t.metrics.width)/2,y:(o.height-t.metrics.height)/2,height:t.metrics.height,width:t.metrics.width};e.updateNodeContent(r.domElements[0],i,t)})),n.find("[data-mm-role~=confirm]").on("click",t.saveChanges),t.addEventListener("hideEditor",(()=>n.addClass("hidden"))),t.addEventListener("showEditor",(()=>n.removeClass("hidden")))}))}},48055:(t,e,n)=>{"use strict";const r=n(83810),o={level_1:"root nodes",level_2:"level 1",level_3:"level 2",level_4:"level 3",level_5:"level 4"};r.fn.nodeThemeStyleColorPicker=function(t,e,n){return r.each(this,(function(){const r=this,o=r.attr("data-mm-theme-color").split("."),i=()=>{const n=e.getThemeAttribute(["node"],[t,"default"],o);r.css("background-color",n)};i(),e.addEventListener("themeJSONChanged",i),r.click((()=>{n.pickColor().then((n=>{e.overrideThemeAttribute(["node",t].concat(o),n||void 0)})).catch((()=>{}))}))}))},r.fn.nodeThemeStyleEditorWidget=function(t){const{nodeStyle:e,description:n,mapThemeModel:o,colorPickerModel:i,fontPickerModel:s}=t;if(!(e&&n&&o&&i&&s))throw new Error("invalid-args");return r.each(this,(function(){const t=this,r=t.find("[data-mm-theme-color]"),a=t.find("[data-mm-theme-font]"),c=t.find("[data-mm-font-size]"),l=t.find("[data-mm-border-size]"),d=t.find("[data-mm-corner-radius]");t.find('[data-mm-role="description"]').text(n),r.nodeThemeStyleColorPicker(e,o,i),a.attr("data-mm-theme-node-style",e).themeStyleFontPicker(o,s),c.attr("data-mm-theme-node-style",e).themeStyleFontSizeWidget(o),l.attr("data-mm-theme-border-size",e).themeStyleBorderSizeWidget(o),d.attr("data-mm-theme-corner-radius",e).themeStyleCornerRadiusWidget(o)}))},r.fn.nodeThemeEditorWidget=function(t){return r.each(this,(function(){const e=this,n=e.find('[data-mm-role~="theme-style-template"]').detach();e.empty(),Object.keys(o).forEach((r=>{const i=n.clone();i.appendTo(e),i.nodeThemeStyleEditorWidget(Object.assign({nodeStyle:r,description:o[r]},t))}))}))}},53354:(t,e,n)=>{"use strict";const r=n(83810),o=n(44005);n(32021),n(85184),r.fn.noteWidget=function(t,e,n,i){return r.each(this,(function(){let r=e,s=!1,a=!1;const c=this,l=c.find("[data-mm-role=viewer]").textOnlyPasteWidget(),d=c.find("[data-mm-role=title]"),u=function(t){l.removeAttr("contenteditable"),t&&l.html(i(r.text))},h=function(t){t==r.nodeId&&m("remove")},f=function(t){t.nodeId==r.nodeId&&(r=t,l.html(i(t.text)),d.text(t.title))},p=function(t){t!=r.nodeId||l.attr("contenteditable")||c.toggleClass("folded")},g=function(t){t.nodeId==r.nodeId&&(s=!0,c.removeClass("folded"),r=t,l.attr("contenteditable","true").text(t.text),l.focus(),o(l.domElements[0]),c.mmScrollIntoView())},m=function(e){t[e+"EventListener"]("noteRemoved",h),t[e+"EventListener"]("noteToggleFoldRequested",p),t[e+"EventListener"]("noteEditRequested",g),t[e+"EventListener"]("noteChanged noteAdded",f)};m("add"),d.text(r.title).on("click",(function(e){a&&(window.clearTimeout(a),a=!1),a=window.setTimeout((function(){l.attr("contenteditable")||t.setActiveNodeId(r.nodeId)}),250),e.preventDefault(),e.stopImmediatePropagation()})).on("dblclick",(function(t){a&&(window.clearTimeout(a),a=!1),c.toggleClass("folded"),t.preventDefault(),t.stopImmediatePropagation()})),l.html(r.text?i(r.text):"").on("click",(function(e){e.currentTarget.hasAttribute("contenteditable")||t.editNoteForNodeId(r.nodeId)})),l.on("blur",(function(){const e=l.text().trim(),n=l.html();c.data("moving")||(s&&r.text!==e&&n!==i(r.text)?t.setText(r.nodeId,e):r.isTemp?t.setText(r.nodeId,""):l.html(i(r.text)),u())})),l.on("keydown",(function(t){27===t.which&&(s=!1,u(!0))})),c.on("contextmenu",(function(e){if(!l.attr("contenteditable")&&t.requestContextMenu(e.pageX,e.pageY))return t.setActiveNodeId(r.nodeId),e.preventDefault(),!1})),n&&g(e)}))}},6697:(t,e,n)=>{"use strict";const r=n(83810);r.fn.numericTotaliser=function(){return r.each(this,(function(){const t=this,e=t.find("tfoot tr"),n=function(n){let o=0;0!==n&&(t.find("tbody tr").domElements.forEach((function(t){const e=r(t),i=parseFloat(e.children().eq(n).text());isNaN(i)||(o+=i)})),e.children().eq(n).text(o.toLocaleString()))};t.on("change",(function(t){const o=r(t.target);void 0!==t.column?n(t.column):o.is("td")?n(o.index()):function(){for(let t=1;t<e.children().length;t++)n(t)}()}))}))}},53991:(t,e,n)=>{"use strict";const r=n(83810);n(20284),n(99998),r.fn.oauthAuthenticationWidget=function(t){return r.each(this,(function(){const e=this.sectionHandlerWidget(),n=function(t){t.license?e.showSection("confirm"):e.showSection("error-not-registered"),e.trigger("confirmationShown")},r=function(r){e.showSection("progress"),t[r]().then(n).catch((t=>e.showError(t)))};e.on("show",(function(){r("backgroundAuthenticate")})),e.find("[data-mm-role~=modalAuthenticate]").click((function(){r("modalAuthenticate")})),e.find("[data-mm-role~=changeAccount]").click((function(){r("changeAccount")})),e.find("[data-mm-role~=confirm]").click((function(){t.confirm()?e.addClass("hidden"):e.showError("storage")}))}))}},31008:t=>{"use strict";t.exports=function(t){const e=function(t){34!==t.which&&33!==t.which||(t.preventDefault(),t.stopPropagation())};t.addEventListener("keyup",e),t.addEventListener("keydown",e)}},52319:(t,e,n)=>{"use strict";const r=n(83810);n(20284),n(99998),n(28061),r.fn.personalSignupWidget=function(t,e,n,r){return this.each((function(){const o=this.sectionHandlerWidget(),i=["register","buySubscription","subscriptionPurchased"],s=t=>r&&i.includes(t)?`${r}-${t}`:t,a=function(){o.find(`[data-mm-section~="${s("register")}"] .error`).addClass("hidden")},c=function(t){t.purchaseComplete?o.showSection(s("subscriptionPurchased")):t&&t.license&&t.license.account===t.domain?o.showSection("activeDomainSubscription"):o.showSection("activePersonalSubscription")},l=function(t){const e=(t=>{const e=t&&t.subscription&&t.subscription.actions;return n.filterPlans(e),e&&e.length&&(e.includes("BuySubscription")||e.includes("BuyTeamSubscription"))?s("buySubscription"):!!(e&&e.length&&e.includes("BuyDomainSubscription"))&&"buyDomainSubscription"})(t);e?o.showSection(e):c(t)};e.addEventListener("showPersonalAccountSignup accountRegistered",(()=>{a(),o.removeClass("hidden"),o.showProgressMessage("Checking account information"),o.trigger("reset"),e.getGoldAccountDetails(!0).then(l).catch((t=>{["not-authenticated","not-registered"].indexOf(t)>=0?(a(),o.showSection(s("register")),o.find('[name="registration-account-name"]').focus()):o.showError(t)})),o.trigger("subscription-handler-complete")})),e.addEventListener("goldAccountInfo",(t=>{t.active&&c(t)})),t.addEventListener("retrievingSubscription",(()=>{o.showProgressMessage("Loading account details...")}))}))}},3668:(t,e,n)=>{"use strict";const r=n(83810);n(20284),n(28061),n(99998),r.fn.planUpgradeWidget=function(t,e,n){return r.each(this,(function(){let o,i;const s=r(this).sectionHandlerWidget(),a=s.attr("data-mm-plan-type"),c=s.find('[data-mm-role~="invoice"]'),l=s.find('[data-mm-role~="plan-price"]'),d=s.find('[data-mm-role~="plan-description"]'),u=c.find('[data-mm-role~="invoice-template-line"]').detach(),h=s.find('[data-mm-role~="confirm-change-to-yearly"]'),f=s.find('[data-mm-role~="predicted-expiry-date"]'),p=s.find('[data-mm-role~="authorise-payment"]'),g=s.find('[data-mm-role~="cancel-task"]'),m=t=>{const e=t.preview,n=e&&e.lines||[],r=e.currency||n&&n.length&&n[0].currency||o.CCY,i=e.total||n.reduce(((t,e)=>t+e.amount),0),a={description:"Total to pay now",amount:i,currency:r};if(i<=0)return s.showError("stripe-subscription-not-upgradable"),void s.trigger("showPreviewComplete");n.push(a),n.forEach((t=>{const e=u.clone(),n=new Number(t.amount).toFixed(2);e.find('[data-mm-role~="invoice-description"]').text(t.description),e.find('[data-mm-role~="invoice-amount"]').text(`${n} ${t.currency}`),c.append(e)})),f.text(new Date(1e3*e.newExpiry).toDateString()),s.showSection("preview"),s.trigger("showPreviewComplete")};s.on("show",(()=>{s.showProgressMessage("Checking your subscription, please wait..."),e.getSubscription().then((e=>t.getUpgradePlan(e.actions,a))).then((async t=>{if(!t)throw"no-upgrade-plan";const e=t.typeLabel||`${t.period} ${t.type}`;return o=t,c.empty(),l.text(`${t.prefix}${t.price}${t.postfix} ${t.period}`),d.text(e),(async t=>(i=await n.build(n.newTaskId()),await i.exec("stripe/request_upgrade_preview",{newPlanId:t.id}),i.waitFor((t=>t&&(t.preview||t.error)))))(t)})).then(m).catch((t=>{s.showError(t),s.trigger("showPreviewError")}))})),s.on("hide",(()=>{i&&i.cancelIfWaiting()})),p.click((()=>{s.showSection("payment-authorisation-progress")})),g.click((async()=>{if(i)return await e.getGoldAccountDetails(!0),i.cancel()})),h.click((()=>{if(!i||!o)throw new Error("invalid-state");return s.showProgressMessage("Preparing, please wait..."),i.exec("stripe/request_upgrade",{newPlanId:o.id}).then((()=>(s.showProgressMessage("Contacting your payment provider..."),i.waitFor((t=>["cancelled","chargeSucceeded","chargeFailed","actionRequired"].includes(t.status)))))).then((async t=>(s.showSection(t.status),"actionRequired"===t.status?(p.attr("href",t.actionUrl),t=await i.waitFor((t=>["cancelled","chargeSucceeded","chargeFailed"].includes(t.status))),s.trigger("action-required"),t):t))).then((async t=>{await e.getGoldAccountDetails(!0),s.showSection(t.status),s.trigger("confirm-button-click-complete")}))}))}))}},86010:(t,e,n)=>{"use strict";const r=n(83810);r.fn.popupLinkWidget=function(t){return r.each(this,(function(){this.addEventListener("click",(function(e){const n=e.currentTarget&&e.currentTarget.href;n&&(t.popup(n),e.preventDefault(),e.stopPropagation())}))}))}},99646:(t,e,n)=>{"use strict";const r=n(59050),o=n(83810);o.fn.progressCalcWidget=function(t){return o.each(this,(function(){const e=o(this),n=e.find("[data-mm-role~=calc-table]"),i=e.find("[data-mm-role~=row-template]").detach().attr("data-mm-role","data-row"),s=e.find("[data-mm-role~=total]"),a=e.find("[data-mm-role~=empty]"),c=s.find("[data-mm-role~=total-value]"),l=i.find("[data-mm-role~=cell]").detach(),d=function(t){const e=n.find("tbody");e.empty(),r.isEmpty(t)?(n.addClass("hidden"),a.removeClass("hidden"),s.addClass("hidden")):(n.removeClass("hidden"),a.addClass("hidden"),t.total?(c.text(t.total().toLocaleString()),s.removeClass("hidden")):s.addClass("hidden"),r.each(t,(function(t){const n=i.clone().appendTo(e);r.each(t,(function(t,e){l.clone().addClass("cell"+e).appendTo(n).find("[data-mm-role=value]").text(t.toLocaleString())}))})))};t.addEventListener("progressContext",(function(e){e.isActive?t.addEventListener("dataUpdated",d):t.removeEventListener("dataUpdated",d)}))}))}},10562:(t,e,n)=>{"use strict";n(20284),n(65170),n(25826),n(24859);const r=n(59050),o=n(19048),i=n(83810);i.fn.progressConfigEditorWidget=function(t,e,n,s,a){return i.each(this,(function(){const c=this.sectionHandlerWidget(),l=c.find('[data-mm-role~="progress-configuration-table"]'),d=c.find('[data-mm-role~="progress-icon-editor"]').iconEditorWidget(s,a),u=c.find('[data-mm-role~="row-template"]').detach().attr("data-mm-role",""),h=l.find("tbody"),f=function(t){const r=u.clone().appendTo(h),o=t.style&&t.style.background||"transparent",i=r.find('[data-mm-role~="status-icon"]'),s=r.find('[data-mm-role~="status-color"]'),l=function(t){const e=t&&t.url,n=a&&a(e)||e;i.data("icon",t),n?i.css("background-image","url("+n+")"):i.css("background-image",""),c.showSection("initial"),c.find("[data-mm-event-arg]").addClass("hidden")};return r.attr("data-mm-progress-key",t.key).attr("data-mm-role","progress-status"),""===t.key&&r.attr("data-mm-progress-empty-key",!0),r.find("[data-mm-editable]").tableCellInPlaceEditorWidget().removeAttr("data-mm-editable"),r.find('[data-mm-role~="status-description"]').text(t.description),s.css("background",o).val(o).click((()=>{c.find('[data-mm-role~="selected-status-description"]').text(t.description),e.pickColor(!0).then((t=>{s.css("background",t).val(t)}),(()=>{s.css("background","").val(!1)}))})),l(t.icon),i.click((()=>{const t=i.data("icon");n.editProgressIcon(t).then((t=>{l(t)}))})),r.find('[data-mm-role~="status-priority"]').text(t.priority),r.find('[data-mm-role~="status-delete"]').click((()=>{r.remove()})),r},p=function(t){h.empty(),r.each(t,f)},g=()=>{const e=t.getContentStatusUpdater(),n=e&&e.getStatusConfig(),r=n&&o(n);c.find("[data-mm-event-arg]").addClass("hidden"),p(r),c.showSection("initial")};c.find('[data-mm-role~="save"]').click((()=>{const e={},n=l.find("[data-mm-role=progress-status]"),o=r.reject(r.unique(n.domElements.map((t=>parseInt(t.getAttribute("data-mm-progress-key"),10)))),(t=>isNaN(t)));let s=1;o.length>0&&(s=1+r.max(o)),n.domElements.forEach((t=>{const n=i(t),r={description:n.find("[data-mm-role~=status-description]").text()},o=n.find("[data-mm-role=status-color]").val(),a=n.find("[data-mm-role=status-icon]").data("icon"),c=n.attr("data-mm-progress-empty-key");let l=n.attr("data-mm-progress-key"),d=parseInt(n.find("[data-mm-role=status-priority]").text());r.style=o&&"transparent"!==o&&"false"!==o?{background:o}:{background:!1},a&&(r.icon=a),l||(l=c?"":s++),isNaN(d)&&(d=0),d&&(r.priority=d),e[l]=r})),t.setStatusConfig(e),c.addClass("hidden")})),c.find('[data-mm-role~="progress-color-picker"]').colorPickerWidget(e),e.addEventListener("showColors",(()=>{c.showSection("colors")})),e.addEventListener("hideColors",(()=>{c.showSection("initial")})),c.find('[data-mm-role~="no-color"]').click(e.colorPickedDefault),s.addEventListener("stage",(()=>{c.showSection("icon-editor")})),s.addEventListener("complete pickerActive cancel",(()=>{c.showSection("initial")})),c.find('[data-mm-role~="use-icon"]').click((()=>{const t=d.find("input.validation-error"),e=d.find("[data-mm-role~=icon-height]"),n=d.find("[data-mm-role~=icon-position]"),r=d.find("[data-mm-role~=icon-width]");t.length?t.first().focus():(s.setDimensions(r.val(),e.val()),s.setPosition(n.val()),s.save())})),c.find("[data-mm-role=append]").click((()=>{f({}).find("[data-mm-default-edit]").click()})),c.on("show",g),t.addEventListener("configChanged",(t=>{t?g():c.addClass("hidden")})),c.on("hide",(()=>{e.colorPickCancelled(),p()}))}))}},78115:(t,e,n)=>{"use strict";const r=n(60960),o=n(59050),i=n(83810),s=n(83033);i.fn.progressConfigSelectorWidget=function(t,e){const n=e&&e.configBuild||s;return i.each(this,(function(){const e=this,i=e.find('[data-mm-role~="selector-template"]').detach();e.empty(),o.each(r,(function(r,o){const a=i.clone().prependTo(e);a.attr("data-mm-progress-config",o),a.find('[data-mm-role~="config-title"]').text(r.title),a.click((function(){const e=n.apply(s,r.args);t.setStatusConfig(e)}))}))}))}},59974:(t,e,n)=>{"use strict";const r=n(83810);r.fn.progressFilterPropertyToggleWidget=function(t){return r.each(this,(function(){const e=this,n=function(t,n){let r=!1;n&&n[e.val()]&&(r=!0),e.prop("checked",r)};e.on("click",(function(){t.toggleFilterProperty(e.val())})),t.addEventListener("progressContext",(function(e){e.isActive?t.addEventListener("dataUpdated",n):t.removeEventListener("dataUpdated",n)}))}))}},13135:(t,e,n)=>{"use strict";const r=n(59050),o=n(83810);o.fn.progressProjectionsWidget=function(t){return o.each(this,(function(){const e=this,n=e.find("[data-mm-role=projection-template]").detach().attr("data-mm-role","");t.addEventListener("projectionsChanged",(function(t){e.empty(),r.each(t,(function(t){n.clone().appendTo(e).text(t).val(t)}))})),e.on("change",(function(){t.setActiveProjection(e.val())}))}))}},3384:(t,e,n)=>{"use strict";const r=n(19048),o=n(59050),i=n(83810);i.fn.progressStatusMenuWidget=function(t,e){const n=e||(t=>t);return i.each(this,(function(){const e=this,i=e.find('[data-mm-role~="status-template"]').detach(),s=function(s){if(e.empty(),!s)return;const a=r(s);o.each(a,(function(r){const s=i.clone().appendTo(e);var a,c,l;s.attr("data-mm-progress-status",r.key),a=s.find('[data-mm-role~="status-icon"]'),c=r.icon,l=r.style&&r.style.background,c?a.addClass("status-icon-image").css("background-image","url("+n(c.url)+")"):a.removeClass("status-icon-image").css("background-image",""),a.css("backgroundColor",l),s.find('[data-mm-role~="status-name"]').text(r.description),s.find('[data-mm-role~="status-selector"]').click((function(){t.updateActivatedStatus(r.key)})),s.find('[data-mm-role~="status-checkbox"]').prop("checked",!0).val(r.key),s.find('[data-mm-role~="status-checkbox"]').click((function(e){t.setFilterStatus(r.key,e.target.checked)})),t.addEventListener("dataUpdated",(function(t,e){let n=!1;e&&e.statuses?o.contains(e.statuses,r.key)&&(n=!0):n=!0,s.find('[data-mm-role~="status-checkbox"]').prop("checked",n)}))}))};t.addEventListener("configChanged",s),t.addEventListener("progressContext",(function(t){t.isActive&&t.currentStatusConfig?s(t.currentStatusConfig):s()}))}))}},4104:(t,e,n)=>{"use strict";const r=n(83810);r.fn.progressToolsWidget=function(t){return r.each(this,(function(){this.on("show",(function(){t.setActive(!0)})),this.on("hide",(function(){t.setActive(!1)}))}))}},13806:(t,e,n)=>{"use strict";const r=n(83810),o=n(87358),i=n(41076);n(99998),n(28061),n(20284),r.fn.registrationDetailsWidget=function(t,e,n){return r.each(this,(function(){const r=this,s=r.find('[name="registration-email-address"]'),a=r.find('[name="registration-account-name"]'),c=r.find('[data-mm-role~="register"]'),l=function(t){const e=a.val(),n=a.parent();let r=!0;return n.removeClass("error"),e&&!o(e)&&(r=!1),t||r||!e||n.addClass("error"),r&&e},d=function(t){const e=function(t){if(!t||i(t))return t}(s.val()),n=s.parent();let r=!0;return n.removeClass("error"),e||(r=!1),t||r||!s.val()||n.addClass("error"),r&&e},u=function(t){const e=l(t),n=d(t);if(e&&n)return c.removeClass("disabled"),{accountName:e,email:n};c.addClass("disabled")},h=function(){u()};s.blur(h).focus(h).on("keyup",h),a.blur(h).focus(h).on("keyup",h),u(!0),r.on("reset",(function(){s.attr("data-mm-using-suggested-email")||s.val(""),a.val(""),u(!0),r.trigger("resetComplete")})),c.click((function(){const o=u();r.find('[data-mm-role~="error"]').addClass("hidden"),o&&(r.showProgressMessage("Registering with MindMup..."),e.register(o.accountName,o.email,n.getHostName()).catch((function(e){const n=r.find('[data-mm-role="error"][data-mm-reason="'+e+'"]');n.length?n.removeClass("hidden"):(r.find('[data-mm-role="error"]').removeClass("hidden"),r.find('[data-mm-role="error"][data-mm-reason]').addClass("hidden")),r.showSection(t)})))}))}))}},14921:(t,e,n)=>{"use strict";const r=n(83810);n(20284),r.fn.remoteExportWidget=function(t,e){return r.each(this,(function(){const n=this.sectionHandlerWidget(),r=n.find('[data-mm-role~="publish-progress-message"]').text(),o=n.find('[data-mm-role~="start-export"]'),i=function(t={}){Object.keys(t).forEach((e=>{const r=t[e];n.find("[data-mm-role~="+e+"]").domElements.forEach((function(t){"A"===t.tagName?t.setAttribute("href",r):"INPUT"===t.tagName||"TEXTAREA"===t.tagName?(t.value=r,t.setAttribute("data-mm-val",r)):"DIV"===t.tagName&&(t.matches(`[data-mm-role~="${r}"]`)?t.classList.remove("hidden"):t.classList.add("hidden"))}))})),n.trigger("publishResult"),n.showSection("done")},s=function(t){n.find('[data-mm-role~="publish-progress-message"]').text(t)},a=function(){const t={};return n.find("[data-mm-export-parameter]").domElements.forEach((function(e){let n;n="checkbox"===e.getAttribute("type")?e.checked:e.value||!e.getAttribute("data-mm-ignore-placeholder")&&e.getAttribute("placeholder"),t[e.getAttribute("data-mm-export-parameter")]=n})),t},c=function(t){const e=n.find('[data-mm-error~="'+t+'"]');n.find("[data-mm-error]").addClass("hidden"),e.length>0?e.removeClass("hidden"):n.find('[data-mm-error~="default"]').html(t).removeClass("hidden"),n.showSection("error")},l=function(t){let e=t&&t.reason||t,r=t&&t.fileId;["empty","action-not-allowed"].includes(e)||r||(e="network-error",r="NO-FILE-ID"),r&&n.find('[data-mm-role~="file-id"]').html(r),c(e)},d=function(){s(r),n.showSection("inprogress"),t.startExport(n.attr("data-mm-format")||n.find("[data-mm-role~=format-selector]").val(),{export:a()},{notify:s}).then(i,l)};o.click(d).on("keydown",(function(t){32===t.which&&t.target===o.domElements[0]&&(t.preventDefault(),t.stopPropagation(),d())})),n.on("show",(function(){n.hasSection("initial")?(n.showSection("initial"),n.trigger("shown")):(s("Retrieving your account details..."),n.showSection("inprogress"),e.getGoldAccountDetails().then((function(t){t&&t.active?n.showSection("initial-gold"):n.showSection("initial-free")}),(function(t){"not-registered"===t?n.showSection("initial-free"):c(t)})).then((function(){n.trigger("shown")})))}))}))}},91747:(t,e,n)=>{"use strict";n(43737),n(83810).fn.searchWidget=function(t){const e=this;return this.typeahead((function(e){return t.search(e)}),(function(n){n&&n.id&&(e.addClass("hidden"),t.centerOnNode(n.id))}),(function(t,e,n){const r=e.title.replace(/\n/g," "),o=r.toLowerCase().indexOf(n.toLowerCase());let i=r;o>15&&(i=i.substring(0,15)+"..."+i.substring(o)),i.length>30&&(i=i.substring(0,30)+"..."),t.text(i)}))}},20284:(t,e,n)=>{"use strict";const r=n(83810);r.fn.showSection=function(t){return this.each((function(){this.trigger(r.Event("showSection",{section:t}))}))},r.fn.hasSection=function(t){return!!this.find('[data-mm-section~="'+t+'"]').length},r.fn.backupSections=function(t){return r.each(this,(function(){const e=t||1;this.trigger(r.Event("backToPreviousSection",{skip:e}))}))},r.fn.sectionHandlerWidget=function(){return r.each(this,(function(){let t=[];const e=this,n=e.attr("data-mm-initial-section")||"initial",o=function(n,r){r||0!==t.length&&t[0]===n||(t=[n].concat(t)),e.find("[data-mm-section]").addClass("hidden"),n&&(e.find('[data-mm-section~="'+n+'"]').removeClass("hidden").find("[data-mm-request-focus]").focus(),e.find('[data-mm-section~="'+n+'"][data-mm-request-focus]').focus())},i=function(e){const n=t&&t.length&&Math.min(e&&e.skip||1,t.length-1),r=n&&t[n];r&&(t=t.slice(n),o(r,!0))};e.on("showSection",(function(t){const e=t&&t.section||n;e&&this.isTarget(t)&&o(e)})),e.on("hide",(function(){t=[]})),e.find("[data-mm-show-section]").click((function(t){const o=r(this),i=o.attr("data-mm-show-section")||n;t.stopPropagation(),o.hasClass("disabled")||e.showSection(i)})),e.find("[data-mm-show-section-back]").click(i),e.on("backToPreviousSection",i)}))}},56827:(t,e,n)=>{"use strict";const r=n(83810);r.fn.selectableReadOnlyInputWidget=function(){return r.each(this,(function(){const t=this;t.css("cursor","pointer"),t.on("input change",(function(t){const e=t.currentTarget;e.value=e.getAttribute("data-mm-val")})),t.on("click",(function(t){const e=t.currentTarget;e.setSelectionRange?e.setSelectionRange(0,e.value.length):e.select&&e.select()}))}))}},66842:(t,e,n)=>{"use strict";const r=n(83810);r.fn.setThemeWidget=function(t){return r(this).click((function(){t.setTheme(r(this).attr("data-mm-set-theme"))}))}},99998:(t,e,n)=>{"use strict";const r=n(83810);n(20284),r.fn.showError=function(t){return this.each((function(){const e=this;e.find('[data-mm-section~="error-'+t+'"]').length?e.showSection("error-"+t):e.showSection("error")}))}},60880:(t,e,n)=>{"use strict";const r=n(83810),o=n(19083);r.fn.showHotkeyWidget=function(t){return r.each(this,(function(){const e=this,n=e.attr("data-mm-show-hotkey");o(t,n,(function(t){e.hasClass("hidden")&&(t.stopPropagation(),t.preventDefault(),e.removeClass("hidden"))}))}))}},28061:(t,e,n)=>{"use strict";const r=n(83810);n(20284),r.fn.showProgressMessage=function(t){this.find('[data-mm-role~="progress-message"]').text(t),this.showSection("progress")}},460:(t,e,n)=>{"use strict";n(50170),n(83810).fn.sidebarWidget=function(t){return this.each((function(){const e=this.addClass("hidden").visibilityObserver(),n=e.attr("data-mm-sidebar-name"),r=e.attr("data-mm-sidebar-size"),o=function(){e.addClass("hidden")};t.register(n,r),t.addEventListener("show",(function(t){t===n?e.removeClass("hidden"):o()})),t.addEventListener("hide",o)}))}},98605:(t,e,n)=>{"use strict";const r=n(83810);r.fn.splittableWidget=function(t,e,n){const o="sidebar",i="sidebar-size";return n||e.addEventListener("mapViewResetRequested",(function(){t.hide()})),r.each(this,(function(){const n=this;t.addEventListener("hide",(function(){n.removeAttr(o).removeAttr(i),e.centerOnNode(e.getSelectedNodeId()),n.find('[data-mm-role~="primary"]').focus()})),t.addEventListener("show",(function(t,r){r?n.attr(i,r):n.removeAttr(i),n.attr(o,t),e.centerOnNode(e.getSelectedNodeId())})),n.find("sidebar").on("keydown",(function(t){9!==t.which&&27!==t.which||(n.find('[data-mm-role~="primary"]').focus(),function(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation()}(t))}))}))}},48733:(t,e,n)=>{"use strict";n(73010);const r=n(83810);r.fn.stickerCategoryWidget=function(t){const{stickersEditorModel:e,category:n,action:o,additionalClass:i}=t;if(!e||!n||!o)throw new Error("invalid-args");return r.each(this,(function(){const t=this.attr("data-mm-category",n),r=t.find('[data-mm-role~="sticker-template"]').detach(),s=t.find('[data-mm-role~="sticker-container"]'),a=e.getStickersForCategory(n);t.find('[data-mm-role~="category-name"]').text(n),i&&t.addClass(i),a.length>20&&t.addClass("show-less"),a.forEach((t=>{r.clone().appendTo(s).stickerEmojiWidget({stickersEditorModel:e,sticker:t,action:o})})),t.find('[data-mm-role~="show-less"]').click((function(){t.removeClass("show-more").addClass("show-less")})),t.find('[data-mm-role~="show-more"]').click((function(){t.removeClass("show-less").addClass("show-more")}))}))}},73010:(t,e,n)=>{"use strict";const r=n(83810);r.fn.stickerEmojiWidget=function(t){const{stickersEditorModel:e,sticker:n,action:o}=t;if(!(o&&e&&e[o]&&"function"==typeof e[o]&&n&&n.codepoint))throw new Error("invalid-args");return r.each(this,(function(){const{stickersEditorModel:e,sticker:n}=t,r=n&&n.codepoint&&n.codepoint.split(" ").map((t=>parseInt(t,16))),i=r&&String.fromCodePoint.apply(String,r);this.text(i).attr("data-mm-codepoint",r.join(",")).click((function(){e[o](n)}))}))}},30273:(t,e,n)=>{"use strict";const r=n(83810);r.fn.stickersFilterWidget=function(t){return r.each(this,(function(){const{stickerList:e,stickersEditorModel:n,splittableModel:r}=t,o=this,i=o.find("input"),s=o.find("i"),a=o.find("[data-mm-role=selected]");if(!e||!n||!r)throw new Error("invalid-args");i.on("input",(async()=>{await e.setFilter(i.val())})),i.on("keydown",(t=>{if("Enter"===t.key){const t=e.getFirst();t&&n.addStickerToActivatedNodes(t)}"Escape"===t.key&&r.hide()})),e.addEventListener("filter-changed",(t=>{if(i.val()!==t&&i.val(t||""),t){const t=e.getFirst();t?(s.addClass("hidden"),a.removeClass("hidden"),a.text(function(t){const e=t&&t.split(" ").map((t=>parseInt(t,16)));return e&&String.fromCodePoint.apply(String,e)}(t.codepoint))):(s.removeClass("hidden"),a.addClass("hidden"))}else s.removeClass("hidden"),a.addClass("hidden")}))}))}},22220:(t,e,n)=>{"use strict";n(48733);const r=n(83810);r.fn.stickersSidebarWidget=function(t){const{stickersEditorModel:e}=t;if(!e)throw new Error("invalid-args");return r.each(this,(function(){const t=this,n=t.find('[data-mm-role~="stickers-for-metadata-selector"]'),r=t.find('[data-mm-role~="stickers-for-activated-selector"]'),o=t.find('[data-mm-role~="stickers-for-map-selector"]'),i=t.find('[data-mm-role~="category-template"]').detach(),s=t.find('[data-mm-role~="remove-all-from-activated"]');t.on("show",(()=>{e.setActive(!0),t.find('[data-mm-role~="stickers-scroll-container"]').domElements[0].scrollTop=0})),t.on("hide",(()=>{e.setActive(!1)})),s.click((function(){e.removeAllStickersFromActivatedNodes()})),e.addEventListener("stickers-for-metadata-loaded",(()=>{n.find('[data-mm-role~="category-template"]').remove(),e.getMetadataCategories().forEach((t=>{i.clone().appendTo(n).stickerCategoryWidget({stickersEditorModel:e,category:t,action:"addStickerToActivatedNodes"})}))})),e.addEventListener("stickers-for-activated-loaded",(t=>{r.find('[data-mm-role~="category-template"]').remove(),i.clone().appendTo(r).stickerCategoryWidget({stickersEditorModel:e,category:t,action:"removeStickerFromActivatedNodes",additionalClass:"remove-sticker"})})),e.addEventListener("stickers-for-map-loaded",(t=>{o.find('[data-mm-role~="category-template"]').remove(),i.clone().appendTo(o).stickerCategoryWidget({stickersEditorModel:e,category:t,action:"addStickerToActivatedNodes"})}))}))}},52956:(t,e,n)=>{"use strict";const r=n(37650),o=n(2971),i=n(84707),s=document.createElement("div");o(s,{"data-mm-role":"storyboard-sizer",class:"storyboard-scene-title","box-sizing":"border-box"}),r(s,{"z-index":"-99",visibility:"hidden"}),t.exports=function(t,e,n){const o=parseFloat(e),a=parseFloat(n),c={fontSize:.5*a};if(!Number.isFinite(o)||!Number.isFinite(a)||!o||o<0||!a||a<0)throw new Error("invalid-args");r(s,{"max-width":i(o)}),s.innerText=t,document.body.append(s);do{c.fontSize=Math.floor(.9*c.fontSize),c.lineHeight=Math.floor(1.3*c.fontSize),r(s,{"font-size":i(c.fontSize),"line-height":i(c.lineHeight)})}while((s.offsetHeight>a||s.scrollWidth>o)&&c.fontSize>a/30);return c.textWidth=s.offsetWidth,s.remove(),c}},65441:(t,e,n)=>{"use strict";const r=n(83810);r.fn.storyboardKeyHandlerWidget=function(t,e,n,o){return r.each(this,(function(){const r=this,i=function(e){const r=e.charCode||e.keyCode;String.fromCharCode(r)===o&&n.getInputEnabled()&&n.applyToActivated((function(e){t.addScene(e)}))};e.addEventListener("inputEnabled",(function(t){t?r.addEventListener("keypress",i):r.removeEventListener("keypress",i)}))}))}},52635:(t,e,n)=>{"use strict";n(85184);const r=n(83810),o=n(7643),i=n(67801),s=n(19083),a=n(37650);r.fn.storyboardWidget=function(t,e,n,c,l,d){const u=d||{},h=u.navigation||{gridLeft:t=>t.previousElementSibling,gridRight:t=>t.nextElementSibling,gridUp:i,gridDown:o};return r.each(this,(function(){const r=this,o=this.domElements[0],i=r.find("[data-mm-role=scene-template]"),d=r.find("[data-mm-role=no-scenes]").detach(),f=i.parent(),p=(t,e,n)=>{const r=n.getDimensionsForScene(e,t.clientWidth,t.clientHeight),o=t.querySelector("[data-mm-role=scene-title]"),i=r.text.toCss(),s=r.image.toCss();o.innerText=e.title,a(o,i),a(t,s)},g=function(e,r){const o=i.clone().data("scene",e).attr({"data-mm-role":"scene","data-mm-idea-id":e.ideaId,"data-mm-index":e.index}).on("click",(function(){t.setSelectedScene(e)})),s=!r&&function(t){const e=f.children().domElements.filter((e=>e&&e.mmData&&e.mmData.scene&&e.mmData.scene.index<t));return e[e.length-1]}(e.index);u.readOnly||(o.on("dblclick",(function(){c.editNode(e.ideaId)})),function(t,e){const n=t.domElements[0];n.setAttribute("draggable","true"),n.addEventListener("dragstart",(t=>{t.dataTransfer.setData("vnd/mindmup-scene",JSON.stringify(e))}))}(o,e)),d.detach(),f.find("[data-mm-role=scene].activated-scene").length||(o.addClass("activated-scene"),t.setSelectedScene(e)),s?s.insertAdjacentElement("afterend",o.domElements[0]):r?o.appendTo(f):o.prependTo(f),p(o.domElements[0],e,n),o.domElements[0].style.opacity=1,r||(t.setSelectedScene(e),o.mmScrollIntoView())},m=function(t){return f.find('[data-mm-role=scene][data-mm-index="'+t.index+'"][data-mm-idea-id="'+t.ideaId+'"]').domElements[0]},v=function(t){const e=m(t),n=()=>{const t=e.parentElement;t&&(e.remove(),Array.from(t.children).length||d.appendTo(f).removeClass("hidden"))};document.activeElement===e&&r.focus(),e&&(e.addEventListener("transitionend",n),e.style.opacity=0,setTimeout(n,300))},y=function(t){const e=m(t);e&&p(e,t,n)},w=function(t){m(t.from).remove(),g(t.to,!1)},b=function(){e.setInputEnabled(!1),e.removeEventListener("storyboardSceneAdded",g),e.removeEventListener("storyboardSceneMoved",w),e.removeEventListener("storyboardSceneRemoved",v),e.removeEventListener("storyboardSceneContentUpdated",y)},E=function(e){if(!e)return;const n=e&&e.mmData&&e.mmData.scene;n&&t.setSelectedScene(n)};i.detach(),f.on("mouseleave",(()=>{f.find("[data-mm-role=scene]").removeClass("potential-drop-left potential-drop-right")})),l.addEventListener("show",(function(t){"Storyboard"===t?(e.setInputEnabled(!0),function(){const t=e.getScenes();f.empty(),t&&t.length?t.forEach((t=>g(t,!0))):d.appendTo(f).removeClass("hidden")}(),e.addEventListener("storyboardSceneAdded",g),e.addEventListener("storyboardSceneMoved",w),e.addEventListener("storyboardSceneRemoved",v),e.addEventListener("storyboardSceneContentUpdated",y)):b()})),l.addEventListener("hide",b),t.addEventListener("storyboardContext",(function(t){if(t.selectedScene){const e=m(t.selectedScene);f.find("[data-mm-role=scene]").removeClass("activated-scene"),e&&e.classList.add("activated-scene")}})),u.readOnly||(o.addEventListener("dragover",(t=>{t.preventDefault(),t.dataTransfer.dropEffect="move",(t=>{let e,n;const r=function(t,e){const n="[data-mm-role=scene]:not(.drag-shadow)",r=Array.from(f.domElements[0].querySelectorAll(n)),o=r.filter((function(e){const n=e.getBoundingClientRect(),r=t.top-n.top;return r>0&&r<n.height})),i=o[o.length-1],s=r[r.length-1],a=o.find((function(e){const n=e.getBoundingClientRect(),r=t.left-n.left;return r>-40&&r<n.width/3})),c=o.find((function(e){const n=e.getBoundingClientRect(),r=t.left-n.left;return r>2*n.width/3&&r<n.width+40}));if(!c&&!a){const e=i&&i.getBoundingClientRect(),n=s&&s.getBoundingClientRect();if(i&&t.left>e.left+e.width)return{left:i};if(s&&t.top>n.top)return{left:s}}return{left:c,right:a}}({left:t.clientX,top:t.clientY}),o=f.find("[data-mm-role=scene]");r.left?(e=r.left,n=e.nextElementSibling):r.right&&(n=r.right,e=n.previousElementSibling),o.removeClass("potential-drop-left potential-drop-right"),n&&n.classList.add("potential-drop-right"),e&&e.classList.add("potential-drop-left")})(t)})),o.addEventListener("dragleave",(()=>{f.children().removeClass("potential-drop-left potential-drop-right")})),o.addEventListener("drop",(e=>{const n=e.dataTransfer.getData("vnd/mindmup-node"),r=e.dataTransfer.getData("vnd/mindmup-scene");e.preventDefault(),e.stopPropagation(),n?(({nodeId:e})=>{const n=f.find(".potential-drop-right");t.addScene(e,n.data("scene"))})(JSON.parse(n)):r&&function(e){const n=f.find(".potential-drop-right");let r=f.find(".potential-drop-left");r.length?t.moveSceneAfter(e,r.data("scene")):n.length&&(r=n.prev(),r.length?t.moveSceneAfter(e,r.data("scene")):t.moveSceneAfter(e))}(JSON.parse(r)),f.children().removeClass("potential-drop-left potential-drop-right")})),s(o,"del backspace",(function(e){t.removeScene(),e.preventDefault(),e.stopPropagation()})),s(o,"alt+right",(function(e){t.moveSelectedSceneRight(),e.preventDefault(),e.stopPropagation()})),s(o,"alt+left",(function(e){t.moveSelectedSceneLeft(),e.stopPropagation(),e.preventDefault()}))),s(o,"right",(function(t){E(h.gridRight(o.querySelector(".activated-scene"))),t.stopPropagation(),t.preventDefault()})),s(o,"left",(function(t){E(h.gridLeft(o.querySelector(".activated-scene"))),t.stopPropagation(),t.preventDefault()})),s(o,"up",(function(t){E(h.gridUp(o.querySelector(".activated-scene"))),t.stopPropagation(),t.preventDefault()})),s(o,"down",(function(t){E(h.gridDown(o.querySelector(".activated-scene"))),t.stopPropagation(),t.preventDefault()}))}))}},89124:(t,e,n)=>{"use strict";const r=n(83810);r.fn.subscriptionProfileWidget=function(t){return r.each(this,(function(){const e=this,n=e.attr("data-mm-subscription-profile");t.addEventListener("subscribed expiredSubscription notRegistered",(function(t){n&&t&&t[n]&&(e.removeClass("hidden"),e.text(t[n]))})),t.addEventListener("not-authenticated authenticating",(function(){e.addClass("hidden")}))}))}},16454:(t,e,n)=>{"use strict";const r=n(83810),o=n(83007),i=n(12301);n(28061),n(20284),n(99998),r.fn.subscriptionPurchaseWidget=function({subscriptionModel:t,subscriptionPlanModel:e,navigatorShim:n,listenForExpiredSubscription:s,taskBuilder:a,countryListModel:c}){if(!(t&&e&&n&&a))throw new Error("invalid-args");return r.each(this,(function(){let r;const l=this,d=function(t){l.showError(t)},u=async t=>(r&&r.cancelIfWaiting(),r=await a.build(t),r),h=()=>{const r=e.getSelectedPlan(),o=r&&r.sources,i=l.find("[data-mm-payment]");return n.storeForSession("selectedPlan",JSON.stringify(e.getSelectedPlan())),t.getGoldAccountDetails(!1,!0).catch((()=>!1)).then((t=>{var e;t&&t.subscription&&!t.active&&(n.storeForSession("license",JSON.stringify(t.license)),e=o||["card"],i.addClass("hidden"),e.forEach((t=>{l.find(`[data-mm-payment~="${t}"]`).removeClass("hidden")})),l.trigger("enableForSources:complete"))})).catch(d)};l.on("show",h),t.addEventListener("accountRegistered",h),s&&t.addEventListener("expiredSubscription",h),e.addEventListener("planSelected",h),l.find('[data-mm-payment~="card"]').click((r=>{const o=r.target,i=e.getSelectedPlan(),s=a.newTaskId();if(o.getAttribute("data-mm-agree-terms")&&t.setAgreedSubscription(!0),t.hasAgreedSubscription())return n.open(`/stripe-checkout-launch.html?planId=${i.id}&taskId=${s}`,"stripe-payments"),l.showProgressMessage("Waiting for purchase to be completed..."),u(s).then((t=>t.waitFor((t=>t&&["chargeSucceeded","chargeFailed"].includes(t.status))))).then((()=>t.reloadAccountDetailsAfterPurchase())).then((()=>l.trigger("card:complete")));l.showSection("agree-terms-stripe-card")})),c&&l.find('[data-mm-payment~="enter-billing-address"]').click((async()=>{l.showProgressMessage("Loading...");try{await c.load(),l.showSection("enterBillingDetails")}catch(t){l.showError(t)}})),l.find('[data-mm-payment~="invoice"]').click((async n=>{const r=n.target,s=e.getSelectedPlan();if(!r.classList.contains("disabled")){if(r.getAttribute("data-mm-agree-terms")&&t.setAgreedSubscription(!0),t.hasAgreedSubscription()){l.showProgressMessage("Waiting for purchase to be completed...");const e=a.newTaskId(),n=t=>t&&(t.error||t.stripe_subscription_id),r=await u(e);try{const a=(()=>{const t={};return l.find('[data-mm-role~="billing-address"]').domElements.forEach((e=>{const n=e.getAttribute("name"),r=i(o(e.value)).trim();n&&r&&(t[n]=r)})),t})();await r.execAndWaitFor("stripe/subscription_purchase_request",{planId:s.id,taskId:e,payByInvoice:!0,billingAddress:a},n),r.metadata&&r.metadata.error?l.showError(r.metadata.error):t.reloadAccountDetailsAfterPurchase()}catch(t){l.showError(t)}}else l.showSection("agree-terms-invoice");l.trigger("invoice:complete")}})),l.find('[data-mm-payment~="amazon-pay"]').click((e=>{const r=e.target,o=a.newTaskId();if(r.getAttribute("data-mm-agree-terms")&&t.setAgreedSubscription(!0),t.hasAgreedSubscription())return n.storeForSession("amazonPayTaskId",o),n.open("/amazon-pay-launch.html","amazon-pay"),l.showProgressMessage("Waiting for purchase to be completed..."),u(o).then((t=>t.waitFor((t=>t&&["chargeSucceeded"].includes(t.status))))).then((()=>t.reloadAccountDetailsAfterPurchase())).then((()=>l.trigger("amazon-pay:complete")));l.showSection("agree-terms-amazon-pay")})),l.on("hide",(()=>{r&&r.cancelIfWaiting()})),e.addEventListener("planSelected",(t=>{n.storeForSession("selectedPlan",JSON.stringify(t))}))}))}},95974:(t,e,n)=>{"use strict";const r=n(83810);r.fn.suggestedEmailWidget=function(t,e){return r.each(this,(function(){const n=this;t.addEventListener("suggestedEmail",(function(t){n.val(t).text(t),n.attr("data-mm-using-suggested-email",!!t),n.attr("disabled",!!(t&&e&&e.disableWhenUsingSuggested))}))}))}},7217:(t,e,n)=>{"use strict";const r=n(83810);r.fn.tabbedSectionWidget=function(){return r.each(this,(function(){const t=this,e=t.find("[data-mm-tab-default]").attr("data-mm-tab"),n=function(e){t.find("tabbedsectiontitle").removeClass("active"),t.find("tabbedsectiontitle[data-mm-tab="+e+"]").addClass("active"),t.find("tabbedSectioncontent").addClass("hidden"),t.find("tabbedSectioncontent[data-mm-tab="+e+"]").removeClass("hidden")},r=function(){n(e)};r(),t.find("tabbedsectiontitle").on("click focus",(t=>{const e=t.currentTarget&&t.currentTarget.getAttribute("data-mm-tab");n(e)})),t.on("reset",r),t.on("resetdefaulttab",(()=>{t.attr("data-mm-tab-section-show")&&e&&n(e)}))}))}},25826:(t,e,n)=>{"use strict";const r=n(83810),o=n(78566);r.fn.tableCellInPlaceEditorWidget=function(){return r.each(this,(function(){const t=this;t.on("click",(function(){const e=t.text(),n=function(e){t.empty().text(e),t.trigger("change")},i=r('<input width="100%">'),s=t.domElements[0].getBoundingClientRect(),a=Math.max(s.width-60,50);t.find("input").length>0||(t.empty(),i.appendTo(t).val(e).on("blur",(function(){n(i.val())})).on("keydown",(function(t){27===t.which&&(n(e),t.preventDefault(),t.stopPropagation()),13===t.which&&(n(i.val()),t.preventDefault(),t.stopPropagation())})).css({width:o(a),boxSizing:"border-box"}).on("click",(function(t){t.stopPropagation(),t.preventDefault()})).focus())})),t.css("cursor","pointer")}))}},4093:t=>{"use strict";t.exports=function(t){return t&&"mindmup-auto"!==t?t:"icon-teams"}},16059:(t,e,n)=>{"use strict";const r=n(83810);r.fn.termsAndConditionsWidget=function(t){return this.each((function(){const e=r(this),n=e.find('[data-mm-role~="agreeTandC"]');e.on("show",(function(){n.prop("checked",t.hasAgreedSubscription())})),n.click((function(){const e=!!n.prop("checked");t.setAgreedSubscription(e)}))}))}},20251:(t,e,n)=>{"use strict";const r=n(83810);r.fn.textFontMenuWidget=function(t,e){if(!t||!e)throw new Error("invalid-args");return r.each(this,(function(){const n=this;Object.keys(e).forEach((o=>{const i=r("<menuitem>").text(o).on("click",(()=>{t.updateNodeStyles({fontFamily:o})})).css({"font-family":e[o]});n.append(i)}))}))}},32021:(t,e,n)=>{"use strict";const r=n(83810),o=function(t){const e=t.target,n=e&&e.hasAttribute("contenteditable")&&t.clipboardData&&t.clipboardData.getData("text/plain");n&&(t.preventDefault(),document.execCommand("insertText",!1,n))};r.fn.textOnlyPasteWidget=function(){return r.each(this,(function(){this.domElements.forEach((t=>t.addEventListener("paste",o)))}))}},13357:(t,e,n)=>{"use strict";const r=n(83810),o=n(73361);r.fn.themeCssWidget=function(t,e){if(!t)throw"invalid-args";return r.each(this,(function(){const n=this,r=e&&e.themeProcessor||new o;t.addEventListener("themeJSONChanged",(t=>n.text(r.process(t).css)))}))}},35064:(t,e,n)=>{"use strict";const r=n(83810);r.fn.themeStyleBorderSizeWidget=function(t){const e=(e,n)=>{t.overrideThemeAttribute(["node",e,"border","line","width"],n||void 0)},n=(n,r)=>{const o=(e=>{const n=t.getThemeAttribute(["node"],[e,"default"],["border","line","width"]);return parseFloat(n)||0})(n),i=o+r;e(n,i<0?0:i>10?10:i)},o={increment:function(t){n(t,1)},decrement:function(t){n(t,-1)},reset:t=>{e(t,0)}};return r.each(this,(function(){const t=this;t.click((()=>{const e=t.attr("data-mm-theme-border-size"),n=t.attr("data-mm-border-size");o[n](e)}))}))}},80142:(t,e,n)=>{"use strict";const r=n(83810);r.fn.themeStyleColorPicker=function(t,e){return r.each(this,(function(){const n=this,r=n.attr("data-mm-theme-color").split("."),o=n.attr("data-mm-theme-image"),i=o&&o.split(".");t.addEventListener("themeJSONChanged",(()=>{const e=t.getThemeAttribute(r);n.domElements[0].style.backgroundColor=e})),n.click((async()=>{try{o?await(async()=>{const n=await e.pickColorOrImage();n?.image?(t.overrideThemeAttribute(r,void 0),t.overrideThemeAttribute(i,n.image)):(t.overrideThemeAttribute(r,n?.color||void 0),t.overrideThemeAttribute(i,void 0))})():await(async()=>{const n=await e.pickColor();t.overrideThemeAttribute(r,n||void 0)})()}catch(t){console.error(t)}n.trigger("click-complete")}))}))}},19305:(t,e,n)=>{"use strict";const r=n(83810),o=n(96887);r.fn.themeStyleCornerRadiusWidget=function(t){const e=(e,n)=>{t.overrideThemeAttribute(["node",e,"cornerRadius"],n||void 0)},n=(n,r)=>{const i=(e=>{const n=t.getThemeAttribute(["node"],[e,"default"],["cornerRadius"]);return parseFloat(n)||o.min})(n),s=i+r;s<o.min?e(n,o.min):s>o.max?e(n,o.max):e(n,s)},i={increment:function(t){n(t,1)},decrement:function(t){n(t,-1)},reset:t=>{e(t,!1)}};return r.each(this,(function(){const t=this;t.click((()=>{const e=t.attr("data-mm-theme-corner-radius"),n=t.attr("data-mm-corner-radius");i[n](e)}))}))}},33229:(t,e,n)=>{"use strict";const r=n(83810);r.fn.themeStyleFontPicker=function(t,e){return r.each(this,(function(){const n=this,r=n.attr("data-mm-theme-node-style"),o=n.attr("data-mm-theme-font").split(".");t.addEventListener("themeJSONChanged",(()=>{const i=t.getThemeAttribute(["node"],[r,"default"],o),s=e.getFontFamily(i);n.domElements[0].style.fontFamily=s,n.text(i)})),n.click((()=>{e.pickFont().then((e=>{t.overrideThemeAttribute(["node",r].concat(o),e||void 0)})).catch((()=>{}))}))}))}},33325:(t,e,n)=>{"use strict";const r=n(83810);r.fn.themeStyleFontSizeWidget=function(t){const e=(e,n)=>{const r=1.33*n||void 0;t.overrideThemeAttribute(["node",e,"text","font","size"],n||void 0),t.overrideThemeAttribute(["node",e,"text","font","sizePx"],r)},n=(n,r)=>{const o=(e=>{const n=t.getThemeAttribute(["node"],[e,"default"],["text","font","size"]);return parseFloat(n)})(n),i=o*r;e(n,i<5?5:i>40?40:i)},o={increment:function(t){n(t,1.1)},decrement:function(t){n(t,1/1.1)},reset:t=>{e(t,0)}};return r.each(this,(function(){const t=this;t.click((()=>{const e=t.attr("data-mm-theme-node-style"),n=t.attr("data-mm-font-size");o[n](e)}))}))}},442:(t,e,n)=>{"use strict";const r=n(97036),o=n(47571);t.exports=function(t,e,n,i,s,a){if(!(t&&t.thumbnail&&t.thumbnail.scale&&t.thumbnail.width&&t.thumbnail.height))throw"invalid-args";this.build=function(){let c;return e().then((e=>r(e,s,{scale:t.thumbnail.scale,clipRect:{width:t.thumbnail.width,height:t.thumbnail.height},layout:a&&a.getCurrentLayout()}))).then((t=>o(t,i.convertToPng))).then((t=>(c=n.toObjectUrl(t,"image/svg+xml"),c))).then((function(t){return i.convertToPng(t)})).then((function(t){return n.revokeObjectUrl(c),t}))}}},69449:(t,e,n)=>{"use strict";const r=n(83810);r.fn.toggleClassWidget=function(){return r.each(this,(function(){const t=this,e=t.attr("data-mm-toggle-class").trim(),n=t.attr("data-mm-target-selector")||"body";e&&t.on("click",(function(){r(n).toggleClass(e)}))}))}},43737:(t,e,n)=>{"use strict";const r=n(59050),o=n(83810);o.fn.typeahead=function(t,e,n){return o.each(this,(function(){const o=this,i=o.find("[data-mm-role=value-editor]"),s=o.find("[data-mm-role=value-selector]"),a=o.find("[data-mm-role=template]"),c=function(t){return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!0},l=function(t){const e=t.prev();e.length?e.focus():(i.focus(),i.domElements.length&&i.domElements[0].setSelectionRange(i.val().length,i.val().length))},d=function(t){const e=t.next();e.length&&e.focus()};a.remove(),i.on("input",(function(){const o=i.val(),u=o&&t(o);s.empty(),r.isEmpty(u)?s.addClass("hidden"):(s.removeClass("hidden"),u.forEach((function(t){const r=a.clone().appendTo(s).attr("tabindex","-1").data("value",t);var i;(i=r).on("keydown",(function(t){switch(t.which){case 40:return c(t)&&d(i);case 9:return c(t)&&(t.shiftKey?l(i):d(i));case 38:return c(t)&&l(i);case 13:return c(t)&&e(i.data("value"))}})).on("click",(function(t){return c(t)&&e(i.data("value"))})),n?n(r,t,o):r.text(t)})))})).on("keydown",(function(t){switch(t.which){case 40:case 9:return c(t)&&void s.children().first().focus();case 13:return c(t)&&e(s.children().first().data("value")||t.target.value)}})),o.on("show",(function(){i.val(""),s.empty().addClass("hidden")})),i.attr("tabindex","-1")}))}},94284:(t,e,n)=>{"use strict";const r=n(83810);n(99998),n(20284),n(28061),r.fn.useGoogleEmailWidget=function(t){return r.each(this,(function(){const e=this;e.find('[data-mm-role~="use-google-email"]').click((n=>{const r=n.target.getAttribute("data-mm-success-section");e.showProgressMessage("Retrieving GMail address"),t.getEmailAddress().then((()=>e.showSection(r))).catch((t=>e.showError(t)))}))}))}},68743:(t,e,n)=>{"use strict";const r=n(83810);n(48577),r.fn.userProfileWidget=function(t){return r.each(this,(function(){const e=this.dispatchedEventValueWidget(t,["authenticatedProfile"],"mm-user-profile");t.addEventListener("authenticating not-authenticated",(function(){e.text("")}))}))}},50170:(t,e,n)=>{"use strict";const r=n(83810);r.fn.visibilityObserver=function(){const t=new window.MutationObserver((function(t){t.forEach((function(t){const e=r(t.target),n=t.oldValue&&t.oldValue.indexOf("hidden")>=0,o=e.hasClass("hidden");n&&!o?e.trigger("show"):!n&&o&&e.trigger("hide")}))})),e={attributes:!0,attributeOldValue:!0,attributeFilter:["class"]};return this.domElements.forEach((n=>t.observe(n,e))),this}},40500:(t,e,n)=>{"use strict";const r=n(83810);n(53354),n(85184),r.fn.writerWidget=function(t,e,n){return r.each(this,(function(){const r=this,o=r.find("[data-mm-role=note-template]").detach(),i=function(t){return r.find('[data-mm-role=note][data-mm-node-id="'+t+'"]')},s=function(e){e&&t.setActiveNodeId(e)},a=function(){return r.find("[data-mm-role=note].active")},c=function(t,e){const n=parseFloat(e),o=r.find("[data-mm-role=note]").not(t).filter((t=>parseFloat(t.mmData&&t.mmData.index)<n)),i=t.find("[data-mm-role=viewer]").domElements[0],s=document.activeElement===i;s&&(t.data("moving",!0),function(t,e){const n=document.createEvent("Event");n.initEvent("blur",!0,!0),t.dispatchEvent(n)}(i)),o.length?t.insertAfter(o.last()):t.prependTo(r),t.data("index",e).data("moving",!1),s&&t.find("[data-mm-role=viewer]").focus()},l=function(e,i){const s=o.clone().attr({"data-mm-role":"note","data-mm-node-id":e.nodeId});return c(s,e.index),s.noteWidget(t,e,i,n),r.find('[data-mm-role~="no-notes"]').addClass("hidden"),s},d=function(t){const n=t&&i(t),o=r.find("[data-mm-role=note].active");e.showWriter(),o.removeClass("active"),t&&n&&n.length&&(n.addClass("active"),n.mmScrollIntoView())};t.addEventListener("activeNodeChanged",d),t.addEventListener("noteEditRequested",(function(t){let n;t&&t.nodeId&&(n=i(t.nodeId),e.showWriter(),0===n.length&&(n=l(t,!0)),d(t.nodeId))})),t.addEventListener("noteAdded",(function(t){let e=i(t.nodeId);e.length?e.data("index")!==t.index&&c(e,t.index):e=l(t,!1)})),t.addEventListener("noteRemoved",(function(t){const e=i(t),n=e&&e.domElements[0]&&e.domElements[0].contains(document.activeElement);e&&(e.remove(),0===r.find("[data-mm-role~=note]").length?r.find('[data-mm-role~="no-notes"]').removeClass("hidden"):r.find('[data-mm-role~="no-notes"]').addClass("hidden"),n&&r.focus())})),t.addEventListener("noteMoved",(function(t){let e=i(t.nodeId);e.length?c(e,t.index):e=l(t,!1)})),t.addEventListener("foldInactiveNotesRequested",(function(){r.find("[data-mm-role~=note]:not(.active)").addClass("folded"),r.find("[data-mm-role~=note].active").removeClass("folded").mmScrollIntoView()})),r.on("show",(function(){t.setInputEnabled(!0)})),r.on("hide",(function(){t.setInputEnabled(!1)})),r.on("keydown",(function(e){const n=function(){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()};e.target===r.domElements[0]&&(38===e.which&&(n(),s(a().prev().attr("data-mm-node-id"))),40===e.which&&(n(),s(a().next().attr("data-mm-node-id"))),32!==e.which&&13!==e.which||(n(),t.editNoteForNodeId(a().attr("data-mm-node-id")))),27===e.which&&r.focus()}))}))}},72527:(t,e,n)=>{var r=n(36307),o=n(37936),i=o;i.v1=r,i.v4=o,t.exports=i},47184:t=>{for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);t.exports=function(t,n){var r=n||0,o=e;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},38416:t=>{var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},36307:(t,e,n)=>{var r,o,i=n(38416),s=n(47184),a=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,d=e||[],u=(t=t||{}).node||r,h=void 0!==t.clockseq?t.clockseq:o;if(null==u||null==h){var f=i();null==u&&(u=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=o=16383&(f[6]<<8|f[7]))}var p=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=p-a+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(h=h+1&16383),(m<0||p>a)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=g,o=h;var v=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;d[l++]=v>>>24&255,d[l++]=v>>>16&255,d[l++]=v>>>8&255,d[l++]=255&v;var y=p/4294967296*1e4&268435455;d[l++]=y>>>8&255,d[l++]=255&y,d[l++]=y>>>24&15|16,d[l++]=y>>>16&255,d[l++]=h>>>8|128,d[l++]=255&h;for(var w=0;w<6;++w)d[l+w]=u[w];return e||s(d)}},37936:(t,e,n)=>{var r=n(38416),o=n(47184);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[i+a]=s[a];return e||o(s)}},56982:t=>{"use strict";t.exports=function(t){return Array.isArray(t)?Array.from(new Set(t)):[]}},90485:t=>{"use strict";t.exports=function(t,e,n){let r=t||[];if(!Array.isArray(r))throw new Error("invalid-args");if("function"!=typeof e)throw new Error("invalid-args");const o=[],i=n&&n.batchSize||1,s=function(){let t;return r.length?(t=r.slice(0,i),r=r.slice(i),function(t){return Promise.all(t.map(e)).then((t=>o.push.apply(o,t))).then(s)}(t)):Promise.resolve(o)};return s()}},2414:t=>{"use strict";t.exports=function(t,e){if(!t)throw new Error("invalid-args");if(!Array.isArray(e))return!0;const n=e.filter((e=>null==(t&&t[e])));if(n.length)throw new Error("invalid-args:"+n.join(","))}},83007:t=>{"use strict";t.exports=function(t){return"string"!=typeof t?"":t.replace(/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\u007F\u0080-\u009F]+/gu,"").replace(/[\u00a0]+/gu," ")}},48025:t=>{"use strict";t.exports=function t(e){if(!e)throw new Error("invalid-args");const{target:n,keyArray:r}=e,o=e&&n&&r&&Array.isArray(r)&&r.length&&r[0],i=o&&r[0],s=o&&r.slice(1),a=o&&n[i],c=o&&Array.isArray(n)&&Number.isInteger(i);if(!o)throw new Error("invalid-args");return!(!c&&!Object.prototype.hasOwnProperty.call(n,i))&&(s.length&&a?t({target:a,keyArray:s}):a)}},9737:t=>{"use strict";t.exports=function(t){return!(Number.isFinite(t)||t&&(Array.isArray(t)||"number"==typeof t?0!==t.length:0!==Object.keys(t).length))}},19607:t=>{"use strict";t.exports=function(t){return!!t&&Object.getPrototypeOf(t)===Object.prototype}},80832:t=>{"use strict";t.exports=function(t){const e=t&&t.toLowerCase&&t.toLowerCase()||t;return e&&e.trim&&e.trim()}},12301:t=>{"use strict";t.exports=function(t){return"string"!=typeof t?"":t.replace(/[ \t]+/g," ")}},86239:t=>{"use strict";t.exports=function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(t){return!1}return t}},21614:t=>{"use strict";t.exports=function t(e){if(!e)throw new Error("invalid-args");const{target:n,keyArray:r,value:o}=e,i=e&&n&&r&&Array.isArray(r)&&r.length&&r[0],s=i&&r[0],a=i&&r.slice(1),c=i&&Array.isArray(n)&&Number.isInteger(s);if(!i)throw new Error("invalid-args");return a.length?(c||Object.prototype.hasOwnProperty.call(n,s)||(n[s]={}),t({target:n[s],keyArray:a,value:o})):void 0===o?delete n[s]:n[s]=o,n}},39485:t=>{"use strict";t.exports=function(t){return"string"!=typeof t?"":t.replace(/\r/g,"").split("\n").map((t=>t.trim())).join("\n")}},83693:(t,e,n)=>{"use strict";t.exports=function(t){const e=(t&&t.uuid||n(72527)).v1();return t&&t.keepDashes?e:e.replace(/-/g,"")}},31233:t=>{"use strict";t.exports=function(t){const e=t||new Date,n=e.getTime&&e.getTime();return n&&Math.floor(n/1e3)}},41076:t=>{"use strict";t.exports=function(t){if(!t||!t.length||t.length<=2)return!1;if(/["[,\s<>]/.test(t))return!1;if(t.indexOf("..")>-1)return!1;const e=t.split("@");return!(!e[0]||!e[1]||2!==e.length||/\.$/.test(e[0])||/^\./.test(e[0])||/[.,\s-]$/.test(e[1])||/^[.,\s-]/.test(e[1])||e[1].indexOf(".")<0||/\d+\.\d+.\d+.\d+/.test(e[1]))}},68410:(t,e,n)=>{"use strict";const r=n(89080),o=n(95046);t.exports=function(){let t,e;const n=r(this),i=function(r,o,i){n.dispatchEvent("mm-active-content-changed",t,!1,r,o),i!==e&&(i||e)||n.dispatchLocalContentEvent({cmd:r,args:o})};n.triggerRemoteContentEvent=function(e,r){t.execCommand(e.cmd,e.args,r),n.dispatchEvent("remoteContentEvent",e,r)},n.getLocalSessionId=function(){return e},n.setLocalSessionId=function(n){try{t.setSessionKey(n)}catch(t){console.log("error",t)}e=n},n.initializeSession=function(r,s,a){const c="string"==typeof s?JSON.parse(s):JSON.parse(JSON.stringify(s));t&&t.removeEventListener("changed",i),e=r,t=o(c,e),a.forEach((e=>{const n=e.collaborator&&e.collaborator.sessionId||"loading";t.execCommand(e.cmd,e.args,n)})),t.addEventListener("changed",i),n.dispatchEvent("newSession",t,r,s,a),n.dispatchEvent("mm-active-content-changed",t,!0)},n.dispatchLocalContentEvent=function(t){n.dispatchEvent("localContentEvent",t)},n.error=function(t,e){n.dispatchEvent("error",t,e)},n.getActiveContent=function(){return t},n.getActiveContentClone=function(){return!!t&&o(JSON.parse(JSON.stringify(t)))},n.addListener=function(e){t&&e(t,!1),n.addEventListener("mm-active-content-changed",e)}}},15198:(t,e,n)=>{"use strict";const r=n(9694),o=n(19767),i=n(78106),s=(t,e,n,r,o)=>{const i=n&&e.getPersistedAttributes(n.attr,r,o)||{};i.removed.forEach((e=>t.updateAttr(n.id,e,!1))),Object.keys(i.attr).forEach((e=>{t.updateAttr(n.id,e,i.attr[e])}))},a=(t,e,n,r,o)=>{if(r>0&&s(t,e,n,r,o),n.ideas){let o=0;Object.keys(n.ideas).forEach((i=>{a(t,e,n.ideas[i],r+1,o),o+=1}))}};t.exports={addSubIdea:(t,e,n,i,s,a)=>{if(!e)return t.addSubIdea(n,i,s,a);const c=r(t,n),l=n&&t.findSubIdeaById(n),d=l&&l.ideas&&Object.keys(l.ideas).length||0,u=e.getPersistedAttributes(a,c+1,d).attr,h=!o.isEmpty(u)&&u||void 0;return t.addSubIdea(n,i,s,h)},changeParent:(t,e,n,o)=>{if(!e)return t.changeParent(n,o);const i=t.findSubIdeaById(o),a=i&&i.ideas&&Object.keys(i.ideas).length||0,c=r(t,o);t.batch((()=>{t.changeParent(n,o);const r=t.findSubIdeaById(n);s(t,e,r,c+1,a);let i=0;r.ideas&&Object.keys(r.ideas).forEach((n=>{s(t,e,r.ideas[n],c+2,i),i+=1}))}))},insertIntermediateMultiple:(t,e,n,i)=>{if(!e)return t.insertIntermediateMultiple(n,i);const a=o.extend({},i),c=e&&n&&n[0],l=c&&t.findSubIdeaById(c),d=c&&r(t,c),u=l&&l.attr||{},h=t.sameSideSiblingIds(c),f=h&&h.length||0,p=e.getPersistedAttributes(u,d,f).attr;let g;return a.attr=o.extend({},a.attr,p),t.batch((()=>{g=t.insertIntermediateMultiple(n,a);let r=0;n.forEach((n=>{const o=t.findSubIdeaById(n);s(t,e,o,d+1,r),r+=1}))})),g},pasteMultiple:(t,e,n,o)=>{if(!e)return t.pasteMultiple(n,o);const s=r(t,n),c=n&&t.findSubIdeaById(n)||t,l=c.ideas&&Object.keys(c.ideas).length||0;o.forEach((t=>{i(t,(t=>e.cleanPersistedAttributes(t.attr)))}));let d=!1,u=l;return t.batch((()=>(d=t.pasteMultiple(n,o),d&&d.length&&d.forEach((n=>{const r=t.findSubIdeaById(n);a(t,e,r,s+1,u),u+=1})),d))),d},recalcIdeasAutoNodeAttrs:a}},9694:(t,e,n)=>{"use strict";const r=n(19767);t.exports=function t(e,n,o){if(!e)throw"invalid-args";return e.id==n?o||0:n?(o=o||1,r.find(e.ideas,(function(t){return t.id==n}))?o:r.reduce(e.ideas,(function(e,r){return e||t(r,n,o+1)}),void 0)):void 0}},55407:(t,e,n)=>{"use strict";const r=n(27564),o=n(78106);t.exports=function(t,e){const n=this,i=function(t){const e=[],n=r(t);return e.push("<li>"),t.title&&(e.push("<span>"),e.push(t.title.replace(/\n/g,"<br/>")),e.push("</span>")),n.length>0&&(e.push("<ul>"),n.forEach((t=>e.push(i(t)))),e.push("</ul>")),e.push("</li>"),e.join("")};n.getNativeContentType=function(){return t},n.serialize=function(e,n){return n===t?JSON.stringify(e):"text/plain"===n?function(t){let e;const n=[],r=function(t,r){let o="";e?o=new Array(r-e+1).join("\t"):e=r,t.title&&n.push(o+t.title.replace(/\n+/g," "))};return t.forEach((t=>{e=!1,o(t,r)})),n.join("\n")}(e):"text/html"===n?"<html><meta></meta><body><ul>"+e.map(i).join("")+"</ul></body></html>":void 0},n.deserialize=function(n){const r=function(t){return n.types.includes(t)&&e[t]&&e[t](n.getData(t))};return n.types.includes(t)?(e=>{const n=e.getData(t);return JSON.parse(n)})(n):r("text/html")||r("text/plain")}}},53313:(t,e,n)=>{"use strict";const r=n(19767);t.exports=function(t){return function(){const e=function(t){let n;t.style&&(t.attr={},n=t.style.collapsed,delete t.style.collapsed,t.attr.style=t.style,n&&(t.attr.collapsed=n),delete t.style),t.ideas&&r.each(t.ideas,e)};t.formatVersion&&t.formatVersion>=2||(e(t),t.formatVersion=2)}(),t.formatVersion&&t.formatVersion>=3||(function(){const e=["theme","themeOverrides","measurements-config","storyboards","progress-statuses"],n=t&&t.attr||{},o=r.pick(n,e),i=r.omit(n,e),s=t&&t.ideas,a={id:t.id,title:t.title,attr:i};s&&(a.ideas=s),t.id="root",t.ideas={1:a},delete t.title,t.attr=o}(),t.formatVersion=3),t}},95046:(t,e,n)=>{"use strict";const r=n(19767),o=n(89080),i=n(66661),s=n(15431),a=n(53313),c={color:"#707070",lineStyle:"solid",arrow:"to"};t.exports=function(t,e,n){let l,d=e,u={},h=!1;const f=function(){l=void 0},p=function e(n){return(n=n||t).ideas?r.reduce(n.ideas,((t,n)=>Math.max(t,e(n))),parseInt(n.id,10)||0):parseInt(n.id,10)||0},g=function(t){return t=t||d,l||(l=p()),l+=1,t?l+"."+t:l},m=function(e,n){const o=e.id===t.id;return e.id?f():e.id=g(n),e.ideas&&r.each(e.ideas,((t,i)=>{!o&&t.attr&&t.attr.group&&r.isEmpty(t.ideas)?delete e.ideas[i]:e.ideas[parseFloat(i)]=m(t,n)})),e.title||(e.title=""),e.containsDirectChild=e.findChildRankById=function(t){return parseFloat(r.reduce(e.ideas,((e,n,r)=>n.id==t?r:e),void 0))},e.findSubIdeaById=function(t){return r.find(e.ideas,(e=>e.id==t))||r.reduce(e.ideas,((e,n)=>e||n.findSubIdeaById(t)),void 0)},e.isEmptyGroup=function(){return!t.isRootNode(e.id)&&e.attr&&e.attr.group&&r.isEmpty(e.ideas)},e.find=function(t){const n=t(e)?[r.pick(e,"id","title")]:[];return 0===r.size(e.ideas)?n:r.reduce(e.ideas,((e,n)=>r.union(e,n.find(t))),n)},e.getAttr=function(t){return!(!e.attr||!e.attr[t])&&r.clone(e.attr[t])},e.sortedSubIdeas=function(){const t=[],n=e.ideas&&r.groupBy(r.map(r.keys(e.ideas),parseFloat),(t=>t>0)),o=n&&r.sortBy(n[!0],Math.abs).concat(r.sortBy(n[!1],Math.abs));return e.ideas?(r.each(o,(n=>{t.push(e.ideas[n])})),t):[]},e.traverse=function(n,o){o||e===t||n(e),r.each(e.sortedSubIdeas(),(t=>{t.traverse(n,o)})),o&&e!==t&&n(e)},e},v=function(t,e){let n=[];return e=e||1,0===r.size(t)?0:(n=r.keys(t),n.push(0),r.max(r.map(n,parseFloat),(t=>t*e)))},y=function(e){return!!r.find(t.ideas,(t=>t.id===e))},w=function(t,e){let n=0;return t.ideas=t.ideas||{},n=function(t){let e=0,n=0,o=1;return y(t.id)&&(n=r.countBy(t.ideas,((t,e)=>e<0)),(n.true||0)<n.false&&(o=-1)),e=v(t.ideas,o)+o,e}(t),t.ideas[n]=e,n},b=function(e){return t.id==e?t:t.findSubIdeaById(e)},E=function(t,e){return Object.keys(t.ideas).map(parseFloat).filter((t=>t*e>0))},x=function(t){return t<0?-1:1},S={},A={},C={},I=function(e,n,r,o){const i={eventMethod:e,eventArgs:n,undoFunction:r};C[o]?C[o].push(i):(S[o]||(S[o]=[]),S[o].push(i),h?t.dispatchEvent("changed","redo",void 0,o):(function(e,n,r){r?t.dispatchEvent("changed",e,n,r):t.dispatchEvent("changed",e,n)}(e,n,o),A[o]=[]))},k=function(t,e,n){return t.ideas[e]=t.ideas[n],delete t.ideas[n],function(){if(t.ideas[n]||!t.ideas[e])return!1;t.ideas[n]=t.ideas[e],delete t.ideas[e]}},F={},M="/xxxxxxxx-yxxx-yxxx-yxxx-xxxxxxxxxxxx/".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))+(d||""),T=function(t,e,n){const o=t&&r.extend({},t.attr);if(!t)return!1;if(t.attr=r.extend({},t.attr),!n||"false"===n||r.isObject(n)&&r.isEmpty(n)){if(!t.attr[e])return!1;delete t.attr[e]}else{if(r.isEqual(t.attr[e],n))return!1;t.attr[e]=JSON.parse(JSON.stringify(n))}return 0===r.size(t.attr)&&delete t.attr,function(){t.attr=o}},P=function(e,n){return r.find(t.links,(t=>t.ideaIdFrom==e&&t.ideaIdTo==n))};return t.setConfiguration=function(t){u=t||{}},t.getSessionKey=function(){return d},t.setSessionKey=function(e){if(t.isBatchActive())throw"batch-is-active";d=e},t.nextSiblingId=function(e){const n=t.findParent(e),o=n&&n.findChildRankById(e),i=o&&E(n,o),s=i&&r.reject(i,(t=>Math.abs(t)<=Math.abs(o)));return!!n&&0!==s.length&&n.ideas[r.min(s,Math.abs)].id},t.sameSideSiblingIds=function(e){const n=t.findParent(e),o=n&&n.findChildRankById(e);return n?r.without(r.map(r.pick(n.ideas,E(n,o)),(t=>t.id)),e):[]},t.getAttrById=function(t,e){const n=b(t);return n&&n.getAttr(e)},t.previousSiblingId=function(e){const n=t.findParent(e),o=n&&n.findChildRankById(e),i=o&&E(n,o),s=i&&r.reject(i,(t=>Math.abs(t)>=Math.abs(o)));return!!n&&0!==s.length&&n.ideas[r.max(s,Math.abs)].id},t.clone=function(e){const n=e&&e!=t.id&&t.findSubIdeaById(e)||t;return JSON.parse(JSON.stringify(n))},t.cloneMultiple=function(e){return r.map(e,t.clone)},t.calculatePath=function(e,n,o){return t.isRootNode(e)?[]:(n=n||[t],(o=o||t).containsDirectChild(e)?n:r.reduce(o.ideas,((r,o)=>r||t.calculatePath(e,[o].concat(n),o)),!1))},t.getSubTreeIds=function(e){const n=[],o=function(t){if(r.isEmpty(t.ideas))return[];r.each(t.sortedSubIdeas(),(t=>{o(t),n.push(t.id)}))};return o(t.findSubIdeaById(e)||t),n},t.findParent=function(e,n){return n=n||t,!t.isRootNode(e)&&(n.containsDirectChild(e)?n:r.reduce(n.ideas,((n,r)=>n||t.findParent(e,r)),!1))},t.isBatchActive=function(t){return!!C[t||d]},t.startBatch=function(e){const n=e||d;t.endBatch(e),C[n]=[]},t.discardBatch=function(t){C[t||d]=void 0},t.endBatch=function(t){const e=t||d,n=C[e];C[e]=void 0,r.isEmpty(n)||(1===r.size(n)?I(n[0].eventMethod,n[0].eventArgs,n[0].undoFunction,e):function(){const t=r.map(n,(t=>[t.eventMethod].concat(t.eventArgs))),o=r.sortBy(r.map(n,(t=>t.undoFunction)),((t,e)=>-1*e));I("batch",t,(function(){r.each(o,(t=>{t()}))}),e)}())},t.execCommand=function(e,n,o){return!!F[e]&&F[e].apply(t,[o||d].concat(r.toArray(n)))},t.batch=function(e){const n=t.isBatchActive();let r;n||t.startBatch();try{r=e()}catch(e){throw n||t.discardBatch(),e}return n||t.endBatch(),r},F.batch=function(e){t.startBatch(e);try{r.each(r.toArray(arguments).slice(1),(n=>{t.execCommand(n[0],n.slice(1),e)}))}finally{t.endBatch(e)}},t.pasteMultiple=function(e,n){return t.batch((()=>r.map(n,(n=>t.paste(e,n)))))},t.paste=function(){return t.execCommand("paste",arguments)},F.paste=function(e,n,o,i){const s=n==t.id?t:t.findSubIdeaById(n),a=function(t){const e=r.omit(t,"ideas","id","attr");let n,o,i=1;return e.attr=r.omit(t.attr,u.nonClonedAttributes),r.isEmpty(e.attr)&&delete e.attr,t.ideas&&(n=r.groupBy(r.map(r.keys(t.ideas),parseFloat),(t=>t>0)),o=r.sortBy(n[!0],Math.abs).concat(r.sortBy(n[!1],Math.abs)),e.ideas={},r.each(o,(n=>{e.ideas[i++]=a(t.ideas[n])}))),e};let c,d=0;return i&&(l=parseInt(i,10)-1),c=o&&(o.title||o.attr)&&m(a(o),function(t){const e=String(t).indexOf(".");return e>0&&t.substr(e+1)}(i)),!(!s||!c)&&(d=w(s,c),i&&f(),T(c,"position"),I("paste",[n,o,c.id],(()=>{delete s.ideas[d]}),e),c.id)},t.flip=function(){return t.execCommand("flip",arguments)},F.flip=function(e,n){const r=t.findParent(n),o=r&&t.isRootNode(r.id)&&r.findChildRankById(n);return!!o&&(function(){const t=v(r.ideas,-1*x(o))-10*x(o),i=k(r,t,o);I("flip",[n],i,e)}(),!0)},t.initialiseTitle=function(){return t.execCommand("initialiseTitle",arguments)},F.initialiseTitle=function(t,e,n){const r=b(e),o=r&&r.title;return!!r&&o!==n&&(r.title=n,I("initialiseTitle",[e,n],(()=>{r.title=o}),t),!0)},t.updateTitle=function(){return t.execCommand("updateTitle",arguments)},F.updateTitle=function(t,e,n){const r=b(e),o=r&&r.title;return!!r&&o!==n&&(r.title=n,I("updateTitle",[e,n],(()=>{r.title=o}),t),!0)},t.addSubIdea=function(){return t.execCommand("addSubIdea",arguments)},F.addSubIdea=function(t,e,n,r,o){const i=b(e);return!!i&&(!r||!b(r))&&function(){const s=m((()=>{const t={title:n,id:r};return o&&(t.attr=o),t})()),a=w(i,s);return I("addSubIdea",[e,n,s.id,o],(()=>{delete i.ideas[a]}),t),s.id}()},t.removeMultiple=function(e){let n=!1;return t.startBatch(),n=r.map(e,t.removeSubIdea),t.endBatch(),n},t.removeSubIdea=function(){return t.execCommand("removeSubIdea",arguments)},F.removeSubIdea=function(e,n){return(!t.isRootNode(n)||r.size(t.ideas)>1)&&function(){const o=t.findParent(n)||t,i=o&&o.findChildRankById(n),s=o&&o.ideas[i],a=t.links,c={};return!!i&&(s.traverse((t=>c[t.id]=!0)),delete o.ideas[i],t.links=r.reject(t.links,(t=>c[t.ideaIdFrom]||c[t.ideaIdTo])),I("removeSubIdea",[n],(()=>{o.ideas[i]=s,t.links=a}),e),!0)}()},t.insertIntermediateMultiple=function(e,n){return t.batch((()=>{const o=t.insertIntermediate(e[0],n&&n.title);return n&&n.attr&&Object.keys(n.attr).forEach((e=>{t.updateAttr(o,e,n.attr[e])})),r.each(e.slice(1),(e=>{t.changeParent(e,o)})),o}))},t.insertIntermediate=function(){return t.execCommand("insertIntermediate",arguments)},F.insertIntermediate=function(e,n,r,o,i){const s=t.isRootNode(n)?t:t.findParent(n),a=s&&s.findChildRankById(n);return!(t.id==n||!s||o&&b(o)||!a)&&function(){const t=s.ideas[a],c=m((()=>{const t={title:r,id:o};return i&&(t.attr=i),t})());return s.ideas[a]=c,c.ideas={1:t},I("insertIntermediate",[n,r,c.id,i],(()=>{s.ideas[a]=t}),e),c.id}()},t.changeParent=function(){return t.execCommand("changeParent",arguments)},F.changeParent=function(e,n,r){const o=b(r),i=t.findSubIdeaById(n),s=t.isRootNode(n)?t:t.findParent(n);return!(n==r||!o||!i||i.findSubIdeaById(r)||o.containsDirectChild(n)||!s||(function(){const t=s.findChildRankById(n),a=w(o,i),c=i.getAttr("position");T(i,"position"),delete s.ideas[t],I("changeParent",[n,r],(()=>{T(i,"position",c),s.ideas[t]=i,delete o.ideas[a]}),e)}(),0))},t.mergeAttrProperty=function(e,n,r,o){const a=Object.defineProperty({},r,{value:o,enumerable:!0}),c=i({},t.getAttrById(e,n),a),l=s(c);return t.updateAttr(e,n,l)},t.updateAttr=function(){return t.execCommand("updateAttr",arguments)},F.updateAttr=function(t,e,n,r){const o=b(e),i=T(o,n,r);return i&&I("updateAttr",[e,n,r],i,t),!!i},t.getOrderedSiblingRanks=function(e,n){const o=t.findParent(e),i=o&&o.findChildRankById(e);return!!i&&(n&&n.ignoreRankSide?r.sortBy(r.map(r.keys(o.ideas),parseFloat)):r.sortBy(E(o,i),Math.abs))},t.moveRelative=function(e,n,r){const o=t.findParent(e),i=o&&o.findChildRankById(e),s=t.getOrderedSiblingRanks(e,r),a=s&&s.indexOf(i),c=function(){let t=a+(n>0?n+1:n);return r&&r.ignoreRankSide&&(i<0?(t=a+(n<0?n-1:n),s[t]>0&&(t+=1)):s[t]<0&&(t-=1)),t}(),l=c>=0&&s&&s.length&&s[c],d=l&&o&&o.ideas[l];let u=!1;return(!o||!(r&&r.ignoreRankSide&&i<0?c>s.length-1:c<0))&&(t.startBatch(),r&&r.ignoreRankSide&&l&&d&&l*i<0&&t.flip(e),u=t.positionBefore(e,d&&d.id,o),t.endBatch(),u)},t.positionBefore=function(){return t.execCommand("positionBefore",arguments)},F.positionBefore=function(e,n,o,i){let s,a,c,l,d,u,h;const f=i||t.findParent(n),p=f&&f.findChildRankById(n);if(!f)return!1;if(n==o)return!1;if(s=0,o){if(a=f.findChildRankById(o),!a)return!1;if(c=E(f,a),l=r.reject(r.sortBy(c,Math.abs),(t=>Math.abs(t)>=Math.abs(a))),d=l.length>0?r.max(l,Math.abs):0,d==p)return!1;s=d+(a-d)/2}else{if(u=v(f.ideas,p<0?-1:1),u==p)return!1;s=u+10*(p<0?-1:1)}return s!=p&&(h=k(f,s,p),I("positionBefore",[n,o],h,e),!0)},t.resetLink=function(e,n){return t.updateLinkAttr(e,n,"style",c)},t.addLink=function(){return t.execCommand("addLink",arguments)},F.addLink=function(e,n,o){const i={ideaIdFrom:n,ideaIdTo:o,attr:{style:c}};return!!function(t,e){const n=b(t),o=b(e),i=n&&o&&(r.find(n.ideas,(t=>t.id===e))||r.find(o.ideas,(e=>e.id===t)));return t!==e&&!!n&&!!o&&!i}(n,o)&&!function(e,n){return r.find(t.links,(t=>t.ideaIdFrom===e&&t.ideaIdTo===n||t.ideaIdFrom===n&&t.ideaIdTo===e))}(n,o)&&(t.links=t.links||[],t.links.push(i),I("addLink",[n,o],(()=>{t.links.pop()}),e),!0)},t.removeLink=function(){return t.execCommand("removeLink",arguments)},F.removeLink=function(e,n,o){let i,s=0;for(;t.links&&s<t.links.length;){if(i=t.links[s],i.ideaIdFrom===n&&i.ideaIdTo===o)return t.links.splice(s,1),I("removeLink",[n,o],(()=>{t.links.push(r.clone(i))}),e),!0;s+=1}return!1},t.getLinkAttr=function(t,e,n){const r=P(t,e);return!!(r&&r.attr&&r.attr[n])&&r.attr[n]},t.updateLinkAttr=function(){return t.execCommand("updateLinkAttr",arguments)},F.updateLinkAttr=function(t,e,n,r,o){const i=P(e,n),s=T(i,r,o);return s&&I("updateLinkAttr",[e,n,r,o],s,t),!!s},t.updateAttrBulk=function(){return t.execCommand("updateAttrBulk",arguments)},F.updateAttrBulk=function(t,e,n,r){const o=[];if(e.length>2e3)throw new Error("invalid-args");e.forEach((t=>{const e=b(t);o.push(T(e,n,r))})),I("updateAttrBulk",[e,n,r],(()=>{o.filter((t=>t)).forEach((t=>t()))}),t)},t.canUndo=function(){return!!(S[d]&&S[d].length>0)},t.canRedo=function(){return!!(A[d]&&A[d].length>0)},t.undo=function(){return t.execCommand("undo",arguments)},F.undo=function(e){let n=!1;return t.endBatch(),n=S[e]&&S[e].pop(),!(!n||!n.undoFunction||(n.undoFunction(),A[e]||(A[e]=[]),A[e].push(n),t.dispatchEvent("changed","undo",[],e),0))},t.redo=function(){return t.execCommand("redo",arguments)},F.redo=function(e){let n=!1;return t.endBatch(),n=A[e]&&A[e].pop(),!!n&&(h=!0,t.execCommand(n.eventMethod,n.eventArgs,e),h=!1,!0)},t.storeResource=function(){return t.execCommand("storeResource",arguments)},F.storeResource=function(e,n,o){return function(){if(!o&&t.resources)return r.find(r.keys(t.resources),(e=>t.resources[e]===n))}()||function(){const i=o||function(){const e=r.keys(t.resources),n=d?r.filter(e,RegExp.prototype.test.bind(new RegExp("\\/"+d+"$"))):e,o=r.map(n,(t=>parseInt(t,10)));return r.isEmpty(o)?0:r.max(o)}()+1+M;return t.resources=t.resources||{},t.resources[i]=n,t.dispatchEvent("resourceStored",n,i,e),i}()},t.getResource=function(e){return t.resources&&t.resources[e]},t.hasSiblings=function(e){const n=t.findParent(e);return!t.isRootNode(e)&&n&&r.size(n.ideas)>1},t.isRootNode=function(t){return y(t)},t.getDefaultRootId=function(){const e=t&&r.values(t.ideas);return e&&e.length&&e[0].id},a(t),o(t),m(t),n&&n.length&&n.forEach((e=>{const n=e.collaborator&&e.collaborator.sessionId||"loading";t.execCommand(e.cmd,e.args,n)})),t}},20360:(t,e,n)=>{"use strict";const r=n(78106);t.exports=function(t){const e=[];return Array.isArray(t)?t.forEach((t=>r(t,(t=>e.push(t))))):r(t,(t=>e.push(t))),e}},76352:(t,e,n)=>{"use strict";const r=n(31385),o=n(19767);t.exports=function(t){if(!t)return"";if("string"!=typeof t)throw"invalid-args";const e=o.escape(t);return r.formatLinks(e)}},90618:(t,e,n)=>{"use strict";const r=n(31385),o=n(12301),i=n(83007),s=n(39485);t.exports=function(t,e){if(!t||!t.trim())return"";const n=function(t,e){const n=t&&r.stripLink(t);return""===n.trim()?!e||t.length<e?t:t.substring(0,e)+"...":n}(i(t),e),a=o(n);return s(a)}},27040:(t,e,n)=>{"use strict";const r=n(19767);t.exports=function(t){return t.attr&&t.attr.group&&r.isEmpty(t.ideas)}},27564:t=>{"use strict";const e=function(t){return t>=0},n=function(t){return!e(t)},r=function(t,e){return Math.abs(t)-Math.abs(e)};t.exports=function(t){return t.ideas?function(t){const o=Object.keys(t.ideas).map(parseFloat);return o.filter(e).sort(r).concat(o.filter(n).sort(r)).map((function(e){return t.ideas[e]}))}(t):[]}},78106:(t,e,n)=>{"use strict";const r=n(27564);t.exports=function t(e,n,o,i){const s=!i&&(!e.formatVersion||e.formatVersion<3);i=i||(s?1:0),o||!s&&!i||n(e,i),r(e).forEach((function(e){t(e,n,o,i+1)})),o&&(s||i)&&n(e,i)}},66661:(t,e,n)=>{"use strict";const r=n(19607),o=t=>!r(t);t.exports=function t(){const e=Array.prototype.slice.call(arguments,0),n=e&&e[0],i=e&&e.length>1&&e.slice(1)||[];if(!n||e.find(o))throw new Error("invalid-args");return i.filter((t=>t)).forEach((e=>{Object.keys(e).forEach((o=>{r(e[o])&&r(n[o])?n[o]=t({},n[o],e[o]):r(e[o])?n[o]=t({},e[o]):n[o]=e[o]}))})),n}},22620:t=>{"use strict";t.exports=function(t,e){const n=e.metrics,r=Object.freeze({top:n.bubble.y+t.y,left:n.bubble.x+t.x,width:n.bubble.width,height:n.bubble.height}),o=Object.freeze({top:t.y,left:t.x,width:t.width,height:t.height});return e.isGroup?o:r}},93157:(t,e,n)=>{"use strict";const r=n(53313),o=n(15450),i=n(11562),s=n(13612),a=n(21625),c=n(83454),l=n(83658),d=n(3840),u=n(26353),h=n(83059),f={standard:n(45914),"top-down":h,"bottom-up":(t,e,n)=>{const r=h(t,e,n);return u(r)}};t.exports=function(t,e,n){const u=n&&n.layouts||f,h=n&&n.theme||new o(i({defaultTheme:s.default})),p=new l,g=h.attributeValue(["layout"],[],["spacing"],{h:20,v:20}),m=g?.h?g:{h:g,v:g},v=Object.assign({ch:m.h,cv:m.v},m),y=h.attributeValue(["layout"],[],["orientation"],"standard"),w=u[y]||u.standard;return t=r(t),Object.keys(t.ideas).forEach((n=>{const r=t.ideas[n],o=w(r,e,v);p.appendRootNodeLayout(o,r)})),function(t,e,n,r){return d.setThemeAttributes(t,n),{orientation:r,nodes:t,connectors:a(e,t,n),links:c(e,t),theme:e.attr&&e.attr.theme,themeOverrides:Object.assign({},e.attr&&e.attr.themeOverrides)}}(p.getCombinedLayout(10,n),t,h,y)}},11523:t=>{"use strict";t.exports=function(t,e){const n=t&&t.padding||0,r=t&&t.scale,o=r||1,i=t&&t.maxPage,s=i&&(e.width*o>i.width||e.height*o>i.height)&&i||t&&t.page,a=s&&Math.min((s.width-2*n)/e.width,(s.height-2*n)/e.height)||r||1;return Math.floor(100*a)/100}},27310:(t,e,n)=>{"use strict";const r=n(22620);t.exports=function(t,e){return"surround"===e.theme.borderType?Object.freeze(Object.assign({styles:e.effectiveStyles},r(t,e))):Object.freeze({top:t.y,left:t.x,width:t.width,height:t.height,styles:e.effectiveStyles})}},21625:(t,e,n)=>{"use strict";const r=n(19767);t.exports=function(t,e,n){const o={},i=!(n&&(n.connectorEditingContext||n.blockParentConnectorOverride)),s=function(a,c,l){if(l){const s=e[a.id];if(!s)return;c!==t.id&&(o[a.id]={type:"connector",from:c,to:a.id},s.attr&&s.attr.parentConnector&&(i&&s.attr&&s.attr.parentConnector?o[a.id].attr=r.clone(s.attr.parentConnector):n&&n.connectorEditingContext&&n.connectorEditingContext.allowed&&n.connectorEditingContext.allowed.length&&(o[a.id].connectorEditingContext=n.connectorEditingContext,o[a.id].attr=r.pick(s.attr.parentConnector,n.connectorEditingContext.allowed))))}a.ideas&&Object.keys(a.ideas).forEach((function(t){s(a.ideas[t],a.id,!0)}))};return s(t),o}},83454:(t,e,n)=>{"use strict";const r=n(19767);t.exports=function(t,e){const n={};return r.each(t.links,(function(t){e[t.ideaIdFrom]&&e[t.ideaIdTo]&&(n[t.ideaIdFrom+"_"+t.ideaIdTo]={type:"link",ideaIdFrom:t.ideaIdFrom,ideaIdTo:t.ideaIdTo,attr:r.clone(t.attr)})})),n}},26353:t=>{"use strict";t.exports=function(t){const e={};return Object.keys(t).forEach((n=>{const r=t[n].bubble&&t[n].bubble.y||0;e[n]=Object.assign({},t[n],{y:-1*t[n].y-r-t[n].height})})),e}},71047:(t,e,n)=>{"use strict";const r=n(19767),o=n(86090),i=n(11523);t.exports=function(t){let e;const n=this,s=.5,a=function(t){const n=e&&r.values(e.nodes),o=n&&r.filter(n,t);return n&&o.length&&o},c=function(t,e){return a((function(n){const r=n.y+n.height-(t.y+t.height),o=t.x-Math.abs(r*e),i=t.x+t.width+Math.abs(r*e);return!(n.id===t.id||n.y<=Math.round(t.y+.5*t.height)||void 0!==e&&(n.x>i||n.x+n.width<o))}))},l=function(t,e){return a((function(n){const r=n.x+n.width-(t.x+t.width),o=t.y-Math.abs(r*e),i=t.y+t.height+Math.abs(r*e);return!(n.id===t.id||n.x<=Math.round(t.x+.5*t.width)||void 0!==e&&(n.y>i||n.y+n.height<o))}))},d=function(t,e){return a((function(n){const r=n.y-t.y,o=t.x-Math.abs(r*e),i=t.x+t.width+Math.abs(r*e);return!(n.id===t.id||n.y+n.height>=Math.round(t.y+.5*t.height)||void 0!==e&&(n.x>i||n.x+n.width<o))}))},u=function(t,e){return a((function(n){const r=n.x-t.x,o=t.y-Math.abs(r*e),i=t.y+t.height+Math.abs(r*e);return!(n.id===t.id||n.x+n.width>=Math.round(t.x+.5*t.width)||void 0!==e&&(n.y>i||n.y+n.height<o))}))},h=function(t,e,n,o){const i={x:Math.round(t.x+.5*t.width),y:Math.round(t.y+.5*t.height)},s=function(t,e){const r=n*(t.x-e.x),i=o*(t.y-e.y);return Math.pow(r,2)+Math.pow(i,2)};return!!e&&(1===e.length?e[0]:r.min(e,(function(t){const e=[s(t,i),s({x:t.x+t.width,y:t.y+t.height},i),s({x:t.x+t.width,y:t.y},i),s({x:t.x,y:t.y+t.height},i),s({x:Math.round(t.x+.5*t.width),y:Math.round(t.y+.5*t.height)},i)];return r.min(e)})))},f=(t,e,o,i)=>{if("standard"===n.getOrientation()){const n=e.filter((e=>t.parentId&&t.parentId===e.parentId));if(n.length)return r.min(n,(e=>Math.abs(e.y-t.y)))}return h(t,e,o,i)};n.getNode=function(t){return e&&e.nodes&&e.nodes[t]},n.isRootNode=function(t){return e&&e.nodes&&e.nodes[t]&&1===e.nodes[t].level},n.getNodeBox=function(t){return o(n.getNode(t))},n.setLayout=function(n){e=n||t},n.getLayout=function(){return e||t},n.nodeIdLeft=function(t){const e=n.getNode(t),r=e&&(u(e,s)||u(e)),o=r&&h(e,r,1,3);return o&&o.id},n.nodeIdRight=function(t){const e=n.getNode(t),r=e&&(l(e,s)||l(e)),o=r&&h(e,r,1,3);return o&&o.id},n.nodeIdUp=function(t){const e=n.getNode(t),r=e&&(d(e,s)||d(e)),o=r&&f(e,r,3,1);return o&&o.id},n.nodeIdDown=function(t){const e=n.getNode(t),r=e&&(c(e,s)||c(e)),o=r&&f(e,r,3,1);return o&&o.id},n.getOrientation=function(){return e&&e.orientation||"standard"},n.layoutBounds=function(){let t,n,o,i;return!r.isEmpty(e.nodes)&&(r.each(e.nodes,(function(e){t?(t=Math.min(e.x,t),n=Math.min(e.y,n),o=Math.max(e.x+e.width,o),i=Math.max(e.y+e.height,i)):(t=e.x,n=e.y,o=e.x+e.width,i=e.y+e.height)})),{minX:t,minY:n,maxX:o,maxY:i,width:o-t,height:i-n})},n.clipRectTransform=function(t,e){const r=n.getNode(t),o=n.layoutBounds(),s=e&&e.padding||0,a=r.x+r.width/2,c=r.y+r.height/2,l=i(e,o);return e&&e.clipRect?{x:e.clipRect.width/2-a,y:e.clipRect.height/2-c,width:e.clipRect.width,height:e.clipRect.height,scale:l}:e&&e.page?{x:-1*o.minX+Math.floor(.5*(e.page.width/l-o.width)),y:-1*o.minY+Math.floor(.5*(e.page.height/l-o.height)),width:e.page.width,height:e.page.height,scale:l}:{x:-1*o.minX+Math.floor(s/l),y:-1*o.minY+Math.floor(s/l),width:o.width*l+2*s,height:o.height*l+2*s,scale:l}}}},83658:(t,e,n)=>{"use strict";const r=n(14377),o=n(40933),i=n(13706);t.exports=function(){const t=new o;this.appendRootNodeLayout=(e,n)=>{const o=new r({nodeDictionary:e,rootIdea:n});t.append(o)},this.getCombinedLayout=(e,n)=>{if(!e)throw new Error("invalid-args");if(t.count()>1){const r=n&&n.contextNode,o=new i(r),s=function(n){const i=n.toRectSet(e),s=i.translate(n.getCurrentOffset());if(o.hasIntersectionsOnRectSet(s)){const e=t.getMovementOrigin(r),a=o.translationRequiredToNotOverlap({rectSet:s,appliedOffset:n.getCurrentOffset(),movementOrigin:e});n.setCurrentOffset(a),o.addPlacedRectSet(i.translate(a))}else o.addPlacedRectSet(s)};t.nodeTreesInPlacementOrder(r).forEach(s)}return t.allNodesOffset()}}},53891:(t,e,n)=>{"use strict";const r=n(48634);t.exports=function(t){const{node:e,margin:n,parent:o}=t,i=o||e,s=Math.floor(Math.min(e.x,i.x+i.width)-n),a=Math.ceil(Math.max(e.x+e.width,i.x)+n),c=Math.floor(Math.min(e.y,i.y+i.height)-n),l=Math.ceil(Math.max(e.y+e.height,i.y)+n);return new r({top:c,left:s,bottom:l,right:a})}},40933:(t,e,n)=>{"use strict";const r=n(43063);t.exports=function(){const t=this,e=[],n=[];t.append=t=>{t.priority?e.push(t):n.push(t)},t.nodeTreesInPlacementOrder=t=>{const r=t&&e.find((e=>e.contains(t))),o=r||e.sort(((t,e)=>e.priority-t.priority))[0],i=r?r.nodeForId(t):{x:0,y:0};return e.sort(((t,e)=>t===o?-1:e===o?1:t.extensionFrom(i)-e.extensionFrom(i))).concat(n)},t.count=()=>e.length+n.length,t.allNodesOffset=()=>{const t={};return e.concat(n).forEach((e=>Object.assign(t,e.nodeDictionaryOffset()))),t},t.getMovementOrigin=t=>{const n=t&&e.find((e=>e.contains(t))),o=n&&n.nodeForId(t);return o&&n.getCurrentOffset().add(o)||new r({x:0,y:0})}}},14377:(t,e,n)=>{"use strict";const r=n(53891),o=n(2414),i=n(4147),s=n(43063);t.exports=function(t){let e;o(t,["nodeDictionary","rootIdea"]);const n=this,{nodeDictionary:a,rootIdea:c}=t,l=c&&c.attr&&c.attr.position||[0,0,0],d=l[2],u={x:l[0],y:l[1]},h=a[c.id];e=(()=>{if(!h)throw new Error("invalid-args");const t=new s({x:Math.round(h.width/-2),y:Math.round(h.height/-2)});return(d?new s(u):t).subtract(h)})(),n.contains=t=>!!a[t],n.extensionFrom=t=>{if(!t)throw new Error("invalid-args");const n=Object.values(a).map((n=>(n=>(t=>new s({x:t.x+t.width/2,y:t.y+t.height/2}))(n).add(e).subtract(t).extension())(n)));return Math.min.apply({},n)},n.toRectSet=t=>{const e=Object.values(a).map((e=>{const n=a[e.parentId];return r({node:e,margin:t,parent:n})}));return new i({rectangles:e})},n.nodeDictionaryOffset=()=>{const t={};return Object.keys(a).forEach((n=>{const r=a[n],o=e.add(r);t[n]=Object.assign({},r,{x:o.x,y:o.y,rootId:c.id})})),t},n.nodeForId=t=>a[t],n.setCurrentOffset=t=>e=t,n.getCurrentOffset=()=>e,Object.freeze(Object.assign(n,{rootIdea:c,rootNode:h,rootIdeaPosition:u,priority:d,nodeDictionary:a,currentOffset:e}))}},43063:t=>{"use strict";t.exports=function t(e){if(!e||!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("invalid-args");const{x:n,y:r}=e;Object.freeze(Object.assign(this,{x:n,y:r,add:function(e){return new t({x:n+e.x,y:r+e.y})},multiply:function(e){return new t({x:n*e.x,y:r*e.y})},extension:()=>Math.pow(n,2)+Math.pow(r,2),subtract:function(e){return new t({x:n-e.x,y:r-e.y})}}))}},13706:(t,e,n)=>{"use strict";const r=n(4147),o=n(43063);t.exports=function(t){const e=t&&t.depthLimit||100,n=[],i=({rectSet:t,appliedOffset:o,offsetDirection:s,depth:a})=>{if(!t||!o||!s)throw new Error("invalid-args");const c=(t=>{const e=n.map((e=>e.intersectionsOnRectSet(t)));return new r({rectSets:e})})(t);if(c.isEmpty())return o;{const n=s.multiply({x:c.boundingRect.width,y:c.boundingRect.height}),r=(a||0)+1,l=t.translate(n),d=o.add(n);return r<e?i({rectSet:l,appliedOffset:d,offsetDirection:s,depth:r}):o}},s=t=>!!n.find((e=>e.hasIntersectionsOnRectSet(t)));this.addPlacedRectSet=t=>{n.push(t)},this.translationRequiredToNotOverlap=({rectSet:t,appliedOffset:e,movementOrigin:n})=>{if(!s(t))return e;const r=new o({x:Math.sign(e.subtract(n).x)||1,y:0}),a=new o({x:0,y:Math.sign(e.subtract(n).y)||1}),c=i({rectSet:t,appliedOffset:e,offsetDirection:r});return d=i({rectSet:t,appliedOffset:e,offsetDirection:a}),u=e,(l=c).subtract(u).extension()<d.subtract(u).extension()?l:d;var l,d,u},Object.freeze(Object.assign(this,{hasIntersectionsOnRectSet:s,placed:n,depthLimit:e}))}},4147:t=>{"use strict";const e=Object.freeze(new Array(0));t.exports=function t(n){const r=t=>Object.freeze(t.slice(0)),o=(()=>{if(!n)return e;if(n.rectangles)return r(n.rectangles);if(n.rectSets){const t=n.rectSets.map((t=>t.rectangles));return r(t.reduce(((t,e)=>t.concat(e))))}throw new Error("invalid-args")})(),i=o.length&&o.reduce(((t,e)=>t.wrap(e))),s=this;s.translate=e=>new t({rectangles:o.map((t=>t.translate(e)))}),s.intersectionsOnRect=e=>{if(!e||!e.intersection(i))return new t;const n=[];return o.forEach((t=>{const r=t.intersection(e);r&&n.push(r)})),new t({rectangles:n})},s.hasIntersectionOnRect=t=>!(!t||!t.intersection(i)||!o.find((e=>e.intersection(t)))),s.intersectionsOnRectSet=e=>{if(!(e&&e.boundingRect&&i&&i.intersection(e.boundingRect)))return new t;const n=o.map((t=>e.intersectionsOnRect(t)));return new t({rectSets:n})},s.isEmpty=()=>!o.length,s.hasIntersectionsOnRectSet=t=>!!(t&&t.boundingRect&&i&&i.intersection(t.boundingRect))&&!!o.find((e=>t.hasIntersectionOnRect(e))),Object.freeze(Object.assign(s,{rectangles:o,boundingRect:i}))}},48634:t=>{"use strict";t.exports=function t(e){if(!e||!Number.isFinite(e.top)||!Number.isFinite(e.bottom)||!Number.isFinite(e.left)||!Number.isFinite(e.right)||e.top>=e.bottom||e.left>=e.right)throw new Error("invalid-args");const n=this,{top:r,left:o,bottom:i,right:s}=e,a=s-o,c=i-r;n.translate=e=>{if(!e)throw new Error("invalid-args");return new t({left:o+e.x,right:s+e.x,top:r+e.y,bottom:i+e.y})},n.intersection=e=>{if(!e)return!1;if(e.left<s&&e.right>o&&e.top<i&&e.bottom>r){const n=Math.max(e.left,o),a=Math.min(e.right,s),c=Math.max(e.top,r),l=Math.min(e.bottom,i);if(n<a&&c<l)return new t({left:n,top:c,right:a,bottom:l})}return!1},n.wrap=e=>{const n=Math.min(e.left,o),a=Math.max(e.right,s),c=Math.min(e.top,r),l=Math.max(e.bottom,i);return new t({top:c,left:n,bottom:l,right:a})},Object.freeze(Object.assign(n,{top:r,left:o,bottom:i,right:s,width:a,height:c}))}},3840:(t,e,n)=>{"use strict";const r=n(64919),o=n(66661),i="theme_inherit",s=(t,e,n)=>{let o=[];return t.attr?n.forEach((n=>{const s=r.getValue(t.attr,n);s&&s!==i?r.setValue(e.attr,n,s):o.push(n)})):o=n,o},a=(t,e,n)=>{if(!e||!e.parentId)return;const r=t[e.parentId],o=r&&s(r,e,n)||[];o.length&&r&&r.parentId&&(a(t,r,o),s(r,e,o))},c=(t,e)=>{if(!e||!e.parentId||!e.attr)return;const n=r.keyComponentsWithValue(e.attr,i);n&&n.length&&a(t,e,n)};t.exports={INHERIT_MARKER:i,inheritAttributes:c,inheritAttributeKeys:a,inheritAttributeKeysFromParentNode:s,setThemeAttributes:function(t,e){if(!t||!e)throw"invalid-args";Object.keys(t).forEach((function(n){const r=t[n];r.styles=e.nodeStyles(r.level,r.attr),r.attr=o({},e.getLayoutConnectorAttributes(r.styles),r.attr||{})})),Object.keys(t).forEach((function(e){const n=t[e];c(t,n)}))}}},67833:t=>{"use strict";t.exports=function(){let t=0,e=0,n=!1,r=!1,o=0,i=!1,s=!1,a=0,c=0;const l=this,d=function(){return!!n&&{height:n.height,width:Math.max(n.width,o)}},u=function(t,n,r){return"center"===r?Math.max(t,n):t>=n?t+e:n},h=function(t,e,n,r){switch(n){case"end":return t-e-r;case"start":return r;default:return(t-e)/2}};l.requireNodeStyleWidth=function(t){Number.isFinite(t)&&(o=t)},l.requireMargin=function(e){Number.isFinite(e)&&(t=e)},l.requireCornerRadius=function(t){Number.isFinite(t)&&(c=t)},l.requireBorder=function(t){e=t},l.requireTextBox=function(t){t&&Number.isFinite(t.width)&&Number.isFinite(t.height)&&(n={width:t.width,height:t.height})},l.requireIconBox=function(t){t&&Number.isFinite(t.width)&&Number.isFinite(t.height)&&(r={width:t.width,height:t.height,position:t.position})},l.requireDecorations=function(t,e,n){i=t,s=e,a=n},l.calculate=function(){const l=function(){const e=d();if(!r&&!e)return{width:0,height:0};if(!r)return d();if(!e)return r;switch(r.position){case"top":case"bottom":return{height:r.height+t+e.height,width:Math.max(r.width,e.width,o)};case"left":case"right":return{width:r.width+t+Math.max(o,e.width),height:Math.max(r.height,e.height)};case"center":return{height:Math.max(r.height,e.height),width:Math.max(r.width,e.width,o)};default:throw new Error("invalid-args")}}(),f=2*c,p={width:2*t+l.width,height:2*t+l.height},g=function(){if(!a&&!s)return!1;const t=s?s.width+2*(i.label.border+i.label.margin):0,e=a&&s?1:0,n=i.height,r=i.margin,o=a?a*(n+r)-r:0;return{width:(2+e)*i.margin+t+o,height:i.height+2*i.margin,labelWidth:t,standardDecorationsWidth:o,standardDecorationWidth:n,standardDecorationMargin:r}}(),m=function(n,r){if(!r)return{bubble:Object.assign({x:0,y:0},n),width:n.width,height:n.height};const o={x:0,y:0},s={x:0,y:0},a={width:n.width,height:n.height},c=i.overlap?t:0;switch(i.edge){case"top":o.y=r.height-c;break;case"bottom":s.y=n.height-c;break;case"left":o.x=r.width-c;break;case"right":s.x=n.width-c;break;default:throw new Error("invalid-args")}switch(i.edge){case"top":case"bottom":a.width=u(r.width,n.width,i.position),a.height=Math.max(o.y+n.height,s.y+r.height),s.x=h(a.width,r.width,i.position,e),o.x=h(a.width,n.width,i.position,0);break;case"left":case"right":a.width=Math.max(o.x+n.width,s.x+r.width),a.height=u(r.height,n.height,i.position),s.y=h(a.height,r.height,i.position,e),o.y=h(a.height,n.height,i.position,0);break;default:throw new Error("invalid-args")}return{height:a.height,width:a.width,bubble:Object.assign(o,n),decorations:Object.assign(s,r)}}({width:Math.max(f,p.width)+2*e,height:Math.max(f,p.height)+2*e},g);return m.bubble.border=e,m.text=function(i){const s=t+e,a=d();if(!r)return{x:i.x+s,y:i.y+s,width:i.width-2*s,height:i.height-2*s};if(!n)return!1;switch(r.position){case"left":return{x:i.x+s+r.width+t,y:i.y+Math.round((i.height-a.height)/2),width:Math.max(o,a.width),height:a.height};case"right":return{x:i.x+s,y:i.y+Math.round((i.height-a.height)/2),width:Math.max(o,a.width),height:a.height};case"top":return{x:i.x+s,y:i.y+s+r.height+t,width:Math.max(a.width,r.width,o),height:a.height};case"bottom":return{x:i.x+s,y:i.y+s,width:Math.max(a.width,r.width,o),height:a.height};case"center":return{x:i.x+Math.round((i.width-Math.max(a.width,r.width))/2),y:i.y+Math.round((i.height-a.height)/2),width:Math.max(a.width,r.width,o),height:a.height};default:throw new Error("invalid-args")}}(m.bubble),m.icon=function(n){const o=t+e,i=d();if(!r)return!1;if(!i)return{x:n.x+o,y:n.y+o,width:r.width,height:r.height};switch(r.position){case"left":return{x:n.x+o,y:n.y+Math.round((n.height-r.height)/2),width:r.width,height:r.height};case"right":return{x:n.x+o+i.width+t,y:n.y+Math.round((n.height-r.height)/2),width:r.width,height:r.height};case"top":return{x:n.x+Math.round((n.width-r.width)/2),y:n.y+o,width:r.width,height:r.height};case"bottom":return{x:n.x+Math.round((n.width-r.width)/2),y:n.y+o+i.height+t,width:r.width,height:r.height};case"center":return{x:n.x+Math.round((n.width-r.width)/2),y:n.y+Math.round((n.height-r.height)/2),width:r.width,height:r.height};default:throw new Error("invalid-args")}}(m.bubble),m}}},86090:t=>{"use strict";t.exports=function(t){return!!t&&{left:t.x,top:t.y,width:t.width,height:t.height,level:t.level,styles:t.styles||["default"]}}},65400:(t,e,n)=>{"use strict";const r=n(68884),o=n(90618),i=n(31385),s=n(67833),a=Object.freeze({});t.exports=function(t,e,n,c){let l,d=a,u={};const h=c&&c.resourceTranslator,f=e=>{const n=e&&e.id&&t.getNodeTheme(e.id);return!(!n||!n.unlabelled)},p=function(){u={},d=l?Object.freeze(Object.assign({},l(e.getActiveContent(),f))):a},g=(t,e,a,l,d)=>{const u=new s,f=a&&a.attachment,p=o(l),g=(t=>!(!t||!t.icon)&&(h&&t.icon.url?Object.assign({},t.icon,{url:h(t.icon.url)}):t.icon))(a),m=i.getLink(l),v=p||!g,y=r(a,t),w=(t=>t&&Array.isArray(t.stickers)&&t.stickers||[])(a),b=a&&a.note,E=a&&a.group;return u.requireNodeStyleWidth(a&&a.style&&a.style.width),u.requireBorder(t.lineWidth),u.requireMargin(t.margin),u.requireCornerRadius(t.cornerRadius),u.requireIconBox(g),v&&u.requireTextBox(n(p||"M",y,t.font)),u.requireDecorations(t.decorations,d&&n(d,0,t.decorations.label.font),function(){const t=!(c&&c.passive),e=[b,f,m].filter((t=>!!t));return(t?e.length:0)+w.length}()),{metrics:u.calculate(),title:E?"":p.trim(),fullTitle:l,label:d,hyperlink:m,note:b,attachment:f,icon:g,theme:t,isGroup:E,effectiveStyles:e,stickers:w}},m=function(e){return u[e.id]||(u[e.id]=function(e){const n=t.getNodeTheme(e.id),r=d[e.id],o=g(n,n.effectiveStyles,e.attr,e.title,r);return o.nodeId=e.id,o}(e)),u[e.id]};e.addListener((()=>{p()})),Object.freeze(Object.assign(this,{setLabelGenerator:function(t){l=t,p()},getLabelMap:function(){return d},buildNodeViewForNodeThemeAndAttr:g,getNodeViewForIdea:m,getNodeViewForIdeaId:function(t){if(u[t])return u[t];const n=e.getActiveContent().findSubIdeaById(t);if(!n)throw new Error("invalid args");return m(n)},dropCache:p}))}},45914:(t,e,n)=>{"use strict";const r=n(19767),o=n(28345);t.exports=function(t,e,n){const i=o.calculateTree(t,e,n,(function(e,n){return n!==t.id||e>0})),s=o.calculateTree(t,e,n,(function(e,n){return n!==t.id||e<0})),a=i.toLayout(),c=s.toLayout();return r.each(c.nodes,(function(t){t.x=-1*t.x-t.width})),r.extend(c.nodes,a.nodes)}},65480:(t,e,n)=>{"use strict";const r=n(19767),o=function(t){return r.reduce(t,(function(t,e){return t+e.l}),0)},i=function(t,e){let n=0,r=-1;for(;n<=e;){if(r+=1,r>=t.length)return-1;n+=t[r].l}return r},s=function(t,e){let n,r=t.slice();const s=o(t),a=i(e,s);return a>=0&&(n=o(e.slice(0,a+1)),r.push({h:e[a].h,l:n-s}),r=r.concat(e.slice(a+1))),r},a=function(t,e){const n=function(t,e){return r.map(t,(function(t){return{l:t.l,h:t.h+e}}))};this.initialHeight=function(){return this.bottom[0].h-this.top[0].h},this.borders=function(){return r.pick(this,"top","bottom")},this.spacingAbove=function(t){let e=0,n=0,r=0,o=0,i=0;for(;e<this.bottom.length&&n<t.top.length;)r=Math.max(r,this.bottom[e].h-t.top[n].h),o+this.bottom[e].l<i+t.top[n].l?(o+=this.bottom[e].l,e+=1):o+this.bottom[e].l===i+t.top[n].l?(o+=this.bottom[e].l,e+=1,i+=t.top[n].l,n+=1):(i+=t.top[n].l,n+=1);return r},this.indent=function(t,e){const n=this.top.slice(),r=this.bottom.slice(),o=Math.round((r[0].h+n[0].h)/2);return t?(n.unshift({h:Math.round(o-e/2),l:t}),r.unshift({h:Math.round(o+e/2),l:t}),new a(n,r)):this},this.stackBelow=function(t,e){const r=t.spacingAbove(this),o=s(t.top,n(this.top,r+e)),i=s(n(this.bottom,r+e),t.bottom);return new a(o,i)},this.expand=function(t,e){const r=t-this.top[0].h,o=e-this.bottom[0].h,i=n(this.top,r),s=n(this.bottom,o);return new a(i,s)},this.insertAtStart=function(t,e){const r=n(this.top,0),o=n(this.bottom,0),i=function(t){t[0].l*=.5,t[1].l+=t[0].l};return r[0].l+=e,o[0].l+=e,r.unshift({h:Math.round(-.5*t.height),l:t.width}),o.unshift({h:Math.round(.5*t.height),l:t.width}),r[0].h>r[1].h&&i(r),o[0].h<o[1].h&&i(o),new a(r,o)},this.top=t.slice(),this.bottom=e.slice()};t.exports={borderLength:o,borderSegmentIndexAt:i,extendBorder:s,Outline:a,outlineFromDimensions:function(t){return new a([{h:Math.round(-.5*t.height),l:t.width}],[{h:Math.round(.5*t.height),l:t.width}])}}},28345:(t,e,n)=>{"use strict";const r=n(19767),o=n(27040),i=n(65480),s=function(t){r.extend(this,t),this.toLayout=function(t,e,n){const o={nodes:{},connectors:{}},i=r.pick(this,"id","title","attr","width","height","level");return n&&(i.parentId=n),t=t||0,e=e||0,1===i.level?(i.x=Math.round(-.5*this.width),i.y=Math.round(-.5*this.height)):(i.x=t+(this.deltaX||0),i.y=e+(this.deltaY||0)),o.nodes[this.id]=i,void 0!==n&&(o.connectors[i.id]={from:n,to:i.id}),this.subtrees&&this.subtrees.forEach((function(t){const e=t.toLayout(i.x,i.y,i.id);r.extend(o.nodes,e.nodes),r.extend(o.connectors,e.connectors)})),o}},a=function(t,e,n,c,l){const d={id:t.id,title:t.title,attr:t.attr,deltaY:0,deltaX:0,level:l||1},u=e(t,d.level);return r.extend(d,u),d.outline=i.outlineFromDimensions(u),r.isEmpty(t.ideas)||t.attr&&t.attr.collapsed||(d.subtrees=r.map(function(){const e=[];return r.each(function(){const e=r.map(r.keys(t.ideas),parseFloat),n=c?r.filter(e,(function(e){return c(e,t.id)})):e,i=r.filter(n,(function(e){return!o(t.ideas[e])}));return r.sortBy(i,Math.abs)}(),(function(n){e.push(t.ideas[n])})),e}(),(function(t){return a(t,e,n,c,d.level+1)})),r.isEmpty(d.subtrees)||function(t){let e,o,i,s,a;if(r.each(t,(function(t){t.deltaX=u.width+n.h,i=t.attr&&t.attr.position&&t.attr.position[0],i&&i>t.deltaX?(s=i-t.deltaX,t.deltaX=i):s=0,e?(a=t.outline.indent(s,n.h),o=a.initialHeight(),e=a.stackBelow(e,n.v),t.deltaY=Math.round(e.initialHeight()-o/2-t.height/2)):e=t.outline.indent(s,n.h)})),t&&t.length){const n=u.bubble?u.bubble.height:u.height,r=u.bubble?u.bubble.y:0,o=t[0].bubble?t[0].bubble.y:0,i=t[t.length-1],s=i.bubble?i.height-i.bubble.height-i.bubble.y:0,a=e.initialHeight()-o-s;(function(t,e){const n=t.map((t=>({deltaX:t.deltaX,deltaY:t.deltaY}))),r=function(t,e,n){let r,o;const i=function(e){const r=n[e].deltaY-n[e-1].deltaY,i=t[e].deltaY-t[e-1].deltaY;i<r&&(o.deltaY+=r-i)};for(let n=0;n<t.length;n+=1){o=t[n];const s=o.bubble?o.bubble.y:0,a=u.bubble?u.bubble.y:0;o.attr&&o.attr.position?(o.deltaY=o.attr.position[1]-s+a,(void 0===r||o.attr.position[2]>t[r].attr.position[2])&&(r=n)):o.deltaY+=e,n>0&&i(n)}return r}(t,e,n),o=r&&t[r].attr.position[1]-t[r].deltaY;if(o)for(let e=0;e<t.length;e+=1)t[e].deltaY+=o})(t,r-o+Math.round(.5*(n-a))),e=e.expand(Math.round(t[0].deltaY-.5*u.height),Math.round(t[t.length-1].deltaY+t[t.length-1].height-.5*u.height))}d.outline=e.insertAtStart(u,n.h)}(d.subtrees)),new s(d)};t.exports={Tree:s,calculateTree:a}},14424:(t,e,n)=>{"use strict";const r=n(97359),o=n(32321);t.exports=function(t,e,n){if(!n)throw"invalid-args";const i=t.nodes,s=i[e.id],a=Object.values(e.ideas||{}).map((t=>t.id)).map((t=>i[t])).filter((t=>t)),c=o(a),l=function(){const t=c[c.length-1];return{left:c[0].x,right:t.x+t.width}},d=Object.values(i||{}).filter((t=>t.level===s.level&&t.id!==s.id));!function(){if(!a.length)return;const t=l();let e=t.left+(t.right-t.left)/2-r(a,n)/2;c.forEach((t=>{t.x=e,e=e+t.width+n}))}(),function(){if(!a.length)return;const t=l();s.x=t.left,s.width=t.right-t.left}(),d.forEach((t=>{t.verticalOffset=(t.verticalOffset||0)+s.height}))}},83059:(t,e,n)=>{"use strict";const r=n(27040),o=n(14424),i=n(55378),s=n(24964),a=n(9737);t.exports=function(t,e,n){const c=function(t){return t.attr&&t.attr.group},l=t=>t.attr?.condensed,d=function(t,e,n,r,o){const i={},s=!(a(t.ideas)||t.attr&&t.attr.collapsed);return n=n||1,s&&Object.keys(t.ideas).forEach((r=>{const s=l(t)||o,a=c(t)||s?n:n+1,u=d(t.ideas[r],e,a,t.id,s);u&&(i[r]=u)})),e(t,i,n,r,o)},u=d(t,(function(d,u,h,f,p){return(d===t||!r(d))&&function(t,r,d,u,h){const f=function(t,n,r){const o=e(t,n),{id:i,attr:s}=t,a=Object.assign({level:n,verticalOffset:0,title:c(t)?"":t.title},o,{id:i,attr:s});return r&&(a.parentId=r),a}(t,d,u);let p;return c(f)&&!a(t.ideas)?(p=i(f,r,n.h,!0),o(p,t,n.h)):p=h||l(f)?s(f,r,{h:n.ch,v:n.cv}):i(f,r,n.h),p}(d,u,h,f,p)}));var h,f;return h=u.nodes,f=function(t){const e=[],r=[];let o,i=0;for(Object.values(t).forEach((t=>{e[t.level-1]=Math.max(e[t.level-1]||0,t.height+t.verticalOffset)})),i=e.reduce(((t,e)=>t+e),0)+n.v*(e.length-1),r[0]=Math.round(-.5*i),o=1;o<e.length;o++)r[o]=r[o-1]+n.v+e[o-1];return r}(u.nodes),Object.values(h).forEach((t=>{const e=t.bubble&&t.bubble.y||0;t.y=f[t.level-1]+t.verticalOffset-e,delete t.verticalOffset})),u.nodes}},24964:t=>{"use strict";t.exports=function(t,e,n){const r={nodes:{}};if(Array.isArray(e))throw"child layouts are an array!";return r.condensedHeight=t.height,r.condensedWidth=t.width,r.nodes[t.id]=t,r.leftAligned=!0,Object.keys(e).sort(((t,e)=>parseFloat(t)-parseFloat(e))).forEach((t=>{var o;Object.assign(r.nodes,(o=e[t].nodes,Object.values(o).forEach((t=>{t.x+=n.h,t.verticalOffset+=r.condensedHeight+n.v})),o)),r.condensedHeight+=e[t].condensedHeight+n.v,r.condensedWidth=Math.max(r.condensedWidth,e[t].condensedWidth+n.h)})),t.x=0,r.levels=[{width:r.condensedWidth,xOffset:0}],r}},55378:(t,e,n)=>{"use strict";const r=n(32544);t.exports=function(t,e,n,o){const i={nodes:{}},s=new r(e,n),a=t.bubble&&t.bubble.width||t.width,c=t.bubble&&t.bubble.x||0;let l;if(Array.isArray(e))throw"child layouts are an array!";return i.nodes[t.id]=t,t.x=Math.round(-.5*a)-c,i.levels=[{width:t.width,xOffset:t.x}],s.isEmpty()||(o?(i.levels=s.getMergedLevels(),l=i.levels[0].xOffset):(i.levels=i.levels.concat(s.getMergedLevels()),l=i.levels[1].xOffset),Object.keys(e).forEach((t=>{var n,r;Object.assign(i.nodes,(n=e[t].nodes,r=l+s.getExpectedTranslation(t),Object.values(n).forEach((t=>t.x+=r)),n))}))),i}},97359:t=>{"use strict";t.exports=function(t,e){return t&&t.length?t.reduce(((t,e)=>t+e.width),0)+(t.length-1)*e:0}},32321:t=>{"use strict";t.exports=function(t){return t&&t.length?[].concat(t).sort(((t,e)=>t.x-e.x)):t}},32544:(t,e,n)=>{"use strict";const r=n(19767);t.exports=function(t,e){const n=this,o=function(){return t?r.sortBy(Object.keys(t),parseFloat):[]},i=e||0,s=function(){const e=o(),n={};let s;return(r.isEmpty(t)?[]:o().map((e=>t[e]))).forEach(((t,r)=>{const o=e[r];void 0===s?(n[o]=0-t.levels[0].xOffset,s=t.levels.map((t=>t.width+n[o]+t.xOffset))):(t.levels.forEach(((t,e)=>{const r=s[e];void 0!==r&&(void 0===n[o]?n[o]=r+i-t.xOffset:n[o]=Math.max(n[o],r+i-t.xOffset))})),t.levels.forEach(((t,e)=>{s[e]=n[o]+t.xOffset+t.width})))})),n}();n.getLevelWidth=function(e){const r=o().filter((t=>n.existsOnLevel(t,e))),i=r[0],s=r[r.length-1],a=t[i],c=t[s],l=a.levels[e].xOffset+n.getExpectedTranslation(i);return c.levels[e].xOffset+n.getExpectedTranslation(s)+c.levels[e].width-l},n.getLevelWidths=function(){const e=[],o=r.max(r.map(t,(t=>t.levels.length)));for(let t=0;t<o;t++)e.push(n.getLevelWidth(t));return e},n.isEmpty=function(){return r.isEmpty(t)},n.getExpectedTranslation=function(t){return s[t]},n.existsOnLevel=function(e,n){return t[e].levels.length>n},n.getMergedLevels=function(){const e=Math.round(-.5*n.getLevelWidth(0));return n.getLevelWidths().map(((r,i)=>{const s=o().filter((t=>n.existsOnLevel(t,i)))[0];return{width:r,xOffset:t[s].levels[i].xOffset+n.getExpectedTranslation(s)+e}}))}}},33535:(t,e,n)=>{"use strict";const r=n(19767),o=n(71047),i=n(22620),s=n(27310),a=n(89080),c=n(26734),l=n(46306),d=n(15198);t.exports=function(t,e,n){let u,h,f,p,g,m=!0,v=!0,y=!1,w=!1,b=[],E={};if(!e)throw new Error("invalid-args");const x=this,S=n&&n.autoThemedIdeaUtils||d,A=n&&n.reorderMargin||20,C=n&&n.layoutModel||new o({nodes:{},connectors:{}}),I=function(t,e){const n=Object.keys(u.ideas).map((t=>u.ideas[t])),r=e||p(u,t);n.forEach((t=>{const e=t.attr&&t.attr.position,n=r.nodes&&r.nodes[t.id],o=n&&[Math.ceil(n.x),Math.ceil(n.y),1];o&&(!e||e[0]!==o[0]||e[1]!==o[1])&&u.updateAttr(t.id,"position",o)}))},k=(t,e,n,r)=>{const o=y&&y();return S.addSubIdea(u,o,t,e,n,r)},F=(t,e)=>{const n=y&&y();return S.insertIntermediateMultiple(u,n,t,e)},M=(t,e)=>{const n=y&&y();return S.changeParent(u,n,t,e)},T=function(t){const e=r.clone(b);b=0===t.length&&g?[g]:t,x.dispatchEvent("activatedNodesChanged",r.difference(b,e),r.difference(e,b))},P=function(t,n,o){let i;const s=C.getLayout(),a=e.getLabelMap()||{},c=(t,e)=>!(!t||!e||e.width===t.width&&e.height===t.height),l=(t,e)=>!(!t||!e||e.x===t.x&&e.y===t.y);C.setLayout(t),x.dispatchEvent("layoutChangeStarting",r.size(t.nodes)-r.size(s.nodes)),r.each(s.connectors,((e,n)=>{const r=t.connectors&&t.connectors[n];r&&r.from===e.from&&r.to===e.to||x.dispatchEvent("connectorRemoved",e)})),r.each(s.links,((e,n)=>{t.links&&t.links[n]||x.dispatchEvent("linkRemoved",e)})),r.each(s.nodes,((e,o)=>{let i;t.nodes[o]||(o==g&&x.selectNode(function(t,e){const n=r.min(t,(t=>Math.pow(t.x+t.width/2-e.x-e.width/2,2)+Math.pow(t.y+t.height/2-e.y-e.height/2,2)));return n&&n.id}(t.nodes,e)),i=r.reject(b,(t=>t==o)),i.length!==b.length&&T(i),x.dispatchEvent("nodeRemoved",e,o,n))})),r.each(t.nodes,((t,e)=>{const i=s.nodes[e];i?(l(t,i)&&x.dispatchEvent("nodeMoved",t,n),(c(t,i)||t.level!==i.level||!r.isEqual(t.attr||{},i.attr||{})||o)&&x.dispatchEvent("nodeAttrChanged",t,n),t.title!==i.title&&x.dispatchEvent("nodeTitleChanged",t,n),E[e]!==a[e]&&x.dispatchEvent("nodeLabelChanged",t,n)):x.dispatchEvent("nodeCreated",t,n)})),r.each(t.connectors,((e,i)=>{const a=s.connectors[i];a&&e.from===a.from&&e.to===a.to?!r.isEqual(a.attr||{},e.attr||{})||o?x.dispatchEvent("connectorAttrChanged",e):((e,n)=>{if(!e||!n||e.from!==n.from||e.to!==n.to)return!1;const r=s.nodes[e.from],o=s.nodes[e.to],i=t.nodes[n.from],a=t.nodes[n.to];return l(r,i)||l(o,a)||c(r,i)||c(o,a)})(a,e)?x.dispatchEvent("connectorMoved",e):((e,n)=>{if(!e||!n||e.from!==n.from||e.to!==n.to)return!1;const r=s.nodes[e.to];return i=t.nodes[n.to],!(!(o=r)||!i)&&(i.attr&&i.attr.group)!==(o.attr&&o.attr.group);var o,i})(a,e)&&x.dispatchEvent("connectorAttrChanged",e):x.dispatchEvent("connectorCreated",e,n)})),r.each(t.links,((e,i)=>{const a=s.links&&s.links[i];a?!r.isEqual(e.attr||{},a&&a.attr||{})||o?x.dispatchEvent("linkAttrChanged",e,n):((e,n)=>{if(!e||!n||e.ideaIdFrom!==n.ideaIdFrom||e.ideaIdTo!==n.ideaIdTo)return!1;const r=s.nodes[e.ideaIdFrom],o=s.nodes[e.ideaIdTo],i=t.nodes[n.ideaIdFrom],a=t.nodes[n.ideaIdTo];return l(r,i)||c(r,i)||l(o,a)||c(o,a)})(a,e)&&x.dispatchEvent("linkMoved",e):x.dispatchEvent("linkCreated",e,n)})),o&&(i={themeChanged:!0}),E=a,x.isInCollapse||x.dispatchEvent("layoutChangeComplete",i)},L=function(t){h=g,f=b.slice(0),x.selectNode(t)},O=function(t){L(t),x.editNode(!1,!0,!0)},_=function(){return g||u.getDefaultRootId()},R=function(t,e,n){w||(h=!1,f=!1,x.rebuildRequired(n))},U=function(){return u.findSubIdeaById(g)||u},D=function(t,e){(u.findSubIdeaById(e)||u).getAttr("collapsed")&&u.updateAttr(e,"collapsed",!1)},N=function(t,e,n){const r=u.findSubIdeaById(e)||u;let o;return D(0,e),o=n?k(e,n):k(e),["top-down","bottom-up"].includes(C.getOrientation())&&r.findChildRankById(o)<0&&u.flip(o),o},j=function(t,e){const n=e&&C.getNode(e);n&&u.updateAttr(t,"position",[n.x+n.width+2*A,n.y,1])},B=function(t,e){e?x.dispatchEvent("analytic","mapModel",t,e):x.dispatchEvent("analytic","mapModel",t)},W=function(t,e){return t&&e&&t.x>=e.x};a(this),x.pause=function(){w=!0},x.resume=function(){w=!1,x.rebuildRequired()},x.getIdea=function(){return u},x.isEditingEnabled=function(){return v},x.getCurrentLayout=function(){return C.getLayout()},x.analytic=B,x.getCurrentlySelectedIdeaId=_,x.rebuildRequired=function(t){if(!u)return;const e=C.getLayout(),n=e.theme!==(u.attr&&u.attr.theme),o=u.attr&&u.attr.themeOverrides,i=e&&e.themeOverrides,s=!r.isEqual(o||{},i||{}),a=n||s;a&&x.dispatchEvent("themeChanged",u.attr&&u.attr.theme,u.attr&&u.attr.themeOverrides),P(x.reactivate(p(u)),t,a)},this.setIdea=function(t,e){const n=g;if(!p)throw new Error("layout calculator not set");u&&(u.removeEventListener("changed",R),w=!1,T([]),x.dispatchEvent("nodeSelectionChanged",g,!1),g=void 0),u=t,u.addEventListener("changed",R),R(),e&&u.findSubIdeaById(n)?x.selectNode(n,!0):(x.selectNode(u.getDefaultRootId(),!0),x.dispatchEvent("mapViewResetRequested"))},this.setEditingEnabled=function(t){v=t},this.getEditingEnabled=function(){return v},this.setInputEnabled=function(t,e){m!==t&&(m=t,x.dispatchEvent("inputEnabledChanged",t,!!e))},this.getInputEnabled=function(){return m},this.selectNode=function(t,e,n){(e||m&&(t!==g||!x.isActivated(t)))&&(g&&x.dispatchEvent("nodeSelectionChanged",g,!1),g=t,n?x.activateNode("internal",t):T([t]),x.dispatchEvent("nodeSelectionChanged",t,!0))},this.clickNode=function(t,e){const n=e&&e.button&&-1!==e.button;e&&e.altKey?x.toggleLink("mouse",t):e&&e.shiftKey?x.toggleActivationOnNode("mouse",t):n?(this.selectNode(t),n&&-1!==n&&m&&x.dispatchEvent("contextMenuRequested",t,e.layerX,e.layerY)):x.dispatchEvent("nodeClicked",t,e)},this.findIdeaById=function(t){return u.id==t?u:u.findSubIdeaById(t)},this.getSelectedStyle=function(t){return this.getStyleForId(g,t)},this.getStyleForId=function(t,e){const n=C.getNode(t);return n&&n.attr&&n.attr.style&&n.attr.style[e]},this.toggleCollapse=function(t){const e=U();let n;n=x.isActivated(e.id)&&r.size(e.ideas)>0?e.getAttr("collapsed"):x.everyActivatedIs((t=>{const e=x.findIdeaById(t);return!(e&&r.size(e.ideas)>0)||e.getAttr("collapsed")})),this.collapse(t,!n)},this.collapse=function(t,e){const n=_(),o=function(){return C.getNode(n)},i=o();let s=!1;if(B("collapse:"+e,t),x.isInCollapse=!0,m&&x.applyToActivated((t=>{const n=x.findIdeaById(t);n&&(!e||n.ideas&&r.size(n.ideas)>0)&&u.updateAttr(t,"collapsed",e)})),s=o(),i&&s){const t=JSON.parse(JSON.stringify(C.getLayout()));a=t.nodes,c=i.x-s.x,l=i.y-s.y,(c||l)&&r.each(a,(t=>{t.x+=c,t.y+=l})),P(t,u.getSessionKey(),!1)}var a,c,l;x.isInCollapse=!1,x.dispatchEvent("layoutChangeComplete")},this.updateStyle=function(t,e,n){if(!v)return!1;m&&(B("updateStyle:"+e,t),x.applyToActivated((t=>{const o=x.getStyleForId(t,e);!n&&!o||r.isEqual(o,n)||u.mergeAttrProperty(t,"style",e,n)})))},this.updateLinkStyle=function(t,e,n,o,i){const s=r.extend({},u.getLinkAttr(e,n,"style"));if(!v)return!1;m&&(B("updateLinkStyle:"+o,t),s[o]=i,u.updateLinkAttr(e,n,"style",s))},this.addSubIdea=function(t,e,n,r){const o=e||g;let i;if(!v)return!1;B("addSubIdea",t),m&&(u.batch((()=>{i=N(0,o,n),r&&Object.keys(r).forEach((t=>u.updateAttr(i,t,r[t]))),I(i)})),i&&(n?L(i):O(i)))},x.addGroupSubidea=function(t,e){const n=e&&e.parentId,r=e&&e.group||!0,o=n||g;let i,s;if(!v)return!1;B("addGroupSubidea",t),m&&(u.batch((()=>{i=N(0,o,"group"),i&&(u.updateAttr(i,"contentLocked",!0),u.updateAttr(i,"group",r),s=k(i)),I(s)})),s&&O(s))},this.insertIntermediateGroup=function(t,e){const n=[],r=e&&e.group||!0;return!!v&&!(!m||u.isRootNode(g))&&(B("insertIntermediate",t),x.applyToActivated((t=>{n.push(t)})),void F(n,{title:"group",attr:{group:r,contentLocked:!0}}))},this.insertIntermediate=function(t){const e=[];let n=!1;return!!v&&!!m&&(B("insertIntermediate",t),x.applyToActivated((t=>{e.push(t)})),n=F(e),void(n&&O(n)))},this.flip=function(t){const e=C.getNode(g);return!!v&&(B("flip",t),!(!m||u.isRootNode(g))&&!(!e||2!==e.level)&&u.flip(g))},this.addSiblingIdeaBefore=function(t){let e,n,r,o;return!!v&&(B("addSiblingIdeaBefore",t),!!m&&(n=u.isRootNode(g)?u:u.findParent(g),u.batch((()=>{n!==u&&D(0,n.id),e=k(n.id),e&&(n===u?j(e,g):(r=n.findChildRankById(g),o=n.findChildRankById(e),r*o<0&&u.flip(e),u.positionBefore(e,g)),I(e))})),void(e&&O(e))))},this.addSiblingIdea=function(t,e,n){let r,o,i,s,a;const c=e||g;if(!v)return!1;B("addSiblingIdea",t),m&&(i=u.isRootNode(c)?u:u.findParent(c),u.batch((()=>{i!==u&&D(0,i.id),r=n?k(i.id,n):k(i.id),r&&(i===u?j(r,g):(o=u.nextSiblingId(c),s=i.findChildRankById(c),a=i.findChildRankById(r),s*a<0&&u.flip(r),o&&u.positionBefore(r,o)),I(r))})),r&&(n?L(r):O(r)))},this.removeSubIdea=function(t){let e;return!!v&&(B("removeSubIdea",t),m&&x.applyToActivated((t=>{e=u.removeSubIdea(t)})),e)},this.updateTitle=function(t,e,n){u.batch((()=>{n?u.initialiseTitle(t,e):u.updateTitle(t,e),I(t)}))},this.editNode=function(e,n,o){const i=U(),s=i.title;return!!v&&(e&&B("editNode",e),!!m&&(!i.attr||!i.attr.contentLocked)&&(r.include(t,s)&&(n=!0),void x.dispatchEvent("nodeEditRequested",g,n,!!o)))},this.editIcon=function(t){return!!v&&(t&&B("editIcon",t),!!m&&void x.dispatchEvent("nodeIconEditRequested",g))},this.scaleUp=function(t){x.scale(t,1.25)},this.scaleDown=function(t){x.scale(t,.8)},this.scale=function(t,e,n){m&&(x.dispatchEvent("mapScaleChanged",e,n),B(e<1?"scaleDown":"scaleUp",t))},this.move=function(t,e,n){m&&(x.dispatchEvent("mapMoveRequested",e,n),B("move",t))},this.resetView=function(t){const e=C.getNode(g),n=e&&e.rootId||u&&u.getDefaultRootId();n&&m&&(B("resetView",t),x.selectNode(n),x.dispatchEvent("mapViewResetRequested"))},this.decorationAction=function(t,e,n){B("decorationAction",t),x.dispatchEvent("decorationActionRequested",e,n)},this.openAttachment=function(t,e){B("openAttachment",t),e=e||g;const n=C.getNode(e),r=n&&n.attr&&n.attr.attachment;n&&x.dispatchEvent("attachmentOpened",e,r)},this.setAttachment=function(t,e,n){const r=!(!n||!n.content&&!n.goldAssetId);if(!v)return!1;B("setAttachment",t),u.updateAttr(e,"attachment",r&&n)},this.toggleLink=function(t,e){const n=r.find(u.links,(t=>String(t.ideaIdFrom)===String(e)&&String(t.ideaIdTo)===String(g)||String(t.ideaIdTo)===String(e)&&String(t.ideaIdFrom)===String(g)));n?x.removeLink(t,n.ideaIdFrom,n.ideaIdTo):x.addLink(t,e)},this.addLink=function(t,e){if(!v)return!1;B("addLink",t),u.addLink(g,e)},this.selectLink=function(t,e,n){return!!v&&(B("selectLink",t),!!e&&void x.dispatchEvent("linkSelected",e,n,u.getLinkAttr(e.ideaIdFrom,e.ideaIdTo,"style")))},this.selectConnector=function(t,e,n){return!!v&&(B("selectConnector",t),!!e&&void x.dispatchEvent("connectorSelected",e,n,u.getAttrById(e.to,"parentConnector")))},this.removeLink=function(t,e,n){if(!v)return!1;B("removeLink",t),u.removeLink(e,n)},x.undo=function(t){const e=h,n=f;if(!v)return!1;B("undo",t),m&&(u.undo(),e&&x.selectNode(e),n&&T(n))},x.redo=function(t){if(!v)return!1;B("redo",t),m&&u.redo()},x.moveRelative=function(t,e){let n;if(!v)return!1;B("moveRelative",t),m&&(["top-down","bottom-up"].includes(C.getOrientation())&&(n={ignoreRankSide:!0}),u.moveRelative(g,e,n))},x.contextForNode=function(t){const e=x.findIdeaById(t),n=e&&e.ideas&&r.size(e.ideas)>0,o=r.size(u.ideas),i=u.hasSiblings(t),s=e&&e.attr&&e.attr.style&&e.attr.style.width,a=e&&e.attr&&e.attr.position,c=e&&e.getAttr("collapsed"),l=u.isRootNode(t);if(e)return{hasChildren:!!n,hasSiblings:!!i,hasPreferredWidth:!!s,hasPreferredPosition:!!a,notRoot:!l,notLastRoot:!l||o>1,canUndo:u.canUndo()&&!h,canRedo:u.canRedo()&&!h,canCollapse:n&&!c,canExpand:n&&c}},x.getIcon=function(t){const e=C.getNode(t||g);return!!e&&e.attr&&e.attr.icon},x.setIcon=function(t,e,n,o,i,s,a){let c,l=!1;return!!v&&(B("setIcon",t),s=s||g,l=x.findIdeaById(s),!!l&&void(e?(c={url:e,width:n,height:o,position:i},a&&(c.metaData=a),u.updateAttr(s,"icon",c)):(u.updateAttr(s,"icon",!1),l.title||0!==r.size(l.ideas)||u.removeSubIdea(s))))},x.insertUp=function(t){"standard"===C.getOrientation()?x.addSiblingIdeaBefore(t):x.insertIntermediate(t)},x.insertDown=function(t){"standard"===C.getOrientation()?x.addSiblingIdea(t):x.addSubIdea(t)},x.insertLeft=function(t){"standard"===C.getOrientation()?x.insertIntermediate(t):x.addSiblingIdeaBefore(t)},x.insertRight=function(t){"standard"===C.getOrientation()?x.addSubIdea(t):x.addSiblingIdea(t)},x.moveUp=function(t){"standard"===C.getOrientation()&&x.moveRelative(t,-1)},x.moveDown=function(t){"standard"===C.getOrientation()&&x.moveRelative(t,1)},x.moveLeft=function(t){"standard"===C.getOrientation()?x.flip(t):x.moveRelative(t,-1)},x.moveRight=function(t){"standard"===C.getOrientation()?x.flip(t):x.moveRelative(t,1)},x.getSelectedNodeId=function(){return _()},x.centerOnNode=function(t){C.getNode(t)||(u.startBatch(),r.each(u.calculatePath(t),(t=>{u.updateAttr(t.id,"collapsed",!1)})),u.endBatch()),x.dispatchEvent("nodeFocusRequested",t),x.selectNode(t)},x.search=function(t){const e=[];return t=t.toLocaleLowerCase(),u.traverse((n=>{n.title&&n.title.toLocaleLowerCase().indexOf(t)>=0&&e.push({id:n.id,title:n.title})})),e},function(){const t={};["Left","Right","Up","Down"].forEach((e=>{t[e]=function(t,n,r){!function(t,e,n,r){if(!m)return;B(e,t);const o=C["nodeId"+r](g);o&&n.apply(x,[o])}(t,n,r,e)}})),x.getActivatedNodeIds=function(){return b.slice(0)},x.activateSiblingNodes=function(t){const e=u.findParent(g),n=e&&e.ideas&&r.map(e.ideas,(t=>t.id));B("activateSiblingNodes",t),n&&T(n)},x.activateNodeAndChildren=function(t){const e=_(),n=u.getSubTreeIds(e);B("activateNodeAndChildren",t),n.push(e),T(n)},r.each(["Left","Right","Up","Down"],(e=>{x["activateNode"+e]=function(n){t[e](n,"activateNode"+e,(t=>{x.selectNode(t,!1,!0)}))},x["selectNode"+e]=function(n){t[e](n,"selectNode"+e,x.selectNode)}})),x.toggleActivationOnNode=function(t,e){B("toggleActivated",t),x.isActivated(e)?T(r.without(b,e)):T([e].concat(b))},x.activateNode=function(t,e){B("activateNode",t),x.isActivated(e)||(b.push(e),x.dispatchEvent("activatedNodesChanged",[e],[]))},x.activateChildren=function(t){const e=U();B("activateChildren",t),!e||r.isEmpty(e.ideas)||e.getAttr("collapsed")||T(u.getSubTreeIds(e.id))},x.activateSelectedNode=function(t){B("activateSelectedNode",t),T([_()])},x.isActivated=function(t){return r.find(b,(e=>t==e))},x.applyToActivated=function(t){u.batch((()=>{r.each(b,t)}))},x.everyActivatedIs=function(t){return r.every(b,t)},x.activateLevel=function(t,e){const n=r.map(r.filter(C.getLayout().nodes,(t=>t.level==e)),(t=>t.id));B("activateLevel",t),r.isEmpty(n)||T(n)},x.reactivate=function(t){return r.each(t.nodes,(t=>{r.contains(b,t.id)&&(t.activated=!0)})),t}}(),x.getNodeIdAtPosition=function(t,e){const n=r.find(C.getLayout().nodes,(function(n){return t>=n.x&&e>=n.y&&t<=n.x+n.width&&e<=n.y+n.height}));return n&&n.id},x.autoPosition=function(t){return u.updateAttr(t,"position",!1)},x.standardPositionNodeAt=function(t,e,n,o){let i=!1;const s=C.getNode(C.getNode(t).rootId),a=u.findParent(t),c=C.getNode(a.id),l=C.getNode(t),d=C.getNode(t),h=function(){return d.level<=2||(d.x-c.x)*(e-c.x)>0},f=function(){return r.isEmpty(a.ideas)?0:r.max(r.map(a.ideas,(e=>e.id!==t&&e.attr&&e.attr.position&&e.attr.position[2]||0)))||0};return u.startBatch(),l&&2===l.level&&(i=function(e){const n=s.x<d.x&&e<s.x,r=s.x>d.x&&s.x<e;return!(!n&&!r)&&u.flip(t)}(e)),!o&&h()&&x.autoPosition(t),d.level>1&&(i=u.positionBefore(t,function(){let e={id:null,y:1/0};return r.each(u.sameSideSiblingIds(t),(t=>{const r=C.getNode(t);n<r.y&&r.y<e.y&&(e=r)})),e}().id)||i),o&&h()&&(i=1===d.level?u.updateAttr(t,"position",[e,n,f()+1]):function(){let r;return r=e<c.x?c.x-e-d.width+c.width:e-c.x,B("nodeManuallyPositioned"),u.updateAttr(t,"position",[r,n-c.y,f()+1])}()||i),I(t),u.endBatch(),i},x.topDownPositionNodeAt=function(t,e,n,o){let i,s,a;const c=u.findParent(t),l=C.getNode(t),d=function(){return u.updateAttr(t,"position",[e,n,1])};return o?l.level<2?d():u.batch((()=>(M(t,"root"),d()))):!!c&&(r.each(c.ideas,(n=>{const r=C.getNode(n.id);n.id!==t&&(e<r.x&&(!s||Math.abs(e-r.x)<Math.abs(e-C.getNode(s.id).x))&&(s=n),e>r.x+r.width&&(!a||Math.abs(e-r.x)<Math.abs(e-C.getNode(a.id).x))&&(a=n))})),u.batch((()=>{const e=!!(s&&s.id&&u.findChildRankById(s.id)<0),n=e?a:s,r=e&&u.findChildRankById(t)>0;x.autoPosition(t),r&&u.flip(t),i=u.positionBefore(t,n&&n.id)})),i)},x.positionNodeAt=function(t,e,n,r){return"standard"===C.getOrientation()?x.standardPositionNodeAt(t,e,n,r):x.topDownPositionNodeAt(t,e,n,r)},x.dropNode=function(t,e,n){let r;const o=u.findParent(t);return e!==t&&(n?(r=u.clone(t),r&&u.paste(e,r),!1):e===o.id?x.autoPosition(t):M(t,e))},x.setLayoutCalculator=function(t){p=t},x.setThemeSource=function(t){y=t},x.dropImage=function(t,e,n,r,o,i){const s=function(r,o){const s=Math.min(e,300)/e,a=Math.min(n,300)/n,c=Math.min(s,a),l=u.getAttrById(r,"icon");x.setIcon("drag and drop",t,Math.round(e*c),Math.round(n*c),l&&l.position||o,r,i)},a=x.getNodeIdAtPosition(r,o);if(a)return s(a,"left");!function(){u.startBatch();const t=k(g);s(t,"center"),u.endBatch(),x.selectNode(t)}()},x.setLabelGenerator=function(t,n){e.setLabelGenerator(t),x.dispatchEvent("labelGeneratorChange",n,!!t),x.rebuildRequired()},x.getStandardReorderBoundary=function(t){return 1!==C.getNode(t).level&&function(t){let e;const n=[],o=C.getNode(t),i=C.getNode(o&&o.rootId),s=u.findParent(t),a=C.getNode(s.id),c=W(o,i)?"left":"right",l=W(o,i)?"right":"left",d=function(t,e){const n=r.map(t,(t=>t.y)),i=r.map(t,(t=>t.y+t.height)),s={minY:r.min(n)-A-o.height,maxY:r.max(i)+A,margin:A};return s.edge=e,s.x="left"===e?a.x+a.width+A:a.x-A,s},h=function(t){const e={minY:a.y-A-o.height,maxY:a.y+a.height+A,margin:A};return e.edge=t,e.x="left"===t?a.x+a.width+A:a.x-A,e},f=r.map(u.sameSideSiblingIds(t),(t=>C.getNode(t)));return r.isEmpty(f)||n.push(d(f,c)),n.push(h(c)),2===o.level&&(e=function(){let t=r.map(s.ideas,(t=>C.getNode(t.id)));return t=r.without(t,o),r.isEmpty(f)||(t=r.difference(t,f)),t}(),r.isEmpty(e)||n.push(d(e,l)),n.push(h(l))),n}(t)},x.getTopDownReorderBoundary=function(t){const e=C.getNode(t),n=u.findParent(t),o=C.getOrientation();let i=1/0,s=-1/0,a=-1/0,c=e.y,l=!1;return n?(r.each(n.ideas,(e=>{const n=C.getNode(e.id);n&&e.id!==t&&(l=!0,i=Math.min(n.x,i),c=Math.min(n.y,c),s=Math.max(n.x+n.width,s),a=Math.max(n.y+n.height,a))})),l?[{minY:c-20,maxY:a+10,minX:i-e.width-10,maxX:s+10,edge:{"top-down":"top","bottom-up":"bottom"}[o]}]:[]):[]},x.getReorderBoundary=function(t){return"standard"===C.getOrientation()?x.getStandardReorderBoundary(t):x.getTopDownReorderBoundary(t)},x.focusAndSelect=function(t){x.selectNode(t),x.dispatchEvent("nodeFocusRequested",t)},x.requestContextMenu=function(t,e){return!(!m||!v||(x.dispatchEvent("contextMenuRequested",g,t,e),0))},x.makeSelectedNodeRoot=function(){const t=x.getSelectedNodeId();return!(!t||u.isRootNode(t))&&(m&&v?u.batch((()=>{I(t,C.getLayout());const e=M(t,"root");return function(t){const e=t&&C.getNode(t);e&&u.updateAttr(t,"position",[e.x,e.y,1])}(t),I(t),e})):void 0)},x.setNodeWidth=function(t,e,n){u.mergeAttrProperty(e,"style","width",n)},x.unsetSelectedNodeWidth=function(t){if(!v)return!1;B("unsetSelectedNodeWidth",t),x.applyToActivated((t=>{u.mergeAttrProperty(t,"style","width",!1)}))},x.unsetSelectedNodePosition=function(t){if(!v)return!1;B("unsetSelectedNodePosition",t),x.applyToActivated(x.autoPosition)},x.insertRoot=function(t,e){if(!v)return!1;if(B("addRootNode",t),m){let t=!1;u.batch((()=>{t=e?k(u.id,e):k(u.id),j(t,x.getSelectedNodeId()),I(t)})),t&&(e?L(t):O(t))}},x.lineLabelClicked=function(t){x.dispatchEvent("lineLabelClicked",t)},x.precalculateRootPositions=function(){I(g)},x.getCurrentLineAttr=function(t){const e=C.getLayout();if("connector"===t.type){const n=e.connectors[t.to];return n&&n.attr}if("link"===t.type){const n=e.links[`${t.ideaIdFrom}_${t.ideaIdTo}`];return n&&n.attr&&n.attr.style}throw new Error("invalid-args")},x.getLineProperties=function(t){const n=C.getLayout(),r=y&&y(),o=t=>{const r=n.nodes[t],o=e.getNodeViewForIdeaId(t);return i(r,o)},a=t=>{const r=n.nodes[t],o=e.getNodeViewForIdeaId(t);return s(r,o)};if("connector"===t.type){const e=a(t.from),n=a(t.to);return{fromBox:e,toBox:n,connection:l(e,n,x.getCurrentLineAttr(t)||{},r)}}if("link"===t.type){const e=o(t.ideaIdFrom),n=o(t.ideaIdTo);return{fromBox:e,toBox:n,connection:c(e,n,x.getCurrentLineAttr(t),r)}}}}},28625:t=>{"use strict";t.exports=function(t,e){if(!t||!e)return e;const n=t.attr.style&&t.attr.style.fontMultiplier;return!n||e.hasFontMultiplier||!e.font||Math.abs(n)<=.01||Math.abs(n-1)<=.01||(e.font.size&&(e.font.size=e.font.size*n),e.font.lineSpacing&&(e.font.lineSpacing=e.font.lineSpacing*n),e.font.sizePx&&(e.font.sizePx=e.font.sizePx*n),e.font.lineSpacingPx&&(e.font.lineSpacingPx=e.font.lineSpacingPx*n),e.hasFontMultiplier=!0),e}},30562:(t,e,n)=>{"use strict";const r=n(66661),o=n(84443),i=n(28625);t.exports=function(t,e){if(!(e&&t&&t.attr&&t.attr.style))return e;const n=o(t,e),s=r({},e,n);return i(t,s),s}},56720:t=>{"use strict";t.exports=function(t,e,n){const r=e.top+.5*e.height;return r<t.top-n?"above":r>t.top+t.height+n?"below":"horizontal"}},17668:t=>{"use strict";t.exports=function(t){const e=[],n=t=>{e.includes(t)||e.push(t)};return t&&Array.isArray(t)&&t.forEach((t=>{t&&t.node&&Array.isArray(t.node)?t.node.forEach((t=>n(t.name))):t&&t.nodeOrder&&Array.isArray(t.nodeOrder)?t.nodeOrder.forEach(n):t&&t.node&&Object.keys(t.node).forEach((t=>n(t)))})),e}},20835:(t,e,n)=>{"use strict";const r=n(93779);t.exports=function(t){return t.color&&0!==t.opacity?t.opacity?"rgba("+r(t.color).join(",")+","+t.opacity+")":t.color:"transparent"}},93779:(t,e,n)=>{"use strict";const r=n(19767),o=new RegExp(/^rgba?\(([^,\s]+)[,\s]*([^,\s]+)[,\s]*([^,\s()]+).*$/);t.exports=function(t){return function(t){let e;if(o.test(t)&&(e=t.match(o),4===e.length))return r.map(e.slice(1),(t=>parseInt(t)))}(t)||function(t){const e=t.toString(16).match(/[a-f0-9]{6}/i);let n,r,o,i;if(e)return n=parseInt(e[0],16),r=n>>16&255,o=n>>8&255,i=255&n,[r,o,i]}(t)||[0,0,0]}},46306:(t,e,n)=>{"use strict";const r=n(15450),o=n(11562),i=n(13612),s=n(97339),a=n(52791),c=n(92088),l=new r(o({defaultTheme:i.default}));t.exports=function(t,e,n,r){const o=(r||l).connectorTheme({parent:t,child:e,connectorAttr:n}),i=function(t,e,n,r){const o=Math.min(t.left,e.left),i=Math.min(t.top,e.top),s=r.line.width,l=Number.isFinite(s)&&s||0,d=Math.ceil(l/2),u={left:o,top:i,width:Math.max(t.left+t.width,e.left+e.width,o+1)-o,height:Math.max(t.top+t.height,e.top+e.height,i+1)-i},h={x:a[r.connectionPositionFrom.h](t,e,r.fromInset,r),y:c[r.connectionPositionFrom.v](t,e,r.fromInset,r)},f={x:a[r.connectionPositionTo.h](e,t,r.toInset,r),y:c[r.connectionPositionTo.v](e,t,r.toInset,r)};let p=!1,g=!1;return"underline"!==r.borderType&&"underline-radiused"!==r.borderType||(p={radiused:!("underline-radiused"!==r.borderType),from:{x:e.left,y:e.top+e.height+1},to:{x:e.left+e.width,y:e.top+e.height+1}}),"overline"===r.borderType&&(g={from:{x:e.left-d,y:e.top-d},to:{x:e.left+e.width+d,y:e.top-d}},f.y=f.y-l),{from:h,to:f,nodeUnderline:p,nodeOverline:g,minHeight:Math.min(e.height,t.height),position:u}}(t,e,0,o),d=function(t,e){if(e.nodeUnderline){const n=t.initialRadius||0,r=Number.isFinite(t.cornerRadius)?t.cornerRadius:n,o=n-r,i=e.nodeUnderline&&Math.floor(.5*Math.abs(e.nodeUnderline.to.x-e.nodeUnderline.from.x))-1;e.nodeUnderline.radiused?t.afterArrowD="M"+(e.nodeUnderline.from.x-e.position.left)+","+(e.nodeUnderline.from.y-e.position.top-n)+(o?`v ${o}`:"")+(r?"q0,"+r+" "+r+","+r:"")+" h"+2*(i-r)+(r?"q"+r+",0 "+r+","+-1*r:"")+(o?`v -${o}`:""):t.afterArrowD="M"+(e.nodeUnderline.from.x-e.position.left)+","+(e.nodeUnderline.from.y-e.position.top)+" H"+(e.nodeUnderline.to.x-e.position.left)}return t}(s[o.type](i,o),i),u=function(t,e){const n=t.initialRadius||0,r=Number.isFinite(t.cornerRadius)?t.cornerRadius:n,o=n-r,i=e.nodeOverline&&Math.floor(.5*Math.abs(e.nodeOverline.to.x-e.nodeOverline.from.x))-1;return e.nodeOverline&&(t.afterArrowD||(t.afterArrowD="M"+(e.nodeOverline.from.x+i+1-e.position.left)+","+(e.nodeOverline.from.y-e.position.top)),t.afterArrowD+="m"+-1*i+","+n+(o?`v -${o}`:"")+(r?"q0,"+-1*r+" "+r+","+-1*r:"")+" h"+2*(i-r)+(r?"q"+r+",0 "+r+","+r:"")+(o?`v ${o}`:"")),t}(d,i);return Object.assign(u,o.line,{theme:o,position:i.position}),u}},13064:(t,e,n)=>{"use strict";const r=n(48025),o=n(19607);t.exports=function t(e){if(!e)throw new Error("invalid-args");const{prefix:n,target:i,currentObject:s}=e,a=s||i,c=t=>{if("string"==typeof t&&t.startsWith(n)){const e=t.slice(n.length).split("."),o=r({target:i,keyArray:e});if("string"==typeof o&&o.startsWith(n))throw new Error("referencing-reference-value");return o}return t};if(!n||!i||!o(i))throw new Error("invalid-args");return Object.keys(a).forEach((e=>((e,r)=>{const s=e[r];"string"==typeof s?e[r]=c(s):o(s)?t({prefix:n,target:i,currentObject:s}):Array.isArray(s)&&s.forEach(((e,r)=>{const a=s[r];o(a)?t({prefix:n,target:i,currentObject:s[r]}):s[r]=c(a)}))})(a,e))),i}},81364:t=>{"use strict";const e={Sans:"NotoSans, 'Helvetica Neue', Roboto, Helvetica, Arial, sans-serif",Serif:"NotoSerif, serif",Mono:"NotoSansMono, monospace",Marker:"Nothing You Could Do","Thick Marker":"Permanent Marker","Hand Writing":"Rock Salt",Stencil:"Saira Stencil One",Comic:"Love Ya Like A Sister",Block:"Londrina Solid"},n={emoji:"system-ui, emoji, System Emoji, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Emoji"};t.exports=function(t){return t&&t.textFontOnly?e:Object.assign({},e,n)}},25764:(t,e,n)=>{"use strict";const r={light:"200","semi-bold":"600"},o=n(81364)();t.exports=(t,e)=>{if(!t||!Object.keys(t).length)return!1;const n=t.family&&o[t.family]||o.Sans;return e&&e.familyOnly?n:"normal normal "+function(t){return t&&t.weight?r[t.weight]||t.weight:"bold"}(t)+" "+function(t){const e=t&&t.size||12;return e+"pt/"+((e+(t&&Number.isFinite(t.lineSpacing)?t.lineSpacing:3))/e).toFixed(2)}(t)+" "+n}},8035:(t,e,n)=>{"use strict";const r=n(93779);t.exports=function(t){const e=function(){const e=(o=r(t),i=r("#EEEEEE"),[Math.round(.5*(o[0]+i[0])),Math.round(.5*(o[1]+i[1])),Math.round(.5*(o[2]+i[2]))]),n=[];var o,i;let s;for(let t=0;t<e.length;t++)s=e[t]/255,n[t]=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4);return.2126*n[0]+.7152*n[1]+.0722*n[2]}();return e<.5?"lightColor":e<.9?"color":"darkColor"}},50735:t=>{"use strict";t.exports={dashed:"8, 8",dotted:"2, 4",solid:""}},82867:t=>{"use strict";t.exports={strokes:(t,e)=>{if(!t||"solid"===t)return"";const n=4*Math.max(e||1,1);return"dashed"===t?[n,n].join(", "):[1,n].join(", ")},linecap:t=>t&&"solid"!==t?"dotted"===t?"round":"":"square"}},97339:t=>{"use strict";const e=function(t){return{d:"M"+Math.round(t.from.x-t.position.left)+","+Math.round(t.from.y-t.position.top)+"L"+Math.round(t.to.x-t.position.left)+","+Math.round(t.to.y-t.position.top)}};t.exports={quadratic:function(t,n){const r=(t,e)=>{if(!e)return e;const n=e<0?-1:1;return Math.min(Math.abs(t),Math.abs(e))*n},o=Math.round(t.from.x-t.position.left),i=Math.round(t.from.y-t.position.top),s=Math.round(t.to.x-t.position.left),a=Math.round(t.to.y-t.position.top),c={x:s-o,y:a-i},l={x:c.x*n.controlPoint.width,y:c.y*n.controlPoint.height},d={x:c.x,y:Math.abs(c.y)+1.2*t.minHeight},u=o+r(d.x,l.x),h=i+r(d.y,l.y),f=["both","from"].includes(t.connectorArrows)?5:1;return Math.abs(c.y)<f?e(t):{d:"M"+o+","+i+"Q"+u+","+h+" "+s+","+a}},"s-curve":function(t){const e=Math.round(t.to.x-t.from.x),n=Math.round(t.to.y-t.from.y),r=10<Math.abs(.5*e)?10*Math.sign(e):Math.round(.5*e),o=10<Math.abs(.5*n)?10*Math.sign(n):Math.round(.5*n);return{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"q"+r+",0 "+r+","+o+"c0,"+(n-2*o)+" "+Math.round(e/2-r)+","+(n-o)+" "+(e-r)+","+(n-o)}},"top-down-s-curve":function(t,e){const n=Math.round(t.to.x-t.from.x),r=Math.round(t.to.y-t.from.y),o=15*Math.sign(n),i=15*Math.sign(r),s=Math.sign(r),a=s?"v"+s:"",c=Math.round(.5*r),l=Math.sign(c),d=Math.abs(c),u=l*Math.min(d,e?.controlPoint?.beforeEnd||d),h=r-u-i;return 15>Math.abs(n/2)?function(){const e=h+Math.round(.5*i);return{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"v"+e+"l"+n+","+(r-e-s)+a,initialRadius:5}}():{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"v"+h+"q0,"+i+" "+o+","+i+"h"+(n-2*o)+"q"+o+",0 "+o+","+i+"v"+(u-i),initialRadius:5}},"compact-s-curve":function(t){const e=Math.round(t.to.x-t.from.x),n=Math.round(t.to.y-t.from.y),r=10*Math.sign(e),o=10*Math.sign(n),i=e-2*r,s=i?"h"+i:"";return 10>Math.abs(.5*e)||10>Math.abs(.5*n)?function(){const r=Math.round(e/2);return{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"l"+r+",0 l"+(e-r-Math.sign(e))+","+n+"h"+Math.sign(e)}}():{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"q"+r+",0 "+r+","+o+"v"+(n-2*o)+"q0,"+o+" "+r+","+o+s}},"vertical-quadratic-s-curve":function(t,e){const n=Math.round(t.to.x-t.from.x),r=Math.round(t.to.y-t.from.y),o=n/2,i=r/2,s=e&&e.line&&e.line.initialRadius||10,a=e&&e.line&&e.line.cornerRadius;return Math.abs(n)<20?{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"l"+n+","+r,initialRadius:s,cornerRadius:a}:{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"q0,"+Math.round(i/2)+" "+o+","+i+"q"+o+","+Math.round(i/2)+" "+o+","+i,initialRadius:s,cornerRadius:a}},"vertical-s-curve":function(t){const e=Math.round(t.to.x-t.from.x),n=Math.round(t.to.y-t.from.y),r=10*Math.sign(e),o=10*Math.sign(n);return 10>Math.abs(.5*e)||10>Math.abs(.5*n)?{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"l"+e+","+n}:{d:"M"+(t.from.x-t.position.left)+","+(t.from.y-t.position.top)+"q0,"+o+" "+r+","+o+"h"+(e-2*r)+"q"+r+",0 "+r+","+o+"v"+(n-2*o)}},straight:e,"straight-s":function(t){const e=Math.sign(t.to.x-t.from.x);return{d:"M"+Math.round(t.from.x-t.position.left)+","+Math.round(t.from.y-t.position.top)+"h"+e+"L"+Math.round(t.to.x-t.position.left-e)+","+Math.round(t.to.y-t.position.top)+"h"+e}},"straight-s-to":function(t){const e=Math.sign(t.to.x-t.from.x);return{d:"M"+Math.round(t.from.x-t.position.left)+","+Math.round(t.from.y-t.position.top)+"L"+Math.round(t.to.x-t.position.left-e)+","+Math.round(t.to.y-t.position.top)+"h"+e}},"brolly-handle":(t,e)=>{const n=Math.round(t.to.y-t.from.y),r=e?.line?.initialRadius||0,o=Math.min(r,Math.abs(n))*Math.sign(n);return{d:"M"+Math.round(t.from.x-t.position.left)+","+Math.round(t.from.y-t.position.top)+"v"+(t.to.y-t.from.y-o)+"q0,"+o+" "+(t.to.x-t.from.x)+","+o}},"no-connector":function(t){return{d:"M"+Math.round(t.to.x-t.position.left)+","+Math.round(t.to.y-t.position.top)}}}},26734:(t,e,n)=>{"use strict";const r=n(15450),o=n(11562),i=n(81246),s=function(t,e,n){const r=Math.tan(Math.PI/9),o=e.x-t.x,i=e.y-t.y;let s,a,c,l,d,u,h=14;return 0===o?(s=i<0?-1:1,a=e.x+h*Math.sin(r)*s,c=e.x-h*Math.sin(r)*s,l=e.y-h*Math.cos(r)*s,d=e.y-h*Math.cos(r)*s):(u=i/o,t.x<e.x&&(h=-h),a=e.x+(1-u*r)*h/Math.sqrt((1+u*u)*(1+r*r)),l=e.y+(u+r)*h/Math.sqrt((1+u*u)*(1+r*r)),c=e.x+(1+u*r)*h/Math.sqrt((1+u*u)*(1+r*r)),d=e.y+(u-r)*h/Math.sqrt((1+u*u)*(1+r*r))),"M"+Math.round(a-n.left)+","+Math.round(l-n.top)+"L"+Math.round(e.x-n.left)+","+Math.round(e.y-n.top)+"L"+Math.round(c-n.left)+","+Math.round(d-n.top)+"Z"},a=n(82867);t.exports=function(t,e,n,c){const l=function(t,e){const n=[{x:t.left+Math.round(.5*t.width),y:t.top},{x:t.left+t.width,y:t.top+Math.round(.5*t.height)},{x:t.left+Math.round(.5*t.width),y:t.top+t.height},{x:t.left,y:t.top+Math.round(.5*t.height)}],r=[{x:e.left+Math.round(.5*e.width),y:e.top},{x:e.left+e.width,y:e.top+Math.round(.5*e.height)},{x:e.left+Math.round(.5*e.width),y:e.top+e.height},{x:e.left,y:e.top+Math.round(.5*e.height)}];let o,i,s,a,c,l,d,u=1/0;for(o=0;o<n.length;o+=1)for(i=0;i<r.length;i+=1)c=n[o].x-r[i].x,l=n[o].y-r[i].y,d=c*c+l*l,d<u&&(s=o,a=i,u=d);return{from:n[s],to:r[a]}}(t,e),d=c||new r(o({defaultTheme:i})),u=n||{},h=Math.min(t.left,e.left),f=Math.min(t.top,e.top),p={left:h,top:f,width:Math.max(t.left+t.width,e.left+e.width,h)-h,height:Math.max(t.top+t.height,e.top+e.height,f)-f},g=d.linkTheme(u.type),m=u.width||g.line.width,v=u.lineStyle||g.line.lineStyle,y={color:u.color||g.line.color,strokes:a.strokes(v,m),linecap:a.linecap(v,m),width:m};return{d:"M"+Math.round(l.from.x-p.left)+","+Math.round(l.from.y-p.top)+"L"+Math.round(l.to.x-p.left)+","+Math.round(l.to.y-p.top),position:p,arrows:u.arrow&&"false"!==u.arrow&&function(t){if(!t)return!1;const e=[];return"from"!==t&&e.push(s(l.from,l.to,p)),"from"!==t&&"both"!==t||e.push(s(l.to,l.from,p)),e}(u.arrow),theme:g,lineProps:y,label:u.label}}},11562:(t,e,n)=>{"use strict";const r=n(66661),o=n(13064),i=n(19607),s=n(89974),a=n(93345),c=n(17668);t.exports=function(t){if(!t)throw new Error("invalid-args");const{defaultTheme:e,selectedTheme:n,themeOverride:l}=t,d=t=>JSON.parse(JSON.stringify(t));return s(o({prefix:"theme:",target:d((()=>{if(!e||!i(e))throw new Error("invalid-args");if(!n&&!l)return Object.assign(a(e),{nodeOrder:c([e])});const t=r(a(e),a(n||{})),s=o({prefix:"base:",target:d(t)});return r(s,l?n&&n.blockThemeOverrides?{}:a(l):{},{nodeOrder:c([e,n,l])})})())}))}},58049:t=>{"use strict";t.exports=function(t){return{x:t.left+t.width/2,y:t.top+t.height/2}}},52791:(t,e,n)=>{"use strict";const r=function(t,e,n){return t.left+t.width<e.left?t.left+t.width-n:t.left+n},o=function(t,e){const n=e.left+e.width,r=t.width/2,o=t.left+r,i=e.left+e.width/2;return e.left>t.left+t.width?e.left-o:n<t.left?n-o:i-o},i=n(58049);t.exports={center:function(t){return Math.round(t.left+.5*t.width)},"center-outset":(t,e,n,r)=>{const o=i(e),s=r.line.arrowExtension.length+r.line.width,a=i(t),c=Math.abs(o.x-a.x)-(e.width+t.width)/2<2*s?3:s,l=t.width/2+c,d=t.height/2+c,u={dy:o.y-a.y,dx:o.x-a.x},h=u.dy?Math.abs(u.dx*d/u.dy):l,f=Math.min(h,l)*Math.sign(u.dx);return a.x+f},"center-separated-inset":(t,e,n)=>{const r=e.top,i=t.top,s=o(t,e),a=t.top+t.height,c=e.top+e.height,l=Math.abs(r-a),d=Math.abs(c-i),u=Math.min(l,d),h=t.width/2,f=h-n,p=1+Math.floor(f/20),g=Math.max(u-25,0),m=Math.min(Math.ceil(g/50),p),v=f-Math.min(20*m,f),y=Math.sign(s)*v;return Math.round(t.left+h+y)},"center-separated":function(t,e,n){const r=.2*t.height,i=n||10,s=t.width/2,a=e.top-t.top+t.height-r,c=o(t,e)/Math.abs(a)*r,l=Math.max(c,-1*s+i),d=Math.min(l,s-i);return Math.round(t.left+.5*t.width+d)},nearest:function(t,e){return r(t,e,0)},"nearest-outset":function(t,e,n,o){const i=o.line.arrowExtension.length+o.line.width;return r(t,e,-1*i)},"nearest-inset":r,"left-outset":function(t,e,n,r){const o=r.line.arrowExtension.length+r.line.width;return t.left-o},left:function(t){return t.left},"left-inset":function(t,e,n){return t.left+n}}},92088:(t,e,n)=>{"use strict";const r=n(58049),o={center:function(t){return Math.round(t.top+.5*t.height)},"center-outset":(t,e,n,o)=>{const i=r(e),s=r(t),a=o.line.arrowExtension.length+o.line.width,c=t.width/2+a,l=t.height/2+a,d={dy:i.y-s.y,dx:i.x-s.x},u=d.dx?Math.abs(d.dy*c/d.dx):l,h=Math.min(u,l)*Math.sign(d.dy);return s.y+h},"base-inset":function(t,e,n){return t.top+t.height+(-n||1)},base:function(t){return t.top+t.height+1},"base-outset":function(t,e,n,r){const o=r.line.arrowExtension.length+r.line.width;return t.top+t.height+o},nearest:function(t,e,n){const i=r(e),s=r(t);return i.y<t.top+t.height-n&&i.y>t.top+n?i.y:i.y<s.y?o["top-inset"](t,e,n):o["base-inset"](t,e,n)},"nearest-outset":function(t,e,n,i){const s=r(t);return t.top+t.height-n<e.top?o["base-outset"](t,e,n,i):t.top>e.top+e.height-n?o["top-outset"](t,e,n,i):s.y},top:function(t){return t.top-1},"top-inset":function(t,e,n){return t.top+n},"top-outset":function(t,e,n,r){const o=r.line.arrowExtension.length+r.line.width;return t.top-o},"center-separated-inset":function(t,e,n){const o=r(t),i=t.width/2,s=t.height/2-n,a=r(e),c=a.x-o.x,l=i*(a.y-o.y)/c,d=l>0?Math.min(l,s):Math.max(l,-1*s);return Math.round(o.y+d)}};t.exports=o},84443:(t,e,n)=>{"use strict";const r=n(8035);t.exports=function(t,e){const n=t=>!["false","transparent"].includes(t)&&t,o="surround"!==e.borderType,i=t.attr&&t.attr.style&&t.attr.style.textAlign,s={text:{}},a=t.attr?.style&&n(t.attr.style.background),c=t.attr?.style?.borderColor;return t.attr&&t.attr.style&&t.attr.style.text&&n(t.attr.style.text.color)&&(s.text.color=t.attr.style.text.color),i&&(s.text.alignment=i),t.attr&&t.attr.style&&n(t.attr.style.backgroundColor)&&(s.backgroundColor=t.attr.style.backgroundColor),a&&(o?s.text.color=s.text.color||a:s.backgroundColor||(s.backgroundColor=a,s.text.color=s.text.color||e.text[r(a)])),t.attr&&t.attr.style&&t.attr.style.fontFamily&&(s.font={family:t.attr.style.fontFamily}),0===Object.keys(s.text).length&&delete s.text,c&&n(c)&&(s.lineColor=c),Number.isFinite(t.attr?.style?.borderWidth)&&(s.lineWidth=t.attr?.style?.borderWidth),Number.isFinite(t.attr?.style?.cornerRadius)&&(s.cornerRadius=t.attr?.style?.cornerRadius),s}},26515:(t,e,n)=>{"use strict";const r=n(66661),o=n(20835),i=n(19607),s=function(t,e,n){if(!t||!e||!e.length)return void 0===t&&n||t;if(1===e.length)return void 0===t[e[0]]&&n||t[e[0]];let r=e.slice(0),o=t;for(;r.length>0;){if(o=o[r[0]],void 0===o)return n;r=r.slice(1)}return o};t.exports={attributeForPath:s,themeAttributeValue:(t,e,n,o,a)=>{const c=s(t,e);let l=[{}];if(!c)return a;if(n&&n.length)l=l.concat(n.slice(0).reverse().map((t=>c[t])).filter((t=>!!t)));else{if(!i(c))return o&&o.length?a:c;l.push(c)}return s(r.apply(r,l),o,a)},nodeAttributeToNodeTheme:t=>{const e={},n=t&&s(t,["unlabelled"]),r=t&&s(t,["nodeEditingContext"]);return t&&(e.margin=s(t,["text","margin"]),e.font=s(t,["text","font"]),e.text=s(t,["text"]),e.borderType=s(t,["border","type"]),e.backgroundColor=function(){const e=s(t,["background"]);return e?o(e):s(t,["backgroundColor"])}(),e.cornerRadius=s(t,["cornerRadius"]),e.lineColor=s(t,["border","line","color"]),e.lineWidth=s(t,["border","line","width"]),e.lineStyle=s(t,["border","line","style"]),e.decorations=s(t,["decorations"]),r&&(e.nodeEditingContext=r),n&&(e.unlabelled=s(t,["unlabelled"]))),e},connectorControlPoint:(t,e,n,r)=>{const o=r?"-arrow":"",i=n&&s(t,["connector",n,"controlPoint"+(r?`-arrow-${r}`:""),e]),a=!i&&n&&s(t,["connector",n,`controlPoint${o}`,e]),c=!(i||a)&&n&&s(t,["connector",n,"controlPoint",e]),l=!(i||a||c)&&t.connector[t.node.default.connections.style],d=l&&("horizontal"===e?l.controlPoint.horizontal:l.controlPoint.above),u=i||i||c||d;return Object.assign({},u)}}},73361:(t,e,n)=>{"use strict";const r=n(20835),o=n(19607),i=n(25764),s=n(78566);t.exports=function(){const t={cornerRadius:"border-radius","text.color":"color",background:"background-color",backgroundColor:"background-color",border:"border",shadow:"box-shadow","text.font":"font","text.alignment":"text-align"},e={cornerRadius:s,background:r,border:function(t){if(!t.line||"underline"===t.type||"overline"===t.type)return"0";const e=Number.isFinite(t.line.margin)?t.line.margin:-1*t.line.width,n=e?";margin:"+s(e):"";return t.line.width+"px "+(t.line.style||"solid")+" "+t.line.color+n},shadow:function(t){const e=[];return 1===t.length&&"transparent"===t[0].color?"none":(t.forEach((t=>{e.push(t.offset.width+"px "+t.offset.height+"px "+t.radius+"px "+r(t))})),e.join(","))},"text.font":i};this.process=function(n){let r="";return n.node&&(r=(t=>t.noAnimations?[]:['body:not(.noTransition) .mapjs-node:not(.noTransition):not(.dragging), body:not(.noTransition) [data-mapjs-role="svg-container"] :not(.noTransition), body:not(.noTransition) [data-mapjs-role="svg-container"] :not(.noTransition) :not(.noTransition) { transition-property: transform, left, d, top, opacity; transition-duration: 400ms;}'])(n).concat(function(n){let r,a;const c=[],l=t=>t,d=Array.isArray(n.node)?n.node:n.nodeOrder.map((t=>Object.assign({name:t},n.node[t]))),u=(n,i)=>{Object.keys(n).forEach((s=>{const d=n[s],h=(i||"")+s;t[h]?(r=e[h]||l,a=r(d),a&&(c.push(t[h]),c.push(":"),c.push(a),c.push(";"))):o(d)&&u(d,h+".")}))};return d.forEach((t=>{let e=".mapjs-node";"default"!==t.name&&(e=e+"."+t.name.replace(/\s/g,"_")),c.push(e),c.push("{"),u(t),c.push("}"),function(t,e){if(!e||!e.decorations)return;const n=e.decorations.height-2*e.decorations.margin,r=e.decorations.stickers||d[0].decorations.stickers;c.push(t),c.push(" .mapjs-decorations{position:absolute;"),c.push(`font-size:${n}px;line-height:1;`),c.push(`color:${e.decorations.color};`),c.push(`background-color:${e.decorations.backgroundColor};`),c.push(`border-radius:${s(e.decorations.cornerRadius)};`),c.push(`opacity:${e.decorations.opacity};`),c.push(`padding:${e.decorations.margin}px;`),c.push("}"),c.push(t),c.push(" .mapjs-decorations a {"),c.push(`padding:${e.decorations.margin}px;`),c.push(`color:${e.decorations.color};`),c.push(`background-color:${e.decorations.backgroundColor};`),c.push(`border-radius:${s(e.decorations.cornerRadius)};`),c.push("}"),e.decorations.label&&(c.push(t),c.push(" .mapjs-decorations .mapjs-label{"),c.push("min-width:1em;"),c.push(`font:${i(e.decorations.label.font)};`),c.push(`border:${s(e.decorations.label.border)} solid ${e.decorations.color};`),c.push(`border-radius:${s(e.decorations.label.cornerRadius)};`),c.push(`padding:${s(e.decorations.label.margin)};`),c.push("}")),r&&(c.push(t),c.push(" .mapjs-decorations .mapjs-stickers {"),c.push(`font-family:${i(r.font,{familyOnly:!0})};`),c.push("font-weight: normal;"),c.push("}"))}(e,t)})),c}(n)).join("")),{css:r}},this.cssFont=e["text.font"]}},83918:(t,e,n)=>{"use strict";const r=n(19767),o=n(30562),i=n(13612),s=n(11562),a=n(13612),c=n(15450),l=n(19607),d=n(66661),u=n(9737),h=n(78106);t.exports=function(t){let e,n={},f=!1,p={};const g=this,m=function(){const e=t.getActiveContent();return e?{themeFromRoot:e.getAttr("theme"),overrides:e.getAttr("themeOverrides")}:{}},v=function(e){if(!f){f={};const e=t.getActiveContent();h(e,((t,e)=>{f[t.id]=e}))}return f[e]},y=t=>t.attr?.condensed,w=function(t,e,n){return!(u(t.ideas)||t.attr?.collapsed)&&Object.values(t.ideas).forEach((r=>{const o=y(t)||n;w(r,e,o)})),e(t,n)},b=t=>{const e=m(),n=a.default,r=l(e.themeFromRoot)?e.themeFromRoot:i[e.themeFromRoot],o=d({},e.overrides||{},t||{});return s({defaultTheme:n,selectedTheme:r,themeOverride:o})},E=()=>(e||(e=(()=>{const t=m(),e=b();return{source:t,mergedThemeJson:e,result:new c(e)}})()),e),x=function(){return E().result};t.addListener((function(){n={},f=!1,p=!1,function(){if(!e)return!0;const t=m();return!r.isEqual(t,e.source)}()&&(e=!1)})),g.effectiveStylesForLevelAndAttr=(t,e)=>{const n=x(),r=!(!e||!e.collapsed),o=n&&n.nodeStyles&&n.nodeStyles(t,e)||["default"];return r&&o.push("collapsed"),o},g.getLevelForIdeaId=v,g.getThemeJSON=t=>t?b(t):E().mergedThemeJson,g.getTheme=x,g.getNodeThemeForLevelAndAttr=(t,e)=>{const n=x(),r=n.nodeTheme(n.nodeStyles(t,e));return o({attr:e},r)},g.getNodeTheme=function(e){if(n[e])return n[e];const r=x(),i=t.getActiveContent().findSubIdeaById(e),s=function(e,n){if(!e)return["default"];const r=v(e.id),o=n?.nodeStyles&&n.nodeStyles(r,e.attr)||["default"];if(e.attr&&e.attr.collapsed)o.push("collapsed");else{const n=function(e){if(!p){p={};const e=t.getActiveContent();w(e,((t,e)=>{e?p[t.id]="condensed-child":y(t)&&(p[t.id]="condensed")}))}return p[e]}(e.id);n&&o.unshift(n)}return o}(i,r),a=i&&r.nodeTheme(s);return i?(n[e]=o(i,a),n[e].effectiveStyles=s,n[e]):{}}}},93345:t=>{"use strict";t.exports=function(t){const e=Object.assign({},t),n=e.node;return e&&Array.isArray(e.node)&&(e.node={},n.forEach((function(t){e.node[t.name]=t}))),e}},15450:(t,e,n)=>{"use strict";const r=n(26515),o="theme-auto-color",i="theme_inherit",s=n(56720);t.exports=function(t){const e=this,n=t.node.default.connections.style||"default",a=t.connector[n],c={type:a.type,label:a.label,line:a.line},l=(e,n,o,i)=>r.themeAttributeValue(t,e,n,o,i);e.name=t&&t.name,e.connectorEditingContext=t&&t.connectorEditingContext,e.attributeValue=(t,e,n,r)=>l(t,e,n,r),e.nodeStyles=function(t,e){const n=["level_"+t,"default"];return e&&e.group&&(n.unshift("attr_group"),"string"!=typeof e.group&&"number"!=typeof e.group||n.unshift("attr_group_"+e.group)),e&&e.styleNames&&Array.isArray(e.styleNames)?e.styleNames.concat(n):n},e.nodeTheme=function(t){const e=l(["node"],(t||[]).concat(["default"]));return r.nodeAttributeToNodeTheme(e)},e.getFontForStyles=t=>{const e=l(["node"],t,["text","font","weight"]);return{size:l(["node"],t,["text","font","size"]),weight:e,lineGap:l(["node"],t,["text","font","lineSpacing"])}},e.getNodeMargin=t=>{if(!t||!Array.isArray(t))throw new Error("invalid-args");return l(["node"],t,["text","margin"])},e.canvasTheme=()=>Object.assign({},t.canvas),e.linkTheme=e=>{const n=r.attributeForPath(t,["link",e||"default"]),o=t.link.default,i=Object.assign({},o,n);return i.label&&"object"==typeof i.label&&(i.label=Object.assign({},i.label)),i},e.noAnimations=()=>!!t.noAnimations,e.getLayoutConnectorAttributes=e=>{const n=l(["node"],e,["connections","style"]),o=r.attributeForPath(t,["connector",n])||Object.assign({},c),i={};return o&&o.line&&(i.parentConnector={color:o.line.color}),i},e.cleanPersistedAttributes=t=>(t&&t.parentConnector&&t.parentConnector.themeAutoColor&&(t.parentConnector.themeAutoColor===t.parentConnector.color&&delete t.parentConnector.color,delete t.parentConnector.themeAutoColor,t&&t.parentConnector&&Object.keys(t.parentConnector).length||delete t.parentConnector),t),e.getPersistedAttributes=(e,n,s)=>{const d=l(["node"],["level_"+n,"default"],["connections","style"]),u=r.attributeForPath(t,["connector",d])||Object.assign({},c),h=(e=>{const n=[o,i].includes(a.line.color)?"#707070":a.line.color,r=t.autoColors||[n];return r[e%r.length]})(s),f={attr:e&&e.parentConnector&&{parentConnector:e.parentConnector}||{},removed:[]};return u&&u.line&&u.line.color===o?f.attr.parentConnector=Object.assign({color:h,themeAutoColor:h},f.attr.parentConnector):f.attr.parentConnector&&f.attr.parentConnector.themeAutoColor&&(f.attr.parentConnector=Object.assign({},f.attr.parentConnector),f.attr.parentConnector.themeAutoColor===f.attr.parentConnector.color&&delete f.attr.parentConnector.color,delete f.attr.parentConnector.themeAutoColor,f&&f.attr&&f.attr.parentConnector&&Object.keys(f.attr.parentConnector).length||(f.removed.push("parentConnector"),delete f.attr.parentConnector)),f},e.connectorTheme=({parent:e,child:n,connectorAttr:o})=>{const i=s(e,n,10),a=e.styles||["default"],d=n.styles||["default"],u=((e,n)=>{const o=l(["node"],n||[],["connections","style"]),i=r.attributeForPath(t,["connector",o]);return e&&e.arrow||i&&i.line&&i.line.arrow})(o,d),h=l(["node"],a,["connections","style"]),f=l(["node"],d,["connections","style"]),p=l(["node"],a,["connections",h],{h:"center",v:"center"}),g=l(["node"],d,["connections",f],{h:"nearest-inset",v:"center"}),m=["from","both"].includes(u)?"from-arrow":"from",v=["to","both"].includes(u)?"to-arrow":"to",y=Object.assign({},p,l(["node"],a,["connections",m,i],{})),w=Object.assign({},g,l(["node"],d,["connections",v],{})),b=l(["node"],a,["cornerRadius"],10),E=l(["node"],d,["cornerRadius"],10),x=l(["node"],d,["border","type"],""),S=i||"horizontal",A=l(["node"],d||[],["connections","style"]),C=a&&l(["node"],a,["connections","childstyle"]),I=r.attributeForPath(t,["connector",A]),k=C&&r.attributeForPath(t,["connector",C]),F=C&&C+"."+A,M=F&&r.attributeForPath(t,["connector",F]),T=M&&F||k&&C||A||"default",P=r.connectorControlPoint(t,S,T,u),L=Object.assign({},M||k||I||c);return L.label||(L.label=c.label),L.controlPoint=P,L.line=Object.assign({},L.line||c.line),L.line.lineStyle=L.line.lineStyle||"solid",L.label&&"object"==typeof L.label&&(L.label=Object.assign({},L.label)),L.line.arrowExtension={length:4,width:9},Object.assign(L.line,o),Object.assign(L,{connectionPositionFrom:y,connectionPositionTo:w,fromInset:b,toInset:E,borderType:x})}}},13612:(t,e,n)=>{"use strict";const r=n(66661),o=n(17668),i=n(93345),s=function(t,e){return r({},i(t),i(e),{nodeOrder:o([t,e])})},a=n(2160),c=n(48758),l=n(45425),d=n(74179),u=n(50347),h=n(17457),f=n(4468),p=s(a,c),g=s(f,n(55287));t.exports={default:n(81246),simple:n(3631),productivity:n(74986),simplestraight:n(93038),straightlines:n(23359),topdownSimple:l,bottomUpSimple:s(l,d),topdownStandard:u,bottomUpStandard:s(u,h),argMappingSimple:a,argMappingBottomUp:s(a,f),argMappingHighImpact:p,argMappingHighImpactBottomUp:s(p,g)}},68884:t=>{"use strict";t.exports=function(t,e){const n=t&&t.style&&t.style.width,r=e&&e.text&&e.text.maxWidth,o=n||r;return["top","bottom","center"].includes(t&&t.icon&&t.icon.position)?Math.max(t.icon.width,o):o}},79871:(t,e,n)=>{"use strict";const r=n(84839);t.exports=function(t,e){return t.map((t=>{const n=r(t),o=n&&n.split(" ").map((t=>parseInt(t,16)));return o&&String.fromCodePoint.apply(String,(i=o,e&&e.ignoreVariants?[i[0]]:i));var i}))}},62005:t=>{"use strict";t.exports=function(t){return t.replace(/[^A-Za-z0-9_-]/g,"_")}},84839:t=>{"use strict";t.exports=function(t){const e=t&&"string"==typeof t&&t.split(":");if(!e||2!==e.length||"emoji"!==e[0])throw new Error("invalid-args");return e[1]}},49532:(t,e,n)=>{"use strict";const r=n(62005);t.exports=function(t){return r("connector_"+t.from+"_"+t.to)}},7480:(t,e,n)=>{"use strict";const r=n(19767);t.exports=function(t){const e=r.omit(t,"left","top");return e.transform="translate("+t.left+"px,"+t.top+"px)",e}},89974:t=>{"use strict";const e=function(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((n=>{t.hasOwnProperty(n)&&null!==t[n]&&((t,e)=>("object"==typeof t[e]||"function"==typeof t[e])&&!Object.isFrozen(t[e]))(t,n)&&e(t[n])})),t};t.exports=e},98888:(t,e,n)=>{"use strict";const r=n(62005);t.exports=function(t){return r("link_"+t.ideaIdFrom+"_"+t.ideaIdTo)}},5644:(t,e,n)=>{"use strict";const r=n(62005);t.exports=function(t){return r("node_"+t)}},64919:t=>{"use strict";const e=(t,n)=>{if(!(t&&n&&n.length&&"object"==typeof t&&Array.isArray(n)))return!1;const r=t[n[0]],o=n.slice(1);return o.length?e(r,o):r},n=(t,e,r)=>{if(!(t&&e&&e.length&&"object"==typeof t&&Array.isArray(e)))return!1;const o=e.slice(1),i=e[0];if(o.length){if(!t[i]){if(!r)return;t[i]={}}n(t[i],o,r)}else r?t[i]=r:delete t[i]},r=(t,e)=>{if("object"==typeof e||Array.isArray(e))throw"search-type-not-supported";const n=[];return t&&"object"==typeof t?(Object.keys(t).forEach((o=>{const i=t[o];i===e&&n.push([o]),"object"==typeof i&&r(i,e).forEach((t=>{if(!t||!t.length)return;const e=[o].concat(t);n.push(e)}))})),n):[]};t.exports={getValue:e,setValue:n,keyComponentsWithValue:r}},89080:t=>{"use strict";t.exports=function(t,e){let n=[];return t.addEventListener=function(t,e,r){t.split(" ").forEach((t=>{t&&n.push({type:t,listener:e,priority:r||0})}))},t.listeners=function(t){return n.filter((e=>e.type===t)).map((t=>t.listener))},t.removeEventListener=function(t,e){n=n.filter((t=>t.listener!==e))},t.dispatchEvent=function(t){const r=Array.prototype.slice.call(arguments,1);n.filter((e=>e.type===t)).sort(((t,e)=>e.priority-t.priority)).some((t=>{try{return!1===t.listener.apply(void 0,r)}catch(n){if(e&&e.throwErrors)throw n;console.trace("dispatchEvent failed",n,t)}}))},t}},78566:t=>{"use strict";t.exports=function(t){const e=t&&parseFloat(t);return e&&Number.isFinite(e)?`${e}px`:"0"}},15431:t=>{"use strict";t.exports=function t(e){if(Number.isFinite(e))return e;if(!e)return!1;if("object"!=typeof e)return e;const n={};return Object.keys(e).forEach((r=>{if(e.hasOwnProperty(r)){const o=t(e[r]);(Number.isFinite(o)||o)&&(n[r]=o)}})),0!==Object.keys(n).length&&n}},60058:t=>{"use strict";t.exports=function(t,e){return!t||e<2||!Number.isFinite(e)?t||"":t.split(",").map((t=>parseInt(t)+e-1)).join(",")}},31385:t=>{"use strict";t.exports=new function(){const t=this,e=/(https?:\/\/|www\.)[\w-]+(\.[\w-]+)+([\w()\u0080-\u00FF.,!@?'^=%&amp;:/~+#$'-]*[\w()\u0080-\u00FF!@?^=%&amp;/~+#$'-])?/i,n=function(t){return t?"/"===t[0]||/^[a-z]+:\/\//i.test(t)?t:"http://"+t:""};t.containsLink=function(t){return e.test(t)},t.getLink=function(t){const r=t&&t.match(e);return r&&r[0]?n(r[0]):r},t.stripLink=function(t){return t?t.replace(e,"").trim():""},t.formatLinks=function(e){return e?e.replace(t.getPattern(),(t=>`<a target="_blank" href="${n(t)}">${t}</a>`)):""},t.getPattern=function(){return new RegExp(e,"gi")},t.hrefUrl=n}},46553:(t,e,n)=>{"use strict";const r=n(55946);t.exports=function(t,e){const n=e||0===e,o=r(t,"span",".mapjs-label",n,{class:"mapjs-label"});return n&&(o.innerText=e),o}},59130:(t,e,n)=>{"use strict";const r=n(97721),o=n(55946);t.exports=function(t,e){const n=o(t,"a","a.mapjs-hyperlink",!!e,{target:"_blank",class:"mapjs-hyperlink icon-hyperlink","decoration-type":"map-link"});return e&&r(n,{href:e}),n}},20324:(t,e,n)=>{"use strict";const r=n(89507),o=n(37650);t.exports=function(t){const e=t.ownerDocument.createElement("div"),n=(()=>{const t=r();return t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.setAttribute("data-mapjs-role","svg-container"),t.setAttribute("class","mapjs-draw-container"),t})();return o(e,{position:"relative"}),e.setAttribute("data-mapjs-role","stage"),e.appendChild(n),t.appendChild(e),e}},637:(t,e,n)=>{"use strict";const r=n(81246),o=n(89507)("path");t.exports=function(t,e,n,i){const s=t.theme&&t.theme.label||r.connector.default.label,a=s.position||{},c=t.theme&&t.theme.line&&t.theme.line.width,l=Number.isFinite(c)&&c||0;if(o.setAttribute("d",i),Number.isFinite(a.aboveEnd)){const r=n.left+n.width/2-t.position.left,o=e.left+e.width/2-t.position.left,i=a.ratio||1;return{x:Math.round(o+i*(r-o)),y:n.top-t.position.top-a.aboveEnd-l}}if(a.belowEnd){const r=n.left+n.width/2-t.position.left,o=e.left+e.width/2-t.position.left,i=a.ratio||1;return{x:Math.round(o+i*(r-o)),y:n.top+n.height-t.position.top+a.belowEnd-l}}return Number.isFinite(a.aboveEndLeft)?{x:e.left-t.position.left,y:n.top-t.position.top-a.aboveEndLeft}:a.ratio?o.getPointAtLength(o.getTotalLength()*s.position.ratio):o.getPointAtLength(.5*o.getTotalLength())}},94807:(t,e,n)=>{"use strict";const r=n(78566),o=n(81364)();t.exports=function(t,e,n){if(!t||!e||!n)throw new Error("invalid-args");const i=t.metrics,s=t.theme;t.isGroup?(n.style.minWidth=r(e.width),n.style.minHeight=r(e.height)):(n.style.minWidth=r(i.bubble.width-2*i.bubble.border),n.style.minHeight=r(i.bubble.height-2*i.bubble.border)),s&&s.hasFontMultiplier?n.style.fontSize=s.font.size+"pt":n.style.fontSize="",s&&s.font&&s.font.family&&o[s.font.family]?n.style.fontFamily=o[s.font.family]:n.style.fontFamily="",s&&s.text&&s.text.alignment?n.style.textAlign=s.text.alignment:n.style.textAlign="",n.style.borderColor=s?.lineColor||"",n.style.borderWidth=r(s?.lineWidth),n.style.top=r(e.y+i.bubble.y),n.style.left=r(e.x+i.bubble.x),n.style.borderRadius=r(s.cornerRadius),n.style.position="absolute",n.style.color=s.text.color,n.style.backgroundColor=s.backgroundColor,n.style.opacity=1}},65870:(t,e,n)=>{"use strict";const r=n(78566);t.exports=function(t,e){if(!t||!e)throw new Error("invalid-args");const n=t.metrics;if(n.icon)if(e.style.backgroundImage=`url("${t.icon.url}")`,e.style.backgroundRepeat="no-repeat",e.style.backgroundSize=`${r(n.icon.width)} ${r(n.icon.height)}`,n.text){const t=n.icon.y-n.bubble.border-n.bubble.y,o=n.icon.x-n.bubble.border-n.bubble.x;e.style.backgroundPosition=`${r(o)} ${r(t)}`}else e.style.backgroundPosition="center center";else e.style.backgroundImage=""}},43509:(t,e,n)=>{"use strict";const r=n(78566);t.exports=function(t,e){if(!t||!e)throw new Error("invalid-args");const n=t.metrics,o=t.theme;n.text?(e.style.width=r(n.text.width),e.style.marginTop=r(n.text.y-n.bubble.border-n.bubble.y),e.style.marginLeft=r(n.text.x-n.bubble.border-n.bubble.x),e.style.marginBottom=r(n.bubble.y+n.bubble.height-n.text.y-n.text.height-n.bubble.border),e.style.marginRight=r(n.bubble.x+n.bubble.width-n.text.x-n.text.width-n.bubble.border),e.style.maxWidth=r(Math.max(o.text.maxWidth,n.text.width)),e.innerText=t.title||" "):(e.style.display="none",e.style.maxWidth=r(Math.max(o.text.maxWidth,n.bubble.width-o.margin)),e.style.margin=r(o.margin))}},9069:(t,e,n)=>{"use strict";const r=n(2971),o=n(37650),i=n(5644);t.exports=function(t,e){const n=document.createElement("div");return r(n,{id:i(t.id),tabindex:0,"data-mapjs-role":"node",class:"mapjs-node"}),o(n,{display:"block",opacity:0,position:"absolute",top:Math.round(t.y||0)+"px",left:Math.round(t.x||0)+"px"}),e.appendChild(n),n}},97149:(t,e,n)=>{"use strict";const r=n(2971),o=n(37650);t.exports=function(t){const e=t.ownerDocument.createElement("div");return r(e,{"data-mapjs-role":"reorder-bounds",class:"mapjs-reorder-bounds"}),o(e,{position:"absolute",display:"none"}),t.append(e),e}},89507:t=>{"use strict";t.exports=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t||"svg")}},93144:(t,e,n)=>{"use strict";const r=n(93157),o=n(9069),i=n(12394),s=n(98888),a=n(49532),c=n(22226),l=n(74100);t.exports=function(t,e){let n,d=!1;const{mapModel:u,stage:h,themeSource:f,nodeViewModel:p,mapView:g,draggableNodeController:m}=t,v=function(t,e){return!c.isEmpty(t)&&!!e&&c.find(t,(function(t){let n=e.x;return"right"===t.edge&&(n+=e.width),t.x&&t.margin?Math.abs(n-t.x)<2*t.margin&&e.y<t.maxY&&e.y>t.minY:e.y<t.maxY&&e.y>t.minY&&e.x<t.maxX&&e.x>t.minX}))},y=function(t,e){const n=u.getCurrentLayout().nodes[t];if(n){const t=Math.round(n.x+n.width/2),r=Math.round(n.y+n.height/2);h.centerViewOn(t,r,e)}};if(!(u&&h&&f&&p&&g))throw new Error("invalid args");m&&(m.addEventListener("nodeDraggedOnStage",((t,e)=>{const r=h.stagePositionForPointEvent(e),o=e&&e.shiftKey;if(!r||o)g.hideReorderBounds();else{const e=g.nodeWithId(t).getBoundingClientRect(),o={y:r.y,x:r.x,width:e.width,height:e.height},i=v(n,o);i?g.updateReorderBounds(i,o,r):g.hideReorderBounds()}})),m.addEventListener("nodeDroppedOnStage",(({nodeId:t,insetX:e,insetY:r},o)=>{g.hideReorderBounds();const i=o&&o.shiftKey,s=g.nodeWithId(t),a=h.stagePositionForPointEvent(o),c=s.getBoundingClientRect(),l=a&&{y:a.y,x:a.x,width:c.width,height:c.height},d=!!i||!v(n,l);return d?u.positionNodeAt(t,a.x-e,a.y-r,d):u.positionNodeAt(t,a.x,a.y)})),m.addEventListener("nodeDragStarted",(t=>{u.selectNode(t),n=u.getReorderBoundary(t)})),m.addEventListener("nodeDragEnded",(()=>{n=!1,g.hideReorderBounds()})),m.addEventListener("nodeDroppedOnNode",((t,e,n)=>{const r=n&&n.shiftKey;return u.dropNode(t,e,!!r)})),m.addEventListener("nodeDraggedOutOfStage",(()=>{g.hideReorderBounds()}))),u.setLayoutCalculator(((t,e)=>{const n=f();return r(t,(t=>p.getNodeViewForIdea(t).metrics),{contextNode:e,theme:n})})),u.addEventListener("nodeCreated",(t=>{const e=o(t,h.getDOMElement()),n=p.getNodeViewForIdeaId(t.id);e.addEventListener("click",(e=>{e.button&&-1!==e.button||(u.clickNode(t.id,e),e.stopPropagation())})),e.addEventListener("dblclick",(e=>{e.stopPropagation(),u.isEditingEnabled()?(u.selectNode(t.id),u.editNode("mouse")):u.toggleCollapse("mouse")})),e.addEventListener("contextmenu",(e=>{u.selectNode(t.id),u.requestContextMenu(e.pageX,e.pageY)&&e.preventDefault()})),["click","mousedown"].forEach((n=>e.addEventListener(n,(e=>{const n=e&&e.target&&e.target.getAttribute("decoration-type");n&&(u.decorationAction("mouse",t.id,n),"attachment"===n&&u.openAttachment("mouse",t.id),e.stopPropagation(),e.stopImmediatePropagation())})))),g.updateNodeScreenCoordinates(t,n),g.updateNodeContent(t,n),t.attr&&t.attr.group||l(e,t.id,u,h),u.isEditingEnabled()&&m&&m.makeNodeDraggable(e,t)})),u.addEventListener("nodeSelectionChanged",((t,e)=>{const n=g.nodeWithId(t),r=u.getCurrentLayout().nodes[t];n&&(e?(n.classList.add("selected"),h.ensureBoxVisible(r)):n.classList.remove("selected"))})),u.addEventListener("nodeRemoved",(t=>{g.fadeOutNode(t.id,f())})),u.addEventListener("nodeMoved",(t=>{const e=p.getNodeViewForIdeaId(t.id);g.updateNodeScreenCoordinates(t,e)})),u.addEventListener("nodeTitleChanged nodeAttrChanged nodeLabelChanged",(t=>{g.updateNodeContent(t,p.getNodeViewForIdeaId(t.id))})),u.addEventListener("connectorCreated",(t=>{const e=g.createSVGGroup({id:a(t),"data-mapjs-role":"connector"});g.updateConnector(Object.assign({domElement:e},u.getLineProperties(t))),e.addEventListener("click",(e=>{const n=f();(!n||!n.connectorEditingContext||n.connectorEditingContext.allowed&&n.connectorEditingContext.allowed.length)&&(e.stopPropagation(),e.target&&"text"===e.target.tagName?u.lineLabelClicked(t):u.selectConnector("mouse",t,e&&Number.isFinite(e.clientX)&&Number.isFinite(e.clientY)&&{x:e.clientX,y:e.clientY}))}))})),u.addEventListener("connectorRemoved",(t=>{g.fadeOutConnector(t,f())})),u.addEventListener("linkCreated",(t=>{const e=g.createSVGGroup({id:s(t),"data-mapjs-role":"link"});g.updateLink(Object.assign({domElement:e},u.getLineProperties(t))),e.addEventListener("click",(e=>{e.target&&"text"===e.target.tagName?u.lineLabelClicked(t):u.selectLink("mouse",t,{x:e.clientX,y:e.clientY}),e.stopPropagation()}))})),u.addEventListener("linkRemoved",(t=>{g.fadeOutLink(t,f())})),u.addEventListener("mapScaleChanged",(t=>{h.rescale(t)})),u.addEventListener("nodeVisibilityRequested",(t=>{const e=t||u.getCurrentlySelectedIdeaId(),n=u.getCurrentLayout().nodes[e];n&&h.ensureBoxVisible(n)})),u.addEventListener("nodeFocusRequested",(t=>{h.setScale(1),y(t,!0)})),u.addEventListener("mapViewResetRequested",(()=>{h.reset();const t=u.getCurrentLayout();Object.values(t.nodes).forEach((t=>h.ensureSpaceForBox(t))),t.connectors&&Object.keys(t.connectors).forEach((e=>{const n=t.connectors[e],r=i(n,h.getDOMElement());g.updateConnector(Object.assign({domElement:r},u.getLineProperties(n)))})),t.links&&Object.keys(t.links).forEach((e=>{const n=t.links[e],r=i(n,h.getDOMElement());g.updateLink(Object.assign({domElement:r},u.getLineProperties(n)))})),y(u.getCurrentlySelectedIdeaId())})),u.addEventListener("layoutChangeStarting",(()=>{h.dropCache()})),u.addEventListener("layoutChangeComplete",(()=>{const t=g.nodeWithId(u.getCurrentlySelectedIdeaId());if(t){const e=u.getCurrentLayout().nodes[u.getCurrentlySelectedIdeaId()];h.ensureBoxVisible(e),t.classList.add("selected")}u.getActivatedNodeIds().forEach((t=>{const e=g.nodeWithId(t);e&&e.classList.add("activated")}))})),e&&e.inlineEditingDisabled||u.addEventListener("nodeEditRequested",((t,e,n)=>{const r=u.getCurrentLayout().nodes[t];u.setInputEnabled(!1),h.finishScrolling(),g.editNode(t,r,e).then((e=>{u.setInputEnabled(!0),u.updateTitle(t,e,n)})).catch((e=>{const r=u.getCurrentLayout().nodes[t],o="blur"===e&&!!r?.attr?.icon?.url;u.setInputEnabled(!0),n&&!o&&u.undo("internal")})).then((()=>{const e=g.nodeWithId(t);e&&e.focus()}))})),u.addEventListener("linkAttrChanged linkMoved",(t=>{const e=i(t,h.getDOMElement());g.updateLink(Object.assign({domElement:e},u.getLineProperties(t)))})),u.addEventListener("connectorAttrChanged connectorMoved",(t=>{const e=i(t,h.getDOMElement());g.updateConnector(Object.assign({domElement:e},u.getLineProperties(t)))})),u.addEventListener("activatedNodesChanged",((t,e)=>{t.forEach((t=>{const e=g.nodeWithId(t);e&&e.classList.add("activated")})),e.forEach((t=>{const e=g.nodeWithId(t);e&&e.classList.remove("activated")}))})),u.addEventListener("themeChanged",h.updateStage),["nodeTitleChanged","nodeAttrChanged","nodeLabelChanged","nodeMoved","nodeRemoved","nodeCreated","connectorCreated","connectorRemoved","linkCreated","linkRemoved","linkAttrChanged","connectorAttrChanged"].forEach((t=>{u.addEventListener(t,(()=>function(t){d&&(d[t]||(d[t]=0),d[t]=d[t]+1)}(t)))})),h.getDOMElement().ownerDocument.fonts.addEventListener("loadingdone",(()=>{const t=h.getDOMElement().ownerDocument.activeElement,e=t&&t.hasAttribute("contenteditable");p.dropCache(),!e&&u&&u.rebuildRequired&&u.rebuildRequired()})),Object.assign(this,{resetStats:function(){d={}},getStats:function(){return d},stage:h})}},29622:(t,e,n)=>{"use strict";const r=n(89507),o=n(2971),i=n(14620),s=n(39044),a=n(62193),c=n(60474),l=n(97149),d=n(45894),u=n(4782),h=n(40426),f=n(12394),p=n(48629),g=n(88278);t.exports=function(t){if(!t)throw new Error("invalid-args");const e=l(t.getDOMElement());Object.freeze(Object.assign(this,{createSVGGroup:function(e){const n=r("g");return o(n,e),t.getSVGContainer().appendChild(n),n},updateLink:e=>s(Object.assign({stage:t},e)),updateConnector:e=>i(Object.assign({stage:t},e)),updateNodeContent:(e,n)=>{const r=a(t.getDOMElement(),e.id);t.ensureSpaceForBox(e),c(r,e,n)},updateNodeScreenCoordinates:(e,n)=>{const r=a(t.getDOMElement(),e.id);t.ensureSpaceForBox(e),g(r,e,n)},updateReorderBounds:(t,n,r)=>d(e,t,n,r),hideReorderBounds:()=>u(e),nodeWithId:e=>a(t.getDOMElement(),e),fadeOutNode:(e,n)=>h(a(t.getDOMElement(),e),n),fadeOutConnector:(e,n)=>h(f(e,t.getDOMElement()),n),fadeOutLink:(e,n)=>h(f(e,t.getDOMElement()),n),editNode:(e,n,r)=>p(t.getDOMElement(),a(t.getDOMElement(),e),n,r)}))}},90392:(t,e,n)=>{"use strict";const r=n(22226),o=n(25764),i=function(){const t=document.createElement("div");return t.style.position="absolute",t.style.visibility="hidden",t}(),s=r.memoize((function(t,e,n){document.querySelector("body").appendChild(i),i.style.font=o(n),i.style.maxWidth=e?`${e}px`:"",i.innerText=t;let r=i.getBoundingClientRect();const s=i.scrollWidth;return s>r.width&&(i.style.maxWidth=`${s}px`,r=i.getBoundingClientRect()),i.remove(),{width:Math.ceil(r.width),height:Math.ceil(r.height)}}),(function(t,e,n){const r=document.fonts.check(o(n));return JSON.stringify({title:t,maxWidth:e,fontInfo:n,fontLoaded:r})}));t.exports=s},49251:(t,e,n)=>{"use strict";const r="vnd/mindmup-node",o=n(89080),i=n(17431),s=n(83693);t.exports=function(t){let e,n;const a=o(this),c=t=>{const n=t.dataTransfer.getData(r),o=n&&JSON.parse(n);return!(!o||o.dragNonce!==e)&&o};if(!t)throw new Error("invalid-args");t.getDOMElement().addEventListener("dragover",(t=>{n&&(t.preventDefault(),t.dataTransfer.dropEffect="move",a.dispatchEvent("nodeDraggedOnStage",n,t))})),t.getDOMElement().addEventListener("drop",(t=>{const e=c(t);e&&(t.preventDefault(),a.dispatchEvent("nodeDroppedOnStage",e,t))})),t.getDOMElement().addEventListener("dragleave",(t=>{a.dispatchEvent("nodeDraggedOutOfStage",t)})),a.makeNodeDraggable=(o,l)=>{o.addEventListener("dragstart",(i=>{const c=o.getBoundingClientRect(),d=t.getStageData().scale,u=i.clientX,h=i.clientY,f=(u-c.x)/d,p=(h-c.y)/d;n=l.id,e=s(),o.classList.add("dragging"),i.dataTransfer.setData(r,JSON.stringify({nodeId:l.id,insetX:f,insetY:p,dragNonce:e})),a.dispatchEvent("nodeDragStarted",l.id)})),o.addEventListener("dragend",(function(){e=!1,n=!1,o.classList.remove("dragging"),a.dispatchEvent("nodeDragEnded",l.id)})),o.addEventListener("drop",(t=>{const e=c(t);e&&e.nodeId!==l.id&&(a.dispatchEvent("nodeDroppedOnNode",e.nodeId,l.id,t),t.preventDefault(),t.stopPropagation()),o.classList.remove("droppable")})),o.addEventListener("dragover",(t=>{n&&n!==l.id&&(o.classList.add("droppable"),t.preventDefault(),t.stopPropagation())})),o.addEventListener("dragleave",(()=>{o.classList.remove("droppable")})),i(o,t)}}},98062:t=>{"use strict";t.exports=function({domMapController:t,mapModel:e,navigatorShim:n,dimensionCalculator:r,pageState:o,resourceManager:i,allowedImageTypes:s,urlDownloader:a}={}){if(!(t&&e&&n&&r&&s&&a))throw console.error({domMapController:t,mapModel:e,navigatorShim:n,dimensionCalculator:r,pageState:o,resourceManager:i,allowedImageTypes:s,urlDownloader:a}),new Error("invalid-args");const c=t=>{const e=t?.dataTransfer?.files&&t?.dataTransfer?.files[0],n=e?.type||"";return s.includes(n.toLowerCase())},l=t=>!(t?.clipboardData?.types||[]).includes("text/plain"),d=t=>!(!t?.dataTransfer||!t.dataTransfer.getData("URL")),u=t=>s.find((e=>t.startsWith(`data:${e}`))),h=async t=>{const e=i&&o&&o.getAllowedActions().uploadChanges,s=await(t=>{if(c(t)){const e=t.dataTransfer.files&&t.dataTransfer.files[0];return n.readFileAsDataURL(e)}if(d(t))return(async t=>t.startsWith("data:")?t:t.startsWith("https:")?a.convertToPng(t):void 0)(t.dataTransfer.getData("URL"))})(t),l=s&&u(s)&&await r(s);return s&&u(s)?e?{url:await i.addGoldAsset(s),dimensions:l}:{url:s,dimensions:l}:{}},f=t.stage.getDOMElement();f.addEventListener("dragover",(t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"})),f.addEventListener("drop",(t=>{(c(t)||d(t))&&t.preventDefault()})),f.addEventListener("drop",(async n=>{if(!c(n)&&!d(n))return;const{url:r,dimensions:o}=await h(n),i=t.stage.stagePositionForPointEvent(n);r&&e.dropImage(r,o.width,o.height,i.x,i.y,{})})),f.ownerDocument.addEventListener("paste",(t=>{t.clipboardData?.files?.length&&l(t)&&c({dataTransfer:t.clipboardData})&&t.preventDefault()})),f.ownerDocument.addEventListener("paste",(async t=>{if(t.clipboardData?.files?.length&&l(t)&&c({dataTransfer:t.clipboardData})){const{url:n,dimensions:r}=await h({dataTransfer:t.clipboardData}),o=e.getSelectedNodeId(),i=e.getCurrentLayout().nodes[o],s=Math.round(i.x+i.width/2),a=Math.round(i.y+i.height/2);e.dropImage(n,r.width,r.height,s,a,{})}}))}},48629:(t,e,n)=>{"use strict";const r=n(44005),o=n(61663);t.exports=function(t,e,n,i){if(!t||!e||!n)throw new Error("invalid-args");const s=e.querySelector("[data-mapjs-role=title]"),a=n.title.trim(),c=s.style.width,l=t.querySelector('[data-mapjs-role="svg-container"]'),d=e.style.backgroundColor,u=s.innerText.trim();return a!==u&&(s.style.wordBreak="break-all"),s.innerText=a,s.setAttribute("contenteditable",!0),"transparent"===d&&(s.style.backgroundColor=l.style.backgroundColor),s.style.width="",s.style.display="",s.focus(),i?o(s):a&&r(s),e.removeAttribute("draggable"),t.removeAttribute("draggable"),e.classList.add("editing"),new Promise(((n,r)=>{const o=function(){h(),s.removeAttribute("contenteditable"),s.style.wordBreak="",s.style.width=c,s.style.backgroundColor="",e.setAttribute("draggable","true"),t.setAttribute("draggable","true"),e.classList.remove("editing")},i=function(t){if((t=>t.isTrusted&&"blur"===t.type&&s.ownerDocument.activeElement===s)(t))return;const e=s.innerText;if(e===a)return l(t);o(),n(e)},l=function(t){o(),s.innerText=u,r(t?.type)},d=function(t){const e=new Event("keydown-complete");13!==t.which||t.shiftKey?27===t.which?(l(t),t.preventDefault(),t.stopPropagation()):9===t.which||83===t.which&&(t.metaKey||t.ctrlKey)&&!t.altKey?(i(t),t.preventDefault()):t.shiftKey||90!==t.which||!t.metaKey&&!t.ctrlKey||t.altKey||(s.innerText===a&&l(t),t.stopPropagation()):(i(t),t.stopPropagation()),e.relatedEvent=t,s.dispatchEvent(e)},h=function(){s.removeEventListener("blur",i),s.removeEventListener("keydown",d)};s.addEventListener("blur",i),s.addEventListener("keydown",d)}))}},12394:(t,e,n)=>{"use strict";const r=n(49532),o=n(98888);t.exports=function(t,e){if(t&&"connector"===t.type)return e.querySelector("#"+r(t));if(t&&"link"===t.type)return e.querySelector("#"+o(t));throw console.log("invalid.line",t),"invalid-args"}},42560:(t,e,n)=>{"use strict";const r=n(71868);t.exports=function(t,e){if(!t)throw new Error("invalid-args");const{viewPortDOM:n,mapModel:o,stage:i}=t,s=e&&e.touchEnabled,a=e&&e.centerSelectedNodeOnOrientationChange;if(o.addEventListener("inputEnabledChanged",(function(t,e){t&&!e&&n.focus()})),!n||!o||!i)throw new Error("invalid-args");s||(r(n,o.getInputEnabled),n.ownerDocument.addEventListener("mouseup",(function(){"auto"!==n.style.overflow&&(n.style.overflow="auto")}))),s||window.addEventListener("resize",(function(){o.resetView()})),window.addEventListener("orientationchange",(function(){a?o.centerOnNode(o.getSelectedNodeId()):o.resetView()})),["wheel","mousewheel"].forEach((t=>n.ownerDocument.addEventListener(t,(t=>{const e=t.deltaX||-1*t.wheelDeltaX;e<0&&0===n.scrollLeft&&t.preventDefault(),e>0&&n.scrollWidth-n.clientWidth-n.scrollLeft==0&&t.preventDefault()}),{passive:!1,capture:!0}))),n.focus()}},48050:t=>{"use strict";t.exports=function(t,e,n){let r,o;const i=()=>{r||(t(1),r=!0)},s=a=>{if(o||(o=a),r)return;const c=a-o,l=Math.min(1,c/e);t(l),c>e?i():n.requestAnimationFrame(s)};this.finish=i,n.requestAnimationFrame(s)}},74100:(t,e,n)=>{"use strict";const r=new Image,o=n(84707);r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",t.exports=function(t,e,n,i){let s,a,c,l;const d=t.querySelector("span[data-mapjs-role=title]"),u=function(t){const e=t.ownerDocument.createElement("div");return e.classList.add("resize-node"),e.setAttribute("draggable","true"),e}(t),h=t=>{l=i.stagePositionForPointEvent(t).x,t.dataTransfer.dropEffect="move",t.preventDefault()};u.addEventListener("dragstart",(function(o){o.stopPropagation(),n.isEditingEnabled()&&(u.classList.add("resizing"),n.selectNode(e),s=d.offsetWidth,a={"node.min-width":t.style.minWidth,"span.min-width":d.style.minWidth,"span.max-width":d.style.maxWidth},c=i.stagePositionForPointEvent(o).x,o.dataTransfer.setDragImage(r,0,0),i.getDOMElement().addEventListener("dragover",h))})),u.addEventListener("dragend",(function(r){if(r.stopPropagation(),r.preventDefault(),!n.isEditingEnabled())return;const o=d.offsetWidth;u.classList.remove("resizing"),d.style.maxWidth=a["span.max-width"],d.style.minWidth=a["span.min-width"],t.style.minWidth=a["node.min-width"],n.setNodeWidth("mouse",e,o),i.getDOMElement().removeEventListener("dragover",h)})),u.addEventListener("drag",(function(e){if(e.stopPropagation(),e.preventDefault(),!n.isEditingEnabled())return;const r=function(){const t=Number.isFinite(l)&&Number.isFinite(c)&&l-c||0;return t&&Math.max(10,s+t)}(),a=i.getStageData().scale;if(r){d.style.maxWidth=o(r),d.style.minWidth=o(r),t.style.minWidth=o(d.getBoundingClientRect().width/a);const e=d.scrollWidth;e>d.offsetWidth&&(d.style.maxWidth=o(e),d.style.minWidth=o(e),t.style.minWidth=o(d.getBoundingClientRect().width/a))}})),t.appendChild(u)}},62193:(t,e,n)=>{"use strict";const r=n(5644);t.exports=function(t,e){if(!t||!t.querySelector||!e)throw new Error("invalid-args");return t.querySelector("#"+r(e))}},44005:t=>{"use strict";t.exports=function(t){if(!window.getSelection||!document.createRange)return;const e=document.createRange(),n=window.getSelection();e.selectNodeContents(t),e.collapse(!1),n.removeAllRanges(),n.addRange(e)}},40426:t=>{"use strict";t.exports=function(t,e){const n=()=>t.remove();if(t){if(!e||e.noAnimations())return n();if(t.ownerDocument&&t.ownerDocument.activeElement===t&&t.parentElement){const e=t.parentElement.closest("[tabindex]");e&&e.focus()}t.setAttribute("id",""),t.setAttribute("removal-queued","true"),t.addEventListener("transitionend",n),t.style.opacity=0,setTimeout(n,500)}}},7319:(t,e,n)=>{"use strict";const r=n(48050);t.exports=function(t){this.animate=function(e,n){if(!Number.isFinite(n.top)||!Number.isFinite(n.left)||!Number.isFinite(n.duration))throw new Error("invalid-args");if(n.left===e.scrollLeft&&n.top===e.scrollTop)return!1;const o=e.scrollLeft,i=e.scrollTop,s=n.left-o,a=n.top-i;return new r((t=>{e.scrollLeft=s*t+o,e.scrollTop=a*t+i}),n.duration,t)}}},71868:t=>{"use strict";t.exports=function(t,e){let n;const r=new Image,o=t&&t.querySelector('[data-mapjs-role~="stage"]');if(!o)throw new Error("invalid-args");r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",o.setAttribute("draggable","true"),t.addEventListener("dragstart",(i=>{i.target===o?e()?(i.dataTransfer.setDragImage(r,0,0),n={top:t.scrollTop,left:t.scrollLeft,clientX:i.clientX,clientY:i.clientY}):(i.preventDefault(),i.stopPropagation()):i.stopPropagation()})),t.addEventListener("dragover",(e=>{n&&(t.scrollTop=n.top+n.clientY-e.clientY,t.scrollLeft=n.left+n.clientX-e.clientX)})),t.addEventListener("dragend",(()=>{n=void 0}))}},61663:t=>{"use strict";t.exports=function(t){let e,n,r;window.getSelection&&document.createRange?(e=document.createRange(),e.selectNodeContents(t),n=window.getSelection(),n.removeAllRanges(),n.addRange(e)):document.body.createTextRange&&(r=document.body.createTextRange(),r.moveToElementText(t),r.select())}},17431:(t,e,n)=>{"use strict";const r=n(84707);t.exports=function(t,e){let n;t.setAttribute("draggable","true"),t.addEventListener("dragstart",(o=>{const i=t.getBoundingClientRect(),s=o.clientX,a=o.clientY,c=s-i.x,l=a-i.y,d=e.getStageData().scale,u=i.width/d,h=t.cloneNode(!0);h.style.boxShadow="none",h.style.position="",h.style.top=r(0),h.style.left=r(0),h.style.margin=r(0),h.removeAttribute("id"),h.removeAttribute("draggable"),n=t.ownerDocument.createElement("div"),n.style.position="absolute",n.style.top=r(-1*i.height),n.style.width=r(Math.ceil(i.width)),n.style.height=r(Math.ceil(i.height)),1!==d&&(h.style.width=r(u),h.style.boxSizing="border-box",h.style.transformOrigin="top left",h.style.transform=`scale(${d})`),n.appendChild(h),t.ownerDocument.body.appendChild(n),o.dataTransfer.setDragImage(n,c,l)})),t.addEventListener("dragend",(()=>{n&&n.remove(),n=!1}))}},85816:(t,e,n)=>{"use strict";const r=n(37650),o=n(84707);t.exports=function(t,e,n,i){if(!t||!e||!n)throw new Error("invalid-args");const s=t.querySelector("[data-mapjs-role=svg-container]"),a=i&&i.scrollbarSize||20,c=(()=>{const t=e.getDimensions();return{offsetX:t.width/2,offsetY:t.height/2,width:t.width-a,height:t.height-a,scale:1}})(),l=i&&i.stageMargin||{top:0,left:0,bottom:0,right:0},d=function(t,n){const r=e.getDimensions();return{x:c.scale*(t+c.offsetX)-r.left,y:c.scale*(n+c.offsetY)-r.top}},u=function(t,n){const r=e.getDimensions();return{x:(r.left+t)/c.scale-c.offsetX,y:(r.top+n)/c.scale-c.offsetY}},h=function(){const e={minWidth:o(Math.round(c.width-c.offsetX)),minHeight:o(Math.round(c.height-c.offsetY)),width:o(Math.round(c.width-c.offsetX)),height:o(Math.round(c.height-c.offsetY)),transformOrigin:"top left"},a=n(),l=a&&(t=>{const e=[];if(t?.icon?.url){const n=i?.resourceTranslator&&i.resourceTranslator(t.icon.url)||t.icon.url;e.push("background-image: url("+n+")"),e.push("background-repeat: repeat"),e.push("background-position: center center")}else t.backgroundColor&&e.push("background-color:"+t.backgroundColor);return e.join(";")})(a.canvasTheme());1===c.scale?e.transform="translate3d("+o(Math.round(c.offsetX))+", "+o(Math.round(c.offsetY))+", 0)":e.transform="scale("+c.scale+") translate("+o(Math.round(c.offsetX))+", "+o(Math.round(c.offsetY))+")",r(t,e),s.setAttribute("viewBox",Math.round(-1*c.offsetX)+" "+Math.round(-1*c.offsetY)+" "+Math.round(c.width)+" "+Math.round(c.height)),s.setAttribute("style","top:"+Math.round(-1*c.offsetY)+"px; left:"+Math.round(-1*c.offsetX)+"px; width:"+Math.round(c.width)+"px; height:"+Math.round(c.height)+"px;"+l)},f=function(t,e){let n=!1;t<-1*c.offsetX&&(c.width=c.width-c.offsetX-t,c.offsetX=-1*t,n=!0),e<-1*c.offsetY&&(c.height=c.height-c.offsetY-e,c.offsetY=-1*e,n=!0),t>c.width-c.offsetX&&(c.width=c.offsetX+t,n=!0),e>c.height-c.offsetY&&(c.height=c.offsetY+e,n=!0),n&&h()},p=function(t,n,r){const o=e.getCenter();let i=!1,s=!1;f(t-o.x/c.scale,n-o.y/c.scale),f(t+o.x/c.scale,n+o.y/c.scale),i=c.scale*(t+c.offsetX)-o.x,s=c.scale*(n+c.offsetY)-o.y,e.setPosition(i,s,r)},g=function(){const t=e.getCenter();return u(t.x,t.y)};if(!s)throw new Error("stage must contain a SVGContainer object");Object.freeze(Object.assign(this,{stageToViewCoordinates:d,viewToStageCoordinates:u,ensureSpaceForPoint:f,centerViewOn:p,stagePointAtViewportCenter:g,dropCache:e.dropCache,finishScrolling:e.finishScrolling,updateStage:h,stagePositionForPointEvent:function(t){const n=e.coordinatesForPointEvent(t);if(n)return u(n.x,n.y)},ensureBoxVisible:t=>{const n=d(t.x,t.y),r=d(t.x+t.width,t.y+t.height),o=e.getDimensions();e.finishScrolling();let i=o.left,s=o.top;n.x-10<0?i=o.left+n.x-10:r.x+10>o.width&&(i=o.left+r.x-o.width+10),n.y-10<0?s=o.top+n.y-10:r.y+10>o.height&&(s=o.top+r.y-o.height+10),i===o.left&&s===o.top||e.setPosition(i,s,!0)},ensureSpaceForBox:t=>{f(t.x-l.left,t.y-l.top),f(t.x+t.width+l.right,t.y+t.height+l.bottom)},rescale:t=>{const e=c.scale,n=Math.max(Math.min(e*t,5),.2),r=g();e!==n&&(c.scale=n,h(),p(r.x,r.y))},setScale:t=>{c.scale!==t&&(c.scale=t,h())},reset:()=>{c.scale=1,c.height=0,c.width=0,c.offsetX=0,c.offsetY=0,h(),e.focus()},getDOMElement:()=>t,getSVGContainer:()=>s,getStageData:()=>Object.assign({},c),setStageData:t=>{Object.assign(c,t),h()}})),h()}},93117:(t,e,n)=>{"use strict";const r=n(89507),o=function(t,e,n,o){n=n||"text";const i=t.querySelector(n+".mapjs-connector-text");if(e){if(i)return i;{const e=r(n);return e.setAttribute("class","mapjs-connector-text"),o&&(e.style.transform=`translate(${o.x}px, ${o.y}px)`),t.appendChild(e),e}}return i&&i.remove(),!1};t.exports=function(t,e,n,r,i){const s=o(e,r,"g",n),a=s&&o(s,r,"rect"),c=s&&o(s,r),l={};let d=!1;if(!c)return!1;c.style.stroke="none",c.style.fill=i.text.color,c.style.fontSize=i.text.font.sizePx+"px",c.style.fontWeight=i.text.font.weight,c.style.dominantBaseline="hanging",c.textContent=r.trim(),d=(()=>{const e=c.getClientRects()[0],n=t.getStageData().scale||1;return e?{height:e.height/n,width:e.width/n}:{height:0,width:0}})(),l.x=Math.round(n.x-d.width/2),l.y=Math.round(n.y-d.height-2),s.style.transform=`translate(${l.x}px, ${l.y}px)`,c.setAttribute("x",0),c.setAttribute("y",2),a.setAttribute("x",0),a.setAttribute("y",0),a.setAttribute("height",Math.round(d.height)),a.setAttribute("width",Math.round(d.width)),a.style.fill=i.backgroundColor,a.style.stroke=i.borderColor}},14620:(t,e,n)=>{"use strict";const r=n(89507),o=n(60058),i=n(50735),s=n(7480),a=n(93117),c=n(637),l=n(2414),d=n(2971),u=n(37650),h=(t,e)=>["both",t].includes(e);t.exports=function(t){l(t,["domElement","connection","stage","fromBox","toBox"]);const{domElement:e,connection:n,stage:f,fromBox:p,toBox:g}=t,m=({color:t,width:e,arrowExtension:n})=>{if(!n||!e||!t)throw new Error("invalid-args");const o=(()=>{const t=f.getSVGContainer();let e=t.querySelector("defs");return e||(e=r("defs"),t.appendChild(e)),e})(),i=n.length+e,s=n.width+e,a=String(i)+"-"+String(s)+"-"+t.replace(/#/,"");let c=o.querySelector(`marker[for="${a}"]`);if(!c){c=r("marker"),d(c,{id:"arrow-"+a,for:a,viewBox:`0 0 ${i} ${s}`,refX:"0",refY:String(s/2),markerUnits:"userSpaceOnUse",markerWidth:String(i),markerHeight:String(s),orient:"auto-start-reverse"}),o.appendChild(c);const e=r("path");d(e,{d:`M 0 0 L ${i} ${s/2} L 0 ${s} z`,fill:t}),c.appendChild(e)}return c},v="no-connector"!==n.theme.type&&n.arrow,{pathElement:y,afterArrowPathElement:w,hitElement:b}=((t,e)=>{const n={pathElement:t.querySelector('[data-mm-role~="mapjs-connector"]'),afterArrowPathElement:t.querySelector('[data-mm-role~="mapjs-connector-after-arrow"]'),hitElement:t.querySelector('[data-mm-role~="mapjs-link-hit"]')};return n.pathElement||(n.pathElement=r("path"),n.pathElement.setAttribute("class","mapjs-connector"),n.pathElement.setAttribute("data-mm-role","mapjs-connector"),t.appendChild(n.pathElement)),n.hitElement||(n.hitElement=r("path"),n.hitElement.setAttribute("class","mapjs-link-hit noTransition"),n.hitElement.setAttribute("data-mm-role","mapjs-link-hit"),t.appendChild(n.hitElement)),e.afterArrowD&&!n.afterArrowPathElement?(n.afterArrowPathElement=r("path"),n.afterArrowPathElement.setAttribute("class","mapjs-connector"),n.afterArrowPathElement.setAttribute("data-mm-role","mapjs-connector-after-arrow"),t.appendChild(n.afterArrowPathElement)):!e.afterArrowD&&n.afterArrowPathElement&&(n.afterArrowPathElement.remove(),delete n.afterArrowPathElement),n})(e,n);n?(u(e,Object.assign(s(n.position),{stroke:n.color})),d(y,{d:n.d,"stroke-width":n.width,"stroke-dasharray":o(i[n.lineStyle||"solid"],n.width),"stroke-linecap":"round",fill:"transparent"}),h("from",v)?y.setAttribute("marker-start","url(#"+m(n).getAttribute("id")+")"):y.removeAttribute("marker-start"),h("to",v)?y.setAttribute("marker-end","url(#"+m(n).getAttribute("id")+")"):y.removeAttribute("marker-end"),w&&d(w,{display:"",d:n.afterArrowD,"stroke-width":n.width,"stroke-dasharray":o(i[n.lineStyle||"solid"],n.width),"stroke-linecap":"round",fill:"transparent"}),d(b,{d:n.d+(n.afterArrowD||""),"stroke-width":n.width+12}),function(){const t=n.label||"",r=t&&c(n,p,g,n.d);a(f,e,r,t,n.theme.label)}()):e.remove()}},39044:(t,e,n)=>{"use strict";const r=n(89507),o=n(7480),i=n(93117),s=n(637),a=n(2414),c=n(2971),l=n(37650),d=n(4782),u=n(99524);t.exports=function(t){a(t,["domElement","connection","stage","fromBox","toBox"]);const{domElement:e,connection:n,stage:h,fromBox:f,toBox:p}=t,g=n.label||"",m=Object.assign(o(n.position),{stroke:n.lineProps.color});let v=e.querySelector("path.mapjs-link"),y=e.querySelector("path.mapjs-link-hit");l(e,m),v||(v=r("path"),v.setAttribute("class","mapjs-link"),e.appendChild(v)),c(v,{d:n.d,"stroke-width":n.lineProps.width||0,"stroke-dasharray":n.lineProps.strokes||"","stroke-linecap":n.lineProps.linecap||"",fill:"transparent"}),y||(y=r("path"),y.setAttribute("class","mapjs-link-hit noTransition"),e.appendChild(y)),c(y,{d:n.d,"stroke-width":n.lineProps.width+12}),function(t,e){const n=Array.from(e.querySelectorAll("path.mapjs-arrow"));t.arrows&&t.arrows.length?(t.arrows.forEach(((o,i)=>{let s=n[i];s||(s=r("path"),s.setAttribute("class","mapjs-arrow"),e.appendChild(s)),c(s,{d:o,fill:t.lineProps.color,"stroke-width":t.lineProps.width}),u(s)})),n.slice(t.arrows.length).forEach(d)):n.forEach(d)}(n,e),function(t,n,r){const o=t.theme.label,a=g&&s(t,n,r,t.d);i(h,e,a,g,o)}(n,f,p)}},60474:(t,e,n)=>{"use strict";const r=n(55946),o=n(70771),i=n(43509),s=n(94807),a=n(65870);t.exports=function(t,e,n){const c=r(t,"span","[data-mapjs-role=title]",!0,{"data-mapjs-role":"title"});o(n,t),i(n,c),s(n,e,t),a(n,t),t.setAttribute("class",["mapjs-node"].concat(n.effectiveStyles).join(" "))}},70771:(t,e,n)=>{"use strict";const r=n(78566),o=n(79871),i=n(55946),s=n(59130),a=n(46553);t.exports=(t,e)=>{if(!t)throw new Error("invalid-args");const n=!!t.metrics.decorations,c=i(e,"div","[data-mapjs-role=decorations]",n,{"data-mapjs-role":"decorations",class:"mapjs-decorations"});return n&&((t,e)=>{const n=t.metrics;var c,l;n.decorations?(e.style.display="",e.style.position="absolute",e.style.top=r(n.decorations.y-n.bubble.y),e.style.left=r(n.decorations.x-n.bubble.x),((t,e,n)=>{const s=o(e).join(""),a=s.length,c=a&&r(e.length*(n.standardDecorationWidth+n.standardDecorationMargin)-n.standardDecorationMargin),l=i(t,"a",".mapjs-stickers",a,{class:"mapjs-stickers","decoration-type":"stickers"});a&&(l.style.minWidth=c,l.innerText=s)})(e,t.stickers||[],n.decorations),s(e,t.hyperlink),a(e,t.label),c=e,l=t.note,i(c,"a","a.mapjs-note",!!l,{class:"mapjs-note icon-note","decoration-type":"note"}),function(t,e,n){const r=i(t,"a","a.mapjs-attachment",!!e,{class:"mapjs-attachment icon-attachment","decoration-type":"attachment"});r&&r.dispatchEvent(new CustomEvent("attachment-link-created",{detail:{nodeId:n},bubbles:!0}))}(e,t.attachment,t.nodeId)):e.style.display="none"})(t,c),c}},88278:(t,e,n)=>{"use strict";const r=n(22620),o=n(37650),i=n(84707);t.exports=function(t,e,n){const s=r(e,n);o(t,s?{left:i(s.left),top:i(s.top)}:{left:i(e.x),top:i(e.y)})}},45894:(t,e,n)=>{"use strict";const r=n(4782),o=n(99524),i=n(84707),s=n(37650);t.exports=function(t,e,n,a){e?(o(t),t.setAttribute("mapjs-edge",e.edge),"top"===e.edge?s(t,{top:i(e.minY),left:i(Math.round(a.x-t.clientWidth/2))}):"bottom"===e.edge?s(t,{top:i(e.maxY),left:i(Math.round(a.x-t.clientWidth/2))}):s(t,{top:i(Math.round(a.y-t.clientHeight/2)),left:i(e.x-("left"===e.edge?t.clientWidth:0))})):r(t)}},97721:t=>{"use strict";t.exports=function(t,e){return t&&e?(Object.keys(e).forEach((n=>{t.setAttribute(n,e[n])})),t):t}},53722:(t,e,n)=>{"use strict";const r=n(97721);t.exports=function(t,e,n){if(!t||!e)throw new Error("invalid-args");const o=t.ownerDocument.createElement(e);return t.appendChild(o),n&&r(o,n),o}},55946:(t,e,n)=>{"use strict";const r=n(53722),o=n(45249);t.exports=function(t,e,n,i,s){if(!t)throw new Error("invalid-args");const a=t.querySelector(n);return a?o(a,i):i?r(t,e,s):void 0}},45249:t=>{"use strict";t.exports=function(t,e){return t&&(t.style.display=e?"":"none"),t}},67687:t=>{"use strict";t.exports=function(t,e){let n,r;const o=this,i=()=>n=!1;t.setAttribute("tabindex","1"),t.style.overflow="auto",o.getDimensions=function(){return n||(n={left:t.scrollLeft,top:t.scrollTop,width:t.clientWidth,height:t.clientHeight},n)},o.getCenter=function(){return{x:Math.round(t.clientWidth/2),y:Math.round(t.clientHeight/2)}},o.dropCache=i,t.addEventListener("scroll",i),o.coordinatesForPointEvent=function(e){const n=t.getBoundingClientRect();if(Number.isFinite(e.clientX)&&Number.isFinite(e.clientY)){const t={x:e.clientX-n.left,y:e.clientY-n.top};if(t.x>=0&&t.x<=n.width&&t.y>=0&&t.y<=n.height)return t}},o.focus=()=>t.focus(),o.finishScrolling=()=>{r&&r.finish(),i()},o.setPosition=(n,o,i)=>{r&&(r.finish(),r=!1),i?r=e.animate(t,{left:n,top:o,duration:200}):(t.scrollLeft=n,t.scrollTop=o)}}},2971:t=>{"use strict";t.exports=function(t,e){Object.keys(e).forEach((n=>{t.setAttribute(n,e[n])}))}},37650:t=>{"use strict";t.exports=function(t,e){Object.keys(e).forEach((n=>{t.style[n]=e[n]}))}},4782:t=>{"use strict";t.exports=function(t){t.style.display="none"}},84707:t=>{"use strict";t.exports=function(t){if(!t)return"0px";if(Number.isFinite(t))return`${t}px`;const e=parseFloat(t);return Number.isFinite(e)?`${e}px`:"0px"}},99524:t=>{"use strict";t.exports=function(t){"none"===t.style.display&&(t.style.display="")}},12704:(t,e,n)=>{"use strict";t.exports={MapModel:n(33535),content:n(95046),observable:n(89080),DomMapController:n(93144),ThemeProcessor:n(73361),defaultTheme:n(81246),formatNoteToHtml:n(76352),version:4}},47206:t=>{"use strict";t.exports=function(t){return t=String(t||""),r.test(t)?"rtl":o.test(t)?"ltr":"neutral"};var e="---",n="A-Za-z--------",r=new RegExp("^[^"+n+"]*["+e+"]"),o=new RegExp("^[^"+e+"]*["+n+"]")},37976:function(t,e){!function(t){"use strict";var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi,r=function(t){var r=[];return t.replace(n,(function(t,n,i){var s=n.toLowerCase();for(i=function(t){var e=t.match(o);return e?e.map(Number):[]}(i),"m"===s&&i.length>2&&(r.push([n].concat(i.splice(0,2))),s="l",n="m"===n?"l":"L");i.length>=0;){if(i.length===e[s])return i.unshift(n),r.push(i);if(i.length<e[s])throw new Error("malformed path data");r.push([n].concat(i.splice(0,e[s])))}})),r},o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;var i=function(t,e,n,r,o,i,a,c){return new s(t,e,n,r,o,i,a,c)};function s(t,e,n,r,o,i,s,l){this.a={x:t,y:e},this.b={x:n,y:r},this.c={x:o,y:i},this.d={x:s,y:l},null!=s&&null!=l?(this.getArcLength=w,this.getPoint=u,this.getDerivative=c):(this.getArcLength=h,this.getPoint=d,this.getDerivative=a),this.init()}function a(t,e,n){return{x:2*(1-n)*(t[1]-t[0])+2*n*(t[2]-t[1]),y:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1])}}function c(t,e,n){return d([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],n)}function l(t,e,n,r,o){for(var i=1,s=t/e,a=(t-n(r,o,s))/e;i>.001;){var c=n(r,o,s+a),l=n(r,o,s-a),d=Math.abs(t-c)/e,u=Math.abs(t-l)/e;d<i?(i=d,s+=a):u<i?(i=u,s-=a):a/=2}return s}function d(t,e,n){return{x:(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2],y:(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2]}}function u(t,e,n){return{x:(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3],y:(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3]}}function h(t,e,n){void 0===n&&(n=1);var r=t[0]-2*t[1]+t[2],o=e[0]-2*e[1]+e[2],i=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(r*r+o*o),c=4*(r*i+o*s),l=i*i+s*s;if(0===a)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var d=c/(2*a),u=n+d,h=l/a-d*d;return Math.sqrt(a)/2*(u*Math.sqrt(u*u+h)-d*Math.sqrt(d*d+h)+h*Math.log(Math.abs((u+Math.sqrt(u*u+h))/(d+Math.sqrt(d*d+h)))))}s.prototype={constructor:s,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),r=Math.sqrt(n.x*n.x+n.y*n.y);return r>0?{x:n.x/r,y:n.y/r}:{x:0,y:0}},getPropertiesAtLength:function(t){var e,n=l(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),r=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n),o=Math.sqrt(r.x*r.x+r.y*r.y);e=o>0?{x:r.x/o,y:r.y/o}:{x:0,y:0};var i=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n);return{x:i.x,y:i.y,tangentX:e.x,tangentY:e.y}}};var f=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],p=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],g=[[1],[1,1],[1,2,1],[1,3,3,1]];function m(t,e){return g[t][e]}function v(t,e,n){var r,o,i,s=n.length-1;if(0===s)return 0;if(0===t){for(o=0,i=0;i<=s;i++)o+=m(s,i)*Math.pow(1-e,s-i)*Math.pow(e,i)*n[i];return o}for(r=new Array(s),i=0;i<s;i++)r[i]=s*(n[i+1]-n[i]);return v(t-1,e,r)}function y(t,e,n){var r=v(1,n,t),o=v(1,n,e),i=r*r+o*o;return Math.sqrt(i)}function w(t,e,n){var r,o,i,s;void 0===n&&(n=1);for(r=n/2,o=0,i=0;i<20;i++)s=r*f[20][i]+r,o+=p[20][i]*y(t,e,s);return r*o}var b=2*Math.PI;function E(t,e,n,r){var o=t*n+e*r;return o>1&&(o=1),o<-1&&(o=-1),(t*r-e*n<0?-1:1)*Math.acos(o)}function x(t,e){var n=4/3*Math.tan(e/4),r=Math.cos(t),o=Math.sin(t),i=Math.cos(t+e),s=Math.sin(t+e);return[r,o,r-o*n,o+r*n,i+s*n,s-i*n,i,s]}var S=function(t,e,n,r,o,i,s,a,c){var l=Math.sin(o*b/360),d=Math.cos(o*b/360),u=d*(t-a)/2+l*(e-c)/2,h=-l*(t-a)/2+d*(e-c)/2;if(0===u&&0===h)return[];if(0===n||0===r)return[];n=Math.abs(n),r=Math.abs(r);var f=u*u/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=function(t,e,n,r,o,i,s,a,c,l){var d=l*(t-n)/2+c*(e-r)/2,u=-c*(t-n)/2+l*(e-r)/2,h=s*s,f=a*a,p=d*d,g=u*u,m=h*f-h*g-f*p;m<0&&(m=0),m/=h*g+f*p;var v=(m=Math.sqrt(m)*(o===i?-1:1))*s/a*u,y=m*-a/s*d,w=l*v-c*y+(t+n)/2,x=c*v+l*y+(e+r)/2,S=(d-v)/s,A=(u-y)/a,C=(-d-v)/s,I=(-u-y)/a,k=E(1,0,S,A),F=E(S,A,C,I);return 0===i&&F>0&&(F-=b),1===i&&F<0&&(F+=b),[w,x,k,F]}(t,e,a,c,i,s,n,r,l,d),g=[],m=p[2],v=p[3],y=Math.max(Math.ceil(Math.abs(v)/(b/4)),1);v/=y;for(var w=0;w<y;w++)g.push(x(m,v)),m+=v;return g.map((function(t){for(var e=0;e<t.length;e+=2){var o=t[e+0],i=t[e+1],s=d*(o*=n)-l*(i*=r),a=l*o+d*i;t[e+0]=s+p[0],t[e+1]=a+p[1]}return t}))},A=function(t,e,n,r,o,i,s,a,c){return new C(t,e,n,r,o,i,s,a,c)};function C(t,e,n,r,o,s,a,c,l){var d=0,u=[],h=[];S(t,e,n,r,o,s,a,c,l).forEach((function(t){var e=new i(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),n=e.getTotalLength();d+=n,u.push(n),h.push(e)})),this.length=d,this.partialLengths=u,this.curves=h}C.prototype={constructor:C,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getPointAtLength(t-n)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getTangentAtLength(t-n)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),n=this.getPointAtLength(t);return{x:n.x,y:n.y,tangentX:e.x,tangentY:e.y}}};var I=function(t,e,n,r){return new k(t,e,n,r)};function k(t,e,n,r){this.x0=t,this.x1=e,this.y0=n,this.y1=r}k.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},k.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),n=(this.x1-this.x0)*e,r=(this.y1-this.y0)*e;return{x:this.x0+n,y:this.y0+r}},k.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},k.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),n=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:n.x,tangentY:n.y}};t.svgPathProperties=function(t){var e=0,n=[],o=[];function s(t){if(!t)return null;for(var a,c,l=r(t),d=[0,0],u=[0,0],h=0;h<l.length;h++)"M"===l[h][0]?(c=[(d=[l[h][1],l[h][2]])[0],d[1]],o.push(null)):"m"===l[h][0]?(c=[(d=[l[h][1]+d[0],l[h][2]+d[1]])[0],d[1]],o.push(null)):"L"===l[h][0]?(e+=Math.sqrt(Math.pow(d[0]-l[h][1],2)+Math.pow(d[1]-l[h][2],2)),o.push(new I(d[0],l[h][1],d[1],l[h][2])),d=[l[h][1],l[h][2]]):"l"===l[h][0]?(e+=Math.sqrt(Math.pow(l[h][1],2)+Math.pow(l[h][2],2)),o.push(new I(d[0],l[h][1]+d[0],d[1],l[h][2]+d[1])),d=[l[h][1]+d[0],l[h][2]+d[1]]):"H"===l[h][0]?(e+=Math.abs(d[0]-l[h][1]),o.push(new I(d[0],l[h][1],d[1],d[1])),d[0]=l[h][1]):"h"===l[h][0]?(e+=Math.abs(l[h][1]),o.push(new I(d[0],d[0]+l[h][1],d[1],d[1])),d[0]=l[h][1]+d[0]):"V"===l[h][0]?(e+=Math.abs(d[1]-l[h][1]),o.push(new I(d[0],d[0],d[1],l[h][1])),d[1]=l[h][1]):"v"===l[h][0]?(e+=Math.abs(l[h][1]),o.push(new I(d[0],d[0],d[1],d[1]+l[h][1])),d[1]=l[h][1]+d[1]):"z"===l[h][0]||"Z"===l[h][0]?(e+=Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)),o.push(new I(d[0],c[0],d[1],c[1])),d=[c[0],c[1]]):"C"===l[h][0]?(a=new i(d[0],d[1],l[h][1],l[h][2],l[h][3],l[h][4],l[h][5],l[h][6]),e+=a.getTotalLength(),d=[l[h][5],l[h][6]],o.push(a)):"c"===l[h][0]?(a=new i(d[0],d[1],d[0]+l[h][1],d[1]+l[h][2],d[0]+l[h][3],d[1]+l[h][4],d[0]+l[h][5],d[1]+l[h][6]),e+=a.getTotalLength(),d=[l[h][5]+d[0],l[h][6]+d[1]],o.push(a)):"S"===l[h][0]?(a=h>0&&["C","c","S","s"].indexOf(l[h-1][0])>-1?new i(d[0],d[1],2*d[0]-l[h-1][l[h-1].length-4],2*d[1]-l[h-1][l[h-1].length-3],l[h][1],l[h][2],l[h][3],l[h][4]):new i(d[0],d[1],d[0],d[1],l[h][1],l[h][2],l[h][3],l[h][4]),e+=a.getTotalLength(),d=[l[h][3],l[h][4]],o.push(a)):"s"===l[h][0]?(a=h>0&&["C","c","S","s"].indexOf(l[h-1][0])>-1?new i(d[0],d[1],d[0]+a.d.x-a.c.x,d[1]+a.d.y-a.c.y,d[0]+l[h][1],d[1]+l[h][2],d[0]+l[h][3],d[1]+l[h][4]):new i(d[0],d[1],d[0],d[1],d[0]+l[h][1],d[1]+l[h][2],d[0]+l[h][3],d[1]+l[h][4]),e+=a.getTotalLength(),d=[l[h][3]+d[0],l[h][4]+d[1]],o.push(a)):"Q"===l[h][0]?(a=d[0]==l[h][1]&&d[1]==l[h][2]?new I(l[h][1],l[h][3],l[h][2],l[h][4]):new i(d[0],d[1],l[h][1],l[h][2],l[h][3],l[h][4]),e+=a.getTotalLength(),o.push(a),d=[l[h][3],l[h][4]],u=[l[h][1],l[h][2]]):"q"===l[h][0]?(a=0!=l[h][1]||0!=l[h][2]?new i(d[0],d[1],d[0]+l[h][1],d[1]+l[h][2],d[0]+l[h][3],d[1]+l[h][4]):new I(d[0]+l[h][1],d[0]+l[h][3],d[1]+l[h][2],d[1]+l[h][4]),e+=a.getTotalLength(),u=[d[0]+l[h][1],d[1]+l[h][2]],d=[l[h][3]+d[0],l[h][4]+d[1]],o.push(a)):"T"===l[h][0]?(a=h>0&&["Q","q","T","t"].indexOf(l[h-1][0])>-1?new i(d[0],d[1],2*d[0]-u[0],2*d[1]-u[1],l[h][1],l[h][2]):new I(d[0],l[h][1],d[1],l[h][2]),o.push(a),e+=a.getTotalLength(),u=[2*d[0]-u[0],2*d[1]-u[1]],d=[l[h][1],l[h][2]]):"t"===l[h][0]?(a=h>0&&["Q","q","T","t"].indexOf(l[h-1][0])>-1?new i(d[0],d[1],2*d[0]-u[0],2*d[1]-u[1],d[0]+l[h][1],d[1]+l[h][2]):new I(d[0],d[0]+l[h][1],d[1],d[1]+l[h][2]),e+=a.getTotalLength(),u=[2*d[0]-u[0],2*d[1]-u[1]],d=[l[h][1]+d[0],l[h][2]+d[0]],o.push(a)):"A"===l[h][0]?(a=new A(d[0],d[1],l[h][1],l[h][2],l[h][3],l[h][4],l[h][5],l[h][6],l[h][7]),e+=a.getTotalLength(),d=[l[h][6],l[h][7]],o.push(a)):"a"===l[h][0]&&(a=new A(d[0],d[1],l[h][1],l[h][2],l[h][3],l[h][4],l[h][5],d[0]+l[h][6],d[1]+l[h][7]),e+=a.getTotalLength(),d=[d[0]+l[h][6],d[1]+l[h][7]],o.push(a)),n.push(e);return s}s.getTotalLength=function(){return e},s.getPointAtLength=function(t){var e=a(t);return o[e.i].getPointAtLength(e.fraction)},s.getTangentAtLength=function(t){var e=a(t);return o[e.i].getTangentAtLength(e.fraction)},s.getPropertiesAtLength=function(t){var e=a(t);return o[e.i].getPropertiesAtLength(e.fraction)},s.getParts=function(){for(var t=[],e=0;e<o.length;e++)if(null!=o[e]){var r={};r.start=o[e].getPointAtLength(0),r.end=o[e].getPointAtLength(n[e]-n[e-1]),r.length=n[e]-n[e-1],function(t){r.getPointAtLength=function(e){return t.getPointAtLength(e)},r.getTangentAtLength=function(e){return t.getTangentAtLength(e)},r.getPropertiesAtLength=function(e){return t.getPropertiesAtLength(e)}}(o[e]),t.push(r)}return t};var a=function(t){t<0?t=0:t>e&&(t=e);for(var r=n.length-1;n[r]>=t&&n[r]>0;)r--;return r++,{fraction:t-n[r-1],i:r}};return s(t)},t.parse=r,t.Bezier=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},24953:t=>{"use strict";t.exports=function(t){const e=t&&t.sizePx||t&&1.3*t.size||12,n=t&&t.lineSpacingPx||t&&1.3*t.lineSpacing||4;return{fontSize:Math.ceil(e),lineSpacing:Math.ceil(n),weight:t&&t.weight||"bold",family:t&&t.family||"Sans"}}},46766:(t,e,n)=>{"use strict";const r=n(43428),o=n(53313);t.exports=function(t,e,n,i){const s=Object.assign({scale:t.export&&t.export.scale||1,padding:10,page:t.export&&t.export.page},i);return t.labels&&(s.padding=s.padding+20*s.scale),t.theme&&(t.attr=Object.assign({},t.attr,{theme:t.theme})),r(o(t),e,n,s)}},43428:(t,e,n)=>{"use strict";const r=n(93157),o=n(71047),i=n(83918),s=n(65400),a=n(68410),c=n(46306),l=n(26734),d=n(85032).svgMarkupBuilder,u=n(12956),h=n(45964),f=n(27310),p=n(15470),g=n(91663);t.exports=function(t,e,n,m){if(!(t&&e&&n&&e.nodeTextDimensions&&e.writeNodeText&&e.writeLine&&e.lineSize&&n.writeStickers))throw new Error("invalid-args");const v=function(t){const e=new a;return e.initializeSession("local",t,[]),e}(t),y=new i(v),w=function(t,e,n,r){const o=new s(t,e,n.nodeTextDimensions,{passive:!0});return o.setLabelGenerator((()=>r)),o}(y,v,e,t.labels),b=y.getTheme(),E=t?.export?.imageBackground||b.canvasTheme().backgroundColor,x=b.canvasTheme().icon,S=m&&m.layout||r(t,(t=>w.getNodeViewForIdea(t).metrics),{theme:b}),A=function(){const t=new o;return t.setLayout(S),t}(),C=Object.values(t.ideas)[0],I=A.clipRectTransform(C.id,m),k=d("svg").attr({"xmlns:xlink":"http://www.w3.org/1999/xlink",width:I.width,height:I.height}),F=function(t){return f(A.getNode(t),w.getNodeViewForIdeaId(t))},M=1!==I.scale?"scale("+I.scale+") ":"",T=d("g").attr("transform",M+"translate("+I.x+","+I.y+")").css({fill:"none"}),P=d("defs").appendTo(k),L={},O=({arrow:t,color:e,width:n,arrowExtension:r,theme:o},i)=>{if(!t||o&&"no-connector"===o.type)return!1;if(!r||!n||!e)throw new Error("invalid-args");const s=r.length+n,a=r.width+n,c="arrow-"+i+"-"+String(s)+"-"+String(a)+"-"+e.replace(/#/,"");return L[c]||(L[c]=(({color:t,id:e,arrowLength:n,arrowWidth:r,arrowType:o})=>{if(!(t&&e&&n&&r&&o))throw new Error("invalid-args");const i="from"===o?n:0,s="from"===o?`M ${n} 0 L 0 ${r/2} L ${n} ${r} z`:`M 0 0 L ${n} ${r/2} L 0 ${r} z`,a=d("marker").appendTo(P).attr({id:e,viewBox:`0 0 ${n} ${r}`,refX:String(i),refY:String(r/2),markerUnits:"userSpaceOnUse",markerWidth:String(n),markerHeight:String(r),orient:"auto"});return d("path").appendTo(a).attr({d:s,fill:t}),a})({color:e,id:c,arrowLength:s,arrowWidth:a,arrowType:i})),c},_=(t,e)=>["both",t].includes(e);if(m.additionalNamespaces&&k.attr(m.additionalNamespaces),m.additionalCss&&P.append(d("style").attr("type","text/css").cdata(m.additionalCss)),x?.url){const t=(100*x.width/I.width).toFixed(2),e=(100*x.height/I.height).toFixed(2);P.append(d("pattern").attr({id:"canvasImg",patternUnits:"userSpaceOnUse",x:0,y:0,width:`${t}%`,height:`${e}%`}).append(d("image").attr({"xlink:href":x?.url,width:x.width,height:x.height,x:0,y:0}))),d("rect").attr({width:"100%",height:"100%",fill:"url(#canvasImg)"}).appendTo(k)}else"transparent"!==E&&d("rect").attr({width:"100%",height:"100%",fill:E}).appendTo(k);return T.appendTo(k),Object.values(S.connectors).forEach((t=>{const e=F(t.to),n=F(t.from),r=c(n,e,t.attr,b),o=_("from",r.arrow)?O(r,"from"):null,i=_("to",r.arrow)?O(r,"to"):null;T.append(u(r,o,i))})),Object.values(S.links).forEach((t=>{const e=t.attr&&t.attr.style||{},n=F(t.ideaIdTo),r=F(t.ideaIdFrom),o=l(r,n,e,b);T.append(p(o))})),Object.values(S.connectors).forEach((t=>{const n=F(t.to),r=F(t.from),o=c(r,n,t.attr,b);o.label&&T.append(h(o,r,n,e))})),Object.values(S.links).forEach((t=>{const n=t.attr&&t.attr.style||{},r=F(t.ideaIdTo),o=F(t.ideaIdFrom),i=l(o,r,n,b);n.label&&(i.label=n.label,T.append(h(i,o,r,e)))})),Object.values(S.nodes).forEach((t=>{const r=t.x+I.x,o=t.y+I.y;r+t.width>=0&&r<=I.width/I.scale&&o+t.height>=0&&o<=I.height/I.scale&&T.append(g(t,w.getNodeViewForIdeaId(t.id),e,n))})),k.serialize()}},85032:(t,e,n)=>{"use strict";const r=n(64378),o=n(83007),i=function(t,e){const n=this,i=[],s=["top","left","width","height","stroke-width"];let a,c,l={},d={};if(r.isEmpty(t))throw"trying to build an empty tag";if(r.isEmpty(e))throw"trying to build a tag with an empty namespace";n.MindMupMarkupBuilder=!0,n.text=function(t){return a=t,n},n.children=function(){return i.slice(0)},n.tagName=function(){return t},n.getAttributes=function(){return r.clone(d)},n.getCss=function(){return r.clone(l)},n.getText=function(){return""+a},n.cdata=function(t){return c=t,n},n.append=function(t){if(!t||!t.MindMupMarkupBuilder)throw"trying to append something that is not a MarkupBuilder";return i.push(t),n},n.appendTo=function(t){if(!t||!t.MindMupMarkupBuilder)throw"trying to append to something that is not a MarkupBuilder";return t.append(n),n},n.attr=function(t,e){return"object"==typeof t?d=r.extend(d,t):d[t]=e,n},n.css=function(t,e){return"object"==typeof t?l=r.extend(l,t):l[t]=e,n},n.serialize=function(n,u){let h=!1,f=[];if(n||(n=[],h=!0),n.push("<"),n.push(t),u!==e&&(n.push(' xmlns="'),n.push(e),n.push('"')),r.each(d,((t,e)=>{void 0!==t&&""!==t&&(n.push(" "),n.push(e),n.push('="'),n.push(String(t).replace(/"/g,"'")),n.push('"'))})),r.isEmpty(l)||(f=[],r.each(l,((t,e)=>{void 0!==t&&""!==t&&(f.push(e),f.push(":"),f.push(String(t).replace(/"/g,"'")),0!==t&&r.contains(s,e)&&f.push("px"),f.push(";"))})),f.length&&(n.push(' style="'),n.push(f.join("")),n.push('"'))),a||c||!r.isEmpty(i)?(n.push(">"),a&&n.push(o(r.escape(a))),c&&(n.push("<![CDATA["),n.push(c),n.push("]]>")),r.each(i,(t=>{t.serialize(n,e)})),n.push("</"),n.push(t),n.push(">")):n.push("/>"),h)return n.join("")}};t.exports={MarkupBuilder:i,svgMarkupBuilder:function(t){return new i(t,"http://www.w3.org/2000/svg")},domMarkupBuilder:function(t){return new i(t,"http://www.w3.org/1999/xhtml")}}},85224:(t,e,n)=>{"use strict";t.exports={generateSvg:n(43428),generateSvgFromExport:n(46766),markupBuilder:n(85032),TSpanTextEngine:n(88276),wordWrap:n(32668),fontMetrics:n(24953),createTextSizer:n(19718),NaiveLineBreak:n(80993)}},80993:t=>{"use strict";t.exports=function(t){let e=!1;const n=/[\s?!]/gm;this.nextBreak=function(){return function(){if(!t||e)return!1;const r=n.exec(t);return r?{position:n.lastIndex,required:"\n"===r[0]}:(e=!0,{position:t.length,required:!1})}()}}},2957:(t,e,n)=>{"use strict";const r=n(37976);t.exports=function(t,e){const n=r.svgPathProperties(function(t){const e=r.parse(t);return 1===e.length&&"M"===e[0][0]?t+"L"+(e[0][1]+1)+","+e[0][2]:t}(t)),o=n.getTotalLength();return!!o&&n.getPointAtLength(o*e)}},19718:(t,e,n)=>{"use strict";const r=n(32668),o=n(24953);t.exports=function(t,e){if(!e)throw"please set LineBreaker";return function(n,i,s){const a=o(s),c=r(n,i,(function(e){const n=t(e,a);return Math.ceil(n*a.fontSize)}),e),l=function(t){let e=0;return t.forEach((t=>{t.width>e&&(e=t.width)})),e}(c),d=n.split("\n"),u=c.length!==d.length?i:l;return{width:Math.ceil(Math.max(u,l)),height:Math.max(Math.ceil(1.5*a.fontSize),Math.ceil(c.length*(a.fontSize+a.lineSpacing)))}}}},75249:(t,e,n)=>{"use strict";const r=n(79871);t.exports=function(t){this.writeStickers=function(e,n,o){const i=r(e,{ignoreVariants:!0});return t.writeLine(i.join(""),{fontSize:n-2,weight:"regular",family:"emoji"},"black",o)}}},88276:(t,e,n)=>{"use strict";const r=n(46226),o=n(19718),i=n(47206),s=n(85032).svgMarkupBuilder,a=n(81364)();t.exports=function(t,e,n){const c=this,l=n&&n.fontFamilies||a;c.nodeTextDimensions=o(t,e),c.lineSize=function(e,n){return{width:Math.ceil(t(e,n)*n.fontSize),height:n.fontSize}},c.writeLine=function(t,e,n,r){const o=s("text").css({fill:n}),a={"font-family":l[e.family],"font-size":e.fontSize,"font-weight":e.weight,lengthAdjust:"spacing","text-anchor":"left",y:e.fontSize};return r&&(a["text-anchor"]="middle",a.textLength=Math.floor(r),a.x=Math.ceil(r/2)),"rtl"===i(t)&&(function(t,e){t["text-anchor"]="end",t.textLength=Math.floor(e),t.x=Math.ceil(e)}(a,c.lineSize(t,e).width),a["font-size"]=Math.floor(.9*e.fontSize)),o.attr(a).text(t),o},c.writeNodeText=r(t,e,n)}},46226:(t,e,n)=>{"use strict";const r=n(32668),o=n(24953),i=n(47206),s=n(85032).svgMarkupBuilder,a=n(81364)();t.exports=function(t,e,n){return function(c){const l=o(c.theme.font),d=n&&n.fontFamilies||a,u=Math.ceil(l.fontSize+l.lineSpacing),h=s("text").css({fill:c.theme.text.color}).attr({"font-family":d[l.family],"font-size":l.fontSize,"font-weight":l.weight,lengthAdjust:"spacingAndGlyphs"});return r(c.title,c.metrics.text.width,(function(e){const n=t(e,l);return Math.ceil(n*l.fontSize)}),e).forEach(((t,e)=>{const r={y:c.metrics.text.y+u*e+l.fontSize,x:Math.ceil(c.metrics.text.x+c.metrics.text.width/2),"text-anchor":"middle",textLength:Math.floor(t.width)},o=c.theme.text;"right"===o.alignment?(r["text-anchor"]="end",r.x=Math.ceil(c.metrics.text.x+c.metrics.text.width)):"left"===o.alignment?(r["text-anchor"]="start",r.x=c.metrics.text.x):"start"===o.alignment&&("rtl"===i(t.text)?(r["text-anchor"]="end",r.x=Math.ceil(c.metrics.text.x+c.metrics.text.width),r["font-size"]=Math.floor(.9*l.fontSize)):(r["text-anchor"]="start",r.x=c.metrics.text.x)),n&&n.dontSpecifyLength&&delete r.textLength,s("tspan").attr(r).text(t.text).appendTo(h)})),h}}},32668:t=>{"use strict";t.exports=function t(e,n,r,o){if(!o)throw"line breaker not set";let i,s="",a=0,c=0;const l=new o(e||""),d=[],u=function(){const t=s.trim(),e=r(t);d.push({text:t,width:e}),s=""},h=function(){return n&&c>n},f=function(t){const e=t.replace(/\s+$/,""),o=r(e),i=r(s+e);return n&&i>n?(u(),s=t):s+=t,o};for(;(i=l.nextBreak())&&!h();)c=f(e.slice(a,i.position)),i.required&&u(),a=i.position;return h()?t(e,c,r,o):(s.length&&u(),d)}},45964:(t,e,n)=>{"use strict";const r=n(85032).svgMarkupBuilder,o=n(24953),i=n(81246),s=n(2957);t.exports=function(t,e,n,a){if(!t||!t.label)throw new Error("invalid-args");const c=i.node[0].connections.style,l=t.theme&&t.theme.label||i.connector[c].label,d=function(){const r=n.left+n.width/2-t.position.left,o=e.left+e.width/2-t.position.left,i=t.theme&&t.theme.line&&t.theme.line.width,a=Number.isFinite(i)&&i||0;return l.position.aboveEnd?{x:Math.round(o+(r-o)*(l.position.ratio||1)),y:n.top-t.position.top-l.position.aboveEnd-a}:l.position.belowEnd?{x:Math.round(o+(r-o)*(l.position.ratio||1)),y:n.top+n.height-t.position.top+l.position.belowEnd-a}:Number.isFinite(l.position.aboveEndLeft)?{x:e.left-t.position.left,y:n.top-t.position.top-l.position.aboveEndLeft-a}:l.position.ratio?s(t.d,l.position.ratio):void 0}()||{x:t.position.left+t.position.width/2,y:t.position.top+t.position.height/2},u=t.label&&t.label.trim(),h=o(l.text.font),f=a.lineSize(u,h),p=t.position.left+Math.round(d.x-f.width/2),g=Math.max(p,t.position.left),m=t.position.top+Math.round(d.y-f.height),v=r("g").attr("transform","translate("+g+","+m+")");return(l.backgroundColor&&"transparent"!==l.backgroundColor||l.borderColor&&"transparent"!==l.borderColor)&&function(t,e){return r("rect").attr({x:0,y:2,width:Math.round(t.width),height:Math.round(t.height),fill:e.backgroundColor,stroke:e.borderColor})}(f,l).appendTo(v),a.writeLine(u,h,l.text.color).appendTo(v),v}},12956:(t,e,n)=>{"use strict";const r=n(85032).svgMarkupBuilder,o=n(50735),i=n(60058);t.exports=function(t,e,n){const s=r("g").attr("transform","translate("+t.position.left+","+t.position.top+")"),a={d:t.d,"stroke-dasharray":i(o[t.lineStyle],t.width),stroke:t.color,"stroke-width":t.width,"stroke-linecap":"round"};return e&&(a["marker-start"]="url(#"+e+")"),n&&(a["marker-end"]="url(#"+n+")"),r("path").attr(a).appendTo(s),t.afterArrowD&&r("path").attr({d:t.afterArrowD,"stroke-dasharray":i(o[t.lineStyle],t.width),stroke:t.color,"stroke-width":t.width,"stroke-linecap":"round"}).appendTo(s),s}},15470:(t,e,n)=>{"use strict";const r=n(85032).svgMarkupBuilder;t.exports=function(t){const e=r("g").attr("transform","translate("+t.position.left+","+t.position.top+")");return r("path").appendTo(e).attr({d:t.d,"stroke-dasharray":t.lineProps.strokes,stroke:t.lineProps.color,"stroke-width":t.lineProps.width,"stroke-linecap":t.lineProps.linecap}),((t,e)=>{t.arrows&&t.arrows.length&&t.arrows.forEach((n=>{r("path").appendTo(e).attr({d:n,fill:t.lineProps.color,stroke:t.lineProps.color,"stroke-width":t.lineProps.width})}))})(t,e),e}},5592:(t,e,n)=>{"use strict";const r=n(85032).svgMarkupBuilder;t.exports=function(t,e,n,o){const i=!!n.label,s=!!n.stickers.length,a=n.metrics.decorations&&n.metrics.decorations.x,c=n.metrics.decorations&&n.metrics.decorations.y,l=r("g").attr("transform","translate("+a+","+c+")");var d,u;(i||s)&&((d=n.metrics.decorations,u=n.theme,r("rect").attr(Object.assign({fill:u.decorations.backgroundColor,rx:u.decorations.cornerRadius,ry:u.decorations.cornerRadius},d,{x:0,y:0}))).appendTo(l),i&&function(t,e){const n=e.theme.decorations.margin,o=e.metrics.decorations.width-e.metrics.decorations.labelWidth-n,i=r("g").attr("transform","translate("+o+","+n+")"),s=e.theme.decorations.label.margin+e.theme.decorations.label.border,a=r("g").attr("transform","translate("+s+","+s+")"),c={fontSize:e.theme.decorations.label.font.sizePx,lineSpacing:e.theme.decorations.label.font.lineSpacingPx,weight:e.theme.decorations.label.font.weight,family:"Sans"};var l,d;return(l=e.metrics.decorations,d=e.theme,r("rect").attr({x:0,y:0,width:l.labelWidth,height:Math.round(l.height-2*d.decorations.margin),fill:"transparent",stroke:d.decorations.color,rx:d.decorations.label.cornerRadius,ry:d.decorations.label.cornerRadius,"stroke-width":d.decorations.label.border})).appendTo(i),a.appendTo(i),t.writeLine(e.label,c,e.theme.decorations.color).appendTo(a),i}(t,n).appendTo(l),s&&function(t,e){const n=e.theme.decorations.margin,o=e.theme.decorations.height,i=r("g").attr("transform","translate("+n+","+n+")");return t.writeStickers(e.stickers,o,e.metrics.decorations.standardDecorationsWidth).appendTo(i),i}(e,n).appendTo(l),l.appendTo(o))}},91663:(t,e,n)=>{"use strict";const r=n(85032).svgMarkupBuilder,o=n(5592),i=n(50735);t.exports=function(t,e,n,s){if(!(t&&e&&n&&s&&s.writeStickers))throw new Error("invalid-args");const a=r("g").attr("transform","translate("+t.x+","+t.y+")"),c=r("rect").attr(e.metrics.bubble).attr({rx:e.theme.cornerRadius,ry:e.theme.cornerRadius}).appendTo(a),l="transparent"!==e.theme.lineColor&&"surround"===e.theme.borderType&&e.theme.lineColor;return e.theme.backgroundColor&&"transparent"!==e.theme.backgroundColor&&c.css("fill",e.theme.backgroundColor),l&&c.css({stroke:l,"stroke-width":e.theme.lineWidth,"stroke-dasharray":i[e.theme.lineStyle||"solid"]}),e.icon&&e.icon.url&&r("image").attr(Object.assign({"xlink:href":e.icon.url},e.metrics.icon)).appendTo(a),e.title&&a.append(n.writeNodeText(e)),o(n,s,e,a),a}},17049:(t,e,n)=>{"use strict";const r=n(49421);t.exports=function(t,e){const n=r(t.accountType);if(!n.cognitoAuthenticated)throw new Error("invalid-args");return n.subAccountRequired&&e?[t.account,e].join("/"):t.subAccount&&n.defaultSubAccount!==t.subAccount?[t.account,t.subAccount].join("/"):t.account}},55615:t=>{"use strict";t.exports=function(t){const e=t&&t.header&&t.header.sessionId&&t.events||[],n=(t=>Object({collaborator:t.header&&{displayName:t.header.description,sessionId:t.header.sessionId},ts:t.header&&t.header.ts}))(t);return e.map((t=>((t,e)=>Object.assign(Object.assign({},e),t))(t,n)))}},49421:t=>{"use strict";const e={"mindmup-gold":{isDomainAccount:!1,cognitoAuthenticated:!0,otpAuthenticated:!0,otpEmailtoPrimary:!0,subAccountRequired:!1,teamdriveAvailable:!1,payByInvoiceAllowed:!0,subteamsAvailable:!1},"mindmup-gold-team":{isDomainAccount:!1,cognitoAuthenticated:!0,otpAuthenticated:!0,subAccountRequired:!0,defaultSubAccount:"_",defaultSubAccountRole:"primary",teamdriveAvailable:!0,payByInvoiceAllowed:!0,subteamsAvailable:!0},"mindmup-gold-domain":{isDomainAccount:!0,cognitoAuthenticated:!1,otpAuthenticated:!1,subAccountRequired:!0,teamdriveAvailable:!0,payByInvoiceAllowed:!0,subteamsAvailable:!0}};t.exports=function(t){const n=t&&e[t];if(!n)throw new Error("invalid-args");return Object.assign({},n)}},40034:(t,e,n)=>{"use strict";const r="gold-asset",o=r+":",i=n(68684),s=n(538),a=function(t){return t&&0===t.indexOf(o)&&t.length>o.length},c=function(t){return!!t&&o+t},l=function(t){return!!t&&a(t)&&t.slice(o.length)};t.exports={assetIdFromIcon:function(t){return t&&t.attr&&t.attr.icon&&l(t.attr.icon.url)},assetIdFromAttachment:function(t){return t&&t.attr&&t.attr.attachment&&t.attr.attachment.goldAssetId&&l(t.attr.attachment.goldAssetId)},assetIdFromResourceId:l,getUploadableAttachment:t=>{const e=t.attr&&t.attr.attachment,n=e&&e.dataUriEncoded&&e.content;return n&&s(n)&&e},getUploadableImage:function(t){const e=t.attr&&t.attr.icon,n=e&&e.url;return n&&i(n)&&e},goldAssetType:r,goldAssetPrefix:o,isGoldAssetId:a,isGoldAssetMetadata:function(t){return!!(t&&t.type===r&&t.fileId&&t.assetId)&&t},metadataForGoldAsset:function(t,e,n){if(!a(t))return!1;if(!e)throw"invalid-args";const o={type:r,fileId:e,assetId:l(t)};return n&&(o.contentUrl=n),o},replaceAttachmentWithResourceId:(t,e,n,r)=>{if(!t||!e)throw new Error("invalid-args");if(!n)return;const o=Object.assign({},r);delete o.content,delete o.dataUriEncoded,o.goldAssetId=n,t.updateAttr(e,"attachment",o)},replaceImageWithResourceId:(t,e,n)=>{if(!t||!e)throw new Error("invalid-args");n&&t.mergeAttrProperty(e,"icon","url",n)},resourceIdFromAssetId:c,resourceIdToUrlMap:function(t){const e={};return Object.keys(t).forEach((function(n){e[c(n)]=t[n]})),e}}},85483:(t,e,n)=>{"use strict";const r=n(55615);t.exports=function(t,e){if(!t||!e)throw new Error("invalid-args");let n=0;const o=this;o.nextEnvelope=r=>{const o=(n+=1,n);return((e,n,r,o)=>t.getProfile().then((t=>((t,e,n,r,o)=>({header:{description:t,ts:e,sessionId:n,sequence:r},events:o}))(t.description,o,n,r,e))))(r,e(),o,Date.now())},o.getCounter=()=>n,o.eventsFromEnvelope=r}},40796:t=>{"use strict";const e=function(t){return t&&t.header&&t.header.sequence||0},n=function(t){return t&&t.header&&t.header.sessionId||""},r=function(t){let r={};const o=function(t){const o=n(t),i=e(t),s=r[o];return!!(s&&s>i)||(r[o]=i,!1)};this.containsOutOfOrderElement=function(){return r={},t&&t.find(o)},this.outOfOrderElements=function(){return r={},t&&t.filter(o)}},o=function(t,n){return e(t)-e(n)};t.exports=function(){this.requiresSorting=function(t){return new r(t).containsOutOfOrderElement()},this.sortedEnvelopes=function(t){const i=[],s=new r(t).outOfOrderElements(),a=function(t){const e={};return t&&t.length?(t.forEach((t=>{const r=n(t);e[r]||(e[r]=[]),e[r].push(t)})),Object.values(e).forEach((t=>t.sort(o))),e):e}(s);return t.filter((t=>!s.includes(t))).forEach((t=>{const r=n(t),o=e(t),s=a[r],c=[];s&&0!==s.length?e(s[0])>o?i.push(t):(s.forEach((t=>{e(t)<=o?i.push(t):c.push(t)})),i.push(t),c.length?a[r]=c:a[r]=!1):i.push(t)})),i}}},60117:t=>{"use strict";const e="gold-file:";t.exports=function(t){if(!t)throw new Error("invalid-args");const n=this;n.isNonControlEvent=t=>t&&t.cmd&&!t.cmd.startsWith(e),n.isRenameEvent=t=>t&&t.cmd&&t.cmd.startsWith(e+"rename"),n.isTrashedEvent=t=>t&&t.cmd&&t.cmd.startsWith(e+"trashed"),n.hasRemoteEvents=e=>(e&&e.header&&e.header.sessionId)!==t(),n.buildLocalControlEvent=(t,n)=>({cmd:e+t,args:n})}},538:t=>{"use strict";t.exports=function(t){return!!t&&/^data:[a-z]+\/[^;]+;base64,[A-z0-9=+/]+$/.test(t)}},68684:t=>{"use strict";t.exports=function(t){return!!t&&/^data:image\/[a-z]+;base64,[A-z0-9=+/]+$/.test(t)}},87358:t=>{"use strict";t.exports=function(t){return!!(t&&t.length>3&&/^[a-z][a-z0-9]{3,20}$/.test(t))}},20332:t=>{"use strict";t.exports={product:{name:"Cisco Webex",description:"Collaborate with users in Cisco Webex meetings and spaces",url:"https://www.mindmup.com/tutorials/cisco-webex.html",unit_label:"users",metadata:{link:"https://www.mindmup.com/tutorials/cisco-webex.html",type:"add-in",quantities:"100,500"}},priceMetadata:{"add-in":"Cisco"},prices:{month:{personal:[{quantity:100,price_in_units:599},{quantity:500,price_in_units:1199}]},year:{personal:[{quantity:100,price_in_units:5e3},{quantity:500,price_in_units:1e4}],team10:[{quantity:100,price_in_units:1e4},{quantity:500,price_in_units:2e4}],team100:[{quantity:100,price_in_units:2e4},{quantity:500,price_in_units:4e4}],team200:[{quantity:100,price_in_units:3e4},{quantity:500,price_in_units:6e4}],domain:[{quantity:100,price_in_units:4e4},{quantity:500,price_in_units:8e4}]}}}},61176:t=>{"use strict";const e=function(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((n=>{t.hasOwnProperty(n)&&null!==t[n]&&((t,e)=>("object"==typeof t[e]||"function"==typeof t[e])&&!Object.isFrozen(t[e]))(t,n)&&e(t[n])})),t};t.exports=e},71283:(t,e,n)=>{"use strict";const r=n(61176),o=n(20332),i={durationToPeriod:{month:"monthly",year:"annual"},periodInMonths:{month:1,year:12},accountTypePostfix:{"mindmup-gold":"","mindmup-gold-team":" team","mindmup-gold-domain":" domain"},currencies:{USD:{prefix:"$",postfix:" USD",sources:["card","amazon-pay"]},EUR:{prefix:"",postfix:" EUR",sources:["card","amazon-pay"]},GBP:{prefix:"",postfix:" GBP",sources:["card","amazon-pay"]}},upgradePlanTypeActions:{personalYearly:"ChangeToYearly",smallTeam:"ChangeToSmallTeam",mediumTeam:"ChangeToMediumTeam",largeTeam:"ChangeToLargeTeam"},planId:{personalMonthlyUSD:"1_GB_for_1_month",personalYearlyUSD:"1_GB_for_12_months_33213873860960",smallTeamUSD:"small_team_12_months",mediumTeamUSD:"medium_team_12_months",largeTeamUSD:"large_team_12_months",domainUSD:"domain_for_12_months",personalMonthlyEUR:"personal_1_month_EUR",personalYearlyEUR:"personal_12_months_EUR",smallTeamEUR:"small_team_12_months_EUR",mediumTeamEUR:"medium_team_12_months_EUR",largeTeamEUR:"large_team_12_months_EUR",domainEUR:"domain_12_months_EUR",personalMonthlyGBP:"personal_1_month_GBP",personalYearlyGBP:"personal_12_months_GBP",smallTeamGBP:"small_team_12_months_GBP",mediumTeamGBP:"medium_team_12_months_GBP",largeTeamGBP:"large_team_12_months_GBP",domainGBP:"domain_12_months_GBP"},planMetadata:{"1_GB_for_1_month":{account_type:"mindmup-gold",max_linked_emails:1,upgradable_to:["1_GB_for_12_months_33213873860960","small_team_12_months"],addIns:["crowdlink_personal_1_month_USD","cisco_personal_1_month_USD"],price:"2.99",currency:"USD",period:"month",type:"personal",purchaseAction:"BuySubscription"},"1_GB_for_12_months_33213873860960":{account_type:"mindmup-gold",max_linked_emails:1,upgradable_to:["small_team_12_months"],addIns:["crowdlink_personal_12_months_USD","cisco_personal_12_months_USD"],requireUpgradeAction:"ChangeToYearlyUSD",price:"25",currency:"USD",period:"year",type:"personal",purchaseAction:"BuySubscription"},small_team_12_months:{account_type:"mindmup-gold-team",max_linked_emails:9,upgradable_to:["medium_team_12_months"],addIns:["crowdlink_team10_12_months_USD","cisco_team10_12_months_USD"],requireUpgradeAction:"ChangeToSmallTeamUSD",price:"50",currency:"USD",period:"year",type:"team",typeLabel:"10 user team",purchaseAction:"BuySmallTeamSubscription"},medium_team_12_months:{account_type:"mindmup-gold-team",max_linked_emails:99,upgradable_to:["large_team_12_months"],addIns:["crowdlink_team100_12_months_USD","cisco_team100_12_months_USD"],requireUpgradeAction:"ChangeToMediumTeamUSD",price:"100",currency:"USD",period:"year",type:"team",typeLabel:"100 user team",purchaseAction:"BuyTeamSubscription"},large_team_12_months:{account_type:"mindmup-gold-team",max_linked_emails:199,requireUpgradeAction:"ChangeToLargeTeamUSD",addIns:["crowdlink_team200_12_months_USD","cisco_team200_12_months_USD"],price:"150",currency:"USD",period:"year",type:"team",typeLabel:"200 user team",purchaseAction:"BuyTeamSubscription"},domain_for_12_months:{account_type:"mindmup-gold-domain",max_linked_emails:1,addIns:["crowdlink_domain_12_months_USD","cisco_domain_12_months_USD","ms-teams_domain_12_months_USD"],price:"100",currency:"USD",period:"year",type:"domain",purchaseAction:"BuyDomainSubscription",trialPeriodDays:7},personal_1_month_EUR:{account_type:"mindmup-gold",max_linked_emails:1,upgradable_to:["personal_12_months_EUR","small_team_12_months_EUR"],addIns:["crowdlink_personal_1_month_EUR","cisco_personal_1_month_EUR"],price:"2.99",currency:"EUR",period:"month",type:"personal",purchaseAction:"BuySubscription"},personal_12_months_EUR:{account_type:"mindmup-gold",max_linked_emails:1,upgradable_to:["small_team_12_months_EUR"],addIns:["crowdlink_personal_12_months_EUR","cisco_personal_12_months_EUR"],requireUpgradeAction:"ChangeToYearlyEUR",price:"25",currency:"EUR",period:"year",type:"personal",purchaseAction:"BuySubscription"},small_team_12_months_EUR:{account_type:"mindmup-gold-team",max_linked_emails:9,upgradable_to:["medium_team_12_months_EUR"],addIns:["crowdlink_team10_12_months_EUR","cisco_team10_12_months_EUR"],requireUpgradeAction:"ChangeToSmallTeamEUR",price:"50",currency:"EUR",period:"year",type:"team",typeLabel:"10 user team",purchaseAction:"BuySmallTeamSubscription"},medium_team_12_months_EUR:{account_type:"mindmup-gold-team",max_linked_emails:99,upgradable_to:["large_team_12_months_EUR"],addIns:["crowdlink_team100_12_months_EUR","cisco_team100_12_months_EUR"],requireUpgradeAction:"ChangeToMediumTeamEUR",price:"100",currency:"EUR",period:"year",type:"team",typeLabel:"100 user team",purchaseAction:"BuyTeamSubscription"},large_team_12_months_EUR:{account_type:"mindmup-gold-team",max_linked_emails:199,addIns:["crowdlink_team200_12_months_EUR","cisco_team200_12_months_EUR"],requireUpgradeAction:"ChangeToLargeTeamEUR",price:"150",currency:"EUR",period:"year",type:"team",typeLabel:"200 user team",purchaseAction:"BuyTeamSubscription"},domain_12_months_EUR:{account_type:"mindmup-gold-domain",max_linked_emails:1,addIns:["crowdlink_domain_12_months_EUR","cisco_domain_12_months_EUR","ms-teams_domain_12_months_EUR"],price:"100",currency:"EUR",period:"year",type:"domain",purchaseAction:"BuyDomainSubscription",trialPeriodDays:7},personal_1_month_GBP:{account_type:"mindmup-gold",max_linked_emails:1,upgradable_to:["personal_12_months_GBP","small_team_12_months_GBP"],addIns:["crowdlink_personal_1_month_GBP","cisco_personal_1_month_GBP"],price:"2.99",currency:"GBP",period:"month",type:"personal",purchaseAction:"BuySubscription"},personal_12_months_GBP:{account_type:"mindmup-gold",max_linked_emails:1,upgradable_to:["small_team_12_months_GBP"],requireUpgradeAction:"ChangeToYearlyGBP",addIns:["crowdlink_personal_12_months_GBP","cisco_personal_12_months_GBP"],price:"25",currency:"GBP",period:"year",type:"personal",purchaseAction:"BuySubscription"},small_team_12_months_GBP:{account_type:"mindmup-gold-team",max_linked_emails:9,upgradable_to:["medium_team_12_months_GBP"],addIns:["crowdlink_team10_12_months_GBP","cisco_team10_12_months_GBP"],requireUpgradeAction:"ChangeToSmallTeamGBP",price:"50",currency:"GBP",period:"year",type:"team",typeLabel:"10 user team",purchaseAction:"BuySmallTeamSubscription"},medium_team_12_months_GBP:{account_type:"mindmup-gold-team",max_linked_emails:99,upgradable_to:["large_team_12_months_GBP"],addIns:["crowdlink_team100_12_months_GBP","cisco_team100_12_months_GBP"],requireUpgradeAction:"ChangeToMediumTeamGBP",price:"100",currency:"GBP",period:"year",type:"team",typeLabel:"100 user team",purchaseAction:"BuyTeamSubscription"},large_team_12_months_GBP:{account_type:"mindmup-gold-team",max_linked_emails:199,addIns:["crowdlink_team200_12_months_GBP","cisco_team200_12_months_GBP"],requireUpgradeAction:"ChangeToLargeTeamGBP",price:"150",currency:"GBP",period:"year",type:"team",typeLabel:"200 user team",purchaseAction:"BuyTeamSubscription"},domain_12_months_GBP:{account_type:"mindmup-gold-domain",max_linked_emails:1,addIns:["crowdlink_domain_12_months_GBP","cisco_domain_12_months_GBP","ms-teams_domain_12_months_GBP"],price:"100",currency:"GBP",period:"year",type:"domain",purchaseAction:"BuyDomainSubscription",trialPeriodDays:7}}},s=(t,e)=>{const n=parseFloat(t.price),r=t.addIns.find((t=>/cisco/.test(t))).split("_")[1],i=o.prices[t.period][r].find((t=>t.quantity===e));return(n+i.price_in_units/i.quantity).toFixed(2)};Object.keys(i.planId).forEach((t=>{const e=i.planId[t],n=i.planMetadata[e],r=n.addIns.find((t=>/cisco/.test(t)));if(r){const o=100,a=((t,e,n)=>{const r={};return r[t]=1,r[e]=n,r})(e,r,o),c=Object.assign({},n,{products:a,price:s(n,o),type:`cisco-${n.type}`,trialPeriodDays:7,typeLabel:(n.typeLabel||n.type)+" + 100 collaborators"});i.planMetadata[`cisco-${e}`]=c,i.planId[`cisco-${t}`]=`cisco-${e}`}})),i.accountTypes=Object.keys(i.accountTypePostfix),t.exports=r(i)},31180:t=>{"use strict";const e=t=>{if(!t)throw new Error("invalid-args");const{userId:e,prefix:n,teamFileName:r}=t;if(!e||!r)throw new Error("invalid-args");return`${n||""}${e}/${r}`},n="_",r=t=>{if(!t)throw new Error("invalid-args");if(t.teamId.includes(n))return t;const e=[t.provider,t.teamId].join(n);return Object.assign({},t,{teamId:e})},o="mindmup-auto",i=(t,e)=>{if(!t)throw new Error("invalid-args");const n="member",i=e&&e[n]||[];return[r({provider:o,teamId:`${t}-everyone`,description:`all of ${t}`,owner:t,role:n,allowedActions:i})]};t.exports={affiliateTeamFileKey:t=>e(Object.assign({teamFileName:"affiliateTeams.json"},t)),subteamFileKey:t=>e(Object.assign({teamFileName:"teamlist.json"},t)),getAffiliateProvider:t=>{if(!t)throw new Error("invalid-args");const e=t.split(n);return e&&e.length>1&&e[0]||!1},isAuto:t=>t===o,autoDescription:t=>{const e=t.split(n)[1],r=e&&e.split("-"),o=r&&r[0],s=o&&i(o),a=s&&s.find((e=>e.teamId===t));return a&&a.description},applyAffiliateTeamId:r,getAutoTeams:i}},56249:()=>{},42480:()=>{},59050:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VERSION:()=>o,after:()=>_e,all:()=>tn,allKeys:()=>mt,any:()=>en,assign:()=>_t,before:()=>Re,bind:()=>xe,bindAll:()=>Ce,chain:()=>ye,chunk:()=>Nn,clone:()=>Nt,collect:()=>$e,compact:()=>kn,compose:()=>Oe,constant:()=>Q,contains:()=>nn,countBy:()=>vn,create:()=>Dt,debounce:()=>Te,default:()=>zn,defaults:()=>Rt,defer:()=>Fe,delay:()=>ke,detect:()=>Ge,difference:()=>Mn,drop:()=>Cn,each:()=>He,escape:()=>se,every:()=>tn,extend:()=>Ot,extendOwn:()=>_t,filter:()=>Qe,find:()=>Ge,findIndex:()=>je,findKey:()=>De,findLastIndex:()=>Be,findWhere:()=>Ke,first:()=>An,flatten:()=>Fn,foldl:()=>Je,foldr:()=>Xe,forEach:()=>He,functions:()=>Pt,get:()=>zt,groupBy:()=>gn,has:()=>Vt,head:()=>An,identity:()=>Gt,include:()=>nn,includes:()=>nn,indexBy:()=>mn,indexOf:()=>ze,initial:()=>Sn,inject:()=>Je,intersection:()=>On,invert:()=>Tt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>K,isArrayBuffer:()=>D,isBoolean:()=>F,isDataView:()=>G,isDate:()=>O,isElement:()=>M,isEmpty:()=>ct,isEqual:()=>gt,isError:()=>R,isFinite:()=>J,isFunction:()=>B,isMap:()=>At,isMatch:()=>lt,isNaN:()=>X,isNull:()=>I,isNumber:()=>L,isObject:()=>C,isRegExp:()=>_,isSet:()=>It,isString:()=>P,isSymbol:()=>U,isTypedArray:()=>ot,isUndefined:()=>k,isWeakMap:()=>Ct,isWeakSet:()=>kt,iteratee:()=>Jt,keys:()=>at,last:()=>In,lastIndexOf:()=>Ve,map:()=>$e,mapObject:()=>Qt,matcher:()=>Kt,matches:()=>Kt,max:()=>an,memoize:()=>Ie,methods:()=>Pt,min:()=>cn,mixin:()=>Bn,negate:()=>Le,noop:()=>Zt,now:()=>re,object:()=>Un,omit:()=>xn,once:()=>Ue,pairs:()=>Mt,partial:()=>Ee,partition:()=>yn,pick:()=>En,pluck:()=>on,property:()=>Ht,propertyOf:()=>te,random:()=>ne,range:()=>Dn,reduce:()=>Je,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>A,result:()=>ge,sample:()=>un,select:()=>Qe,shuffle:()=>hn,size:()=>wn,some:()=>en,sortBy:()=>fn,sortedIndex:()=>We,tail:()=>Cn,take:()=>An,tap:()=>jt,template:()=>pe,templateSettings:()=>ce,throttle:()=>Me,times:()=>ee,toArray:()=>dn,toPath:()=>Bt,transpose:()=>_n,unescape:()=>ae,union:()=>Ln,uniq:()=>Pn,unique:()=>Pn,uniqueId:()=>ve,unzip:()=>_n,values:()=>Ft,where:()=>sn,without:()=>Tn,wrap:()=>Pe,zip:()=>Rn});var r={};n.r(r),n.d(r,{VERSION:()=>o,after:()=>_e,all:()=>tn,allKeys:()=>mt,any:()=>en,assign:()=>_t,before:()=>Re,bind:()=>xe,bindAll:()=>Ce,chain:()=>ye,chunk:()=>Nn,clone:()=>Nt,collect:()=>$e,compact:()=>kn,compose:()=>Oe,constant:()=>Q,contains:()=>nn,countBy:()=>vn,create:()=>Dt,debounce:()=>Te,default:()=>Wn,defaults:()=>Rt,defer:()=>Fe,delay:()=>ke,detect:()=>Ge,difference:()=>Mn,drop:()=>Cn,each:()=>He,escape:()=>se,every:()=>tn,extend:()=>Ot,extendOwn:()=>_t,filter:()=>Qe,find:()=>Ge,findIndex:()=>je,findKey:()=>De,findLastIndex:()=>Be,findWhere:()=>Ke,first:()=>An,flatten:()=>Fn,foldl:()=>Je,foldr:()=>Xe,forEach:()=>He,functions:()=>Pt,get:()=>zt,groupBy:()=>gn,has:()=>Vt,head:()=>An,identity:()=>Gt,include:()=>nn,includes:()=>nn,indexBy:()=>mn,indexOf:()=>ze,initial:()=>Sn,inject:()=>Je,intersection:()=>On,invert:()=>Tt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>K,isArrayBuffer:()=>D,isBoolean:()=>F,isDataView:()=>G,isDate:()=>O,isElement:()=>M,isEmpty:()=>ct,isEqual:()=>gt,isError:()=>R,isFinite:()=>J,isFunction:()=>B,isMap:()=>At,isMatch:()=>lt,isNaN:()=>X,isNull:()=>I,isNumber:()=>L,isObject:()=>C,isRegExp:()=>_,isSet:()=>It,isString:()=>P,isSymbol:()=>U,isTypedArray:()=>ot,isUndefined:()=>k,isWeakMap:()=>Ct,isWeakSet:()=>kt,iteratee:()=>Jt,keys:()=>at,last:()=>In,lastIndexOf:()=>Ve,map:()=>$e,mapObject:()=>Qt,matcher:()=>Kt,matches:()=>Kt,max:()=>an,memoize:()=>Ie,methods:()=>Pt,min:()=>cn,mixin:()=>Bn,negate:()=>Le,noop:()=>Zt,now:()=>re,object:()=>Un,omit:()=>xn,once:()=>Ue,pairs:()=>Mt,partial:()=>Ee,partition:()=>yn,pick:()=>En,pluck:()=>on,property:()=>Ht,propertyOf:()=>te,random:()=>ne,range:()=>Dn,reduce:()=>Je,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>A,result:()=>ge,sample:()=>un,select:()=>Qe,shuffle:()=>hn,size:()=>wn,some:()=>en,sortBy:()=>fn,sortedIndex:()=>We,tail:()=>Cn,take:()=>An,tap:()=>jt,template:()=>pe,templateSettings:()=>ce,throttle:()=>Me,times:()=>ee,toArray:()=>dn,toPath:()=>Bt,transpose:()=>_n,unescape:()=>ae,union:()=>Ln,uniq:()=>Pn,unique:()=>Pn,uniqueId:()=>ve,unzip:()=>_n,values:()=>Ft,where:()=>sn,without:()=>Tn,wrap:()=>Pe,zip:()=>Rn});var o="1.13.6",i="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,l=s.push,d=s.slice,u=a.toString,h=a.hasOwnProperty,f="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,g=Array.isArray,m=Object.keys,v=Object.create,y=f&&ArrayBuffer.isView,w=isNaN,b=isFinite,E=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1;function A(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=arguments[o];return i[e]=r,t.apply(this,i)}}function C(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function I(t){return null===t}function k(t){return void 0===t}function F(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)}function M(t){return!(!t||1!==t.nodeType)}function T(t){var e="[object "+t+"]";return function(t){return u.call(t)===e}}const P=T("String"),L=T("Number"),O=T("Date"),_=T("RegExp"),R=T("Error"),U=T("Symbol"),D=T("ArrayBuffer");var N=T("Function"),j=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof j&&(N=function(t){return"function"==typeof t||!1});const B=N,W=T("Object");var q=p&&W(new DataView(new ArrayBuffer(8))),z="undefined"!=typeof Map&&W(new Map),V=T("DataView");const G=q?function(t){return null!=t&&B(t.getInt8)&&D(t.buffer)}:V,K=g||T("Array");function H(t,e){return null!=t&&h.call(t,e)}var $=T("Arguments");!function(){$(arguments)||($=function(t){return H(t,"callee")})}();const Y=$;function J(t){return!U(t)&&b(t)&&!isNaN(parseFloat(t))}function X(t){return L(t)&&w(t)}function Q(t){return function(){return t}}function Z(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=S}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt("byteLength"),nt=Z(et);var rt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const ot=f?function(t){return y?y(t)&&!G(t):nt(t)&&rt.test(u.call(t))}:Q(!1),it=tt("length");function st(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=x.length,r=t.constructor,o=B(r)&&r.prototype||a,i="constructor";for(H(t,i)&&!e.contains(i)&&e.push(i);n--;)(i=x[n])in t&&t[i]!==o[i]&&!e.contains(i)&&e.push(i)}function at(t){if(!C(t))return[];if(m)return m(t);var e=[];for(var n in t)H(t,n)&&e.push(n);return E&&st(t,e),e}function ct(t){if(null==t)return!0;var e=it(t);return"number"==typeof e&&(K(t)||P(t)||Y(t))?0===e:0===it(at(t))}function lt(t,e){var n=at(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var s=n[i];if(e[s]!==o[s]||!(s in o))return!1}return!0}function dt(t){return t instanceof dt?t:this instanceof dt?void(this._wrapped=t):new dt(t)}function ut(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}dt.VERSION=o,dt.prototype.value=function(){return this._wrapped},dt.prototype.valueOf=dt.prototype.toJSON=dt.prototype.value,dt.prototype.toString=function(){return String(this._wrapped)};var ht="[object DataView]";function ft(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&pt(t,e,n,r)}function pt(t,e,n,r){t instanceof dt&&(t=t._wrapped),e instanceof dt&&(e=e._wrapped);var o=u.call(t);if(o!==u.call(e))return!1;if(q&&"[object Object]"==o&&G(t)){if(!G(e))return!1;o=ht}switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(e);case"[object ArrayBuffer]":case ht:return pt(ut(t),ut(e),n,r)}var i="[object Array]"===o;if(!i&&ot(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;i=!0}if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(B(s)&&s instanceof s&&B(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!ft(t[l],e[l],n,r))return!1}else{var d,h=at(t);if(l=h.length,at(e).length!==l)return!1;for(;l--;)if(!H(e,d=h[l])||!ft(t[d],e[d],n,r))return!1}return n.pop(),r.pop(),!0}function gt(t,e){return ft(t,e)}function mt(t){if(!C(t))return[];var e=[];for(var n in t)e.push(n);return E&&st(t,e),e}function vt(t){var e=it(t);return function(n){if(null==n)return!1;var r=mt(n);if(it(r))return!1;for(var o=0;o<e;o++)if(!B(n[t[o]]))return!1;return t!==xt||!B(n[yt])}}var yt="forEach",wt=["clear","delete"],bt=["get","has","set"],Et=wt.concat(yt,bt),xt=wt.concat(bt),St=["add"].concat(wt,yt,"has");const At=z?vt(Et):T("Map"),Ct=z?vt(xt):T("WeakMap"),It=z?vt(St):T("Set"),kt=T("WeakSet");function Ft(t){for(var e=at(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r}function Mt(t){for(var e=at(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r}function Tt(t){for(var e={},n=at(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e}function Pt(t){var e=[];for(var n in t)B(t[n])&&e.push(n);return e.sort()}function Lt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],s=t(i),a=s.length,c=0;c<a;c++){var l=s[c];e&&void 0!==n[l]||(n[l]=i[l])}return n}}const Ot=Lt(mt),_t=Lt(at),Rt=Lt(mt,!0);function Ut(t){if(!C(t))return{};if(v)return v(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Dt(t,e){var n=Ut(t);return e&&_t(n,e),n}function Nt(t){return C(t)?K(t)?t.slice():Ot({},t):t}function jt(t,e){return e(t),t}function Bt(t){return K(t)?t:[t]}function Wt(t){return dt.toPath(t)}function qt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function zt(t,e,n){var r=qt(t,Wt(e));return k(r)?n:r}function Vt(t,e){for(var n=(e=Wt(e)).length,r=0;r<n;r++){var o=e[r];if(!H(t,o))return!1;t=t[o]}return!!n}function Gt(t){return t}function Kt(t){return t=_t({},t),function(e){return lt(e,t)}}function Ht(t){return t=Wt(t),function(e){return qt(e,t)}}function $t(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}}function Yt(t,e,n){return null==t?Gt:B(t)?$t(t,e,n):C(t)&&!K(t)?Kt(t):Ht(t)}function Jt(t,e){return Yt(t,e,1/0)}function Xt(t,e,n){return dt.iteratee!==Jt?dt.iteratee(t,e):Yt(t,e,n)}function Qt(t,e,n){e=Xt(e,n);for(var r=at(t),o=r.length,i={},s=0;s<o;s++){var a=r[s];i[a]=e(t[a],a,t)}return i}function Zt(){}function te(t){return null==t?Zt:function(e){return zt(t,e)}}function ee(t,e,n){var r=Array(Math.max(0,t));e=$t(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r}function ne(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}dt.toPath=Bt,dt.iteratee=Jt;const re=Date.now||function(){return(new Date).getTime()};function oe(t){var e=function(e){return t[e]},n="(?:"+at(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}}const ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},se=oe(ie),ae=oe(Tt(ie)),ce=dt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var le=/(.)^/,de={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ue=/\\|'|\r|\n|\u2028|\u2029/g;function he(t){return"\\"+de[t]}var fe=/^\s*(\w|\$)+\s*$/;function pe(t,e,n){!e&&n&&(e=n),e=Rt({},e,dt.templateSettings);var r=RegExp([(e.escape||le).source,(e.interpolate||le).source,(e.evaluate||le).source].join("|")+"|$","g"),o=0,i="__p+='";t.replace(r,(function(e,n,r,s,a){return i+=t.slice(o,a).replace(ue,he),o=a+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),e})),i+="';\n";var s,a=e.variable;if(a){if(!fe.test(a))throw new Error("variable is not a bare identifier: "+a)}else i="with(obj||{}){\n"+i+"}\n",a="obj";i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{s=new Function(a,"_",i)}catch(t){throw t.source=i,t}var c=function(t){return s.call(this,t,dt)};return c.source="function("+a+"){\n"+i+"}",c}function ge(t,e,n){var r=(e=Wt(e)).length;if(!r)return B(n)?n.call(t):n;for(var o=0;o<r;o++){var i=null==t?void 0:t[e[o]];void 0===i&&(i=n,o=r),t=B(i)?i.call(t):i}return t}var me=0;function ve(t){var e=++me+"";return t?t+e:e}function ye(t){var e=dt(t);return e._chain=!0,e}function we(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var i=Ut(t.prototype),s=t.apply(i,o);return C(s)?s:i}var be=A((function(t,e){var n=be.placeholder,r=function(){for(var o=0,i=e.length,s=Array(i),a=0;a<i;a++)s[a]=e[a]===n?arguments[o++]:e[a];for(;o<arguments.length;)s.push(arguments[o++]);return we(t,r,this,this,s)};return r}));be.placeholder=dt;const Ee=be,xe=A((function(t,e,n){if(!B(t))throw new TypeError("Bind must be called on a function");var r=A((function(o){return we(t,r,e,this,n.concat(o))}));return r})),Se=Z(it);function Ae(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var o=r.length,i=0,s=it(t);i<s;i++){var a=t[i];if(Se(a)&&(K(a)||Y(a)))if(e>1)Ae(a,e-1,n,r),o=r.length;else for(var c=0,l=a.length;c<l;)r[o++]=a[c++];else n||(r[o++]=a)}return r}const Ce=A((function(t,e){var n=(e=Ae(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=xe(t[r],t)}return t}));function Ie(t,e){var n=function(r){var o=n.cache,i=""+(e?e.apply(this,arguments):r);return H(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return n.cache={},n}const ke=A((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Fe=Ee(ke,dt,1);function Me(t,e,n){var r,o,i,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:re(),r=null,s=t.apply(o,i),r||(o=i=null)},l=function(){var l=re();a||!1!==n.leading||(a=l);var d=e-(l-a);return o=this,i=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),a=l,s=t.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(c,d)),s};return l.cancel=function(){clearTimeout(r),a=0,r=o=i=null},l}function Te(t,e,n){var r,o,i,s,a,c=function(){var l=re()-o;e>l?r=setTimeout(c,e-l):(r=null,n||(s=t.apply(a,i)),r||(i=a=null))},l=A((function(l){return a=this,i=l,o=re(),r||(r=setTimeout(c,e),n&&(s=t.apply(a,i))),s}));return l.cancel=function(){clearTimeout(r),r=i=a=null},l}function Pe(t,e){return Ee(e,t)}function Le(t){return function(){return!t.apply(this,arguments)}}function Oe(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function _e(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Re(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Ue=Ee(Re,2);function De(t,e,n){e=Xt(e,n);for(var r,o=at(t),i=0,s=o.length;i<s;i++)if(e(t[r=o[i]],r,t))return r}function Ne(t){return function(e,n,r){n=Xt(n,r);for(var o=it(e),i=t>0?0:o-1;i>=0&&i<o;i+=t)if(n(e[i],i,e))return i;return-1}}const je=Ne(1),Be=Ne(-1);function We(t,e,n,r){for(var o=(n=Xt(n,r,1))(e),i=0,s=it(t);i<s;){var a=Math.floor((i+s)/2);n(t[a])<o?i=a+1:s=a}return i}function qe(t,e,n){return function(r,o,i){var s=0,a=it(r);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=e(d.call(r,s,a),X))>=0?i+s:-1;for(i=t>0?s:a-1;i>=0&&i<a;i+=t)if(r[i]===o)return i;return-1}}const ze=qe(1,je,We),Ve=qe(-1,Be);function Ge(t,e,n){var r=(Se(t)?je:De)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function Ke(t,e){return Ge(t,Kt(e))}function He(t,e,n){var r,o;if(e=$t(e,n),Se(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var i=at(t);for(r=0,o=i.length;r<o;r++)e(t[i[r]],i[r],t)}return t}function $e(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=Array(o),s=0;s<o;s++){var a=r?r[s]:s;i[s]=e(t[a],a,t)}return i}function Ye(t){return function(e,n,r,o){var i=arguments.length>=3;return function(e,n,r,o){var i=!Se(e)&&at(e),s=(i||e).length,a=t>0?0:s-1;for(o||(r=e[i?i[a]:a],a+=t);a>=0&&a<s;a+=t){var c=i?i[a]:a;r=n(r,e[c],c,e)}return r}(e,$t(n,o,4),r,i)}}const Je=Ye(1),Xe=Ye(-1);function Qe(t,e,n){var r=[];return e=Xt(e,n),He(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function Ze(t,e,n){return Qe(t,Le(Xt(e)),n)}function tn(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(!e(t[s],s,t))return!1}return!0}function en(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(e(t[s],s,t))return!0}return!1}function nn(t,e,n,r){return Se(t)||(t=Ft(t)),("number"!=typeof n||r)&&(n=0),ze(t,e,n)>=0}const rn=A((function(t,e,n){var r,o;return B(e)?o=e:(e=Wt(e),r=e.slice(0,-1),e=e[e.length-1]),$e(t,(function(t){var i=o;if(!i){if(r&&r.length&&(t=qt(t,r)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)}))}));function on(t,e){return $e(t,Ht(e))}function sn(t,e){return Qe(t,Kt(e))}function an(t,e,n){var r,o,i=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Se(t)?t:Ft(t)).length;a<c;a++)null!=(r=t[a])&&r>i&&(i=r);else e=Xt(e,n),He(t,(function(t,n,r){((o=e(t,n,r))>s||o===-1/0&&i===-1/0)&&(i=t,s=o)}));return i}function cn(t,e,n){var r,o,i=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Se(t)?t:Ft(t)).length;a<c;a++)null!=(r=t[a])&&r<i&&(i=r);else e=Xt(e,n),He(t,(function(t,n,r){((o=e(t,n,r))<s||o===1/0&&i===1/0)&&(i=t,s=o)}));return i}var ln=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function dn(t){return t?K(t)?d.call(t):P(t)?t.match(ln):Se(t)?$e(t,Gt):Ft(t):[]}function un(t,e,n){if(null==e||n)return Se(t)||(t=Ft(t)),t[ne(t.length-1)];var r=dn(t),o=it(r);e=Math.max(Math.min(e,o),0);for(var i=o-1,s=0;s<e;s++){var a=ne(s,i),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,e)}function hn(t){return un(t,1/0)}function fn(t,e,n){var r=0;return e=Xt(e,n),on($e(t,(function(t,n,o){return{value:t,index:r++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function pn(t,e){return function(n,r,o){var i=e?[[],[]]:{};return r=Xt(r,o),He(n,(function(e,o){var s=r(e,o,n);t(i,e,s)})),i}}const gn=pn((function(t,e,n){H(t,n)?t[n].push(e):t[n]=[e]})),mn=pn((function(t,e,n){t[n]=e})),vn=pn((function(t,e,n){H(t,n)?t[n]++:t[n]=1})),yn=pn((function(t,e,n){t[n?0:1].push(e)}),!0);function wn(t){return null==t?0:Se(t)?t.length:at(t).length}function bn(t,e,n){return e in n}const En=A((function(t,e){var n={},r=e[0];if(null==t)return n;B(r)?(e.length>1&&(r=$t(r,e[1])),e=mt(t)):(r=bn,e=Ae(e,!1,!1),t=Object(t));for(var o=0,i=e.length;o<i;o++){var s=e[o],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),xn=A((function(t,e){var n,r=e[0];return B(r)?(r=Le(r),e.length>1&&(n=e[1])):(e=$e(Ae(e,!1,!1),String),r=function(t,n){return!nn(e,n)}),En(t,r,n)}));function Sn(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function An(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:Sn(t,t.length-e)}function Cn(t,e,n){return d.call(t,null==e||n?1:e)}function In(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Cn(t,Math.max(0,t.length-e))}function kn(t){return Qe(t,Boolean)}function Fn(t,e){return Ae(t,e,!1)}const Mn=A((function(t,e){return e=Ae(e,!0,!0),Qe(t,(function(t){return!nn(e,t)}))})),Tn=A((function(t,e){return Mn(t,e)}));function Pn(t,e,n,r){F(e)||(r=n,n=e,e=!1),null!=n&&(n=Xt(n,r));for(var o=[],i=[],s=0,a=it(t);s<a;s++){var c=t[s],l=n?n(c,s,t):c;e&&!n?(s&&i===l||o.push(c),i=l):n?nn(i,l)||(i.push(l),o.push(c)):nn(o,c)||o.push(c)}return o}const Ln=A((function(t){return Pn(Ae(t,!0,!0))}));function On(t){for(var e=[],n=arguments.length,r=0,o=it(t);r<o;r++){var i=t[r];if(!nn(e,i)){var s;for(s=1;s<n&&nn(arguments[s],i);s++);s===n&&e.push(i)}}return e}function _n(t){for(var e=t&&an(t,it).length||0,n=Array(e),r=0;r<e;r++)n[r]=on(t,r);return n}const Rn=A(_n);function Un(t,e){for(var n={},r=0,o=it(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Dn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o}function Nn(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(d.call(t,r,r+=e));return n}function jn(t,e){return t._chain?dt(e).chain():e}function Bn(t){return He(Pt(t),(function(e){var n=dt[e]=t[e];dt.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),jn(this,n.apply(dt,t))}})),dt}He(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=s[t];dt.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),jn(this,n)}})),He(["concat","join","slice"],(function(t){var e=s[t];dt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),jn(this,t)}}));const Wn=dt;var qn=Bn(r);qn._=qn;const zn=qn},19767:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VERSION:()=>o,after:()=>_e,all:()=>tn,allKeys:()=>mt,any:()=>en,assign:()=>_t,before:()=>Re,bind:()=>xe,bindAll:()=>Ce,chain:()=>ye,chunk:()=>Nn,clone:()=>Nt,collect:()=>$e,compact:()=>kn,compose:()=>Oe,constant:()=>Q,contains:()=>nn,countBy:()=>vn,create:()=>Dt,debounce:()=>Te,default:()=>zn,defaults:()=>Rt,defer:()=>Fe,delay:()=>ke,detect:()=>Ge,difference:()=>Mn,drop:()=>Cn,each:()=>He,escape:()=>se,every:()=>tn,extend:()=>Ot,extendOwn:()=>_t,filter:()=>Qe,find:()=>Ge,findIndex:()=>je,findKey:()=>De,findLastIndex:()=>Be,findWhere:()=>Ke,first:()=>An,flatten:()=>Fn,foldl:()=>Je,foldr:()=>Xe,forEach:()=>He,functions:()=>Pt,get:()=>zt,groupBy:()=>gn,has:()=>Vt,head:()=>An,identity:()=>Gt,include:()=>nn,includes:()=>nn,indexBy:()=>mn,indexOf:()=>ze,initial:()=>Sn,inject:()=>Je,intersection:()=>On,invert:()=>Tt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>K,isArrayBuffer:()=>D,isBoolean:()=>F,isDataView:()=>G,isDate:()=>O,isElement:()=>M,isEmpty:()=>ct,isEqual:()=>gt,isError:()=>R,isFinite:()=>J,isFunction:()=>B,isMap:()=>At,isMatch:()=>lt,isNaN:()=>X,isNull:()=>I,isNumber:()=>L,isObject:()=>C,isRegExp:()=>_,isSet:()=>It,isString:()=>P,isSymbol:()=>U,isTypedArray:()=>ot,isUndefined:()=>k,isWeakMap:()=>Ct,isWeakSet:()=>kt,iteratee:()=>Jt,keys:()=>at,last:()=>In,lastIndexOf:()=>Ve,map:()=>$e,mapObject:()=>Qt,matcher:()=>Kt,matches:()=>Kt,max:()=>an,memoize:()=>Ie,methods:()=>Pt,min:()=>cn,mixin:()=>Bn,negate:()=>Le,noop:()=>Zt,now:()=>re,object:()=>Un,omit:()=>xn,once:()=>Ue,pairs:()=>Mt,partial:()=>Ee,partition:()=>yn,pick:()=>En,pluck:()=>on,property:()=>Ht,propertyOf:()=>te,random:()=>ne,range:()=>Dn,reduce:()=>Je,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>A,result:()=>ge,sample:()=>un,select:()=>Qe,shuffle:()=>hn,size:()=>wn,some:()=>en,sortBy:()=>fn,sortedIndex:()=>We,tail:()=>Cn,take:()=>An,tap:()=>jt,template:()=>pe,templateSettings:()=>ce,throttle:()=>Me,times:()=>ee,toArray:()=>dn,toPath:()=>Bt,transpose:()=>_n,unescape:()=>ae,union:()=>Ln,uniq:()=>Pn,unique:()=>Pn,uniqueId:()=>ve,unzip:()=>_n,values:()=>Ft,where:()=>sn,without:()=>Tn,wrap:()=>Pe,zip:()=>Rn});var r={};n.r(r),n.d(r,{VERSION:()=>o,after:()=>_e,all:()=>tn,allKeys:()=>mt,any:()=>en,assign:()=>_t,before:()=>Re,bind:()=>xe,bindAll:()=>Ce,chain:()=>ye,chunk:()=>Nn,clone:()=>Nt,collect:()=>$e,compact:()=>kn,compose:()=>Oe,constant:()=>Q,contains:()=>nn,countBy:()=>vn,create:()=>Dt,debounce:()=>Te,default:()=>Wn,defaults:()=>Rt,defer:()=>Fe,delay:()=>ke,detect:()=>Ge,difference:()=>Mn,drop:()=>Cn,each:()=>He,escape:()=>se,every:()=>tn,extend:()=>Ot,extendOwn:()=>_t,filter:()=>Qe,find:()=>Ge,findIndex:()=>je,findKey:()=>De,findLastIndex:()=>Be,findWhere:()=>Ke,first:()=>An,flatten:()=>Fn,foldl:()=>Je,foldr:()=>Xe,forEach:()=>He,functions:()=>Pt,get:()=>zt,groupBy:()=>gn,has:()=>Vt,head:()=>An,identity:()=>Gt,include:()=>nn,includes:()=>nn,indexBy:()=>mn,indexOf:()=>ze,initial:()=>Sn,inject:()=>Je,intersection:()=>On,invert:()=>Tt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>K,isArrayBuffer:()=>D,isBoolean:()=>F,isDataView:()=>G,isDate:()=>O,isElement:()=>M,isEmpty:()=>ct,isEqual:()=>gt,isError:()=>R,isFinite:()=>J,isFunction:()=>B,isMap:()=>At,isMatch:()=>lt,isNaN:()=>X,isNull:()=>I,isNumber:()=>L,isObject:()=>C,isRegExp:()=>_,isSet:()=>It,isString:()=>P,isSymbol:()=>U,isTypedArray:()=>ot,isUndefined:()=>k,isWeakMap:()=>Ct,isWeakSet:()=>kt,iteratee:()=>Jt,keys:()=>at,last:()=>In,lastIndexOf:()=>Ve,map:()=>$e,mapObject:()=>Qt,matcher:()=>Kt,matches:()=>Kt,max:()=>an,memoize:()=>Ie,methods:()=>Pt,min:()=>cn,mixin:()=>Bn,negate:()=>Le,noop:()=>Zt,now:()=>re,object:()=>Un,omit:()=>xn,once:()=>Ue,pairs:()=>Mt,partial:()=>Ee,partition:()=>yn,pick:()=>En,pluck:()=>on,property:()=>Ht,propertyOf:()=>te,random:()=>ne,range:()=>Dn,reduce:()=>Je,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>A,result:()=>ge,sample:()=>un,select:()=>Qe,shuffle:()=>hn,size:()=>wn,some:()=>en,sortBy:()=>fn,sortedIndex:()=>We,tail:()=>Cn,take:()=>An,tap:()=>jt,template:()=>pe,templateSettings:()=>ce,throttle:()=>Me,times:()=>ee,toArray:()=>dn,toPath:()=>Bt,transpose:()=>_n,unescape:()=>ae,union:()=>Ln,uniq:()=>Pn,unique:()=>Pn,uniqueId:()=>ve,unzip:()=>_n,values:()=>Ft,where:()=>sn,without:()=>Tn,wrap:()=>Pe,zip:()=>Rn});var o="1.13.6",i="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,l=s.push,d=s.slice,u=a.toString,h=a.hasOwnProperty,f="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,g=Array.isArray,m=Object.keys,v=Object.create,y=f&&ArrayBuffer.isView,w=isNaN,b=isFinite,E=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1;function A(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=arguments[o];return i[e]=r,t.apply(this,i)}}function C(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function I(t){return null===t}function k(t){return void 0===t}function F(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)}function M(t){return!(!t||1!==t.nodeType)}function T(t){var e="[object "+t+"]";return function(t){return u.call(t)===e}}const P=T("String"),L=T("Number"),O=T("Date"),_=T("RegExp"),R=T("Error"),U=T("Symbol"),D=T("ArrayBuffer");var N=T("Function"),j=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof j&&(N=function(t){return"function"==typeof t||!1});const B=N,W=T("Object");var q=p&&W(new DataView(new ArrayBuffer(8))),z="undefined"!=typeof Map&&W(new Map),V=T("DataView");const G=q?function(t){return null!=t&&B(t.getInt8)&&D(t.buffer)}:V,K=g||T("Array");function H(t,e){return null!=t&&h.call(t,e)}var $=T("Arguments");!function(){$(arguments)||($=function(t){return H(t,"callee")})}();const Y=$;function J(t){return!U(t)&&b(t)&&!isNaN(parseFloat(t))}function X(t){return L(t)&&w(t)}function Q(t){return function(){return t}}function Z(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=S}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt("byteLength"),nt=Z(et);var rt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const ot=f?function(t){return y?y(t)&&!G(t):nt(t)&&rt.test(u.call(t))}:Q(!1),it=tt("length");function st(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=x.length,r=t.constructor,o=B(r)&&r.prototype||a,i="constructor";for(H(t,i)&&!e.contains(i)&&e.push(i);n--;)(i=x[n])in t&&t[i]!==o[i]&&!e.contains(i)&&e.push(i)}function at(t){if(!C(t))return[];if(m)return m(t);var e=[];for(var n in t)H(t,n)&&e.push(n);return E&&st(t,e),e}function ct(t){if(null==t)return!0;var e=it(t);return"number"==typeof e&&(K(t)||P(t)||Y(t))?0===e:0===it(at(t))}function lt(t,e){var n=at(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var s=n[i];if(e[s]!==o[s]||!(s in o))return!1}return!0}function dt(t){return t instanceof dt?t:this instanceof dt?void(this._wrapped=t):new dt(t)}function ut(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}dt.VERSION=o,dt.prototype.value=function(){return this._wrapped},dt.prototype.valueOf=dt.prototype.toJSON=dt.prototype.value,dt.prototype.toString=function(){return String(this._wrapped)};var ht="[object DataView]";function ft(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&pt(t,e,n,r)}function pt(t,e,n,r){t instanceof dt&&(t=t._wrapped),e instanceof dt&&(e=e._wrapped);var o=u.call(t);if(o!==u.call(e))return!1;if(q&&"[object Object]"==o&&G(t)){if(!G(e))return!1;o=ht}switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(e);case"[object ArrayBuffer]":case ht:return pt(ut(t),ut(e),n,r)}var i="[object Array]"===o;if(!i&&ot(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;i=!0}if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(B(s)&&s instanceof s&&B(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!ft(t[l],e[l],n,r))return!1}else{var d,h=at(t);if(l=h.length,at(e).length!==l)return!1;for(;l--;)if(!H(e,d=h[l])||!ft(t[d],e[d],n,r))return!1}return n.pop(),r.pop(),!0}function gt(t,e){return ft(t,e)}function mt(t){if(!C(t))return[];var e=[];for(var n in t)e.push(n);return E&&st(t,e),e}function vt(t){var e=it(t);return function(n){if(null==n)return!1;var r=mt(n);if(it(r))return!1;for(var o=0;o<e;o++)if(!B(n[t[o]]))return!1;return t!==xt||!B(n[yt])}}var yt="forEach",wt=["clear","delete"],bt=["get","has","set"],Et=wt.concat(yt,bt),xt=wt.concat(bt),St=["add"].concat(wt,yt,"has");const At=z?vt(Et):T("Map"),Ct=z?vt(xt):T("WeakMap"),It=z?vt(St):T("Set"),kt=T("WeakSet");function Ft(t){for(var e=at(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r}function Mt(t){for(var e=at(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r}function Tt(t){for(var e={},n=at(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e}function Pt(t){var e=[];for(var n in t)B(t[n])&&e.push(n);return e.sort()}function Lt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],s=t(i),a=s.length,c=0;c<a;c++){var l=s[c];e&&void 0!==n[l]||(n[l]=i[l])}return n}}const Ot=Lt(mt),_t=Lt(at),Rt=Lt(mt,!0);function Ut(t){if(!C(t))return{};if(v)return v(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Dt(t,e){var n=Ut(t);return e&&_t(n,e),n}function Nt(t){return C(t)?K(t)?t.slice():Ot({},t):t}function jt(t,e){return e(t),t}function Bt(t){return K(t)?t:[t]}function Wt(t){return dt.toPath(t)}function qt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function zt(t,e,n){var r=qt(t,Wt(e));return k(r)?n:r}function Vt(t,e){for(var n=(e=Wt(e)).length,r=0;r<n;r++){var o=e[r];if(!H(t,o))return!1;t=t[o]}return!!n}function Gt(t){return t}function Kt(t){return t=_t({},t),function(e){return lt(e,t)}}function Ht(t){return t=Wt(t),function(e){return qt(e,t)}}function $t(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}}function Yt(t,e,n){return null==t?Gt:B(t)?$t(t,e,n):C(t)&&!K(t)?Kt(t):Ht(t)}function Jt(t,e){return Yt(t,e,1/0)}function Xt(t,e,n){return dt.iteratee!==Jt?dt.iteratee(t,e):Yt(t,e,n)}function Qt(t,e,n){e=Xt(e,n);for(var r=at(t),o=r.length,i={},s=0;s<o;s++){var a=r[s];i[a]=e(t[a],a,t)}return i}function Zt(){}function te(t){return null==t?Zt:function(e){return zt(t,e)}}function ee(t,e,n){var r=Array(Math.max(0,t));e=$t(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r}function ne(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}dt.toPath=Bt,dt.iteratee=Jt;const re=Date.now||function(){return(new Date).getTime()};function oe(t){var e=function(e){return t[e]},n="(?:"+at(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}}const ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},se=oe(ie),ae=oe(Tt(ie)),ce=dt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var le=/(.)^/,de={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ue=/\\|'|\r|\n|\u2028|\u2029/g;function he(t){return"\\"+de[t]}var fe=/^\s*(\w|\$)+\s*$/;function pe(t,e,n){!e&&n&&(e=n),e=Rt({},e,dt.templateSettings);var r=RegExp([(e.escape||le).source,(e.interpolate||le).source,(e.evaluate||le).source].join("|")+"|$","g"),o=0,i="__p+='";t.replace(r,(function(e,n,r,s,a){return i+=t.slice(o,a).replace(ue,he),o=a+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),e})),i+="';\n";var s,a=e.variable;if(a){if(!fe.test(a))throw new Error("variable is not a bare identifier: "+a)}else i="with(obj||{}){\n"+i+"}\n",a="obj";i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{s=new Function(a,"_",i)}catch(t){throw t.source=i,t}var c=function(t){return s.call(this,t,dt)};return c.source="function("+a+"){\n"+i+"}",c}function ge(t,e,n){var r=(e=Wt(e)).length;if(!r)return B(n)?n.call(t):n;for(var o=0;o<r;o++){var i=null==t?void 0:t[e[o]];void 0===i&&(i=n,o=r),t=B(i)?i.call(t):i}return t}var me=0;function ve(t){var e=++me+"";return t?t+e:e}function ye(t){var e=dt(t);return e._chain=!0,e}function we(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var i=Ut(t.prototype),s=t.apply(i,o);return C(s)?s:i}var be=A((function(t,e){var n=be.placeholder,r=function(){for(var o=0,i=e.length,s=Array(i),a=0;a<i;a++)s[a]=e[a]===n?arguments[o++]:e[a];for(;o<arguments.length;)s.push(arguments[o++]);return we(t,r,this,this,s)};return r}));be.placeholder=dt;const Ee=be,xe=A((function(t,e,n){if(!B(t))throw new TypeError("Bind must be called on a function");var r=A((function(o){return we(t,r,e,this,n.concat(o))}));return r})),Se=Z(it);function Ae(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var o=r.length,i=0,s=it(t);i<s;i++){var a=t[i];if(Se(a)&&(K(a)||Y(a)))if(e>1)Ae(a,e-1,n,r),o=r.length;else for(var c=0,l=a.length;c<l;)r[o++]=a[c++];else n||(r[o++]=a)}return r}const Ce=A((function(t,e){var n=(e=Ae(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=xe(t[r],t)}return t}));function Ie(t,e){var n=function(r){var o=n.cache,i=""+(e?e.apply(this,arguments):r);return H(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return n.cache={},n}const ke=A((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Fe=Ee(ke,dt,1);function Me(t,e,n){var r,o,i,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:re(),r=null,s=t.apply(o,i),r||(o=i=null)},l=function(){var l=re();a||!1!==n.leading||(a=l);var d=e-(l-a);return o=this,i=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),a=l,s=t.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(c,d)),s};return l.cancel=function(){clearTimeout(r),a=0,r=o=i=null},l}function Te(t,e,n){var r,o,i,s,a,c=function(){var l=re()-o;e>l?r=setTimeout(c,e-l):(r=null,n||(s=t.apply(a,i)),r||(i=a=null))},l=A((function(l){return a=this,i=l,o=re(),r||(r=setTimeout(c,e),n&&(s=t.apply(a,i))),s}));return l.cancel=function(){clearTimeout(r),r=i=a=null},l}function Pe(t,e){return Ee(e,t)}function Le(t){return function(){return!t.apply(this,arguments)}}function Oe(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function _e(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Re(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Ue=Ee(Re,2);function De(t,e,n){e=Xt(e,n);for(var r,o=at(t),i=0,s=o.length;i<s;i++)if(e(t[r=o[i]],r,t))return r}function Ne(t){return function(e,n,r){n=Xt(n,r);for(var o=it(e),i=t>0?0:o-1;i>=0&&i<o;i+=t)if(n(e[i],i,e))return i;return-1}}const je=Ne(1),Be=Ne(-1);function We(t,e,n,r){for(var o=(n=Xt(n,r,1))(e),i=0,s=it(t);i<s;){var a=Math.floor((i+s)/2);n(t[a])<o?i=a+1:s=a}return i}function qe(t,e,n){return function(r,o,i){var s=0,a=it(r);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=e(d.call(r,s,a),X))>=0?i+s:-1;for(i=t>0?s:a-1;i>=0&&i<a;i+=t)if(r[i]===o)return i;return-1}}const ze=qe(1,je,We),Ve=qe(-1,Be);function Ge(t,e,n){var r=(Se(t)?je:De)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function Ke(t,e){return Ge(t,Kt(e))}function He(t,e,n){var r,o;if(e=$t(e,n),Se(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var i=at(t);for(r=0,o=i.length;r<o;r++)e(t[i[r]],i[r],t)}return t}function $e(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=Array(o),s=0;s<o;s++){var a=r?r[s]:s;i[s]=e(t[a],a,t)}return i}function Ye(t){return function(e,n,r,o){var i=arguments.length>=3;return function(e,n,r,o){var i=!Se(e)&&at(e),s=(i||e).length,a=t>0?0:s-1;for(o||(r=e[i?i[a]:a],a+=t);a>=0&&a<s;a+=t){var c=i?i[a]:a;r=n(r,e[c],c,e)}return r}(e,$t(n,o,4),r,i)}}const Je=Ye(1),Xe=Ye(-1);function Qe(t,e,n){var r=[];return e=Xt(e,n),He(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function Ze(t,e,n){return Qe(t,Le(Xt(e)),n)}function tn(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(!e(t[s],s,t))return!1}return!0}function en(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(e(t[s],s,t))return!0}return!1}function nn(t,e,n,r){return Se(t)||(t=Ft(t)),("number"!=typeof n||r)&&(n=0),ze(t,e,n)>=0}const rn=A((function(t,e,n){var r,o;return B(e)?o=e:(e=Wt(e),r=e.slice(0,-1),e=e[e.length-1]),$e(t,(function(t){var i=o;if(!i){if(r&&r.length&&(t=qt(t,r)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)}))}));function on(t,e){return $e(t,Ht(e))}function sn(t,e){return Qe(t,Kt(e))}function an(t,e,n){var r,o,i=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Se(t)?t:Ft(t)).length;a<c;a++)null!=(r=t[a])&&r>i&&(i=r);else e=Xt(e,n),He(t,(function(t,n,r){((o=e(t,n,r))>s||o===-1/0&&i===-1/0)&&(i=t,s=o)}));return i}function cn(t,e,n){var r,o,i=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Se(t)?t:Ft(t)).length;a<c;a++)null!=(r=t[a])&&r<i&&(i=r);else e=Xt(e,n),He(t,(function(t,n,r){((o=e(t,n,r))<s||o===1/0&&i===1/0)&&(i=t,s=o)}));return i}var ln=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function dn(t){return t?K(t)?d.call(t):P(t)?t.match(ln):Se(t)?$e(t,Gt):Ft(t):[]}function un(t,e,n){if(null==e||n)return Se(t)||(t=Ft(t)),t[ne(t.length-1)];var r=dn(t),o=it(r);e=Math.max(Math.min(e,o),0);for(var i=o-1,s=0;s<e;s++){var a=ne(s,i),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,e)}function hn(t){return un(t,1/0)}function fn(t,e,n){var r=0;return e=Xt(e,n),on($e(t,(function(t,n,o){return{value:t,index:r++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function pn(t,e){return function(n,r,o){var i=e?[[],[]]:{};return r=Xt(r,o),He(n,(function(e,o){var s=r(e,o,n);t(i,e,s)})),i}}const gn=pn((function(t,e,n){H(t,n)?t[n].push(e):t[n]=[e]})),mn=pn((function(t,e,n){t[n]=e})),vn=pn((function(t,e,n){H(t,n)?t[n]++:t[n]=1})),yn=pn((function(t,e,n){t[n?0:1].push(e)}),!0);function wn(t){return null==t?0:Se(t)?t.length:at(t).length}function bn(t,e,n){return e in n}const En=A((function(t,e){var n={},r=e[0];if(null==t)return n;B(r)?(e.length>1&&(r=$t(r,e[1])),e=mt(t)):(r=bn,e=Ae(e,!1,!1),t=Object(t));for(var o=0,i=e.length;o<i;o++){var s=e[o],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),xn=A((function(t,e){var n,r=e[0];return B(r)?(r=Le(r),e.length>1&&(n=e[1])):(e=$e(Ae(e,!1,!1),String),r=function(t,n){return!nn(e,n)}),En(t,r,n)}));function Sn(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function An(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:Sn(t,t.length-e)}function Cn(t,e,n){return d.call(t,null==e||n?1:e)}function In(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Cn(t,Math.max(0,t.length-e))}function kn(t){return Qe(t,Boolean)}function Fn(t,e){return Ae(t,e,!1)}const Mn=A((function(t,e){return e=Ae(e,!0,!0),Qe(t,(function(t){return!nn(e,t)}))})),Tn=A((function(t,e){return Mn(t,e)}));function Pn(t,e,n,r){F(e)||(r=n,n=e,e=!1),null!=n&&(n=Xt(n,r));for(var o=[],i=[],s=0,a=it(t);s<a;s++){var c=t[s],l=n?n(c,s,t):c;e&&!n?(s&&i===l||o.push(c),i=l):n?nn(i,l)||(i.push(l),o.push(c)):nn(o,c)||o.push(c)}return o}const Ln=A((function(t){return Pn(Ae(t,!0,!0))}));function On(t){for(var e=[],n=arguments.length,r=0,o=it(t);r<o;r++){var i=t[r];if(!nn(e,i)){var s;for(s=1;s<n&&nn(arguments[s],i);s++);s===n&&e.push(i)}}return e}function _n(t){for(var e=t&&an(t,it).length||0,n=Array(e),r=0;r<e;r++)n[r]=on(t,r);return n}const Rn=A(_n);function Un(t,e){for(var n={},r=0,o=it(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Dn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o}function Nn(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(d.call(t,r,r+=e));return n}function jn(t,e){return t._chain?dt(e).chain():e}function Bn(t){return He(Pt(t),(function(e){var n=dt[e]=t[e];dt.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),jn(this,n.apply(dt,t))}})),dt}He(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=s[t];dt.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),jn(this,n)}})),He(["concat","join","slice"],(function(t){var e=s[t];dt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),jn(this,t)}}));const Wn=dt;var qn=Bn(r);qn._=qn;const zn=qn},22226:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VERSION:()=>o,after:()=>_e,all:()=>tn,allKeys:()=>mt,any:()=>en,assign:()=>_t,before:()=>Re,bind:()=>xe,bindAll:()=>Ce,chain:()=>ye,chunk:()=>Nn,clone:()=>Nt,collect:()=>$e,compact:()=>kn,compose:()=>Oe,constant:()=>Q,contains:()=>nn,countBy:()=>vn,create:()=>Dt,debounce:()=>Te,default:()=>zn,defaults:()=>Rt,defer:()=>Fe,delay:()=>ke,detect:()=>Ge,difference:()=>Mn,drop:()=>Cn,each:()=>He,escape:()=>se,every:()=>tn,extend:()=>Ot,extendOwn:()=>_t,filter:()=>Qe,find:()=>Ge,findIndex:()=>je,findKey:()=>De,findLastIndex:()=>Be,findWhere:()=>Ke,first:()=>An,flatten:()=>Fn,foldl:()=>Je,foldr:()=>Xe,forEach:()=>He,functions:()=>Pt,get:()=>zt,groupBy:()=>gn,has:()=>Vt,head:()=>An,identity:()=>Gt,include:()=>nn,includes:()=>nn,indexBy:()=>mn,indexOf:()=>ze,initial:()=>Sn,inject:()=>Je,intersection:()=>On,invert:()=>Tt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>K,isArrayBuffer:()=>D,isBoolean:()=>F,isDataView:()=>G,isDate:()=>O,isElement:()=>M,isEmpty:()=>ct,isEqual:()=>gt,isError:()=>R,isFinite:()=>J,isFunction:()=>B,isMap:()=>At,isMatch:()=>lt,isNaN:()=>X,isNull:()=>I,isNumber:()=>L,isObject:()=>C,isRegExp:()=>_,isSet:()=>It,isString:()=>P,isSymbol:()=>U,isTypedArray:()=>ot,isUndefined:()=>k,isWeakMap:()=>Ct,isWeakSet:()=>kt,iteratee:()=>Jt,keys:()=>at,last:()=>In,lastIndexOf:()=>Ve,map:()=>$e,mapObject:()=>Qt,matcher:()=>Kt,matches:()=>Kt,max:()=>an,memoize:()=>Ie,methods:()=>Pt,min:()=>cn,mixin:()=>Bn,negate:()=>Le,noop:()=>Zt,now:()=>re,object:()=>Un,omit:()=>xn,once:()=>Ue,pairs:()=>Mt,partial:()=>Ee,partition:()=>yn,pick:()=>En,pluck:()=>on,property:()=>Ht,propertyOf:()=>te,random:()=>ne,range:()=>Dn,reduce:()=>Je,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>A,result:()=>ge,sample:()=>un,select:()=>Qe,shuffle:()=>hn,size:()=>wn,some:()=>en,sortBy:()=>fn,sortedIndex:()=>We,tail:()=>Cn,take:()=>An,tap:()=>jt,template:()=>pe,templateSettings:()=>ce,throttle:()=>Me,times:()=>ee,toArray:()=>dn,toPath:()=>Bt,transpose:()=>_n,unescape:()=>ae,union:()=>Ln,uniq:()=>Pn,unique:()=>Pn,uniqueId:()=>ve,unzip:()=>_n,values:()=>Ft,where:()=>sn,without:()=>Tn,wrap:()=>Pe,zip:()=>Rn});var r={};n.r(r),n.d(r,{VERSION:()=>o,after:()=>_e,all:()=>tn,allKeys:()=>mt,any:()=>en,assign:()=>_t,before:()=>Re,bind:()=>xe,bindAll:()=>Ce,chain:()=>ye,chunk:()=>Nn,clone:()=>Nt,collect:()=>$e,compact:()=>kn,compose:()=>Oe,constant:()=>Q,contains:()=>nn,countBy:()=>vn,create:()=>Dt,debounce:()=>Te,default:()=>Wn,defaults:()=>Rt,defer:()=>Fe,delay:()=>ke,detect:()=>Ge,difference:()=>Mn,drop:()=>Cn,each:()=>He,escape:()=>se,every:()=>tn,extend:()=>Ot,extendOwn:()=>_t,filter:()=>Qe,find:()=>Ge,findIndex:()=>je,findKey:()=>De,findLastIndex:()=>Be,findWhere:()=>Ke,first:()=>An,flatten:()=>Fn,foldl:()=>Je,foldr:()=>Xe,forEach:()=>He,functions:()=>Pt,get:()=>zt,groupBy:()=>gn,has:()=>Vt,head:()=>An,identity:()=>Gt,include:()=>nn,includes:()=>nn,indexBy:()=>mn,indexOf:()=>ze,initial:()=>Sn,inject:()=>Je,intersection:()=>On,invert:()=>Tt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>K,isArrayBuffer:()=>D,isBoolean:()=>F,isDataView:()=>G,isDate:()=>O,isElement:()=>M,isEmpty:()=>ct,isEqual:()=>gt,isError:()=>R,isFinite:()=>J,isFunction:()=>B,isMap:()=>At,isMatch:()=>lt,isNaN:()=>X,isNull:()=>I,isNumber:()=>L,isObject:()=>C,isRegExp:()=>_,isSet:()=>It,isString:()=>P,isSymbol:()=>U,isTypedArray:()=>ot,isUndefined:()=>k,isWeakMap:()=>Ct,isWeakSet:()=>kt,iteratee:()=>Jt,keys:()=>at,last:()=>In,lastIndexOf:()=>Ve,map:()=>$e,mapObject:()=>Qt,matcher:()=>Kt,matches:()=>Kt,max:()=>an,memoize:()=>Ie,methods:()=>Pt,min:()=>cn,mixin:()=>Bn,negate:()=>Le,noop:()=>Zt,now:()=>re,object:()=>Un,omit:()=>xn,once:()=>Ue,pairs:()=>Mt,partial:()=>Ee,partition:()=>yn,pick:()=>En,pluck:()=>on,property:()=>Ht,propertyOf:()=>te,random:()=>ne,range:()=>Dn,reduce:()=>Je,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>A,result:()=>ge,sample:()=>un,select:()=>Qe,shuffle:()=>hn,size:()=>wn,some:()=>en,sortBy:()=>fn,sortedIndex:()=>We,tail:()=>Cn,take:()=>An,tap:()=>jt,template:()=>pe,templateSettings:()=>ce,throttle:()=>Me,times:()=>ee,toArray:()=>dn,toPath:()=>Bt,transpose:()=>_n,unescape:()=>ae,union:()=>Ln,uniq:()=>Pn,unique:()=>Pn,uniqueId:()=>ve,unzip:()=>_n,values:()=>Ft,where:()=>sn,without:()=>Tn,wrap:()=>Pe,zip:()=>Rn});var o="1.13.6",i="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,l=s.push,d=s.slice,u=a.toString,h=a.hasOwnProperty,f="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,g=Array.isArray,m=Object.keys,v=Object.create,y=f&&ArrayBuffer.isView,w=isNaN,b=isFinite,E=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1;function A(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=arguments[o];return i[e]=r,t.apply(this,i)}}function C(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function I(t){return null===t}function k(t){return void 0===t}function F(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)}function M(t){return!(!t||1!==t.nodeType)}function T(t){var e="[object "+t+"]";return function(t){return u.call(t)===e}}const P=T("String"),L=T("Number"),O=T("Date"),_=T("RegExp"),R=T("Error"),U=T("Symbol"),D=T("ArrayBuffer");var N=T("Function"),j=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof j&&(N=function(t){return"function"==typeof t||!1});const B=N,W=T("Object");var q=p&&W(new DataView(new ArrayBuffer(8))),z="undefined"!=typeof Map&&W(new Map),V=T("DataView");const G=q?function(t){return null!=t&&B(t.getInt8)&&D(t.buffer)}:V,K=g||T("Array");function H(t,e){return null!=t&&h.call(t,e)}var $=T("Arguments");!function(){$(arguments)||($=function(t){return H(t,"callee")})}();const Y=$;function J(t){return!U(t)&&b(t)&&!isNaN(parseFloat(t))}function X(t){return L(t)&&w(t)}function Q(t){return function(){return t}}function Z(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=S}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt("byteLength"),nt=Z(et);var rt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const ot=f?function(t){return y?y(t)&&!G(t):nt(t)&&rt.test(u.call(t))}:Q(!1),it=tt("length");function st(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=x.length,r=t.constructor,o=B(r)&&r.prototype||a,i="constructor";for(H(t,i)&&!e.contains(i)&&e.push(i);n--;)(i=x[n])in t&&t[i]!==o[i]&&!e.contains(i)&&e.push(i)}function at(t){if(!C(t))return[];if(m)return m(t);var e=[];for(var n in t)H(t,n)&&e.push(n);return E&&st(t,e),e}function ct(t){if(null==t)return!0;var e=it(t);return"number"==typeof e&&(K(t)||P(t)||Y(t))?0===e:0===it(at(t))}function lt(t,e){var n=at(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var s=n[i];if(e[s]!==o[s]||!(s in o))return!1}return!0}function dt(t){return t instanceof dt?t:this instanceof dt?void(this._wrapped=t):new dt(t)}function ut(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}dt.VERSION=o,dt.prototype.value=function(){return this._wrapped},dt.prototype.valueOf=dt.prototype.toJSON=dt.prototype.value,dt.prototype.toString=function(){return String(this._wrapped)};var ht="[object DataView]";function ft(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&pt(t,e,n,r)}function pt(t,e,n,r){t instanceof dt&&(t=t._wrapped),e instanceof dt&&(e=e._wrapped);var o=u.call(t);if(o!==u.call(e))return!1;if(q&&"[object Object]"==o&&G(t)){if(!G(e))return!1;o=ht}switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(e);case"[object ArrayBuffer]":case ht:return pt(ut(t),ut(e),n,r)}var i="[object Array]"===o;if(!i&&ot(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;i=!0}if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(B(s)&&s instanceof s&&B(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!ft(t[l],e[l],n,r))return!1}else{var d,h=at(t);if(l=h.length,at(e).length!==l)return!1;for(;l--;)if(!H(e,d=h[l])||!ft(t[d],e[d],n,r))return!1}return n.pop(),r.pop(),!0}function gt(t,e){return ft(t,e)}function mt(t){if(!C(t))return[];var e=[];for(var n in t)e.push(n);return E&&st(t,e),e}function vt(t){var e=it(t);return function(n){if(null==n)return!1;var r=mt(n);if(it(r))return!1;for(var o=0;o<e;o++)if(!B(n[t[o]]))return!1;return t!==xt||!B(n[yt])}}var yt="forEach",wt=["clear","delete"],bt=["get","has","set"],Et=wt.concat(yt,bt),xt=wt.concat(bt),St=["add"].concat(wt,yt,"has");const At=z?vt(Et):T("Map"),Ct=z?vt(xt):T("WeakMap"),It=z?vt(St):T("Set"),kt=T("WeakSet");function Ft(t){for(var e=at(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r}function Mt(t){for(var e=at(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r}function Tt(t){for(var e={},n=at(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e}function Pt(t){var e=[];for(var n in t)B(t[n])&&e.push(n);return e.sort()}function Lt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],s=t(i),a=s.length,c=0;c<a;c++){var l=s[c];e&&void 0!==n[l]||(n[l]=i[l])}return n}}const Ot=Lt(mt),_t=Lt(at),Rt=Lt(mt,!0);function Ut(t){if(!C(t))return{};if(v)return v(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Dt(t,e){var n=Ut(t);return e&&_t(n,e),n}function Nt(t){return C(t)?K(t)?t.slice():Ot({},t):t}function jt(t,e){return e(t),t}function Bt(t){return K(t)?t:[t]}function Wt(t){return dt.toPath(t)}function qt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function zt(t,e,n){var r=qt(t,Wt(e));return k(r)?n:r}function Vt(t,e){for(var n=(e=Wt(e)).length,r=0;r<n;r++){var o=e[r];if(!H(t,o))return!1;t=t[o]}return!!n}function Gt(t){return t}function Kt(t){return t=_t({},t),function(e){return lt(e,t)}}function Ht(t){return t=Wt(t),function(e){return qt(e,t)}}function $t(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}}function Yt(t,e,n){return null==t?Gt:B(t)?$t(t,e,n):C(t)&&!K(t)?Kt(t):Ht(t)}function Jt(t,e){return Yt(t,e,1/0)}function Xt(t,e,n){return dt.iteratee!==Jt?dt.iteratee(t,e):Yt(t,e,n)}function Qt(t,e,n){e=Xt(e,n);for(var r=at(t),o=r.length,i={},s=0;s<o;s++){var a=r[s];i[a]=e(t[a],a,t)}return i}function Zt(){}function te(t){return null==t?Zt:function(e){return zt(t,e)}}function ee(t,e,n){var r=Array(Math.max(0,t));e=$t(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r}function ne(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}dt.toPath=Bt,dt.iteratee=Jt;const re=Date.now||function(){return(new Date).getTime()};function oe(t){var e=function(e){return t[e]},n="(?:"+at(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}}const ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},se=oe(ie),ae=oe(Tt(ie)),ce=dt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var le=/(.)^/,de={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ue=/\\|'|\r|\n|\u2028|\u2029/g;function he(t){return"\\"+de[t]}var fe=/^\s*(\w|\$)+\s*$/;function pe(t,e,n){!e&&n&&(e=n),e=Rt({},e,dt.templateSettings);var r=RegExp([(e.escape||le).source,(e.interpolate||le).source,(e.evaluate||le).source].join("|")+"|$","g"),o=0,i="__p+='";t.replace(r,(function(e,n,r,s,a){return i+=t.slice(o,a).replace(ue,he),o=a+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),e})),i+="';\n";var s,a=e.variable;if(a){if(!fe.test(a))throw new Error("variable is not a bare identifier: "+a)}else i="with(obj||{}){\n"+i+"}\n",a="obj";i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{s=new Function(a,"_",i)}catch(t){throw t.source=i,t}var c=function(t){return s.call(this,t,dt)};return c.source="function("+a+"){\n"+i+"}",c}function ge(t,e,n){var r=(e=Wt(e)).length;if(!r)return B(n)?n.call(t):n;for(var o=0;o<r;o++){var i=null==t?void 0:t[e[o]];void 0===i&&(i=n,o=r),t=B(i)?i.call(t):i}return t}var me=0;function ve(t){var e=++me+"";return t?t+e:e}function ye(t){var e=dt(t);return e._chain=!0,e}function we(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var i=Ut(t.prototype),s=t.apply(i,o);return C(s)?s:i}var be=A((function(t,e){var n=be.placeholder,r=function(){for(var o=0,i=e.length,s=Array(i),a=0;a<i;a++)s[a]=e[a]===n?arguments[o++]:e[a];for(;o<arguments.length;)s.push(arguments[o++]);return we(t,r,this,this,s)};return r}));be.placeholder=dt;const Ee=be,xe=A((function(t,e,n){if(!B(t))throw new TypeError("Bind must be called on a function");var r=A((function(o){return we(t,r,e,this,n.concat(o))}));return r})),Se=Z(it);function Ae(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var o=r.length,i=0,s=it(t);i<s;i++){var a=t[i];if(Se(a)&&(K(a)||Y(a)))if(e>1)Ae(a,e-1,n,r),o=r.length;else for(var c=0,l=a.length;c<l;)r[o++]=a[c++];else n||(r[o++]=a)}return r}const Ce=A((function(t,e){var n=(e=Ae(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=xe(t[r],t)}return t}));function Ie(t,e){var n=function(r){var o=n.cache,i=""+(e?e.apply(this,arguments):r);return H(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return n.cache={},n}const ke=A((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Fe=Ee(ke,dt,1);function Me(t,e,n){var r,o,i,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:re(),r=null,s=t.apply(o,i),r||(o=i=null)},l=function(){var l=re();a||!1!==n.leading||(a=l);var d=e-(l-a);return o=this,i=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),a=l,s=t.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(c,d)),s};return l.cancel=function(){clearTimeout(r),a=0,r=o=i=null},l}function Te(t,e,n){var r,o,i,s,a,c=function(){var l=re()-o;e>l?r=setTimeout(c,e-l):(r=null,n||(s=t.apply(a,i)),r||(i=a=null))},l=A((function(l){return a=this,i=l,o=re(),r||(r=setTimeout(c,e),n&&(s=t.apply(a,i))),s}));return l.cancel=function(){clearTimeout(r),r=i=a=null},l}function Pe(t,e){return Ee(e,t)}function Le(t){return function(){return!t.apply(this,arguments)}}function Oe(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function _e(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Re(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Ue=Ee(Re,2);function De(t,e,n){e=Xt(e,n);for(var r,o=at(t),i=0,s=o.length;i<s;i++)if(e(t[r=o[i]],r,t))return r}function Ne(t){return function(e,n,r){n=Xt(n,r);for(var o=it(e),i=t>0?0:o-1;i>=0&&i<o;i+=t)if(n(e[i],i,e))return i;return-1}}const je=Ne(1),Be=Ne(-1);function We(t,e,n,r){for(var o=(n=Xt(n,r,1))(e),i=0,s=it(t);i<s;){var a=Math.floor((i+s)/2);n(t[a])<o?i=a+1:s=a}return i}function qe(t,e,n){return function(r,o,i){var s=0,a=it(r);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=e(d.call(r,s,a),X))>=0?i+s:-1;for(i=t>0?s:a-1;i>=0&&i<a;i+=t)if(r[i]===o)return i;return-1}}const ze=qe(1,je,We),Ve=qe(-1,Be);function Ge(t,e,n){var r=(Se(t)?je:De)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function Ke(t,e){return Ge(t,Kt(e))}function He(t,e,n){var r,o;if(e=$t(e,n),Se(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var i=at(t);for(r=0,o=i.length;r<o;r++)e(t[i[r]],i[r],t)}return t}function $e(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=Array(o),s=0;s<o;s++){var a=r?r[s]:s;i[s]=e(t[a],a,t)}return i}function Ye(t){return function(e,n,r,o){var i=arguments.length>=3;return function(e,n,r,o){var i=!Se(e)&&at(e),s=(i||e).length,a=t>0?0:s-1;for(o||(r=e[i?i[a]:a],a+=t);a>=0&&a<s;a+=t){var c=i?i[a]:a;r=n(r,e[c],c,e)}return r}(e,$t(n,o,4),r,i)}}const Je=Ye(1),Xe=Ye(-1);function Qe(t,e,n){var r=[];return e=Xt(e,n),He(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function Ze(t,e,n){return Qe(t,Le(Xt(e)),n)}function tn(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(!e(t[s],s,t))return!1}return!0}function en(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(e(t[s],s,t))return!0}return!1}function nn(t,e,n,r){return Se(t)||(t=Ft(t)),("number"!=typeof n||r)&&(n=0),ze(t,e,n)>=0}const rn=A((function(t,e,n){var r,o;return B(e)?o=e:(e=Wt(e),r=e.slice(0,-1),e=e[e.length-1]),$e(t,(function(t){var i=o;if(!i){if(r&&r.length&&(t=qt(t,r)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)}))}));function on(t,e){return $e(t,Ht(e))}function sn(t,e){return Qe(t,Kt(e))}function an(t,e,n){var r,o,i=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Se(t)?t:Ft(t)).length;a<c;a++)null!=(r=t[a])&&r>i&&(i=r);else e=Xt(e,n),He(t,(function(t,n,r){((o=e(t,n,r))>s||o===-1/0&&i===-1/0)&&(i=t,s=o)}));return i}function cn(t,e,n){var r,o,i=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Se(t)?t:Ft(t)).length;a<c;a++)null!=(r=t[a])&&r<i&&(i=r);else e=Xt(e,n),He(t,(function(t,n,r){((o=e(t,n,r))<s||o===1/0&&i===1/0)&&(i=t,s=o)}));return i}var ln=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function dn(t){return t?K(t)?d.call(t):P(t)?t.match(ln):Se(t)?$e(t,Gt):Ft(t):[]}function un(t,e,n){if(null==e||n)return Se(t)||(t=Ft(t)),t[ne(t.length-1)];var r=dn(t),o=it(r);e=Math.max(Math.min(e,o),0);for(var i=o-1,s=0;s<e;s++){var a=ne(s,i),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,e)}function hn(t){return un(t,1/0)}function fn(t,e,n){var r=0;return e=Xt(e,n),on($e(t,(function(t,n,o){return{value:t,index:r++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function pn(t,e){return function(n,r,o){var i=e?[[],[]]:{};return r=Xt(r,o),He(n,(function(e,o){var s=r(e,o,n);t(i,e,s)})),i}}const gn=pn((function(t,e,n){H(t,n)?t[n].push(e):t[n]=[e]})),mn=pn((function(t,e,n){t[n]=e})),vn=pn((function(t,e,n){H(t,n)?t[n]++:t[n]=1})),yn=pn((function(t,e,n){t[n?0:1].push(e)}),!0);function wn(t){return null==t?0:Se(t)?t.length:at(t).length}function bn(t,e,n){return e in n}const En=A((function(t,e){var n={},r=e[0];if(null==t)return n;B(r)?(e.length>1&&(r=$t(r,e[1])),e=mt(t)):(r=bn,e=Ae(e,!1,!1),t=Object(t));for(var o=0,i=e.length;o<i;o++){var s=e[o],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),xn=A((function(t,e){var n,r=e[0];return B(r)?(r=Le(r),e.length>1&&(n=e[1])):(e=$e(Ae(e,!1,!1),String),r=function(t,n){return!nn(e,n)}),En(t,r,n)}));function Sn(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function An(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:Sn(t,t.length-e)}function Cn(t,e,n){return d.call(t,null==e||n?1:e)}function In(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Cn(t,Math.max(0,t.length-e))}function kn(t){return Qe(t,Boolean)}function Fn(t,e){return Ae(t,e,!1)}const Mn=A((function(t,e){return e=Ae(e,!0,!0),Qe(t,(function(t){return!nn(e,t)}))})),Tn=A((function(t,e){return Mn(t,e)}));function Pn(t,e,n,r){F(e)||(r=n,n=e,e=!1),null!=n&&(n=Xt(n,r));for(var o=[],i=[],s=0,a=it(t);s<a;s++){var c=t[s],l=n?n(c,s,t):c;e&&!n?(s&&i===l||o.push(c),i=l):n?nn(i,l)||(i.push(l),o.push(c)):nn(o,c)||o.push(c)}return o}const Ln=A((function(t){return Pn(Ae(t,!0,!0))}));function On(t){for(var e=[],n=arguments.length,r=0,o=it(t);r<o;r++){var i=t[r];if(!nn(e,i)){var s;for(s=1;s<n&&nn(arguments[s],i);s++);s===n&&e.push(i)}}return e}function _n(t){for(var e=t&&an(t,it).length||0,n=Array(e),r=0;r<e;r++)n[r]=on(t,r);return n}const Rn=A(_n);function Un(t,e){for(var n={},r=0,o=it(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Dn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o}function Nn(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(d.call(t,r,r+=e));return n}function jn(t,e){return t._chain?dt(e).chain():e}function Bn(t){return He(Pt(t),(function(e){var n=dt[e]=t[e];dt.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),jn(this,n.apply(dt,t))}})),dt}He(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=s[t];dt.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),jn(this,n)}})),He(["concat","join","slice"],(function(t){var e=s[t];dt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),jn(this,t)}}));const Wn=dt;var qn=Bn(r);qn._=qn;const zn=qn},64378:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VERSION:()=>o,after:()=>_e,all:()=>tn,allKeys:()=>mt,any:()=>en,assign:()=>_t,before:()=>Re,bind:()=>xe,bindAll:()=>Ce,chain:()=>ye,chunk:()=>Nn,clone:()=>Nt,collect:()=>$e,compact:()=>kn,compose:()=>Oe,constant:()=>Q,contains:()=>nn,countBy:()=>vn,create:()=>Dt,debounce:()=>Te,default:()=>zn,defaults:()=>Rt,defer:()=>Fe,delay:()=>ke,detect:()=>Ge,difference:()=>Mn,drop:()=>Cn,each:()=>He,escape:()=>se,every:()=>tn,extend:()=>Ot,extendOwn:()=>_t,filter:()=>Qe,find:()=>Ge,findIndex:()=>je,findKey:()=>De,findLastIndex:()=>Be,findWhere:()=>Ke,first:()=>An,flatten:()=>Fn,foldl:()=>Je,foldr:()=>Xe,forEach:()=>He,functions:()=>Pt,get:()=>zt,groupBy:()=>gn,has:()=>Vt,head:()=>An,identity:()=>Gt,include:()=>nn,includes:()=>nn,indexBy:()=>mn,indexOf:()=>ze,initial:()=>Sn,inject:()=>Je,intersection:()=>On,invert:()=>Tt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>K,isArrayBuffer:()=>D,isBoolean:()=>F,isDataView:()=>G,isDate:()=>O,isElement:()=>M,isEmpty:()=>ct,isEqual:()=>gt,isError:()=>R,isFinite:()=>J,isFunction:()=>B,isMap:()=>At,isMatch:()=>lt,isNaN:()=>X,isNull:()=>I,isNumber:()=>L,isObject:()=>C,isRegExp:()=>_,isSet:()=>It,isString:()=>P,isSymbol:()=>U,isTypedArray:()=>ot,isUndefined:()=>k,isWeakMap:()=>Ct,isWeakSet:()=>kt,iteratee:()=>Jt,keys:()=>at,last:()=>In,lastIndexOf:()=>Ve,map:()=>$e,mapObject:()=>Qt,matcher:()=>Kt,matches:()=>Kt,max:()=>an,memoize:()=>Ie,methods:()=>Pt,min:()=>cn,mixin:()=>Bn,negate:()=>Le,noop:()=>Zt,now:()=>re,object:()=>Un,omit:()=>xn,once:()=>Ue,pairs:()=>Mt,partial:()=>Ee,partition:()=>yn,pick:()=>En,pluck:()=>on,property:()=>Ht,propertyOf:()=>te,random:()=>ne,range:()=>Dn,reduce:()=>Je,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>A,result:()=>ge,sample:()=>un,select:()=>Qe,shuffle:()=>hn,size:()=>wn,some:()=>en,sortBy:()=>fn,sortedIndex:()=>We,tail:()=>Cn,take:()=>An,tap:()=>jt,template:()=>pe,templateSettings:()=>ce,throttle:()=>Me,times:()=>ee,toArray:()=>dn,toPath:()=>Bt,transpose:()=>_n,unescape:()=>ae,union:()=>Ln,uniq:()=>Pn,unique:()=>Pn,uniqueId:()=>ve,unzip:()=>_n,values:()=>Ft,where:()=>sn,without:()=>Tn,wrap:()=>Pe,zip:()=>Rn});var r={};n.r(r),n.d(r,{VERSION:()=>o,after:()=>_e,all:()=>tn,allKeys:()=>mt,any:()=>en,assign:()=>_t,before:()=>Re,bind:()=>xe,bindAll:()=>Ce,chain:()=>ye,chunk:()=>Nn,clone:()=>Nt,collect:()=>$e,compact:()=>kn,compose:()=>Oe,constant:()=>Q,contains:()=>nn,countBy:()=>vn,create:()=>Dt,debounce:()=>Te,default:()=>Wn,defaults:()=>Rt,defer:()=>Fe,delay:()=>ke,detect:()=>Ge,difference:()=>Mn,drop:()=>Cn,each:()=>He,escape:()=>se,every:()=>tn,extend:()=>Ot,extendOwn:()=>_t,filter:()=>Qe,find:()=>Ge,findIndex:()=>je,findKey:()=>De,findLastIndex:()=>Be,findWhere:()=>Ke,first:()=>An,flatten:()=>Fn,foldl:()=>Je,foldr:()=>Xe,forEach:()=>He,functions:()=>Pt,get:()=>zt,groupBy:()=>gn,has:()=>Vt,head:()=>An,identity:()=>Gt,include:()=>nn,includes:()=>nn,indexBy:()=>mn,indexOf:()=>ze,initial:()=>Sn,inject:()=>Je,intersection:()=>On,invert:()=>Tt,invoke:()=>rn,isArguments:()=>Y,isArray:()=>K,isArrayBuffer:()=>D,isBoolean:()=>F,isDataView:()=>G,isDate:()=>O,isElement:()=>M,isEmpty:()=>ct,isEqual:()=>gt,isError:()=>R,isFinite:()=>J,isFunction:()=>B,isMap:()=>At,isMatch:()=>lt,isNaN:()=>X,isNull:()=>I,isNumber:()=>L,isObject:()=>C,isRegExp:()=>_,isSet:()=>It,isString:()=>P,isSymbol:()=>U,isTypedArray:()=>ot,isUndefined:()=>k,isWeakMap:()=>Ct,isWeakSet:()=>kt,iteratee:()=>Jt,keys:()=>at,last:()=>In,lastIndexOf:()=>Ve,map:()=>$e,mapObject:()=>Qt,matcher:()=>Kt,matches:()=>Kt,max:()=>an,memoize:()=>Ie,methods:()=>Pt,min:()=>cn,mixin:()=>Bn,negate:()=>Le,noop:()=>Zt,now:()=>re,object:()=>Un,omit:()=>xn,once:()=>Ue,pairs:()=>Mt,partial:()=>Ee,partition:()=>yn,pick:()=>En,pluck:()=>on,property:()=>Ht,propertyOf:()=>te,random:()=>ne,range:()=>Dn,reduce:()=>Je,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>Cn,restArguments:()=>A,result:()=>ge,sample:()=>un,select:()=>Qe,shuffle:()=>hn,size:()=>wn,some:()=>en,sortBy:()=>fn,sortedIndex:()=>We,tail:()=>Cn,take:()=>An,tap:()=>jt,template:()=>pe,templateSettings:()=>ce,throttle:()=>Me,times:()=>ee,toArray:()=>dn,toPath:()=>Bt,transpose:()=>_n,unescape:()=>ae,union:()=>Ln,uniq:()=>Pn,unique:()=>Pn,uniqueId:()=>ve,unzip:()=>_n,values:()=>Ft,where:()=>sn,without:()=>Tn,wrap:()=>Pe,zip:()=>Rn});var o="1.13.6",i="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,l=s.push,d=s.slice,u=a.toString,h=a.hasOwnProperty,f="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,g=Array.isArray,m=Object.keys,v=Object.create,y=f&&ArrayBuffer.isView,w=isNaN,b=isFinite,E=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1;function A(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=arguments[o];return i[e]=r,t.apply(this,i)}}function C(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function I(t){return null===t}function k(t){return void 0===t}function F(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)}function M(t){return!(!t||1!==t.nodeType)}function T(t){var e="[object "+t+"]";return function(t){return u.call(t)===e}}const P=T("String"),L=T("Number"),O=T("Date"),_=T("RegExp"),R=T("Error"),U=T("Symbol"),D=T("ArrayBuffer");var N=T("Function"),j=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof j&&(N=function(t){return"function"==typeof t||!1});const B=N,W=T("Object");var q=p&&W(new DataView(new ArrayBuffer(8))),z="undefined"!=typeof Map&&W(new Map),V=T("DataView");const G=q?function(t){return null!=t&&B(t.getInt8)&&D(t.buffer)}:V,K=g||T("Array");function H(t,e){return null!=t&&h.call(t,e)}var $=T("Arguments");!function(){$(arguments)||($=function(t){return H(t,"callee")})}();const Y=$;function J(t){return!U(t)&&b(t)&&!isNaN(parseFloat(t))}function X(t){return L(t)&&w(t)}function Q(t){return function(){return t}}function Z(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=S}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt("byteLength"),nt=Z(et);var rt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const ot=f?function(t){return y?y(t)&&!G(t):nt(t)&&rt.test(u.call(t))}:Q(!1),it=tt("length");function st(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=x.length,r=t.constructor,o=B(r)&&r.prototype||a,i="constructor";for(H(t,i)&&!e.contains(i)&&e.push(i);n--;)(i=x[n])in t&&t[i]!==o[i]&&!e.contains(i)&&e.push(i)}function at(t){if(!C(t))return[];if(m)return m(t);var e=[];for(var n in t)H(t,n)&&e.push(n);return E&&st(t,e),e}function ct(t){if(null==t)return!0;var e=it(t);return"number"==typeof e&&(K(t)||P(t)||Y(t))?0===e:0===it(at(t))}function lt(t,e){var n=at(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var s=n[i];if(e[s]!==o[s]||!(s in o))return!1}return!0}function dt(t){return t instanceof dt?t:this instanceof dt?void(this._wrapped=t):new dt(t)}function ut(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}dt.VERSION=o,dt.prototype.value=function(){return this._wrapped},dt.prototype.valueOf=dt.prototype.toJSON=dt.prototype.value,dt.prototype.toString=function(){return String(this._wrapped)};var ht="[object DataView]";function ft(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&pt(t,e,n,r)}function pt(t,e,n,r){t instanceof dt&&(t=t._wrapped),e instanceof dt&&(e=e._wrapped);var o=u.call(t);if(o!==u.call(e))return!1;if(q&&"[object Object]"==o&&G(t)){if(!G(e))return!1;o=ht}switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(e);case"[object ArrayBuffer]":case ht:return pt(ut(t),ut(e),n,r)}var i="[object Array]"===o;if(!i&&ot(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;i=!0}if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(B(s)&&s instanceof s&&B(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!ft(t[l],e[l],n,r))return!1}else{var d,h=at(t);if(l=h.length,at(e).length!==l)return!1;for(;l--;)if(!H(e,d=h[l])||!ft(t[d],e[d],n,r))return!1}return n.pop(),r.pop(),!0}function gt(t,e){return ft(t,e)}function mt(t){if(!C(t))return[];var e=[];for(var n in t)e.push(n);return E&&st(t,e),e}function vt(t){var e=it(t);return function(n){if(null==n)return!1;var r=mt(n);if(it(r))return!1;for(var o=0;o<e;o++)if(!B(n[t[o]]))return!1;return t!==xt||!B(n[yt])}}var yt="forEach",wt=["clear","delete"],bt=["get","has","set"],Et=wt.concat(yt,bt),xt=wt.concat(bt),St=["add"].concat(wt,yt,"has");const At=z?vt(Et):T("Map"),Ct=z?vt(xt):T("WeakMap"),It=z?vt(St):T("Set"),kt=T("WeakSet");function Ft(t){for(var e=at(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r}function Mt(t){for(var e=at(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r}function Tt(t){for(var e={},n=at(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e}function Pt(t){var e=[];for(var n in t)B(t[n])&&e.push(n);return e.sort()}function Lt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],s=t(i),a=s.length,c=0;c<a;c++){var l=s[c];e&&void 0!==n[l]||(n[l]=i[l])}return n}}const Ot=Lt(mt),_t=Lt(at),Rt=Lt(mt,!0);function Ut(t){if(!C(t))return{};if(v)return v(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Dt(t,e){var n=Ut(t);return e&&_t(n,e),n}function Nt(t){return C(t)?K(t)?t.slice():Ot({},t):t}function jt(t,e){return e(t),t}function Bt(t){return K(t)?t:[t]}function Wt(t){return dt.toPath(t)}function qt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function zt(t,e,n){var r=qt(t,Wt(e));return k(r)?n:r}function Vt(t,e){for(var n=(e=Wt(e)).length,r=0;r<n;r++){var o=e[r];if(!H(t,o))return!1;t=t[o]}return!!n}function Gt(t){return t}function Kt(t){return t=_t({},t),function(e){return lt(e,t)}}function Ht(t){return t=Wt(t),function(e){return qt(e,t)}}function $t(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}}function Yt(t,e,n){return null==t?Gt:B(t)?$t(t,e,n):C(t)&&!K(t)?Kt(t):Ht(t)}function Jt(t,e){return Yt(t,e,1/0)}function Xt(t,e,n){return dt.iteratee!==Jt?dt.iteratee(t,e):Yt(t,e,n)}function Qt(t,e,n){e=Xt(e,n);for(var r=at(t),o=r.length,i={},s=0;s<o;s++){var a=r[s];i[a]=e(t[a],a,t)}return i}function Zt(){}function te(t){return null==t?Zt:function(e){return zt(t,e)}}function ee(t,e,n){var r=Array(Math.max(0,t));e=$t(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r}function ne(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}dt.toPath=Bt,dt.iteratee=Jt;const re=Date.now||function(){return(new Date).getTime()};function oe(t){var e=function(e){return t[e]},n="(?:"+at(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}}const ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},se=oe(ie),ae=oe(Tt(ie)),ce=dt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var le=/(.)^/,de={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ue=/\\|'|\r|\n|\u2028|\u2029/g;function he(t){return"\\"+de[t]}var fe=/^\s*(\w|\$)+\s*$/;function pe(t,e,n){!e&&n&&(e=n),e=Rt({},e,dt.templateSettings);var r=RegExp([(e.escape||le).source,(e.interpolate||le).source,(e.evaluate||le).source].join("|")+"|$","g"),o=0,i="__p+='";t.replace(r,(function(e,n,r,s,a){return i+=t.slice(o,a).replace(ue,he),o=a+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),e})),i+="';\n";var s,a=e.variable;if(a){if(!fe.test(a))throw new Error("variable is not a bare identifier: "+a)}else i="with(obj||{}){\n"+i+"}\n",a="obj";i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{s=new Function(a,"_",i)}catch(t){throw t.source=i,t}var c=function(t){return s.call(this,t,dt)};return c.source="function("+a+"){\n"+i+"}",c}function ge(t,e,n){var r=(e=Wt(e)).length;if(!r)return B(n)?n.call(t):n;for(var o=0;o<r;o++){var i=null==t?void 0:t[e[o]];void 0===i&&(i=n,o=r),t=B(i)?i.call(t):i}return t}var me=0;function ve(t){var e=++me+"";return t?t+e:e}function ye(t){var e=dt(t);return e._chain=!0,e}function we(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var i=Ut(t.prototype),s=t.apply(i,o);return C(s)?s:i}var be=A((function(t,e){var n=be.placeholder,r=function(){for(var o=0,i=e.length,s=Array(i),a=0;a<i;a++)s[a]=e[a]===n?arguments[o++]:e[a];for(;o<arguments.length;)s.push(arguments[o++]);return we(t,r,this,this,s)};return r}));be.placeholder=dt;const Ee=be,xe=A((function(t,e,n){if(!B(t))throw new TypeError("Bind must be called on a function");var r=A((function(o){return we(t,r,e,this,n.concat(o))}));return r})),Se=Z(it);function Ae(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var o=r.length,i=0,s=it(t);i<s;i++){var a=t[i];if(Se(a)&&(K(a)||Y(a)))if(e>1)Ae(a,e-1,n,r),o=r.length;else for(var c=0,l=a.length;c<l;)r[o++]=a[c++];else n||(r[o++]=a)}return r}const Ce=A((function(t,e){var n=(e=Ae(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=xe(t[r],t)}return t}));function Ie(t,e){var n=function(r){var o=n.cache,i=""+(e?e.apply(this,arguments):r);return H(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return n.cache={},n}const ke=A((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Fe=Ee(ke,dt,1);function Me(t,e,n){var r,o,i,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:re(),r=null,s=t.apply(o,i),r||(o=i=null)},l=function(){var l=re();a||!1!==n.leading||(a=l);var d=e-(l-a);return o=this,i=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),a=l,s=t.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(c,d)),s};return l.cancel=function(){clearTimeout(r),a=0,r=o=i=null},l}function Te(t,e,n){var r,o,i,s,a,c=function(){var l=re()-o;e>l?r=setTimeout(c,e-l):(r=null,n||(s=t.apply(a,i)),r||(i=a=null))},l=A((function(l){return a=this,i=l,o=re(),r||(r=setTimeout(c,e),n&&(s=t.apply(a,i))),s}));return l.cancel=function(){clearTimeout(r),r=i=a=null},l}function Pe(t,e){return Ee(e,t)}function Le(t){return function(){return!t.apply(this,arguments)}}function Oe(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function _e(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Re(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Ue=Ee(Re,2);function De(t,e,n){e=Xt(e,n);for(var r,o=at(t),i=0,s=o.length;i<s;i++)if(e(t[r=o[i]],r,t))return r}function Ne(t){return function(e,n,r){n=Xt(n,r);for(var o=it(e),i=t>0?0:o-1;i>=0&&i<o;i+=t)if(n(e[i],i,e))return i;return-1}}const je=Ne(1),Be=Ne(-1);function We(t,e,n,r){for(var o=(n=Xt(n,r,1))(e),i=0,s=it(t);i<s;){var a=Math.floor((i+s)/2);n(t[a])<o?i=a+1:s=a}return i}function qe(t,e,n){return function(r,o,i){var s=0,a=it(r);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=e(d.call(r,s,a),X))>=0?i+s:-1;for(i=t>0?s:a-1;i>=0&&i<a;i+=t)if(r[i]===o)return i;return-1}}const ze=qe(1,je,We),Ve=qe(-1,Be);function Ge(t,e,n){var r=(Se(t)?je:De)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function Ke(t,e){return Ge(t,Kt(e))}function He(t,e,n){var r,o;if(e=$t(e,n),Se(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var i=at(t);for(r=0,o=i.length;r<o;r++)e(t[i[r]],i[r],t)}return t}function $e(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=Array(o),s=0;s<o;s++){var a=r?r[s]:s;i[s]=e(t[a],a,t)}return i}function Ye(t){return function(e,n,r,o){var i=arguments.length>=3;return function(e,n,r,o){var i=!Se(e)&&at(e),s=(i||e).length,a=t>0?0:s-1;for(o||(r=e[i?i[a]:a],a+=t);a>=0&&a<s;a+=t){var c=i?i[a]:a;r=n(r,e[c],c,e)}return r}(e,$t(n,o,4),r,i)}}const Je=Ye(1),Xe=Ye(-1);function Qe(t,e,n){var r=[];return e=Xt(e,n),He(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function Ze(t,e,n){return Qe(t,Le(Xt(e)),n)}function tn(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(!e(t[s],s,t))return!1}return!0}function en(t,e,n){e=Xt(e,n);for(var r=!Se(t)&&at(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(e(t[s],s,t))return!0}return!1}function nn(t,e,n,r){return Se(t)||(t=Ft(t)),("number"!=typeof n||r)&&(n=0),ze(t,e,n)>=0}const rn=A((function(t,e,n){var r,o;return B(e)?o=e:(e=Wt(e),r=e.slice(0,-1),e=e[e.length-1]),$e(t,(function(t){var i=o;if(!i){if(r&&r.length&&(t=qt(t,r)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)}))}));function on(t,e){return $e(t,Ht(e))}function sn(t,e){return Qe(t,Kt(e))}function an(t,e,n){var r,o,i=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Se(t)?t:Ft(t)).length;a<c;a++)null!=(r=t[a])&&r>i&&(i=r);else e=Xt(e,n),He(t,(function(t,n,r){((o=e(t,n,r))>s||o===-1/0&&i===-1/0)&&(i=t,s=o)}));return i}function cn(t,e,n){var r,o,i=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Se(t)?t:Ft(t)).length;a<c;a++)null!=(r=t[a])&&r<i&&(i=r);else e=Xt(e,n),He(t,(function(t,n,r){((o=e(t,n,r))<s||o===1/0&&i===1/0)&&(i=t,s=o)}));return i}var ln=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function dn(t){return t?K(t)?d.call(t):P(t)?t.match(ln):Se(t)?$e(t,Gt):Ft(t):[]}function un(t,e,n){if(null==e||n)return Se(t)||(t=Ft(t)),t[ne(t.length-1)];var r=dn(t),o=it(r);e=Math.max(Math.min(e,o),0);for(var i=o-1,s=0;s<e;s++){var a=ne(s,i),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,e)}function hn(t){return un(t,1/0)}function fn(t,e,n){var r=0;return e=Xt(e,n),on($e(t,(function(t,n,o){return{value:t,index:r++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function pn(t,e){return function(n,r,o){var i=e?[[],[]]:{};return r=Xt(r,o),He(n,(function(e,o){var s=r(e,o,n);t(i,e,s)})),i}}const gn=pn((function(t,e,n){H(t,n)?t[n].push(e):t[n]=[e]})),mn=pn((function(t,e,n){t[n]=e})),vn=pn((function(t,e,n){H(t,n)?t[n]++:t[n]=1})),yn=pn((function(t,e,n){t[n?0:1].push(e)}),!0);function wn(t){return null==t?0:Se(t)?t.length:at(t).length}function bn(t,e,n){return e in n}const En=A((function(t,e){var n={},r=e[0];if(null==t)return n;B(r)?(e.length>1&&(r=$t(r,e[1])),e=mt(t)):(r=bn,e=Ae(e,!1,!1),t=Object(t));for(var o=0,i=e.length;o<i;o++){var s=e[o],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),xn=A((function(t,e){var n,r=e[0];return B(r)?(r=Le(r),e.length>1&&(n=e[1])):(e=$e(Ae(e,!1,!1),String),r=function(t,n){return!nn(e,n)}),En(t,r,n)}));function Sn(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function An(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:Sn(t,t.length-e)}function Cn(t,e,n){return d.call(t,null==e||n?1:e)}function In(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Cn(t,Math.max(0,t.length-e))}function kn(t){return Qe(t,Boolean)}function Fn(t,e){return Ae(t,e,!1)}const Mn=A((function(t,e){return e=Ae(e,!0,!0),Qe(t,(function(t){return!nn(e,t)}))})),Tn=A((function(t,e){return Mn(t,e)}));function Pn(t,e,n,r){F(e)||(r=n,n=e,e=!1),null!=n&&(n=Xt(n,r));for(var o=[],i=[],s=0,a=it(t);s<a;s++){var c=t[s],l=n?n(c,s,t):c;e&&!n?(s&&i===l||o.push(c),i=l):n?nn(i,l)||(i.push(l),o.push(c)):nn(o,c)||o.push(c)}return o}const Ln=A((function(t){return Pn(Ae(t,!0,!0))}));function On(t){for(var e=[],n=arguments.length,r=0,o=it(t);r<o;r++){var i=t[r];if(!nn(e,i)){var s;for(s=1;s<n&&nn(arguments[s],i);s++);s===n&&e.push(i)}}return e}function _n(t){for(var e=t&&an(t,it).length||0,n=Array(e),r=0;r<e;r++)n[r]=on(t,r);return n}const Rn=A(_n);function Un(t,e){for(var n={},r=0,o=it(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Dn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o}function Nn(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(d.call(t,r,r+=e));return n}function jn(t,e){return t._chain?dt(e).chain():e}function Bn(t){return He(Pt(t),(function(e){var n=dt[e]=t[e];dt.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),jn(this,n.apply(dt,t))}})),dt}He(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=s[t];dt.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),jn(this,n)}})),He(["concat","join","slice"],(function(t){var e=s[t];dt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),jn(this,t)}}));const Wn=dt;var qn=Bn(r);qn._=qn;const zn=qn},51135:t=>{"use strict";t.exports=JSON.parse('["image/png","image/jpg","image/gif","image/jpeg"]')},96887:t=>{"use strict";t.exports={max:20,min:1}},4468:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Top Down Argument Mapping","layout":{"orientation":"bottom-up"},"node":[{"name":"default","connections":{"style":"vertical-quadratic-s-curve","vertical-quadratic-s-curve":{"v":"top"},"from":{"horizontal":{"v":"top"}},"from-arrow":{"horizontal":{"v":"top-outset"},"above":{"v":"top-outset"},"below":{"v":"top-outset"}},"to":{"v":"base"},"to-arrow":{"v":"base-outset"}}},{"name":"sticky_note","connections":{"style":"straight-dotted","straight-dotted":{"v":"top"},"to":{"v":"base"}}},{"name":"attr_group","border":{"type":"underline-radiused"},"connections":{"style":"supporting-group","supporting-group":{"v":"top"},"from":{"below":{"v":"top"}},"to":{"v":"base"}}},{"name":"attr_group_supporting","connections":{"style":"supporting-group","supporting-group":{"v":"top"},"from":{"below":{"v":"top"}},"to":{"v":"base"}}},{"name":"attr_group_opposing","connections":{"style":"opposing-group","childstyle":"no-connector","opposing-group":{"v":"top"},"from":{"below":{"v":"top"}},"to":{"v":"base"}}}],"connector":{"vertical-quadratic-s-curve":{"type":"vertical-quadratic-s-curve","label":{"position":{"aboveEnd":0,"belowEnd":40,"ratio":0.8}}},"supporting-group":{"type":"vertical-quadratic-s-curve","label":{"position":{"aboveEnd":0,"belowEnd":40,"ratio":0.8}}},"opposing-group":{"type":"vertical-quadratic-s-curve","label":{"position":{"aboveEnd":0,"belowEnd":40,"ratio":0.8}}}}}')},55287:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup High Impact Bottom Up Argument Mapping","connector":{"supporting-group":{"label":{"position":{"belowEnd":50}}},"opposing-group":{"label":{"position":{"belowEnd":50}}}}}')},48758:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup High Impact Argument Mapping","connectorEditingContext":{"defaults":{"arrow":"to","width":5}},"connector":{"supporting-group":{"line":{"arrow":"to","width":5,"label":"Because"},"label":{"position":{"aboveEnd":20}}},"opposing-group":{"line":{"cornerRadius":0,"initialRadius":10,"width":5,"arrow":"to","label":"But"},"label":{"position":{"aboveEnd":20}}}}}')},2160:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Top Down Argument Mapping","connectorEditingContext":{"name":"argument-mapping","allowed":["width","label","arrow"],"defaults":{"width":3}},"blockThemeOverrides":true,"layout":{"orientation":"top-down","spacing":{"h":20,"v":60}},"node":[{"name":"default","cornerRadius":5,"backgroundColor":"#ffffff","border":{"type":"surround","line":{"color":"#707070","width":1}},"shadow":[{"color":"#070707","opacity":0.3,"offset":{"width":2,"height":2},"radius":2}],"text":{"margin":5,"alignment":"start","maxWidth":146,"color":"#4F4F4F","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":5,"lineSpacingPx":6.6,"size":10,"sizePx":13.3,"weight":"light"}},"connections":{"style":"vertical-quadratic-s-curve","vertical-quadratic-s-curve":{"h":"center-separated","v":"base"},"from":{"horizontal":{"h":"center-separated","v":"base"}},"from-arrow":{"horizontal":{"h":"center-separated","v":"base-outset"},"above":{"h":"center-separated","v":"base-outset"},"below":{"h":"center-separated","v":"base-outset"}},"to":{"h":"center","v":"top"},"to-arrow":{"h":"center","v":"top-outset"}},"decorations":{"height":20,"edge":"top","overlap":true,"position":"end","margin":2,"label":{"border":1,"cornerRadius":11,"margin":2,"font":{"lineSpacing":0,"lineSpacingPx":0,"size":9,"sizePx":12,"weight":"bold"}},"cornerRadius":12,"backgroundColor":"#22aae0","opacity":0.8,"color":"#ffffff"}},{"name":"level_1","backgroundColor":"#FFFFFF"},{"name":"sticky_note","cornerRadius":1,"backgroundColor":"#FFFF88","unlabelled":true,"border":{"type":"surround","line":{"color":"#FFFF88","width":1,"style":"solid"}},"text":{"margin":5,"alignment":"left","maxWidth":146,"font":{"lineSpacing":6,"lineSpacingPx":8,"size":11,"sizePx":15,"weight":"bold","family":"Marker"}},"connections":{"style":"straight-dotted","straight-dotted":{"h":"center-separated","v":"base"},"from":{"horizontal":{"h":"center-separated","v":"base"}},"to":{"h":"center","v":"top"}}},{"name":"sticky_note.activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dotted","margin":0}}},{"name":"attr_implicit_claim","border":{"type":"surround","line":{"color":"#707070","width":1,"style":"dashed"}}},{"name":"activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dotted","margin":0}}},{"name":"level_1.activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dotted","margin":0}}},{"name":"activated.attr_implicit_claim::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dashed","margin":0}}},{"name":"selected","shadow":[{"color":"#000000","opacity":0.9,"offset":{"width":2,"height":2},"radius":2}]},{"name":"collapsed","shadow":[{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]},{"name":"collapsed.selected","shadow":[{"color":"#FFFFFF","offset":{"width":0,"height":1},"radius":0},{"color":"#888888","offset":{"width":0,"height":3},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#555555","offset":{"width":0,"height":7},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":10},"radius":0},{"color":"#333333","offset":{"width":0,"height":11},"radius":0}]},{"name":"attr_group","cornerRadius":10,"backgroundColor":"transparent","border":{"type":"overline"},"shadow":[{"color":"transparent"}],"text":{"margin":0,"alignment":"center","color":"#4F4F4F","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":2.5,"lineSpacingPx":3.25,"size":9,"sizePx":12,"weight":"bold"}},"connections":{"style":"supporting-group","childstyle":"no-connector","supporting-group":{"h":"center","v":"base"},"from":{"below":{"h":"center","v":"base"}},"to":{"h":"center","v":"top"}}},{"name":"attr_group_supporting","connections":{"style":"supporting-group","childstyle":"no-connector","supporting-group":{"h":"center","v":"base"},"from":{"below":{"h":"center","v":"base"}},"to":{"h":"center","v":"top"}}},{"name":"attr_group_supporting.level_1","backgroundColor":"rgba(0, 255, 0, 0.2)","border":{"type":"surround","line":{"color":"transparent","width":2,"style":"solid"}}},{"name":"attr_group_supporting.activated::after","backgroundColor":"rgba(0, 255, 0, 0.2)","border":{"type":"surround","line":{"color":"#00FF00","width":3,"style":"dotted","margin":0}}},{"name":"attr_group_opposing","connections":{"style":"opposing-group","childstyle":"no-connector","opposing-group":{"h":"center","v":"base"},"from":{"below":{"h":"center","v":"base"}},"to":{"h":"center","v":"top"}}},{"name":"attr_group_opposing.level_1","backgroundColor":"rgba(255, 0, 0, 0.2)","border":{"type":"surround","line":{"color":"transparent","width":2,"style":"solid"}}},{"name":"attr_group_opposing.activated::after","backgroundColor":"rgba(255, 0, 0, 0.2)","border":{"type":"surround","line":{"color":"#FF0000","width":3,"style":"dotted","margin":0}}},{"name":"attr_group_supporting.droppable","backgroundColor":"rgba(0, 255, 0, 0.6)","border":{"type":"surround","line":{"color":"#00FF00","width":3,"style":"dashed"}}},{"name":"attr_group_opposing.droppable","backgroundColor":"rgba(255, 0, 0, 0.6)","border":{"type":"surround","line":{"color":"#FF0000","width":3,"style":"dashed"}}}],"connector":{"vertical-quadratic-s-curve":{"type":"vertical-quadratic-s-curve","controlPoint":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"line":{"color":"#707070","width":1},"label":{"position":{"aboveEnd":15,"ratio":0.8},"backgroundColor":"white","borderColor":"white","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}}},"no-connector":{"type":"no-connector","line":{"color":"#707070","width":0}},"straight-dotted":{"type":"straight","label":{"position":{"ratio":0.5},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}},"line":{"color":"#707070","lineStyle":"dotted","width":2}},"supporting-group":{"type":"vertical-quadratic-s-curve","line":{"color":"#339966","width":3},"label":{"position":{"aboveEnd":15,"ratio":0.8},"backgroundColor":"white","borderColor":"white","text":{"color":"#339966","font":{"size":9,"sizePx":12,"weight":"normal"}}}},"opposing-group":{"type":"vertical-quadratic-s-curve","line":{"color":"#FF0000","width":3},"label":{"position":{"aboveEnd":15,"ratio":0.8},"backgroundColor":"white","borderColor":"white","text":{"color":"#FF0000","font":{"size":9,"sizePx":12,"weight":"normal"}}}},"no-connector.supporting-group":{"type":"no-connector","line":{"color":"#339966","width":4},"label":{"position":{"ratio":0.5},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#339966","font":{"size":6,"sizePx":9,"weight":"normal"}}}},"no-connector.opposing-group":{"type":"no-connector","line":{"color":"#FF0000","width":4},"label":{"position":{"ratio":0.5},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#4F4F4F","font":{"size":6,"sizePx":9,"weight":"normal"}}}}},"canvas":{"backgroundColor":"#FFFFFF"}}')},74179:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Bottom Up Simple","layout":{"orientation":"bottom-up"},"node":[{"name":"default","border":{"type":"underline-radiused"},"connections":{"style":"top-down-s-curve","top-down-s-curve":{"v":"top"},"from":{"horizontal":{"v":"top"}},"from-arrow":{"above":{"v":"top"}},"to":{"v":"base"},"to-arrow":{"v":"base-outset"}}},{"name":"condensed","connections":{"top-down-s-curve":{"h":"left-inset","v":"top"}}},{"name":"condensed-child","connections":{"style":"brolly-handle","brolly-handle":{"h":"left-inset","v":"top"},"from-arrow":{"horizontal":{"h":"left-inset","v":"top-outset"},"above":{"h":"left-inset","v":"top-outset"},"below":{"h":"left-inset","v":"top-outset"}},"to":{"h":"left","v":"center"},"to-arrow":{"h":"left-outset","v":"center"}}}],"connector":{"top-down-s-curve":{"type":"top-down-s-curve","label":{"position":{"aboveEnd":0,"belowEnd":40}}}}}')},17457:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Bottom Up Standard","layout":{"orientation":"bottom-up"},"node":[{"name":"default","connections":{"style":"top-down-s-curve","top-down-s-curve":{"v":"top"},"from":{"horizontal":{"v":"top"}},"to":{"v":"base"},"to-arrow":{"v":"base-outset"}}},{"name":"condensed","connections":{"top-down-s-curve":{"h":"left-inset","v":"top"}}},{"name":"condensed-child","connections":{"style":"brolly-handle","brolly-handle":{"h":"left-inset","v":"top"},"from-arrow":{"horizontal":{"h":"left-inset","v":"top-outset"},"above":{"h":"left-inset","v":"top-outset"},"below":{"h":"left-inset","v":"top-outset"}},"to":{"h":"left","v":"center"},"to-arrow":{"h":"left-outset","v":"center"}}}],"connector":{"top-down-s-curve":{"type":"top-down-s-curve","label":{"position":{"aboveEnd":0,"belowEnd":40}}}}}')},81246:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Default","node":[{"name":"default","cornerRadius":10,"backgroundColor":"#E0E0E0","border":{"type":"surround","line":{"color":"#707070","width":1,"style":"solid"}},"shadow":[{"color":"#070707","opacity":0.4,"offset":{"width":2,"height":2},"radius":2}],"text":{"margin":5,"alignment":"center","maxWidth":146,"color":"#4F4F4F","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":4.5,"lineSpacingPx":6,"size":9,"sizePx":12,"weight":"bold","family":"Sans"}},"connections":{"style":"quadratic","quadratic":{"h":"center","v":"center"},"from":{"horizontal":{"h":"nearest-inset","v":"center"}},"from-arrow":{"horizontal":{"h":"nearest-outset","v":"nearest"},"above":{"h":"center-separated-inset","v":"top-outset"},"below":{"h":"center-separated-inset","v":"base-outset"}},"to":{"h":"nearest","v":"center"},"to-arrow":{"h":"nearest-outset","v":"center"}},"decorations":{"height":20,"edge":"top","overlap":true,"position":"end","margin":2,"label":{"border":1,"cornerRadius":11,"margin":2,"font":{"lineSpacing":0,"lineSpacingPx":0,"size":9,"sizePx":12,"weight":"bold"}},"stickers":{"font":{"family":"emoji"}},"cornerRadius":12,"backgroundColor":"#22aae0","opacity":0.8,"color":"#ffffff"}},{"name":"level_1","backgroundColor":"#22AAE0"},{"name":"unlabelled_node","unlabelled":true},{"name":"activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dotted","margin":0}}},{"name":"level_1.activated::after","border":{"type":"surround","line":{"color":"#EEEEEE","width":3,"style":"dotted","margin":0}}},{"name":"selected","shadow":[{"color":"#000000","opacity":0.9,"offset":{"width":2,"height":2},"radius":2}]},{"name":"collapsed","shadow":[{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]},{"name":"collapsed.selected","shadow":[{"color":"#FFFFFF","offset":{"width":0,"height":1},"radius":0},{"color":"#888888","offset":{"width":0,"height":3},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#555555","offset":{"width":0,"height":7},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":10},"radius":0},{"color":"#333333","offset":{"width":0,"height":11},"radius":0}]}],"connector":{"quadratic":{"type":"quadratic","controlPoint":{"above":{"width":0,"height":1.75},"below":{"width":0,"height":1.75},"horizontal":{"width":0,"height":1}},"controlPoint-arrow-from":{"above":{"width":0.2,"height":1.1},"below":{"width":0.2,"height":1.1},"horizontal":{"width":0.5,"height":0.5}},"controlPoint-arrow-both":{"above":{"width":0.2,"height":1.1},"below":{"width":0.2,"height":1.1},"horizontal":{"width":0.5,"height":0.5}},"label":{"position":{"ratio":0.5},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}},"line":{"color":"#707070","lineStyle":"solid","width":1}},"straight":{"type":"straight","controlPoint":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"controlPoint-arrow-from":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"controlPoint-arrow-both":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"line":{"color":"#707070","width":1},"label":{"position":{"ratio":0.5},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}}},"compact-s-curve":{"type":"compact-s-curve","controlPoint":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"label":{"position":{"ratio":0.4},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#4F4F4F","font":{"size":8,"sizePx":11,"weight":"light"}}},"line":{"color":"#707070","width":1}},"brolly-handle":{"type":"brolly-handle","label":{"position":{"aboveEndLeft":0},"backgroundColor":"white","borderColor":"white","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}},"line":{"color":"#707070","width":2,"initialRadius":10}}},"link":{"default":{"line":{"color":"red","lineStyle":"dashed","width":1},"label":{"position":{"ratio":0.5},"backgroundColor":"theme:canvas.backgroundColor","borderColor":"theme:canvas.backgroundColor","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}}}},"canvas":{"backgroundColor":"#FFFFFF"}}')},74986:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Productivity","noAnimations":true,"layout":{"orientation":"standard","spacing":{"h":25,"v":3}},"autoColors":["#00534e","#ff9900","#ffdf55","#0088b2","#810000","#86C0EA","#9C006B","#95B90B","#0457A8","#EE9DC3"],"node":[{"name":"default","cornerRadius":3,"backgroundColor":"transparent","border":{"type":"underline","line":{"color":"transparent","width":1}},"shadow":[{"color":"transparent"}],"text":{"margin":3,"alignment":"start","maxWidth":700,"color":"#757575","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":4.5,"lineSpacingPx":6,"size":9,"sizePx":12,"weight":"light"}},"connections":{"style":"compact-s-curve","compact-s-curve":{"h":"nearest","v":"base"},"from":{"horizontal":{"h":"nearest-inset","v":"base"}},"from-arrow":{"horizontal":{"h":"nearest-inset","v":"base"},"above":{"h":"nearest","v":"base"},"below":{"h":"nearest","v":"base"}},"to":{"h":"nearest","v":"base"},"to-arrow":{"h":"nearest-outset","v":"base"}},"decorations":{"height":20,"edge":"left","overlap":false,"position":"center","margin":2,"label":{"border":1,"cornerRadius":11,"margin":2,"font":{"lineSpacing":0,"lineSpacingPx":0,"size":9,"sizePx":12,"weight":"bold"}},"cornerRadius":0,"backgroundColor":"transparent","opacity":1,"color":"#22aae0"}},{"name":"level_1","cornerRadius":10,"backgroundColor":"#22AAE0","border":{"type":"surround","line":{"color":"transparent","width":1}},"connections":{"style":"autoColored","childstyle":"autoColored","compact-s-curve":{"h":"nearest","v":"center"},"autoColored":{"h":"nearest","v":"center"},"from":{"horizontal":{"h":"nearest","v":"center"}},"from-arrow":{"horizontal":{"h":"center-outset","v":"center-outset"},"above":{"h":"center-outset","v":"center-outset"},"below":{"h":"center-outset","v":"center-outset"}},"to-arrow":{"h":"center-outset","v":"center-outset"}},"text":{"margin":5,"color":"#EEEEEE","font":{"lineSpacing":6,"lineSpacingPx":7.8,"size":14,"sizePx":20,"weight":"light"}}},{"name":"level_2","text":{"color":"#0288D1","font":{"lineSpacing":2,"lineSpacingPx":2.6,"size":12,"sizePx":16,"weight":"light"}},"connections":{"style":"autoColored","childstyle":"compact-s-curve","compact-s-curve":{"h":"nearest","v":"base"},"autoColored":{"h":"nearest","v":"base"},"to-arrow":{"h":"nearest","v":"base"}}},{"name":"level_3","text":{"color":"#4F4F4F","font":"base:node.default.text.font"}},{"name":"level_4","text":{"color":"#536DFE","font":"base:node.default.text.font"}},{"name":"level_5","text":{"color":"#212121","font":"base:node.default.text.font"}},{"name":"level_6","text":{"color":"#607D8B","font":"base:node.default.text.font"}},{"name":"activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":2,"style":"dashed","margin":0}}},{"name":"level_1.activated::after","border":{"type":"surround","line":{"color":"#EEEEEE","width":2,"style":"dashed","margin":0}}},{"name":"selected","shadow":[{"color":"#FFFFFF","offset":{"width":1,"height":0},"radius":0},{"color":"#FFFFFF","offset":{"width":-1,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":4,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":-4,"height":0},"radius":0}]},{"name":"collapsed","shadow":[{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]},{"name":"collapsed.selected","shadow":[{"color":"#FFFFFF","offset":{"width":1,"height":0},"radius":0},{"color":"#FFFFFF","offset":{"width":-1,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":4,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":-4,"height":0},"radius":0},{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]}],"connector":{"compact-s-curve":{"type":"compact-s-curve","controlPoint":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"label":{"position":{"ratio":0.5},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#4F4F4F","font":{"size":8,"sizePx":11,"weight":"light"}}},"line":{"color":"theme_inherit","width":2}},"autoColored":{"type":"straight-s-to","controlPoint":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"controlPoint-arrow-from":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"controlPoint-arrow-both":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"label":{"position":{"ratio":0.5},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#4F4F4F","font":{"size":8,"sizePx":11,"weight":"light"}}},"line":{"color":"theme-auto-color","width":2}}},"canvas":{"backgroundColor":"#FFFFFF"}}')},93038:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Simple Straight Lines","layout":"portrait","node":[{"name":"default","cornerRadius":3,"backgroundColor":"theme:canvas.backgroundColor","border":{"type":"underline","line":{"color":"transparent"}},"shadow":[{"color":"transparent"}],"text":{"margin":2,"alignment":"start","maxWidth":146,"color":"#4F4F4F","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":5,"lineSpacingPx":6.6,"size":10,"sizePx":13.3,"weight":"light"}},"connections":{"style":"straight-s","straight-s":{"h":"nearest","v":"base"},"from":{"horizontal":{"h":"nearest-inset","v":"base"}},"from-arrow":{"horizontal":{"h":"nearest","v":"base"},"above":{"h":"nearest","v":"base"},"below":{"h":"nearest","v":"base"}},"to":{"h":"nearest","v":"base"},"to-arrow":{"h":"nearest","v":"base"}},"decorations":{"height":20,"edge":"left","overlap":false,"position":"center","margin":2,"label":{"border":1,"cornerRadius":11,"margin":2,"font":{"lineSpacing":0,"lineSpacingPx":0,"size":9,"sizePx":12,"weight":"bold"}},"cornerRadius":0,"backgroundColor":"transparent","opacity":1,"color":"#22aae0"}},{"name":"level_1","cornerRadius":10,"backgroundColor":"#22AAE0","border":{"type":"surround","line":{"color":"transparent","width":1}},"connections":{"straight-s":{"h":"nearest","v":"center"},"from":{"horizontal":{"h":"nearest","v":"center"}},"from-arrow":{"horizontal":{"h":"nearest-outset","v":"center"},"above":{"h":"nearest-outset","v":"center"},"below":{"h":"nearest-outset","v":"center"}}},"text":{"margin":5,"color":"#EEEEEE","maxWidth":146,"font":{"lineSpacing":6,"lineSpacingPx":7.8,"size":12,"sizePx":16,"weight":"light"}}},{"name":"activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":2,"style":"dashed","margin":0}}},{"name":"level_1.activated:after","border":{"type":"surround","line":{"color":"#EEEEEE","width":2,"style":"dashed","margin":0}}},{"name":"selected","shadow":[{"color":"#FFFFFF","offset":{"width":1,"height":0},"radius":0},{"color":"#FFFFFF","offset":{"width":-1,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":4,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":-4,"height":0},"radius":0}]},{"name":"collapsed","shadow":[{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]},{"name":"collapsed.selected","shadow":[{"color":"#FFFFFF","offset":{"width":1,"height":0},"radius":0},{"color":"#FFFFFF","offset":{"width":-1,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":4,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":-4,"height":0},"radius":0},{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]}],"connector":{"straight-s":{"type":"straight-s","controlPoint":{"above":{"width":0,"height":0.75},"below":{"width":0,"height":0.75},"horizontal":{"width":0,"height":0}},"line":{"color":"#707070","width":1},"label":{"position":{"ratio":0.5},"backgroundColor":"transparent","borderColor":"transparent","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}}}},"canvas":{"backgroundColor":"#FFFFFF"}}')},3631:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Simple","layout":"portrait","node":[{"name":"default","cornerRadius":3,"backgroundColor":"theme:canvas.backgroundColor","border":{"type":"underline","line":{"color":"transparent"}},"shadow":[{"color":"transparent"}],"text":{"margin":2,"alignment":"start","maxWidth":146,"color":"#4F4F4F","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":5,"lineSpacingPx":6.6,"size":10,"sizePx":13.3,"weight":"light"}},"connections":{"style":"compact-s-curve","compact-s-curve":{"h":"nearest","v":"base"},"from":{"horizontal":{"h":"nearest","v":"base"}},"from-arrow":{"horizontal":{"h":"nearest","v":"base"},"above":{"h":"nearest","v":"base"},"below":{"h":"nearest","v":"base"}},"to":{"h":"nearest","v":"base"},"to-arrow":{"h":"nearest","v":"base"}},"decorations":{"height":20,"edge":"left","overlap":false,"position":"center","margin":2,"label":{"border":1,"cornerRadius":11,"margin":2,"font":{"lineSpacing":0,"lineSpacingPx":0,"size":9,"sizePx":12,"weight":"bold"}},"cornerRadius":0,"backgroundColor":"transparent","opacity":1,"color":"#22aae0"}},{"name":"level_1","cornerRadius":10,"backgroundColor":"#22AAE0","border":{"type":"surround","line":{"color":"transparent","width":1}},"connections":{"compact-s-curve":{"h":"nearest","v":"center"},"from":{"horizontal":{"h":"nearest","v":"center"}},"from-arrow":{"horizontal":{"h":"nearest-outset","v":"center"},"above":{"h":"nearest-outset","v":"center"},"below":{"h":"nearest-outset","v":"center"}}},"text":{"margin":5,"color":"#EEEEEE","maxWidth":146,"font":{"lineSpacing":6,"lineSpacingPx":7.8,"size":12,"sizePx":16,"weight":"light"}}},{"name":"activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":2,"style":"dashed","margin":0}}},{"name":"level_1.activated::after","border":{"type":"surround","line":{"color":"#EEEEEE","width":2,"style":"dashed","margin":0}}},{"name":"selected","shadow":[{"color":"#FFFFFF","offset":{"width":1,"height":0},"radius":0},{"color":"#FFFFFF","offset":{"width":-1,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":4,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":-4,"height":0},"radius":0}]},{"name":"collapsed","shadow":[{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]},{"name":"collapsed.selected","shadow":[{"color":"#FFFFFF","offset":{"width":1,"height":0},"radius":0},{"color":"#FFFFFF","offset":{"width":-1,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":4,"height":0},"radius":0},{"color":"#22AAE0","offset":{"width":-4,"height":0},"radius":0},{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]}],"canvas":{"backgroundColor":"#FFFFFF"}}')},23359:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Straight Lines","node":[{"name":"default","cornerRadius":10,"backgroundColor":"#E0E0E0","border":{"type":"surround","line":{"color":"#707070","width":1}},"shadow":[{"color":"#070707","opacity":0.4,"offset":{"width":2,"height":2},"radius":2}],"text":{"margin":5,"alignment":"center","maxWidth":146,"color":"#4F4F4F","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":4.5,"lineSpacingPx":6,"size":9,"sizePx":12,"weight":"bold"}},"connections":{"style":"straight","straight":{"h":"center","v":"center"},"from":{"horizontal":{"h":"center","v":"center"}},"from-arrow":{"horizontal":{"h":"center-outset","v":"center-outset"},"above":{"h":"center-outset","v":"center-outset"},"below":{"h":"center-outset","v":"center-outset"}},"to":{"h":"center","v":"center"},"to-arrow":{"h":"center-outset","v":"center-outset"}},"decorations":{"height":20,"edge":"top","overlap":true,"position":"end","margin":2,"label":{"border":1,"cornerRadius":11,"margin":2,"font":{"lineSpacing":0,"lineSpacingPx":0,"size":9,"sizePx":12,"weight":"bold"}},"cornerRadius":12,"backgroundColor":"#22aae0","opacity":0.8,"color":"#ffffff"}},{"name":"level_1","backgroundColor":"#22AAE0"},{"name":"activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dotted","margin":0}}},{"name":"level_1.activated::after","border":{"type":"surround","line":{"color":"#EEEEEE","width":3,"style":"dotted","margin":0}}},{"name":"selected","shadow":[{"color":"#000000","opacity":0.9,"offset":{"width":2,"height":2},"radius":2}]},{"name":"collapsed","shadow":[{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]},{"name":"collapsed.selected","shadow":[{"color":"#FFFFFF","offset":{"width":0,"height":1},"radius":0},{"color":"#888888","offset":{"width":0,"height":3},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#555555","offset":{"width":0,"height":7},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":10},"radius":0},{"color":"#333333","offset":{"width":0,"height":11},"radius":0}]}],"canvas":{"backgroundColor":"#FFFFFF"}}')},45425:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Top Down Straight Lines","layout":{"orientation":"top-down","spacing":{"h":20,"v":100,"ch":20,"cv":25}},"node":[{"name":"default","nodeEditingContext":{"allowedToggleAttributes":["condensed"]},"cornerRadius":5,"backgroundColor":"transparent","border":{"type":"overline","line":{"color":"transparent"}},"shadow":[{"color":"transparent"}],"text":{"margin":5,"alignment":"center","maxWidth":146,"color":"#4F4F4F","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":5,"lineSpacingPx":6.6,"size":10,"sizePx":13.3,"weight":"light"}},"connections":{"style":"top-down-s-curve","top-down-s-curve":{"h":"center","v":"base"},"from":{"horizontal":{"h":"center","v":"base"}},"from-arrow":{"horizontal":{"h":"center","v":"base"},"above":{"h":"center","v":"base"},"below":{"h":"center","v":"base"}},"to":{"h":"center","v":"top"},"to-arrow":{"h":"center","v":"top-outset"}},"decorations":{"height":20,"edge":"right","overlap":false,"position":"center","margin":2,"label":{"border":1,"cornerRadius":11,"margin":2,"font":{"lineSpacing":0,"lineSpacingPx":0,"size":9,"sizePx":12,"weight":"bold"}},"cornerRadius":0,"backgroundColor":"transparent","opacity":1,"color":"#22aae0"}},{"name":"condensed","connections":{"top-down-s-curve":{"h":"left-inset","v":"base"},"from-arrow":{"above":{"h":"left-inset","v":"top-outset"},"below":{"h":"left-inset","v":"base-outset"}}}},{"name":"condensed-child","border":{"type":"surround","line":{"color":"transparent"}},"nodeEditingContext":{"allowedToggleAttributes":[]},"connections":{"style":"brolly-handle","brolly-handle":{"h":"left-inset","v":"base"},"from-arrow":{"horizontal":{"h":"center-outset","v":"base-outset"},"above":{"h":"center-outset","v":"top-outset"},"below":{"h":"left-inset","v":"base-outset"}},"to":{"h":"left","v":"center"},"to-arrow":{"h":"left-outset","v":"center"}}},{"name":"level_1","backgroundColor":"transparent","border":{"type":"surround","line":{"color":"transparent","width":1,"style":"solid"}}},{"name":"activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dotted","margin":0}}},{"name":"level_1.activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dotted","margin":0}}},{"name":"selected","shadow":[{"color":"#000000","opacity":0.9,"offset":{"width":2,"height":2},"radius":2}]},{"name":"collapsed","shadow":[{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]},{"name":"collapsed.selected","shadow":[{"color":"#FFFFFF","offset":{"width":0,"height":1},"radius":0},{"color":"#888888","offset":{"width":0,"height":3},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#555555","offset":{"width":0,"height":7},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":10},"radius":0},{"color":"#333333","offset":{"width":0,"height":11},"radius":0}]}],"connector":{"top-down-s-curve":{"type":"top-down-s-curve","controlPoint":{"below":{"beforeEnd":50},"above":{"beforeEnd":50}},"label":{"position":{"aboveEnd":15},"backgroundColor":"white","borderColor":"white","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}},"line":{"color":"#707070","width":2}}},"canvas":{"backgroundColor":"#FFFFFF"}}')},50347:t=>{"use strict";t.exports=JSON.parse('{"name":"MindMup Top Down Default","layout":{"orientation":"top-down","spacing":{"h":20,"v":100,"ch":20,"cv":25}},"node":[{"name":"default","nodeEditingContext":{"allowedToggleAttributes":["condensed"]},"cornerRadius":10,"backgroundColor":"#E0E0E0","border":{"type":"surround","line":{"color":"#707070","width":1}},"shadow":[{"color":"#070707","opacity":0.4,"offset":{"width":2,"height":2},"radius":2}],"text":{"margin":5,"alignment":"center","maxWidth":146,"color":"#4F4F4F","lightColor":"#EEEEEE","darkColor":"#000000","font":{"lineSpacing":4.5,"lineSpacingPx":6,"size":9,"sizePx":12,"weight":"bold"}},"connections":{"style":"top-down-s-curve","top-down-s-curve":{"h":"center","v":"base"},"from":{"horizontal":{"h":"center","v":"base"}},"from-arrow":{"horizontal":{"h":"center-outset","v":"base-outset"},"above":{"h":"center-outset","v":"top-outset"},"below":{"h":"center-outset","v":"base-outset"}},"to":{"h":"center","v":"top"},"to-arrow":{"h":"center","v":"top-outset"}},"decorations":{"height":20,"edge":"top","overlap":true,"position":"end","margin":2,"label":{"border":1,"cornerRadius":11,"margin":2,"font":{"lineSpacing":0,"lineSpacingPx":0,"size":9,"sizePx":12,"weight":"bold"}},"cornerRadius":12,"backgroundColor":"#22aae0","opacity":0.8,"color":"#ffffff"}},{"name":"level_1","backgroundColor":"#22AAE0"},{"name":"condensed","connections":{"top-down-s-curve":{"h":"left-inset","v":"base"},"from-arrow":{"above":{"h":"left-inset","v":"top-outset"},"below":{"h":"left-inset","v":"base-outset"}}}},{"name":"condensed-child","cornerRadius":5,"nodeEditingContext":{"allowedToggleAttributes":[]},"connections":{"style":"brolly-handle","brolly-handle":{"h":"left-inset","v":"base"},"from-arrow":{"horizontal":{"h":"center-outset","v":"base-outset"},"above":{"h":"center-outset","v":"top-outset"},"below":{"h":"left-inset","v":"base-outset"}},"to":{"h":"left","v":"center"},"to-arrow":{"h":"left-outset","v":"center"}}},{"name":"activated::after","border":{"type":"surround","line":{"color":"#22AAE0","width":3,"style":"dotted"}}},{"name":"level_1.activated::after","border":{"type":"surround","line":{"color":"#EEEEEE","width":3,"style":"dotted"}}},{"name":"selected","shadow":[{"color":"#000000","opacity":0.9,"offset":{"width":2,"height":2},"radius":2}]},{"name":"collapsed","shadow":[{"color":"#888888","offset":{"width":0,"height":1},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":3},"radius":0},{"color":"#888888","offset":{"width":0,"height":4},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#888888","offset":{"width":0,"height":7},"radius":0}]},{"name":"collapsed.selected","shadow":[{"color":"#FFFFFF","offset":{"width":0,"height":1},"radius":0},{"color":"#888888","offset":{"width":0,"height":3},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":6},"radius":0},{"color":"#555555","offset":{"width":0,"height":7},"radius":0},{"color":"#FFFFFF","offset":{"width":0,"height":10},"radius":0},{"color":"#333333","offset":{"width":0,"height":11},"radius":0}]}],"connector":{"top-down-s-curve":{"type":"top-down-s-curve","controlPoint":{"below":{"beforeEnd":50},"above":{"beforeEnd":50}},"label":{"position":{"aboveEnd":15},"backgroundColor":"white","borderColor":"white","text":{"color":"#4F4F4F","font":{"size":9,"sizePx":12,"weight":"normal"}}},"line":{"color":"#707070","width":2}}},"canvas":{"backgroundColor":"#FFFFFF"}}')}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r=n(92995);mmStart=r})();
//# sourceMappingURL=editor-aws.js.map